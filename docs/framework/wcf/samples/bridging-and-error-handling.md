---
title: Köprü Oluşturma ve Hata İşleme
ms.date: 03/30/2017
ms.assetid: 4ae87d1a-b615-4014-a494-a53f63ff0137
ms.openlocfilehash: 6afaddc75855b7e95ad708b2179cabb9aee35001
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 09/04/2018
ms.locfileid: "43514548"
---
# <a name="bridging-and-error-handling"></a><span data-ttu-id="db7b2-102">Köprü Oluşturma ve Hata İşleme</span><span class="sxs-lookup"><span data-stu-id="db7b2-102">Bridging and Error Handling</span></span>
<span data-ttu-id="db7b2-103">Bu örnek, bir istemci farklı bağlamaları bir hizmeti arasındaki iletişimi köprüleme Windows Communication Foundation (WCF) yönlendirme hizmeti nasıl kullanıldığını gösterir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-103">This sample demonstrates how the Windows Communication Foundation (WCF) routing service is used for bridging communication between a client and a service that use different bindings.</span></span> <span data-ttu-id="db7b2-104">Bu örnek ayrıca yük devretme senaryosu için bir yedekleme hizmetin nasıl kullanılacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-104">This sample also shows how to use a back-up service for failover scenarios.</span></span> <span data-ttu-id="db7b2-105">Yönlendirme hizmeti, içerik tabanlı bir yönlendirici uygulamanıza dahil etmek kolay bir WCF bileşenidir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-105">The routing service is a WCF component that makes it easy to include a content-based router in your application.</span></span> <span data-ttu-id="db7b2-106">Bu örnek, yönlendirme hizmeti kullanarak iletişim kurmak için standart WCF hesaplayıcı örnek uyum sağlar.</span><span class="sxs-lookup"><span data-stu-id="db7b2-106">This sample adapts the standard WCF Calculator Sample to communicate using the routing service.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="db7b2-107">Örnekler, bilgisayarınızda yüklü.</span><span class="sxs-lookup"><span data-stu-id="db7b2-107">The samples may already be installed on your computer.</span></span> <span data-ttu-id="db7b2-108">Devam etmeden önce şu (varsayılan) dizin denetleyin.</span><span class="sxs-lookup"><span data-stu-id="db7b2-108">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="db7b2-109">Bu dizin mevcut değilse Git [Windows Communication Foundation (WCF) ve .NET Framework 4 için Windows Workflow Foundation (WF) örnekleri](https://go.microsoft.com/fwlink/?LinkId=150780) tüm Windows Communication Foundation (WCF) indirmek için ve [!INCLUDE[wf1](../../../../includes/wf1-md.md)] örnekleri.</span><span class="sxs-lookup"><span data-stu-id="db7b2-109">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="db7b2-110">Bu örnek, şu dizinde bulunur.</span><span class="sxs-lookup"><span data-stu-id="db7b2-110">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\RoutingServices\ErrorHandlingAndBridging`  
  
## <a name="sample-details"></a><span data-ttu-id="db7b2-111">Örnek Ayrıntıları</span><span class="sxs-lookup"><span data-stu-id="db7b2-111">Sample Details</span></span>  
 <span data-ttu-id="db7b2-112">Bu örnekte, hesaplayıcı istemci yönlendirici tarafından sunulan bir uç noktaya iletileri göndermek için yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="db7b2-112">In this sample, the Calculator client is configured to send messages to an endpoint exposed by the router.</span></span> <span data-ttu-id="db7b2-113">Yönlendirme hizmeti, kendisine gönderilen tüm iletileri kabul etmesini ve hesaplayıcı hizmetine karşılık gelen bir uç nokta iletmek için yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="db7b2-113">The routing service is configured to accept all messages sent to it and to forward them to an endpoint that corresponds to the Calculator service.</span></span> <span data-ttu-id="db7b2-114">Aşağıdaki noktaları birincil hesap makinesi hizmeti, yedekleme hesaplayıcı hizmet ve hesaplayıcı istemci ve hizmet ve istemci arasındaki iletişimin nasıl olacağını yapılandırmasını açıklamak yönlendirme hizmetini kullanarak:</span><span class="sxs-lookup"><span data-stu-id="db7b2-114">The following points describe the configuration of the primary Calculator service, the back-up Calculator service, and the Calculator client and how the communication between the client and the service happens using the routing service:</span></span>  
  
-   <span data-ttu-id="db7b2-115">Hesaplayıcı istemci NetTcpBinding kullanılacak hesap makinesi hizmet yapılandırılırken BasicHttpBinding kullanmak için yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="db7b2-115">The Calculator client is configured to use BasicHttpBinding while the Calculator service is configured to use NetTcpBinding.</span></span> <span data-ttu-id="db7b2-116">Otomatik olarak yönlendirme hizmeti hesaplayıcı hizmetine gönderilmeden önce ileti gerekli olarak dönüştürür ve hesaplayıcı istemci bunlara erişebilmesi için yanıtlar da dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="db7b2-116">The routing service automatically converts the messages as necessary before sending them to the Calculator service and it also converts the responses so that the Calculator client can access them.</span></span>  
  
-   <span data-ttu-id="db7b2-117">Yönlendirme hizmeti iki hesap makinesi hizmetleri hakkında bilir: birincil hesaplayıcı hizmeti ve yedekleme hesaplayıcı hizmeti.</span><span class="sxs-lookup"><span data-stu-id="db7b2-117">The routing service knows about two Calculator services: the primary Calculator service and the back-up Calculator service.</span></span> <span data-ttu-id="db7b2-118">Yönlendirme hizmeti, ilk birincil hesaplayıcı hizmet uç noktası ile iletişime geçmeye çalışır.</span><span class="sxs-lookup"><span data-stu-id="db7b2-118">The routing service first attempts to communicate with the primary Calculator service endpoint.</span></span> <span data-ttu-id="db7b2-119">Basılı olan uç nokta nedeniyle bu girişim başarısız olursa, yönlendirme hizmeti, ardından yedekleme hesaplayıcı hizmet uç noktası ile iletişim kurmak çalışır.</span><span class="sxs-lookup"><span data-stu-id="db7b2-119">If this attempt fails due to the endpoint being down, the routing service then tries to communicate with the back-up Calculator service endpoint.</span></span>  
  
 <span data-ttu-id="db7b2-120">Bu nedenle istemci tarafından gönderilen iletileri yönlendirici tarafından alınır ve gerçek hesaplayıcı hizmete yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-120">Thus messages sent from the client are received by the router and are rerouted to the actual Calculator service.</span></span> <span data-ttu-id="db7b2-121">Hesaplayıcı hizmet uç noktası kapalı ise, yönlendirme hizmeti iletiyi yedekleme hesaplayıcı hizmet uç noktasına yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-121">If the Calculator service endpoint is down, the routing service routes the message to the back-up Calculator service endpoint.</span></span> <span data-ttu-id="db7b2-122">Yedekleme hesaplayıcı hizmetinden gelen iletileri geri sırayla bunları hesaplayıcı istemciye aktarır hizmet yönlendiriciye gönderilir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-122">Messages from the back-up Calculator service are sent back to the service router, which in turn passes them back to the Calculator client.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="db7b2-123">Yedekleme listesini tanımlanmış birden fazla uç nokta olabilir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-123">A back-up list can have more than one endpoint defined.</span></span> <span data-ttu-id="db7b2-124">Bu durumda yedekleme Hizmeti uç noktası kapalı ise, yönlendirme hizmeti başarılı bir bağlantı gerçekleşene kadar listedeki sonraki yedekleme uç noktasına bağlanmak çalışır.</span><span class="sxs-lookup"><span data-stu-id="db7b2-124">In this case if the back-up service endpoint is down, the routing service attempts to connect to the next back-up endpoint in the list until a successful connection occurs.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="db7b2-125">Bu örneği kullanmak için</span><span class="sxs-lookup"><span data-stu-id="db7b2-125">To use this sample</span></span>  
  
1.  <span data-ttu-id="db7b2-126">Kullanarak [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], RouterBridgingAndErrorHandling.sln açın.</span><span class="sxs-lookup"><span data-stu-id="db7b2-126">Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open RouterBridgingAndErrorHandling.sln.</span></span>  
  
2.  <span data-ttu-id="db7b2-127">Visual Studio'da F5'e ya da CTRL + SHIFT + B tuşuna basın</span><span class="sxs-lookup"><span data-stu-id="db7b2-127">Press F5 or CTRL+SHIFT+B in Visual Studio</span></span>  
  
    1.  <span data-ttu-id="db7b2-128">Otomatik gerekli projeleri F5 tuşuna bastığınızda başlatma isterseniz, çözüme sağ tıklayın, **özellikleri**hem de **başlangıç projesi** düğümünde **OrtakÖzellikler**seçin **birden fazla başlangıç projesi**, tüm projeleri ayarlanmış ve **Başlat**.</span><span class="sxs-lookup"><span data-stu-id="db7b2-128">If you would like to auto-launch the necessary projects when you press F5, right-click the solution, select **Properties**, and in the **Startup Project** node under **Common Properties**, select **Multiple Startup Projects**, and set all projects to **Start**.</span></span>  
  
    2.  <span data-ttu-id="db7b2-129">CTRL + SHIFT + B ile proje oluşturuyorsanız, aşağıdaki uygulamaları Başlat:</span><span class="sxs-lookup"><span data-stu-id="db7b2-129">If you build the project with CTRL+SHIFT+B, start the following applications:</span></span>  
  
        1.  <span data-ttu-id="db7b2-130">Hesaplayıcı istemci (. / CalculatorClient/bin/client.exe)</span><span class="sxs-lookup"><span data-stu-id="db7b2-130">Calculator client (./CalculatorClient/bin/client.exe)</span></span>  
  
        2.  <span data-ttu-id="db7b2-131">Hesaplayıcı hizmeti (. / CalculatorService/bin/service.exe)</span><span class="sxs-lookup"><span data-stu-id="db7b2-131">Calculator service (./CalculatorService/bin/service.exe)</span></span>  
  
        3.  <span data-ttu-id="db7b2-132">Yönlendirme Hizmeti (. / RoutingService/bin/RoutingService.exe)</span><span class="sxs-lookup"><span data-stu-id="db7b2-132">Routing Service (./RoutingService/bin/RoutingService.exe)</span></span>  
  
3.  <span data-ttu-id="db7b2-133">Hesaplayıcı istemcisinde istemcisini başlatmak için ENTER tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="db7b2-133">In the Calculator Client, press ENTER to start the client.</span></span>  
  
     <span data-ttu-id="db7b2-134">Aşağıdaki çıktıyı görmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="db7b2-134">You should see the following output:</span></span>  
  
    ```Output  
    Add(100,15.99) = 115.99  
    Subtract(145,76.54) = 68.46  
    Multiply(9,81.25) = 731.25  
    Divide(22,7) = 3.14285714285714  
    ```  
  
## <a name="configurable-via-code-or-appconfig"></a><span data-ttu-id="db7b2-135">Kod veya App.config aracılığıyla yapılandırılabilir</span><span class="sxs-lookup"><span data-stu-id="db7b2-135">Configurable Via Code or App.config</span></span>  
 <span data-ttu-id="db7b2-136">Bir App.config dosyası yönlendiricinin davranışını tanımlamak için kullanmak üzere yapılandırılmış örnek verilir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-136">The sample ships configured to use an App.config file to define the router’s behavior.</span></span> <span data-ttu-id="db7b2-137">Ayrıca App.config dosyasının adı bir şeye tanınmıyor şekilde değiştirin ve yöntem çağrısına açıklamasını kaldırın `ConfigureRouterViaCode()`.</span><span class="sxs-lookup"><span data-stu-id="db7b2-137">You can also change the name of the App.config file to something else so that it is not recognized and uncomment the method call to `ConfigureRouterViaCode()`.</span></span> <span data-ttu-id="db7b2-138">Her iki yöntem aynı davranışı yönlendiriciden sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="db7b2-138">Either method results in the same behavior from the router.</span></span>  
  
### <a name="scenario"></a><span data-ttu-id="db7b2-139">Senaryo</span><span class="sxs-lookup"><span data-stu-id="db7b2-139">Scenario</span></span>  
 <span data-ttu-id="db7b2-140">Bu örnek, bir protokol Köprüsü ve hata işleyicisi davranan hizmet yönlendirici gösterir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-140">This sample demonstrates the service router acting as a protocol bridge and error handler.</span></span> <span data-ttu-id="db7b2-141">Bu senaryoda hiçbir içerik tabanlı yönlendirme gerçekleşir; Yönlendirme hizmeti, iletileri doğrudan önceden yapılandırılmış bir hedef uç noktaları kümesine geçirmek için yapılandırılmış bir saydam proxy düğümü olarak görev yapar.</span><span class="sxs-lookup"><span data-stu-id="db7b2-141">In this scenario, no content-based routing occurs; the routing service acts as a transparent proxy node configured to pass messages directly to a preconfigured set of destination endpoints.</span></span> <span data-ttu-id="db7b2-142">Yönlendirme hizmeti de bunu çalıştığında uç noktalar için BT'nin göndermek için ile iletişim kurmak için yapılandırıldığı oluşan hataları şeffaf bir şekilde işleme ek adımları gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="db7b2-142">The routing service also performs the additional steps of transparently handling errors that occur when it tries to send to the endpoints that it is configured to communicate with.</span></span> <span data-ttu-id="db7b2-143">Yönlendirme hizmeti Protokolü köprü olarak işlev gören dış iletişim için bir protokol, diğeri dahili iletişim için tanımlamak kullanıcı sağlar.</span><span class="sxs-lookup"><span data-stu-id="db7b2-143">By acting as a protocol bridge, the routing service enables the user to define one protocol for external communication and another for internal communication.</span></span>  
  
### <a name="real-world-scenario"></a><span data-ttu-id="db7b2-144">Gerçek dünya senaryosu</span><span class="sxs-lookup"><span data-stu-id="db7b2-144">Real World Scenario</span></span>  
 <span data-ttu-id="db7b2-145">Contoso, dahili olarak performansını iyileştirme sırasında bir birlikte hizmet uç noktası, dünya çapında sağlamak istiyor.</span><span class="sxs-lookup"><span data-stu-id="db7b2-145">Contoso wants to provide an interoperable service endpoint to the world, while optimizing performance internally.</span></span> <span data-ttu-id="db7b2-146">Bu nedenle hizmetlerinin dünya çapında BasicHttpBinding dahili olarak yönlendirme hizmeti, bağlantı hizmetlerini kullanan NetTcpBinding kullanarak uç noktasına arasında köprü kuracak şekilde kullanırken bir uç nokta aracılığıyla kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="db7b2-146">Thus it exposes its services to the world through an endpoint using the BasicHttpBinding, while internally using the routing service to bridge that connection to the endpoint using NetTcpBinding, which its services use.</span></span> <span data-ttu-id="db7b2-147">Ayrıca, Contoso geçici kesinti kendi üretim herhangi birinde, dayanıklı olacak şekilde, hizmet, hizmetleri ve bu nedenle kullanarak yönlendirici hizmeti arkasında birden fazla uç nokta sanallaştırır istediği kullanıcının hata işleme özelliklerini otomatik olarak yük devretme Yedekleme uç gerektiğinde.</span><span class="sxs-lookup"><span data-stu-id="db7b2-147">Furthermore, Contoso wants its service offering to be tolerant of temporary outages in any one of their production services and thus virtualizes multiple endpoints behind the router service using the ’s error handling capabilities to automatically failover to back-up endpoints when necessary.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="db7b2-148">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="db7b2-148">See Also</span></span>  
 [<span data-ttu-id="db7b2-149">AppFabric barındırma ve Kalıcılık örnekleri</span><span class="sxs-lookup"><span data-stu-id="db7b2-149">AppFabric Hosting and Persistence Samples</span></span>](https://go.microsoft.com/fwlink/?LinkId=193961)
