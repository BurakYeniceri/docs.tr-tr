---
title: Veri hizmeti bağlamı (WCF Veri Hizmetleri) yönetme
ms.date: 03/30/2017
ms.assetid: 15b19d09-7de7-4638-9556-6ef396cc45ec
ms.openlocfilehash: 9b2b0bb709081ca7b0b2a1367f10e1f7a08c98c9
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/04/2018
---
# <a name="managing-the-data-service-context-wcf-data-services"></a>Veri hizmeti bağlamı (WCF Veri Hizmetleri) yönetme
<xref:System.Data.Services.Client.DataServiceContext> Sınıfı karşı belirtilen veri hizmeti desteklenen işlemler yalıtır. Ancak [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Hizmetleri durum bilgisiz, içeriği değil. Bu nedenle, kullanabileceğiniz <xref:System.Data.Services.Client.DataServiceContext> değişiklik yönetimi gibi özellikleri desteklemek için veri hizmeti ile etkileşim arasında istemci durumunu korumak üzere sınıfı. Bu sınıf ayrıca kimlikleri yöneten ve değişiklikleri izler.  
  
## <a name="merge-options-and-identity-resolution"></a>Birleştirme seçeneklerini ve kimlik çözümü  
 Zaman bir <xref:System.Data.Services.Client.DataServiceQuery%601> olduğu yürütülen, akış yanıt varlıkları nesnelerine gerçekleştirilip. Daha fazla bilgi için bkz: [nesne Materialization](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md). Bir yanıt iletisi girdiler bir nesnelerine gerçekleştirilip şekilde kimlik çözümlemesi tabanlı gerçekleştirilir ve altında sorgunun yürütüldüğü birleştirme seçeneğine bağlıdır. Birden çok sorgu veya yük tek bir kapsamı içinde yürütülen istediğinde <xref:System.Data.Services.Client.DataServiceContext>, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] istemci yalnızca belirli bir anahtar değeri olan bir nesneyi tek bir örneğini izler. Kimlik çözümlemesi için kullanılır, bu anahtarı bir varlığı benzersiz olarak tanımlar.  
  
 Varsayılan olarak, istemci yalnızca bir giriş zaten tarafından izlenmiyor varlıklar için bir nesne içinde akış yanıt gerçeğe <xref:System.Data.Services.Client.DataServiceContext>. Bu önbellek zaten içindeki nesnelerde yapılan değişiklikler geçersiz kılınmaz anlamına gelir. Bu davranış belirterek denetlenen bir <xref:System.Data.Services.Client.MergeOption> değeri için sorgular ve yükleme işlemleri. Bu seçenek ayarı belirtilen <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> özelliği <xref:System.Data.Services.Client.DataServiceContext>. Varsayılan birleştirme seçeneği değer <xref:System.Data.Services.Client.MergeOption.AppendOnly>. Bu yalnızca nesneleri zaten izlenmiyor, varlıklar için var olan nesneleri geçersiz kılınmaz yani gerçeğe. Veri hizmetinden güncelleştirmeleri tarafından üzerine istemci üzerinde nesnelere değişiklikleri önlemek için başka bir yol belirtmektir <xref:System.Data.Services.Client.MergeOption.PreserveChanges>. Belirttiğinizde <xref:System.Data.Services.Client.MergeOption.OverwriteChanges>, istemci nesnelerde değerini almıştır yanıt akıştaki girişlerinden en son değerleri zaten bu nesnelere yapılan değişiklikler olsa bile. Zaman bir <xref:System.Data.Services.Client.MergeOption.NoTracking> birleştirme seçeneği kullanıldığında, <xref:System.Data.Services.Client.DataServiceContext> veri hizmeti istemci nesnelerde yapılan değişiklikleri gönderilemiyor. Bu seçenek ile değişiklikleri her zaman veri hizmetinden gelen değerlerle üzerine yazılır.  
  
## <a name="managing-concurrency"></a>Eşzamanlılık yönetme  
 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] güncelleştirme çakışması algılamak veri hizmeti sağlayan iyimser eşzamanlılık destekler. Veri hizmeti sağlayıcısı, veri hizmeti değişiklikler varlıklar için bir eşzamanlılık belirteci kullanarak denetlemesini şekilde yapılandırılabilir. Bu belirteç bir varlık türü bir kaynak değişip değişmediğini belirlemek için veri hizmeti tarafından doğrulandığından bir veya daha fazla özelliklerini içerir. İsteklerini ve yanıtlarını veri hizmetinden eTag üstbilgisi içinde yer alan, eşzamanlılık belirteçleri tarafından sizin için yönetilen [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] istemci. Daha fazla bilgi için bkz: [veri hizmeti güncelleştirme](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).  
  
 <xref:System.Data.Services.Client.DataServiceContext> Kullanarak el ile bildirilmiştir nesnelerde yapılan değişiklikleri izler <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A>, ve <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A>, ya da bir <xref:System.Data.Services.Client.DataServiceCollection%601>. Zaman <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> yöntemi çağrıldığında, istemci değişiklikleri veri hizmetine gönderir. <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> İstemci veri değişikliklerini veri hizmeti değişiklikler çakıştığında başarısız olabilir. Bu durumda, yeniden güncelleştirme verilerini almak varlık kaynak için sorgulaması gerekir. Veri Hizmeti değişiklikleri üzerine yazmak için kullanarak sorgu yürütme <xref:System.Data.Services.Client.MergeOption.PreserveChanges> birleştirme seçeneği. Çağırdığınızda <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> diğer zaten veri hizmetindeki kaynağa yapılan değişiklikler değil sürece yeniden, istemcide korunur değişiklikler veri hizmetine kalıcı.  
  
## <a name="saving-changes"></a>Değişiklikler kaydediliyor  
 Değişiklikleri izlenir <xref:System.Data.Services.Client.DataServiceContext> örnek ancak sunucuya hemen gönderilmez. Belirtilen bir etkinlik için gerekli değişiklikleri tamamladıktan sonra arama <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> veri hizmeti yapılan tüm değişiklikler göndermek için. A <xref:System.Data.Services.Client.DataServiceResponse> sonra döndürülen nesne <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> işlemi tamamlandı. <xref:System.Data.Services.Client.DataServiceResponse> Nesne içeren bir dizi <xref:System.Data.Services.Client.OperationResponse> , sırayla bir dizi içeren nesneleri <xref:System.Data.Services.Client.EntityDescriptor> veya <xref:System.Data.Services.Client.LinkDescriptor> değişiklikleri temsil örneği kalıcı veya çalıştı. Bir varlık oluşturulduğunda veya veri hizmeti değiştiren <xref:System.Data.Services.Client.EntityDescriptor> oluşturulan gibi herhangi bir sunucu tarafından üretilen özellik değerleri dahil olmak üzere güncelleştirilmiş bir varlığa bir başvuru içeriyor `ProductID` önceki örnekte değeri. İstemci kitaplığı otomatik olarak güncelleştirir [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] nesne bu yeni değerlere sahip.  
  
 Başarılı ekleme ve güncelleştirme işlemlerinin, state özelliği <xref:System.Data.Services.Client.EntityDescriptor> veya <xref:System.Data.Services.Client.LinkDescriptor> işlemle ilişkili nesne ayarlanmış <xref:System.Data.Services.Client.EntityStates.Unchanged> ve yeni değerleri kullanarak birleştirilir <xref:System.Data.Services.Client.MergeOption.OverwriteChanges>. Ne zaman bir INSERT, update veya veri hizmet silme işlemi başarısız olur, varlık durumu aynı kalır önce olduğu gibi <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> çağrıldı ve <xref:System.Data.Services.Client.OperationResponse.Error%2A> özelliği <xref:System.Data.Services.Client.OperationResponse> ayarlanmış bir <xref:System.Data.Services.Client.DataServiceRequestException> hakkında bilgi içeren bir hata oluştu. Daha fazla bilgi için bkz: [veri hizmeti güncelleştirme](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).  
  
### <a name="setting-the-http-method-for-updates"></a>Güncelleştirmeler için HTTP yöntemini ayarlama  
 Varsayılan olarak, .NET Framework istemci kitaplığı güncelleştirmeler için var olan varlıkları birleştirme istekleri olarak gönderir. Bir birleştirme isteği seçili varlık özelliklerini güncelleştirir; ancak istemci birleştirme isteği, değişip değişmediğini bile özellikleri her zaman tüm özellikleri içerir. [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Protokolü ayrıca varlık güncelleştirileceğini gönderen PUT isteklerini destekler. Bir PUT isteği var olan bir varlığı temelde özellik değerlerini istemciden varlıkla yeni bir örneğini ile değiştirilir. PUT isteklerini kullanmak üzere ayarlanmış <xref:System.Data.Services.Client.SaveChangesOptions.ReplaceOnUpdate> üzerinde bayrak <xref:System.Data.Services.Client.SaveChangesOptions> çağrılırken numaralandırma <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.  
  
> [!NOTE]
>  İstemci varlığın tüm özellikleri hakkında bilmediği durumda bir PUT İsteği birleştirme isteği farklı şekilde davranır. Bu, istemci üzerinde bir varlık türüne yeni bir tür yansıtılırken ortaya çıkabilir. Yeni özellikleri hizmeti veri modelini varlıkta ekledikten sonra de oluşabilir ve <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> özelliği <xref:System.Data.Services.Client.DataServiceContext> ayarlanır `true` gibi istemci eşleme hataları yoksayılabilir. Bu durumlarda, bir PUT İsteği varsayılan değerlerine istemciye bilinmeyen herhangi bir özelliği sıfırlar.  
  
### <a name="post-tunneling"></a>POST tünel  
 Varsayılan olarak, istemci kitaplığı gönderir oluşturma, okuma, güncelleştirme ve silme istekleri için bir [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] hizmet POST, GET, PUT/MERGE/düzeltme eki karşılık gelen HTTP yöntemlerini kullanarak ve SİLİN. Temel ilkeler, temsili durum aktarımı (REST) anlayışına. Bununla birlikte, her Web sunucusu uygulaması HTTP yöntemleri kümesini destekler. Bazı durumlarda, desteklenen yöntemlerden yalnızca GET ve POST için kısıtlanmış olabilir. Bu durum bir güvenlik duvarı gibi bir aracı isteklerini belirli yöntemleriyle engeller ortaya çıkar. GET ve POST yöntemleri genellikle desteklenmediğinden, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] herhangi desteklenmeyen bir HTTP yöntem bir POST isteği kullanarak çalıştırmak için bir yol önerir. Bilinen *yöntem tüneli* veya *POST tünel*, bu özel belirtilen gerçek yöntemi ile bir POST isteği göndermek bir istemci sağlar `X-HTTP-Method` üstbilgi. POST istekleri için tüneli etkinleştirmek için ayarlanmış <xref:System.Data.Services.Client.DataServiceContext.UsePostTunneling%2A> özelliği <xref:System.Data.Services.Client.DataServiceContext> için örnek `true`.  
  
## <a name="see-also"></a>Ayrıca Bkz.  
 [WCF Veri Hizmetleri İstemci Kitaplığı](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)  
 [Veri Hizmetini Güncelleştirme](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md)  
 [Zaman Uyumsuz İşlemler](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)  
 [Toplu İşlemler](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md)
