---
title: "Olay Tabanlı Zaman Uyumsuz Desen Uygulamak için En İyi Yöntemler"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Event-based Asynchronous Pattern
- ProgressChangedEventArgs class
- BackgroundWorker component
- events [.NET Framework], asynchronous
- AsyncOperationManager class
- threading [.NET Framework], asynchronous features
- AsyncOperation class
- AsyncCompletedEventArgs class
ms.assetid: 4acd2094-4f46-4eff-9190-92d0d9ff47db
caps.latest.revision: "8"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 910edb8c79518f63e8b881b8eaecd69060fb6711
ms.sourcegitcommit: 957c696f25e39f923a827fc3ad5e8ab72768838c
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/13/2018
---
# <a name="best-practices-for-implementing-the-event-based-asynchronous-pattern"></a><span data-ttu-id="d98d6-102">Olay Tabanlı Zaman Uyumsuz Desen Uygulamak için En İyi Yöntemler</span><span class="sxs-lookup"><span data-stu-id="d98d6-102">Best Practices for Implementing the Event-based Asynchronous Pattern</span></span>
<span data-ttu-id="d98d6-103">Olay tabanlı zaman uyumsuz desen ve semantiği temsilci sınıflarıyla tanıdık olay zaman uyumsuz davranışı kullanıma sunmak için etkili bir yol sağlar.</span><span class="sxs-lookup"><span data-stu-id="d98d6-103">The Event-based Asynchronous Pattern provides you with an effective way to expose asynchronous behavior in classes, with familiar event and delegate semantics.</span></span> <span data-ttu-id="d98d6-104">Olay tabanlı zaman uyumsuz desen uygulamak için bazı belirli davranış gereksinimini takip gerekir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-104">To implement Event-based Asynchronous Pattern, you need to follow some specific behavioral requirements.</span></span> <span data-ttu-id="d98d6-105">Aşağıdaki bölümlerde, gereksinimleri ve olay tabanlı zaman uyumsuz deseni izler bir sınıf uygulama dikkate almanız yönergeler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="d98d6-105">The following sections describe requirements and guidelines you should consider when you implement a class that follows the Event-based Asynchronous Pattern.</span></span>  
  
 <span data-ttu-id="d98d6-106">Genel bir bakış için bkz: [olay tabanlı zaman uyumsuz deseni uygulama](../../../docs/standard/asynchronous-programming-patterns/implementing-the-event-based-asynchronous-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="d98d6-106">For an overview, see [Implementing the Event-based Asynchronous Pattern](../../../docs/standard/asynchronous-programming-patterns/implementing-the-event-based-asynchronous-pattern.md).</span></span>  
  
## <a name="required-behavioral-guarantees"></a><span data-ttu-id="d98d6-107">Davranış garanti gerekli</span><span class="sxs-lookup"><span data-stu-id="d98d6-107">Required Behavioral Guarantees</span></span>  
 <span data-ttu-id="d98d6-108">Olay tabanlı zaman uyumsuz desen uygulamak, garanti sınıfınızın doğru şekilde davranır ve sınıfınızın istemcileri bu tür davranış güvenebilirsiniz emin olmak için çeşitli sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-108">If you implement the Event-based Asynchronous Pattern, you must provide a number of guarantees to ensure that your class will behave properly and clients of your class can rely on such behavior.</span></span>  
  
### <a name="completion"></a><span data-ttu-id="d98d6-109">Tamamlama</span><span class="sxs-lookup"><span data-stu-id="d98d6-109">Completion</span></span>  
 <span data-ttu-id="d98d6-110">Her zaman çağırma *MethodName *** tamamlandı** başarılı bir şekilde tamamlandığında, bir hata ya da iptal olduğunda olay işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="d98d6-110">Always invoke the *MethodName***Completed** event handler when you have successful completion, an error, or a cancellation.</span></span> <span data-ttu-id="d98d6-111">Uygulamalar, hiçbir zaman burada boşta kalır ve tamamlanma hiçbir zaman oluşur bir durum karşılaşabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d98d6-111">Applications should never encounter a situation where they remain idle and completion never occurs.</span></span> <span data-ttu-id="d98d6-112">Bu kural için bir özel, böylece hiçbir zaman tamamlanmıyor zaman uyumsuz işlemi üzere tasarlanmış varsa ' dir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-112">One exception to this rule is if the asynchronous operation itself it designed so that it never completes.</span></span>  
  
### <a name="completed-event-and-eventargs"></a><span data-ttu-id="d98d6-113">Tamamlanan Olay ve EventArgs</span><span class="sxs-lookup"><span data-stu-id="d98d6-113">Completed Event and EventArgs</span></span>  
 <span data-ttu-id="d98d6-114">Her ayrı için *MethodName *** zaman uyumsuz** yöntemi, aşağıdaki tasarım gereksinimleri geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="d98d6-114">For each separate *MethodName***Async** method, apply the following design requirements:</span></span>  
  
-   <span data-ttu-id="d98d6-115">Tanımlayan bir *MethodName *** tamamlandı** olayı yöntemi ile aynı sınıfta.</span><span class="sxs-lookup"><span data-stu-id="d98d6-115">Define a *MethodName***Completed** event on the same class as the method.</span></span>  
  
-   <span data-ttu-id="d98d6-116">Tanımlayan bir <xref:System.EventArgs> sınıfı ve eşlik eden temsilci için *MethodName *** tamamlandı** türetilen olay <xref:System.ComponentModel.AsyncCompletedEventArgs> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="d98d6-116">Define an <xref:System.EventArgs> class and accompanying delegate for the *MethodName***Completed** event that derives from the <xref:System.ComponentModel.AsyncCompletedEventArgs> class.</span></span> <span data-ttu-id="d98d6-117">Varsayılan sınıf adı biçiminde olmalıdır * MethodName ***CompletedEventArgs**.</span><span class="sxs-lookup"><span data-stu-id="d98d6-117">The default class name should be of the form *MethodName***CompletedEventArgs**.</span></span>  
  
-   <span data-ttu-id="d98d6-118">Emin <xref:System.EventArgs> sınıftır dönüş değerleri belirli *MethodName* yöntemi.</span><span class="sxs-lookup"><span data-stu-id="d98d6-118">Ensure that the <xref:System.EventArgs> class is specific to the return values of the *MethodName* method.</span></span> <span data-ttu-id="d98d6-119">Kullandığınızda <xref:System.EventArgs> sınıfı, sonuç yayınlanamıyor geliştiriciler hiçbir zaman gerektiren.</span><span class="sxs-lookup"><span data-stu-id="d98d6-119">When you use the <xref:System.EventArgs> class, you should never require developers to cast the result.</span></span>  
  
     <span data-ttu-id="d98d6-120">Aşağıdaki kod örneği, bu tasarım gereksiniminin iyi ve hatalı uyarlamasını sırasıyla gösterir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-120">The following code example shows good and bad implementation of this design requirement respectively.</span></span>  
  
```csharp  
// Good design  
private void Form1_MethodNameCompleted(object sender, xxxCompletedEventArgs e)   
{   
    DemoType result = e.Result;  
}  
  
// Bad design  
private void Form1_MethodNameCompleted(object sender, MethodNameCompletedEventArgs e)   
{   
    DemoType result = (DemoType)(e.Result);  
}  
```  
  
-   <span data-ttu-id="d98d6-121">Değil tanımlayan bir <xref:System.EventArgs> döndüren yöntemler döndürmek için sınıf `void`.</span><span class="sxs-lookup"><span data-stu-id="d98d6-121">Do not define an <xref:System.EventArgs> class for returning methods that return `void`.</span></span> <span data-ttu-id="d98d6-122">Bunun yerine, bir örneğini kullanması <xref:System.ComponentModel.AsyncCompletedEventArgs> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="d98d6-122">Instead, use an instance of the <xref:System.ComponentModel.AsyncCompletedEventArgs> class.</span></span>  
  
-   <span data-ttu-id="d98d6-123">Her zaman Yükselt olun *MethodName *** tamamlandı** olay.</span><span class="sxs-lookup"><span data-stu-id="d98d6-123">Ensure that you always raise the *MethodName***Completed** event.</span></span> <span data-ttu-id="d98d6-124">Bu olay, başarılı bir şekilde tamamlandığında, bir hata veya iptal oluşmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d98d6-124">This event should be raised on successful completion, on an error, or on cancellation.</span></span> <span data-ttu-id="d98d6-125">Uygulamalar, hiçbir zaman burada boşta kalır ve tamamlanma hiçbir zaman oluşur bir durum karşılaşabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d98d6-125">Applications should never encounter a situation where they remain idle and completion never occurs.</span></span>  
  
-   <span data-ttu-id="d98d6-126">Zaman uyumsuz işlemi oluşur ve yakalanan özel durum atamak istediğiniz özel durumları yakalamak olun <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="d98d6-126">Ensure that you catch any exceptions that occur in the asynchronous operation and assign the caught exception to the <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> property.</span></span>  
  
-   <span data-ttu-id="d98d6-127">Görevi tamamlamak hata oluşursa, sonuçları erişilebilir olmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="d98d6-127">If there was an error completing the task, the results should not be accessible.</span></span> <span data-ttu-id="d98d6-128">Zaman <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> özelliği `null`, o herhangi bir özellik erişimini sağlamak <xref:System.EventArgs> yapısı özel bir durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d98d6-128">When the <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> property is not `null`, ensure that accessing any property in the <xref:System.EventArgs> structure raises an exception.</span></span> <span data-ttu-id="d98d6-129">Kullanım <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A> bu doğrulamayı gerçekleştirmek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="d98d6-129">Use the <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A> method to perform this verification.</span></span>  
  
-   <span data-ttu-id="d98d6-130">Zaman aşımı, hata olarak model.</span><span class="sxs-lookup"><span data-stu-id="d98d6-130">Model a time out as an error.</span></span> <span data-ttu-id="d98d6-131">Zaman aşımı oluştuğunda Yükselt *MethodName *** tamamlandı** olay ve ata bir <xref:System.TimeoutException> için <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="d98d6-131">When a time out occurs, raise the *MethodName***Completed** event and assign a <xref:System.TimeoutException> to the <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> property.</span></span>  
  
-   <span data-ttu-id="d98d6-132">Sınıfınıza birden çok eşzamanlı çağrılarını destekliyorsa, emin *MethodName *** tamamlandı** olayı uygun içeren `userSuppliedState` nesnesi.</span><span class="sxs-lookup"><span data-stu-id="d98d6-132">If your class supports multiple concurrent invocations, ensure that the *MethodName***Completed** event contains the appropriate `userSuppliedState` object.</span></span>  
  
-   <span data-ttu-id="d98d6-133">Emin *MethodName *** tamamlandı** uygun iş parçacığı üzerinde ve uygulama yaşam döngüsü uygun zamanında olayı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="d98d6-133">Ensure that the *MethodName***Completed** event is raised on the appropriate thread and at the appropriate time in the application lifecycle.</span></span> <span data-ttu-id="d98d6-134">Daha fazla bilgi için parçacıkları ve bağlamları bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="d98d6-134">For more information, see the Threading and Contexts section.</span></span>  
  
### <a name="simultaneously-executing-operations"></a><span data-ttu-id="d98d6-135">Aynı anda işlemleri çalıştırma</span><span class="sxs-lookup"><span data-stu-id="d98d6-135">Simultaneously Executing Operations</span></span>  
  
-   <span data-ttu-id="d98d6-136">Sınıfınızda birden çok eşzamanlı çağrılarını destekliyorsa, tanımlayarak her çağrıldığında ayrı ayrı izlemek Geliştirici etkinleştirmek *MethodName *** zaman uyumsuz** bir durum nesnesi değerli parametresi ya da görev kimliği olarak adlandırılan, alanaşırıyüklemesi`userSuppliedState`.</span><span class="sxs-lookup"><span data-stu-id="d98d6-136">If your class supports multiple concurrent invocations, enable the developer to track each invocation separately by defining the *MethodName***Async** overload that takes an object-valued state parameter, or task ID, called `userSuppliedState`.</span></span> <span data-ttu-id="d98d6-137">Bu parametre her zaman son parametre olmalıdır *MethodName *** zaman uyumsuz** yöntemin imzası.</span><span class="sxs-lookup"><span data-stu-id="d98d6-137">This parameter should always be the last parameter in the *MethodName***Async** method's signature.</span></span>  
  
-   <span data-ttu-id="d98d6-138">Sınıfınızda tanımlıyorsa *MethodName *** zaman uyumsuz** bir durum nesnesi değerli parametresi ya da görev kimliği alır aşırı yükleme işlemi o görev kimliği'yla ömrü izlemek ve tamamlanma işleyiciye sağladığınızdan emin olun emin olun .</span><span class="sxs-lookup"><span data-stu-id="d98d6-138">If your class defines the *MethodName***Async** overload that takes an object-valued state parameter, or task ID, be sure to track the lifetime of the operation with that task ID, and be sure to provide it back into the completion handler.</span></span> <span data-ttu-id="d98d6-139">Yardımcı sınıfları yardımcı olmak kullanılabilir vardır.</span><span class="sxs-lookup"><span data-stu-id="d98d6-139">There are helper classes available to assist.</span></span> <span data-ttu-id="d98d6-140">Eşzamanlılık yönetimi hakkında daha fazla bilgi için bkz: [izlenecek yol: olay tabanlı zaman uyumsuz deseni destekleyen bir bileşeni uygulama](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="d98d6-140">For more information on concurrency management, see [Walkthrough: Implementing a Component That Supports the Event-based Asynchronous Pattern](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md).</span></span>  
  
-   <span data-ttu-id="d98d6-141">Sınıfınızda tanımlıyorsa *MethodName *** zaman uyumsuz** herhangi çağırma girişimi emin olun, yöntemi ve durum parametresi olmadan birden çok eşzamanlı çağrılarını desteklemiyor *MethodName *** zaman uyumsuz** Önceki önce *MethodName *** zaman uyumsuz** çağırma başlatır tamamlandı bir <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="d98d6-141">If your class defines the *MethodName***Async** method without the state parameter, and it does not support multiple concurrent invocations, ensure that any attempt to invoke *MethodName***Async** before the prior *MethodName***Async** invocation has completed raises an <xref:System.InvalidOperationException>.</span></span>  
  
-   <span data-ttu-id="d98d6-142">Genel olarak, bir özel durum varsa yükseltmeyin *MethodName *** zaman uyumsuz** olmadan yöntemi `userSuppliedState` parametresi birden çok bekleyen işlemler vardır; böylece birden çok kez çağrılır.</span><span class="sxs-lookup"><span data-stu-id="d98d6-142">In general, do not raise an exception if the *MethodName***Async** method without the `userSuppliedState` parameter is invoked multiple times so that there are multiple outstanding operations.</span></span> <span data-ttu-id="d98d6-143">Sınıfınıza açıkça olamaz bu durumu yönetmek, ancak geliştiriciler bu birden çok ayırt geri aramalar işleyebilir varsayın bir özel durum yükseltebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d98d6-143">You can raise an exception when your class explicitly cannot handle that situation, but assume that developers can handle these multiple indistinguishable callbacks</span></span>  
  
### <a name="accessing-results"></a><span data-ttu-id="d98d6-144">Sonuçlarına erişme</span><span class="sxs-lookup"><span data-stu-id="d98d6-144">Accessing Results</span></span>  
  
-   <span data-ttu-id="d98d6-145">Zaman uyumsuz işlemi yürütülürken bir hata varsa, sonuçlar erişilebilir olmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="d98d6-145">If there was an error during execution of the asynchronous operation, the results should not be accessible.</span></span> <span data-ttu-id="d98d6-146">Bu herhangi bir özellik erişimini sağlamak <xref:System.ComponentModel.AsyncCompletedEventArgs> zaman <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> değil `null` başvurduğu özel durumu tetikler <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A>.</span><span class="sxs-lookup"><span data-stu-id="d98d6-146">Ensure that accessing any property in the <xref:System.ComponentModel.AsyncCompletedEventArgs> when <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> is not `null` raises the exception referenced by <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A>.</span></span> <span data-ttu-id="d98d6-147"><xref:System.ComponentModel.AsyncCompletedEventArgs> SAX <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A> bu amaçla yöntemi.</span><span class="sxs-lookup"><span data-stu-id="d98d6-147">The <xref:System.ComponentModel.AsyncCompletedEventArgs> class provides the <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A> method for this purpose.</span></span>  
  
-   <span data-ttu-id="d98d6-148">Herhangi bir sonuç başlatır erişme girişimi olun bir <xref:System.InvalidOperationException> belirten işlemi iptal edildi.</span><span class="sxs-lookup"><span data-stu-id="d98d6-148">Ensure that any attempt to access the result raises an <xref:System.InvalidOperationException> stating that the operation was canceled.</span></span> <span data-ttu-id="d98d6-149">Kullanım <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A?displayProperty=nameWithType> bu doğrulamayı gerçekleştirmek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="d98d6-149">Use the <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A?displayProperty=nameWithType> method to perform this verification.</span></span>  
  
### <a name="progress-reporting"></a><span data-ttu-id="d98d6-150">İlerleme durumunu bildirme</span><span class="sxs-lookup"><span data-stu-id="d98d6-150">Progress Reporting</span></span>  
  
-   <span data-ttu-id="d98d6-151">İlerleme durumu raporlama, mümkünse destekler.</span><span class="sxs-lookup"><span data-stu-id="d98d6-151">Support progress reporting, if possible.</span></span> <span data-ttu-id="d98d6-152">Bu sınıfınız kullandıklarında daha iyi bir uygulama kullanıcı deneyimi sağlamak için geliştiriciler sağlar.</span><span class="sxs-lookup"><span data-stu-id="d98d6-152">This enables developers to provide a better application user experience when they use your class.</span></span>  
  
-   <span data-ttu-id="d98d6-153">Öğesini uygularsanız bir **ProgressChanged** veya *MethodName *** ProgressChanged** olay, bu işlemin sonrabelirlibirzamanuyumsuzişlemiçinoluşturulanhiçbirtürolaylaraolduğundaneminolun*MethodName *** tamamlandı** olay tetiklenir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-153">If you implement a **ProgressChanged** or *MethodName***ProgressChanged** event, ensure that there are no such events raised for a particular asynchronous operation after that operation's *MethodName***Completed** event has been raised.</span></span>  
  
-   <span data-ttu-id="d98d6-154">Varsa standart <xref:System.ComponentModel.ProgressChangedEventArgs> olduğundan emin doldurulmuş <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> her zaman bir yüzde olarak yorumlanır.</span><span class="sxs-lookup"><span data-stu-id="d98d6-154">If the standard <xref:System.ComponentModel.ProgressChangedEventArgs> is being populated, ensure that the <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> can always be interpreted as a percentage.</span></span> <span data-ttu-id="d98d6-155">Yüzde doğru olması gerekmez, ancak bir yüzdesini temsil etmelidir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-155">The percentage does not need to be accurate, but it should represent a percentage.</span></span> <span data-ttu-id="d98d6-156">Ölçüm raporlama ilerleme durumunuzu yüzde dışında bir şey olması gerekiyorsa öğesinden bir sınıf türetin <xref:System.ComponentModel.ProgressChangedEventArgs> sınıfı ve bırakın <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> 0.</span><span class="sxs-lookup"><span data-stu-id="d98d6-156">If your progress reporting metric must be something other than a percentage, derive a class from the <xref:System.ComponentModel.ProgressChangedEventArgs> class and leave <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> at 0.</span></span> <span data-ttu-id="d98d6-157">Bir raporlama ölçümü yüzde dışında kullanmaktan kaçının.</span><span class="sxs-lookup"><span data-stu-id="d98d6-157">Avoid using a reporting metric other than a percentage.</span></span>  
  
-   <span data-ttu-id="d98d6-158">Emin `ProgressChanged` uygun iş parçacığı üzerinde ve uygulama yaşam döngüsü uygun zamanında olayı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="d98d6-158">Ensure that the `ProgressChanged` event is raised on the appropriate thread and at the appropriate time in the application lifecycle.</span></span> <span data-ttu-id="d98d6-159">Daha fazla bilgi için parçacıkları ve bağlamları bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="d98d6-159">For more information, see the Threading and Contexts section.</span></span>  
  
### <a name="isbusy-implementation"></a><span data-ttu-id="d98d6-160">IsBusy uygulama</span><span class="sxs-lookup"><span data-stu-id="d98d6-160">IsBusy Implementation</span></span>  
  
-   <span data-ttu-id="d98d6-161">Değil kullanıma bir `IsBusy` sınıfınız birden çok eşzamanlı çağrılarını destekliyorsa özelliği.</span><span class="sxs-lookup"><span data-stu-id="d98d6-161">Do not expose an `IsBusy` property if your class supports multiple concurrent invocations.</span></span> <span data-ttu-id="d98d6-162">Örneğin, XML Web hizmeti proxy'si değil ortaya bir `IsBusy` özelliğini zaman uyumsuz yöntemleri yönelik birden çok eşzamanlı çağrılarını desteklemediğinden.</span><span class="sxs-lookup"><span data-stu-id="d98d6-162">For example, XML Web service proxies do not expose an `IsBusy` property because they support multiple concurrent invocations of asynchronous methods.</span></span>  
  
-   <span data-ttu-id="d98d6-163">`IsBusy` Özelliği döndürmelidir `true` sonra *MethodName *** zaman uyumsuz** yöntemi çağrılmadan önce *MethodName *** tamamlandı** olay tetiklenir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-163">The `IsBusy` property should return `true` after the *MethodName***Async** method has been called and before the *MethodName***Completed** event has been raised.</span></span> <span data-ttu-id="d98d6-164">Aksi takdirde döndürmelidir `false`.</span><span class="sxs-lookup"><span data-stu-id="d98d6-164">Otherwise it should return `false`.</span></span> <span data-ttu-id="d98d6-165"><xref:System.ComponentModel.BackgroundWorker> Ve <xref:System.Net.WebClient> bileşenleri kullanıma sınıfların örnekleri olan bir `IsBusy` özelliği.</span><span class="sxs-lookup"><span data-stu-id="d98d6-165">The <xref:System.ComponentModel.BackgroundWorker> and <xref:System.Net.WebClient> components are examples of classes that expose an `IsBusy` property.</span></span>  
  
### <a name="cancellation"></a><span data-ttu-id="d98d6-166">İptal Etme</span><span class="sxs-lookup"><span data-stu-id="d98d6-166">Cancellation</span></span>  
  
-   <span data-ttu-id="d98d6-167">İptal etme, mümkünse destekler.</span><span class="sxs-lookup"><span data-stu-id="d98d6-167">Support cancellation, if possible.</span></span> <span data-ttu-id="d98d6-168">Bu sınıfınız kullandıklarında daha iyi bir uygulama kullanıcı deneyimi sağlamak için geliştiriciler sağlar.</span><span class="sxs-lookup"><span data-stu-id="d98d6-168">This enables developers to provide a better application user experience when they use your class.</span></span>  
  
-   <span data-ttu-id="d98d6-169">İptal etme söz konusu olduğunda, ayarlamak <xref:System.ComponentModel.AsyncCompletedEventArgs.Cancelled%2A> içinde bayrak <xref:System.ComponentModel.AsyncCompletedEventArgs> nesnesi.</span><span class="sxs-lookup"><span data-stu-id="d98d6-169">In the case of cancellation, set the <xref:System.ComponentModel.AsyncCompletedEventArgs.Cancelled%2A> flag in the <xref:System.ComponentModel.AsyncCompletedEventArgs> object.</span></span>  
  
-   <span data-ttu-id="d98d6-170">Herhangi bir sonuç başlatır erişme girişimi olun bir <xref:System.InvalidOperationException> belirten işlemi iptal edildi.</span><span class="sxs-lookup"><span data-stu-id="d98d6-170">Ensure that any attempt to access the result raises an <xref:System.InvalidOperationException> stating that the operation was canceled.</span></span> <span data-ttu-id="d98d6-171">Kullanım <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A?displayProperty=nameWithType> bu doğrulamayı gerçekleştirmek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="d98d6-171">Use the <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A?displayProperty=nameWithType> method to perform this verification.</span></span>  
  
-   <span data-ttu-id="d98d6-172">İptal yöntemine yönelik çağrılar her zaman başarıyla döndürür ve hiçbir zaman bir özel durum Yükselt emin olun.</span><span class="sxs-lookup"><span data-stu-id="d98d6-172">Ensure that calls to a cancellation method always return successfully, and never raise an exception.</span></span> <span data-ttu-id="d98d6-173">Genel olarak, bir istemci bir işlem belirli bir zamanda gerçekten iptal edilebilen olup seçeceğine bildirilmez ve daha önce verilen iptal başarılı oldu konusunda bildirilmez.</span><span class="sxs-lookup"><span data-stu-id="d98d6-173">In general, a client is not notified as to whether an operation is truly cancelable at any given time, and is not notified as to whether a previously issued cancellation has succeeded.</span></span> <span data-ttu-id="d98d6-174">İptal başarılı olduğunda, uygulama tamamlanma durumu bölümü aldığından ancak, uygulama her zaman bildirim verilir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-174">However, the application will always be given notification when a cancellation succeeded, because the application takes part in the completion status.</span></span>  
  
-   <span data-ttu-id="d98d6-175">Yükselt *MethodName *** tamamlandı** işlemi iptal ettiğinizde olay.</span><span class="sxs-lookup"><span data-stu-id="d98d6-175">Raise the *MethodName***Completed** event when the operation is canceled.</span></span>  
  
### <a name="errors-and-exceptions"></a><span data-ttu-id="d98d6-176">Hatalar ve özel durumlar</span><span class="sxs-lookup"><span data-stu-id="d98d6-176">Errors and Exceptions</span></span>  
  
-   <span data-ttu-id="d98d6-177">Zaman uyumsuz işlemi gerçekleştiğinde ve değerini ayarlama tüm özel durumları yakalamak <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A?displayProperty=nameWithType> için bu özel özellik.</span><span class="sxs-lookup"><span data-stu-id="d98d6-177">Catch any exceptions that occur in the asynchronous operation and set the value of the <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A?displayProperty=nameWithType> property to that exception.</span></span>  
  
### <a name="threading-and-contexts"></a><span data-ttu-id="d98d6-178">Parçacıkları ve bağlamları</span><span class="sxs-lookup"><span data-stu-id="d98d6-178">Threading and Contexts</span></span>  
 <span data-ttu-id="d98d6-179">Sınıfınızın doğru çalışması için istemcinin olay işleyicileri uygun iş parçacığı veya belirtilen uygulama modeli bağlamının çağrılır kritik dahil olmak üzere [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] ve Windows Forms uygulamaları.</span><span class="sxs-lookup"><span data-stu-id="d98d6-179">For correct operation of your class, it is critical that the client's event handlers are invoked on the proper thread or context for the given application model, including [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] and Windows Forms applications.</span></span> <span data-ttu-id="d98d6-180">Zaman uyumsuz sınıfınız altında herhangi bir uygulama modeli düzgün şekilde davranan emin olmak için iki önemli yardımcı sınıfları sağlanır: <xref:System.ComponentModel.AsyncOperation> ve <xref:System.ComponentModel.AsyncOperationManager>.</span><span class="sxs-lookup"><span data-stu-id="d98d6-180">Two important helper classes are provided to ensure that your asynchronous class behaves correctly under any application model: <xref:System.ComponentModel.AsyncOperation> and <xref:System.ComponentModel.AsyncOperationManager>.</span></span>  
  
 <span data-ttu-id="d98d6-181"><xref:System.ComponentModel.AsyncOperationManager>bir yöntem sağlar <xref:System.ComponentModel.AsyncOperationManager.CreateOperation%2A>, döndüren bir <xref:System.ComponentModel.AsyncOperation>.</span><span class="sxs-lookup"><span data-stu-id="d98d6-181"><xref:System.ComponentModel.AsyncOperationManager> provides one method, <xref:System.ComponentModel.AsyncOperationManager.CreateOperation%2A>, which returns an <xref:System.ComponentModel.AsyncOperation>.</span></span> <span data-ttu-id="d98d6-182">*MethodName *** zaman uyumsuz** yöntem çağrılarını <xref:System.ComponentModel.AsyncOperationManager.CreateOperation%2A> ve sınıfınız döndürülen kullanır <xref:System.ComponentModel.AsyncOperation> zaman uyumsuz görev ömrü izlemek için.</span><span class="sxs-lookup"><span data-stu-id="d98d6-182">Your *MethodName***Async** method calls <xref:System.ComponentModel.AsyncOperationManager.CreateOperation%2A> and your class uses the returned <xref:System.ComponentModel.AsyncOperation> to track the lifetime of the asynchronous task.</span></span>  
  
 <span data-ttu-id="d98d6-183">İlerleme durumunu, artımlı sonuçları ve istemciye tamamlama bildirmek için arama <xref:System.ComponentModel.AsyncOperation.Post%2A> ve <xref:System.ComponentModel.AsyncOperation.OperationCompleted%2A> yöntemlere <xref:System.ComponentModel.AsyncOperation>.</span><span class="sxs-lookup"><span data-stu-id="d98d6-183">To report progress, incremental results, and completion to the client, call the <xref:System.ComponentModel.AsyncOperation.Post%2A> and <xref:System.ComponentModel.AsyncOperation.OperationCompleted%2A> methods on the <xref:System.ComponentModel.AsyncOperation>.</span></span> <span data-ttu-id="d98d6-184"><xref:System.ComponentModel.AsyncOperation>istemcinin olay işleyicilerine uygun iş parçacığı veya bağlam çağrıları hazırlama için sorumludur.</span><span class="sxs-lookup"><span data-stu-id="d98d6-184"><xref:System.ComponentModel.AsyncOperation> is responsible for marshaling calls to the client's event handlers to the proper thread or context.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d98d6-185">Açıkça uygulama modeli ilkesini karşı gitmek istiyorsanız, ancak hala olay tabanlı zaman uyumsuz desen kullanmanın diğer avantajları yararlanan bu kurallar atlayabilir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-185">You can circumvent these rules if you explicitly want to go against the policy of the application model, but still benefit from the other advantages of using the Event-based Asynchronous Pattern.</span></span> <span data-ttu-id="d98d6-186">Örneğin, boş olması için Windows Forms'ta işletim bir sınıf akıtılan isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d98d6-186">For example, you may want a class operating in Windows Forms to be free threaded.</span></span> <span data-ttu-id="d98d6-187">Geliştiriciler zımni sınırlamaları anlayın sürece, ücretsiz iş parçacıklı sınıfı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d98d6-187">You can create a free threaded class, as long as developers understand the implied restrictions.</span></span> <span data-ttu-id="d98d6-188">Konsol uygulamaları yürütülmesi senkronize değil <xref:System.ComponentModel.AsyncOperation.Post%2A> çağrıları.</span><span class="sxs-lookup"><span data-stu-id="d98d6-188">Console applications do not synchronize the execution of <xref:System.ComponentModel.AsyncOperation.Post%2A> calls.</span></span> <span data-ttu-id="d98d6-189">Bu neden `ProgressChanged` sıralama dışında çıkarılmasına olaylar.</span><span class="sxs-lookup"><span data-stu-id="d98d6-189">This can cause `ProgressChanged` events to be raised out of order.</span></span> <span data-ttu-id="d98d6-190">Yürütülmesi serileştirilmiş isterseniz, <xref:System.ComponentModel.AsyncOperation.Post%2A> çağrıları, uygulamak ve yükleme bir <xref:System.Threading.SynchronizationContext?displayProperty=nameWithType> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="d98d6-190">If you wish to have serialized execution of <xref:System.ComponentModel.AsyncOperation.Post%2A> calls, implement and install a <xref:System.Threading.SynchronizationContext?displayProperty=nameWithType> class.</span></span>  
  
 <span data-ttu-id="d98d6-191">Kullanma hakkında daha fazla bilgi için <xref:System.ComponentModel.AsyncOperation> ve <xref:System.ComponentModel.AsyncOperationManager> zaman uyumsuz işlemleri etkinleştirmek için bkz: [izlenecek yol: olay tabanlı zaman uyumsuz deseni destekleyen bir bileşeni uygulama](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="d98d6-191">For more information about using <xref:System.ComponentModel.AsyncOperation> and <xref:System.ComponentModel.AsyncOperationManager> to enable your asynchronous operations, see [Walkthrough: Implementing a Component That Supports the Event-based Asynchronous Pattern](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md).</span></span>  
  
## <a name="guidelines"></a><span data-ttu-id="d98d6-192">Kuralları</span><span class="sxs-lookup"><span data-stu-id="d98d6-192">Guidelines</span></span>  
  
-   <span data-ttu-id="d98d6-193">İdeal olarak, her yöntem çağırma bağımsız olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-193">Ideally, each method invocation should be independent of others.</span></span> <span data-ttu-id="d98d6-194">Paylaşılan kaynaklarla çağrılarını Kuplaj kaçınmalısınız.</span><span class="sxs-lookup"><span data-stu-id="d98d6-194">You should avoid coupling invocations with shared resources.</span></span> <span data-ttu-id="d98d6-195">Kaynakları çağrılarını arasında paylaşılacak varsa, uygun eşitleme mekanizması uygulamanızda sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-195">If resources are to be shared among invocations, you will need to provide a proper synchronization mechanism in your implementation.</span></span>  
  
-   <span data-ttu-id="d98d6-196">Eşitleme uygulamak istemci gerektirir tasarımları önerilmez.</span><span class="sxs-lookup"><span data-stu-id="d98d6-196">Designs that require the client to implement synchronization are discouraged.</span></span> <span data-ttu-id="d98d6-197">Örneğin, bir genel statik nesnesini parametre olarak alır zaman uyumsuz bir yöntem olabilir; Bu tür bir yöntemin birden çok eşzamanlı çağrılarını veri bozulması veya kilitlenmeleri neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="d98d6-197">For example, you could have an asynchronous method that receives a global static object as a parameter; multiple concurrent invocations of such a method could result in data corruption or deadlocks.</span></span>  
  
-   <span data-ttu-id="d98d6-198">Birden çok çağırma aşırı yüklemeye sahip bir yöntem uygularsanız (`userState` imzada), sınıfınız kullanıcı durumları veya görev kimlikleri ve karşılık gelen bekleyen işlemler koleksiyonunu yönetmek için ihtiyacınız olacaktır.</span><span class="sxs-lookup"><span data-stu-id="d98d6-198">If you implement a method with the multiple-invocation overload (`userState` in the signature), your class will need to manage a collection of user states, or task IDs, and their corresponding pending operations.</span></span> <span data-ttu-id="d98d6-199">Bu koleksiyon ile korunması gereken `lock` bölgeler, çeşitli çağrıları ekleme ve kaldırma nedeni `userState` koleksiyonundaki nesneleri.</span><span class="sxs-lookup"><span data-stu-id="d98d6-199">This collection should be protected with `lock` regions, because the various invocations add and remove `userState` objects in the collection.</span></span>  
  
-   <span data-ttu-id="d98d6-200">Yeniden göz önünde bulundurun `CompletedEventArgs` uygun ve uygun yerlerde sınıfları.</span><span class="sxs-lookup"><span data-stu-id="d98d6-200">Consider reusing `CompletedEventArgs` classes where feasible and appropriate.</span></span> <span data-ttu-id="d98d6-201">Bu durumda, adlandırma yöntem adı ile tutarlı değil çünkü belirli bir temsilci ve <xref:System.EventArgs> türü tek bir yönteme bağlı değil.</span><span class="sxs-lookup"><span data-stu-id="d98d6-201">In this case, the naming is not consistent with the method name, because a given delegate and <xref:System.EventArgs> type are not tied to a single method.</span></span> <span data-ttu-id="d98d6-202">Ancak, geliştiricilerin üzerinde bir özellikten alınan değeri cast zorlama <xref:System.EventArgs> hiçbir zaman kabul edilebilir değil.</span><span class="sxs-lookup"><span data-stu-id="d98d6-202">However, forcing developers to cast the value retrieved from a property on the <xref:System.EventArgs> is never acceptable.</span></span>  
  
-   <span data-ttu-id="d98d6-203">Öğesinden türeyen bir sınıf yazıyorsanız <xref:System.ComponentModel.Component>, değil uygulamak ve kendi yükleme <xref:System.Threading.SynchronizationContext> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="d98d6-203">If you are authoring a class that derives from <xref:System.ComponentModel.Component>, do not implement and install your own <xref:System.Threading.SynchronizationContext> class.</span></span> <span data-ttu-id="d98d6-204">Uygulama modelleri değil bileşenleri, Denetim <xref:System.Threading.SynchronizationContext> kullanılan.</span><span class="sxs-lookup"><span data-stu-id="d98d6-204">Application models, not components, control the <xref:System.Threading.SynchronizationContext> that is used.</span></span>  
  
-   <span data-ttu-id="d98d6-205">Kullandığınızda, çoklu iş parçacığı kullanımı herhangi bir tür, büyük olasılıkla kendiniz için çok önemli ve karmaşık hatalar ortaya.</span><span class="sxs-lookup"><span data-stu-id="d98d6-205">When you use multithreading of any sort, you potentially expose yourself to very serious and complex bugs.</span></span> <span data-ttu-id="d98d6-206">Çoklu iş parçacığı kullanımı, bakın herhangi bir çözümü uygulamadan önce [yönetilen iş parçacığı oluşturma en iyi yöntemler](../../../docs/standard/threading/managed-threading-best-practices.md).</span><span class="sxs-lookup"><span data-stu-id="d98d6-206">Before implementing any solution that uses multithreading, see [Managed Threading Best Practices](../../../docs/standard/threading/managed-threading-best-practices.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d98d6-207">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="d98d6-207">See Also</span></span>  
 <xref:System.ComponentModel.AsyncOperation>  
 <xref:System.ComponentModel.AsyncOperationManager>  
 <xref:System.ComponentModel.AsyncCompletedEventArgs>  
 <xref:System.ComponentModel.ProgressChangedEventArgs>  
 <xref:System.ComponentModel.BackgroundWorker>  
 [<span data-ttu-id="d98d6-208">Olay Tabanlı Zaman Uyumsuz Deseni Uygulama</span><span class="sxs-lookup"><span data-stu-id="d98d6-208">Implementing the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/implementing-the-event-based-asynchronous-pattern.md)  
 [<span data-ttu-id="d98d6-209">Olay Tabanlı Zaman Uyumsuz Desenle Çok İş Parçacıklı Programlama</span><span class="sxs-lookup"><span data-stu-id="d98d6-209">Multithreaded Programming with the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/multithreaded-programming-with-the-event-based-asynchronous-pattern.md)  
 [<span data-ttu-id="d98d6-210">Olay Tabanlı Zaman Uyumsuz Desenin Ne Zaman Uygulanacağını Belirleme</span><span class="sxs-lookup"><span data-stu-id="d98d6-210">Deciding When to Implement the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/deciding-when-to-implement-the-event-based-asynchronous-pattern.md)  
 [<span data-ttu-id="d98d6-211">Olay Tabanlı Zaman Uyumsuz Desen Uygulamak için En İyi Yöntemler</span><span class="sxs-lookup"><span data-stu-id="d98d6-211">Best Practices for Implementing the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/best-practices-for-implementing-the-event-based-asynchronous-pattern.md)  
 [<span data-ttu-id="d98d6-212">Nasıl yapılır: Olay Tabanlı Zaman Uyumsuz Deseni Destekleyen Bileşenleri Kullanma</span><span class="sxs-lookup"><span data-stu-id="d98d6-212">How to: Use Components That Support the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/how-to-use-components-that-support-the-event-based-asynchronous-pattern.md)  
 [<span data-ttu-id="d98d6-213">İzlenecek yol: Olay Tabanlı Zaman Uyumsuz Deseni Destekleyen Bir Bileşeni Uygulama</span><span class="sxs-lookup"><span data-stu-id="d98d6-213">Walkthrough: Implementing a Component That Supports the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md)
