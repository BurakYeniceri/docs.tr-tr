---
title: Kısmi hata işleme
description: Kapsayıcılı .NET uygulamaları için .NET mikro mimarisi | Kısmi hata işleme
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.openlocfilehash: 26e3d6b4cd1df051c00cef4ee8370ca9c213363e
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33577270"
---
# <a name="handling-partial-failure"></a><span data-ttu-id="e845e-103">Kısmi hata işleme</span><span class="sxs-lookup"><span data-stu-id="e845e-103">Handling partial failure</span></span>

<span data-ttu-id="e845e-104">Mikro tabanlı uygulamalar gibi dağıtılan sistemlerde, kısmi hatanın ever-present bir risk vardır.</span><span class="sxs-lookup"><span data-stu-id="e845e-104">In distributed systems like microservices-based applications, there is an ever-present risk of partial failure.</span></span> <span data-ttu-id="e845e-105">Örneği için tek bir mikro hizmet/kapsayıcısı başarısız olabilir veya kısa bir süre yanıtlamak kullanılamıyor olabilir veya tek bir VM veya sunucu çökebilir.</span><span class="sxs-lookup"><span data-stu-id="e845e-105">For instance, a single microservice/container can fail or might not be available to respond for a short time, or a single VM or server can crash.</span></span> <span data-ttu-id="e845e-106">Bir hizmet, istemciler ve hizmetler ayrı işlemler olduğundan, bir istemcinin isteğini zamanında bir şekilde yanıt verebilir olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="e845e-106">Since clients and services are separate processes, a service might not be able to respond in a timely way to a client’s request.</span></span> <span data-ttu-id="e845e-107">Hizmet isteklerini aşırı yüklenmiş ve için son derece yavaş yanıt veren olabilir veya yalnızca ağ sorunları nedeniyle kısa bir süre için erişilebilir olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="e845e-107">The service might be overloaded and responding extremely slowly to requests, or might simply not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="e845e-108">Örneğin, eShopOnContainers sipariş ayrıntılarını sayfasından örnek uygulamayı göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="e845e-108">For example, consider the Order details page from the eShopOnContainers sample application.</span></span> <span data-ttu-id="e845e-109">Sıralama mikro hizmet yanıt vermiyorsa kullanıcı bulunduğunda istemci işleminin (MVC web uygulaması) hatalı bir uygulama bir sipariş göndermek — Örneğin, zaman uyumlu RPC'ler hiçbir zaman aşımı ile kullanmak için istemci kodu olsaydı — iş parçacığı süresiz olarak engeller yanıt bekleme.</span><span class="sxs-lookup"><span data-stu-id="e845e-109">If the ordering microservice is unresponsive when the user tries to submit an order, a bad implementation of the client process (the MVC web application)—for example, if the client code were to use synchronous RPCs with no timeout—would block threads indefinitely waiting for a response.</span></span> <span data-ttu-id="e845e-110">Hatalı kullanıcı deneyimi oluşturma, ek olarak her yanıt bekleme kullanır veya bir iş parçacığı engeller ve iş parçacıkları yüksek düzeyde ölçeklenebilir uygulamalar çok değerli.</span><span class="sxs-lookup"><span data-stu-id="e845e-110">In addition to creating a bad user experience, every unresponsive wait consumes or blocks a thread, and threads are extremely valuable in highly scalable applications.</span></span> <span data-ttu-id="e845e-111">Sonunda birçok engellenmiş iş parçacığı varsa, uygulamanın çalışma zamanı iş parçacığı dışında çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e845e-111">If there are many blocked threads, eventually the application’s runtime can run out of threads.</span></span> <span data-ttu-id="e845e-112">Bu durumda, uygulamanın yerine genel yanıt veremez hale gelebilir Göster Şekil 10-1 olarak yalnızca kısmen yanıt.</span><span class="sxs-lookup"><span data-stu-id="e845e-112">In that case, the application can become globally unresponsive instead of just partially unresponsive, as show in Figure 10-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="e845e-113">**Şekil 10-1**.</span><span class="sxs-lookup"><span data-stu-id="e845e-113">**Figure 10-1**.</span></span> <span data-ttu-id="e845e-114">Kısmi hatalar nedeniyle hizmet iş parçacığı kullanılabilirliği etkileyen bağımlılıkları</span><span class="sxs-lookup"><span data-stu-id="e845e-114">Partial failures because of dependencies that impact service thread availability</span></span>

<span data-ttu-id="e845e-115">Özellikle iç mikro etkileşim çoğunu (hangi koruma düzeni olarak kabul edilir) zaman uyumlu HTTP çağrıları alıyorsa büyük mikro tabanlı bir uygulama, kısmi bir hatası, yükseltilmiş.</span><span class="sxs-lookup"><span data-stu-id="e845e-115">In a large microservices-based application, any partial failure can be amplified, especially if most of the internal microservices interaction is based on synchronous HTTP calls (which is considered an anti-pattern).</span></span> <span data-ttu-id="e845e-116">Gün başına gelen çağrıları milyonlarca alan bir sistem düşünün.</span><span class="sxs-lookup"><span data-stu-id="e845e-116">Think about a system that receives millions of incoming calls per day.</span></span> <span data-ttu-id="e845e-117">Bu gelen çağrıları sisteminizi uzun zaman uyumlu HTTP çağrıları zincirleri üzerinde temel hatalı bir tasarım varsa, daha fazla giden çağrıları (1:4 oranını şimdi varsayalım) milyonlarca iç mikro düzinelerce için zaman uyumlu bağımlılıklar olarak neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="e845e-117">If your system has a bad design that is based on long chains of synchronous HTTP calls, these incoming calls might result in many more millions of outgoing calls (let’s suppose a ratio of 1:4) to dozens of internal microservices as synchronous dependencies.</span></span> <span data-ttu-id="e845e-118">Bu durum, Şekil 10-2'de, özellikle bağımlılık gösterilen \#3.</span><span class="sxs-lookup"><span data-stu-id="e845e-118">This situation is shown in Figure 10-2, especially dependency \#3.</span></span>

![](./media/image2.png)

<span data-ttu-id="e845e-119">**Şekil 10-2**.</span><span class="sxs-lookup"><span data-stu-id="e845e-119">**Figure 10-2**.</span></span> <span data-ttu-id="e845e-120">HTTP isteklerinin uzun zincirleri özelliklerine sahip bir yanlış tasarım olan etkisi</span><span class="sxs-lookup"><span data-stu-id="e845e-120">The impact of having an incorrect design featuring long chains of HTTP requests</span></span>

<span data-ttu-id="e845e-121">Aralıklı hatasıdır neredeyse dağıtılmış bir garanti ve her bağımlılık mükemmel kullanılabilirlik olsa bile tabanlı sistem, bulut.</span><span class="sxs-lookup"><span data-stu-id="e845e-121">Intermittent failure is virtually guaranteed in a distributed and cloud based system, even if every dependency itself has excellent availability.</span></span> <span data-ttu-id="e845e-122">Bu, göz önünde bulundurmanız gereken bir olgu olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="e845e-122">This should be a fact you need to consider.</span></span>

<span data-ttu-id="e845e-123">Bile küçük kapalı kalma süreleri, değil tasarlayıp teknikleri hataya dayanıklılık sağlamak için yükseltilmiş.</span><span class="sxs-lookup"><span data-stu-id="e845e-123">If you do not design and implement techniques to ensure fault tolerance, even small downtimes can be amplified.</span></span> <span data-ttu-id="e845e-124">Bir örnek olarak, bu ripple etkisi nedeniyle birkaç saat kalma süresi içinde her ay 50 bağımlılıklarla her % 99,99 kullanılabilirlik neden olur.</span><span class="sxs-lookup"><span data-stu-id="e845e-124">As an example, 50 dependencies each with 99.99% of availability would result in several hours of downtime each month because of this ripple effect.</span></span> <span data-ttu-id="e845e-125">Mikro hizmet bağımlılık istekleri yüksek hacimli işlerken başarısız olduğunda, bu hata hızla her hizmetindeki tüm kullanılabilir isteği iş parçacıklarını saturate ve tüm uygulama kilitlenme.</span><span class="sxs-lookup"><span data-stu-id="e845e-125">When a microservice dependency fails while handling a high volume of requests, that failure can quickly saturate all available request threads in each service and crash the whole application.</span></span>

![](./media/image3.png)

<span data-ttu-id="e845e-126">**Şekil 10-3**.</span><span class="sxs-lookup"><span data-stu-id="e845e-126">**Figure 10-3**.</span></span> <span data-ttu-id="e845e-127">Zaman uyumlu HTTP çağrıları uzun zincirleri ile mikro tarafından yükseltilmiş kısmi hatası</span><span class="sxs-lookup"><span data-stu-id="e845e-127">Partial failure amplified by microservices with long chains of synchronous HTTP calls</span></span>

<span data-ttu-id="e845e-128">Bölümünde bu sorunu en aza indirmek için "*zaman uyumsuz mikro hizmet tümleştirme zorunlu mikro'nın otonomisi*" (mimarisi bölümde), biz zaman uyumsuz iletişim iç kullanmanızı teşvik mikro.</span><span class="sxs-lookup"><span data-stu-id="e845e-128">To minimize this problem, in the section "*Asynchronous microservice integration enforce microservice’s autonomy*” (in the architecture chapter), we encouraged you to use asynchronous communication across the internal microservices.</span></span> <span data-ttu-id="e845e-129">Biz kısaca daha sonraki bölümde açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="e845e-129">We briefly explain more in the next section.</span></span>

<span data-ttu-id="e845e-130">Buna ek olarak, kısmi hataları işlemek için mikro ve istemci uygulamaları tasarım temel — diğer bir deyişle, esnek mikro ve istemci uygulamaları oluşturmak için.</span><span class="sxs-lookup"><span data-stu-id="e845e-130">In addition, it is essential that you design your microservices and client applications to handle partial failures—that is, to build resilient microservices and client applications.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="e845e-131">[Önceki] (index.md) [sonraki] (kısmi hatası strategies.md)</span><span class="sxs-lookup"><span data-stu-id="e845e-131">[Previous] (index.md) [Next] (partial-failure-strategies.md)</span></span>
