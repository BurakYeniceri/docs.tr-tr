---
title: SpinWait
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: synchronization primitives, SpinWait
ms.assetid: 36012f42-34e5-4f86-adf4-973f433ed6c6
caps.latest.revision: "9"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 1e67dd59464de09a35941d91ef984db6b7779b8c
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/23/2017
---
# <a name="spinwait"></a><span data-ttu-id="42aaf-102">SpinWait</span><span class="sxs-lookup"><span data-stu-id="42aaf-102">SpinWait</span></span>
<span data-ttu-id="42aaf-103"><xref:System.Threading.SpinWait?displayProperty=nameWithType>alt düzey senaryolarda çekirdek olaylar için gerekli olan çekirdek geçişleri ve pahalı İçerik Geçişi önlemek için kullanabileceğiniz bir basit eşitleme türüdür.</span><span class="sxs-lookup"><span data-stu-id="42aaf-103"><xref:System.Threading.SpinWait?displayProperty=nameWithType> is a lightweight synchronization type that you can use in low-level scenarios to avoid the expensive context switches and kernel transitions that are required for kernel events.</span></span> <span data-ttu-id="42aaf-104">Bir kaynak süresi, uzun bir süre için tutulması için beklenmiyor çok çekirdekli bilgisayarlarda, bir bekleyen iş parçacığı kullanıcı modunda birkaç düzine ya da birkaç yüz döngüsü boyunca Döndür ve kaynak almak için Yeniden Dene'yi daha etkili olabilir.</span><span class="sxs-lookup"><span data-stu-id="42aaf-104">On multicore computers, when a resource is not expected to be held for long periods of time, it can be more efficient for a waiting thread to spin in user mode for a few dozen or a few hundred cycles, and then retry to acquire the resource.</span></span> <span data-ttu-id="42aaf-105">Ardından kaynak dönen sonra kullanılabilir durumdaysa, birkaç bin döngüsü kaydettiniz.</span><span class="sxs-lookup"><span data-stu-id="42aaf-105">If the resource is available after spinning, then you have saved several thousand cycles.</span></span> <span data-ttu-id="42aaf-106">Kaynak hala kullanılabilir değil ise, daha sonra yalnızca birkaç döngüleri harcadığınız ve hala çekirdek tabanlı bekleme girebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="42aaf-106">If the resource is still not available, then you have spent only a few cycles and can still enter a kernel-based wait.</span></span> <span data-ttu-id="42aaf-107">Bu dönen ardından bekleyen birleşimi, bazen olarak adlandırılır bir *iki aşamalı beklemeyi işlemi*.</span><span class="sxs-lookup"><span data-stu-id="42aaf-107">This spinning-then-waiting combination is sometimes referred to as a *two-phase wait operation*.</span></span>  
  
 <span data-ttu-id="42aaf-108"><xref:System.Threading.SpinWait>çekirdek olaylar gibi sarmalamak .NET Framework türleri ile birlikte kullanılmak üzere tasarlanmış <xref:System.Threading.ManualResetEvent>.</span><span class="sxs-lookup"><span data-stu-id="42aaf-108"><xref:System.Threading.SpinWait> is designed to be used in conjunction with the .NET Framework types that wrap kernel events such as <xref:System.Threading.ManualResetEvent>.</span></span> <span data-ttu-id="42aaf-109"><xref:System.Threading.SpinWait>Ayrıca tek başına yalnızca bir programda temel dönen işlevselliği için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="42aaf-109"><xref:System.Threading.SpinWait> can also be used by itself for basic spinning functionality in just one program.</span></span>  
  
 <span data-ttu-id="42aaf-110"><xref:System.Threading.SpinWait>daha fazlasını boş bir döngü var.</span><span class="sxs-lookup"><span data-stu-id="42aaf-110"><xref:System.Threading.SpinWait> is more than just an empty loop.</span></span> <span data-ttu-id="42aaf-111">Dikkatle genel durumu için doğru dönen davranışı sağlamak için uygulanır ve yetecek kadar uzun süre dönerek, kendisini İçerik Geçişi başlatır (kabaca bir çekirdek geçiş için gereken süre uzunluğunu).</span><span class="sxs-lookup"><span data-stu-id="42aaf-111">It is carefully implemented to provide correct spinning behavior for the general case, and will itself initiate context switches if it spins long enough (roughly the length of time required for a kernel transition).</span></span> <span data-ttu-id="42aaf-112">Örneğin, bilgisayarlardaki tek çekirdek, <xref:System.Threading.SpinWait> iş parçacığının zaman dilimi verir hemen tüm iş parçacıklarının ilerlemeyi dönen blokları iletmek için.</span><span class="sxs-lookup"><span data-stu-id="42aaf-112">For example, on single-core computers, <xref:System.Threading.SpinWait> yields the time slice of the thread immediately because spinning blocks forward progress on all threads.</span></span> <span data-ttu-id="42aaf-113"><xref:System.Threading.SpinWait>daha yüksek öncelikli iş parçacıkları veya atık toplayıcı Engellemesi bekleyen iş parçacığı önlemek için bile çok çekirdekli makinelere de üretir.</span><span class="sxs-lookup"><span data-stu-id="42aaf-113"><xref:System.Threading.SpinWait> also yields even on multi-core machines to prevent the waiting thread from blocking higher-priority threads or the garbage collector.</span></span> <span data-ttu-id="42aaf-114">Bu nedenle, kullanıyorsanız bir <xref:System.Threading.SpinWait> iki aşamalı beklemeyi işleminde, önce çekirdek bekleme çağırma olan öneririz <xref:System.Threading.SpinWait> kendisini bir içerik anahtarı başlatır.</span><span class="sxs-lookup"><span data-stu-id="42aaf-114">Therefore, if you are using a <xref:System.Threading.SpinWait> in a two-phase wait operation, we recommend that you invoke the kernel wait before the <xref:System.Threading.SpinWait> itself initiates a context switch.</span></span> <span data-ttu-id="42aaf-115"><xref:System.Threading.SpinWait>sağlar <xref:System.Threading.SpinWait.NextSpinWillYield%2A> her çağrı için önce kontrol edebilirsiniz özelliği <xref:System.Threading.SpinWait.SpinOnce%2A>.</span><span class="sxs-lookup"><span data-stu-id="42aaf-115"><xref:System.Threading.SpinWait> provides the <xref:System.Threading.SpinWait.NextSpinWillYield%2A> property, which you can check before every call to <xref:System.Threading.SpinWait.SpinOnce%2A>.</span></span> <span data-ttu-id="42aaf-116">Özellik döndüğünde `true`, kendi bekleme işlemi başlatın.</span><span class="sxs-lookup"><span data-stu-id="42aaf-116">When the property returns `true`, initiate your own Wait operation.</span></span> <span data-ttu-id="42aaf-117">Bir örnek için bkz: [nasıl yapılır: kullanım bekleyin Two-Phase işlemini uygulamak için SpinWait](../../../docs/standard/threading/how-to-use-spinwait-to-implement-a-two-phase-wait-operation.md).</span><span class="sxs-lookup"><span data-stu-id="42aaf-117">For an example, see [How to: Use SpinWait to Implement a Two-Phase Wait Operation](../../../docs/standard/threading/how-to-use-spinwait-to-implement-a-two-phase-wait-operation.md).</span></span>  
  
 <span data-ttu-id="42aaf-118">Aşamalı bir bekleme işlemini gerçekleştirmiyorsanız, ancak bazı koşul true olana kadar yalnızca dönmesini etkinleştirebilirsiniz <xref:System.Threading.SpinWait> onun bağlamı gerçekleştirmek için Windows işletim sistemi ortamında iyi vatandaşı olmasını geçer.</span><span class="sxs-lookup"><span data-stu-id="42aaf-118">If you are not performing a two-phase wait operation but are just spinning until some condition is true, you can enable <xref:System.Threading.SpinWait> to perform its context switches so that it is a good citizen in the Windows operating system environment.</span></span> <span data-ttu-id="42aaf-119">Aşağıdaki temel örnekte gösterildiği bir <xref:System.Threading.SpinWait> kilidi serbest yığınında.</span><span class="sxs-lookup"><span data-stu-id="42aaf-119">The following basic example shows a <xref:System.Threading.SpinWait> in a lock-free stack.</span></span> <span data-ttu-id="42aaf-120">Yüksek performanslı, iş parçacığı yığın gerekiyorsa kullanmayı <xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="42aaf-120">If you require a high-performance, thread-safe stack, consider using <xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[CDS_SpinWait#05](../../../samples/snippets/csharp/VS_Snippets_Misc/cds_spinwait/cs/spinwait.cs#05)]
 [!code-vb[CDS_SpinWait#05](../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_spinwait/vb/cds_spinwait1.vb#05)]  
  
## <a name="see-also"></a><span data-ttu-id="42aaf-121">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="42aaf-121">See Also</span></span>  
 <xref:System.Threading.Thread.SpinWait%2A>  
 [<span data-ttu-id="42aaf-122">İş Parçacığı Nesneleri ve Özellikleri</span><span class="sxs-lookup"><span data-stu-id="42aaf-122">Threading Objects and Features</span></span>](../../../docs/standard/threading/threading-objects-and-features.md)
