---
title: "Keşif Proxy Örneği"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 1dfa02df-15b1-4e97-9c8e-f5f2772711b0
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 515f91baf48f68ba0c1cb32e00152bf025fe7323
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/02/2017
---
# <a name="discovery-proxy-sample"></a><span data-ttu-id="8ee9e-102">Keşif Proxy Örneği</span><span class="sxs-lookup"><span data-stu-id="8ee9e-102">Discovery Proxy Sample</span></span>
<span data-ttu-id="8ee9e-103">Bu örnek, mevcut hizmetler hakkında bilgi depolamak için bir keşif proxy'si uygulaması oluşturma ve istemciler için bilgi proxy nasıl sorgulayabilir gösterir.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-103">This sample shows how to create an implementation of a Discovery proxy to store information about existing services and how clients can query that proxy for information.</span></span> <span data-ttu-id="8ee9e-104">Bu örnek üç projelerin oluşur:</span><span class="sxs-lookup"><span data-stu-id="8ee9e-104">This sample consists of three projects:</span></span>  
  
-   <span data-ttu-id="8ee9e-105">**Hizmet**: basit bir [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] kendisini keşif proxy'sine kayıtlı hesaplayıcı hizmet.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-105">**Service**: A simple [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] calculator service that registers itself with the discovery proxy.</span></span>  
  
-   <span data-ttu-id="8ee9e-106">**Keşif proxy'si**: keşif proxy hizmeti uygulamasıdır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-106">**Discovery Proxy**: The implementation of a discovery proxy service.</span></span>  
  
-   <span data-ttu-id="8ee9e-107">**İstemci**: aramak için keşif proxy'si için Hizmetleri çağıran bir WCF İstemcisi uygulaması.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-107">**Client**: A WCF client application that calls the discovery proxy to search for services.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="8ee9e-108">Gösteriler</span><span class="sxs-lookup"><span data-stu-id="8ee9e-108">Demonstrates</span></span>  
 <span data-ttu-id="8ee9e-109">Keşif proxy'si uygulama</span><span class="sxs-lookup"><span data-stu-id="8ee9e-109">Discovery proxy implementation</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8ee9e-110">Örnekler, makinenizde zaten yüklü olabilir.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-110">The samples may already be installed on your machine.</span></span> <span data-ttu-id="8ee9e-111">Devam etmeden önce aşağıdaki (varsayılan) dizin denetleyin.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-111">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="8ee9e-112">Bu dizin mevcut değilse, Git [Windows Communication Foundation (WCF) ve .NET Framework 4 için Windows Workflow Foundation (WF) örnek](http://go.microsoft.com/fwlink/?LinkId=150780) tüm indirmek için [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] ve [!INCLUDE[wf1](../../../../includes/wf1-md.md)] örnekleri.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-112">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="8ee9e-113">Bu örnek aşağıdaki dizinde bulunur.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-113">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Discovery\DiscoveryProxy`  
  
## <a name="discoveryproxy"></a><span data-ttu-id="8ee9e-114">DiscoveryProxy</span><span class="sxs-lookup"><span data-stu-id="8ee9e-114">DiscoveryProxy</span></span>  
 <span data-ttu-id="8ee9e-115">İçinde `Main` yöntemi Program.cs dosyasının örnek göstermektedir türünde bir hizmetin nasıl <xref:System.ServiceModel.Discovery.DiscoveryProxy> barındırılır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-115">In the `Main` method of the Program.cs file, the sample shows how a service of type <xref:System.ServiceModel.Discovery.DiscoveryProxy> is hosted.</span></span> <span data-ttu-id="8ee9e-116">Türünde iki uç sunan <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> ve başka tür <xref:System.ServiceModel.Discovery.AnnouncementEndpoint>.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-116">It exposes two endpoints, one of type <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> and another of type <xref:System.ServiceModel.Discovery.AnnouncementEndpoint>.</span></span> <span data-ttu-id="8ee9e-117">Uç noktaları her ikisi de TCP bir taşıma olarak kullanın.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-117">Both of the endpoints use TCP as a transport.</span></span> <span data-ttu-id="8ee9e-118"><xref:System.ServiceModel.Discovery.DiscoveryEndpoint> Tarafından belirtilen URI'sine dinleme `probeEndpointAddress` parametresi, istemciler kendi veri proxy sorgulamak için araştırma iletileri burada gönderebilir budur.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-118">The <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> is listening at the URI specified by the `probeEndpointAddress` parameter, this is where clients can send probe messages to query the proxy for its data.</span></span> <span data-ttu-id="8ee9e-119"><xref:System.ServiceModel.Discovery.AnnouncementEndpoint> Tarafından belirtilen URI'sine dinleme `announcementEndpointAddress` parametresi.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-119">The <xref:System.ServiceModel.Discovery.AnnouncementEndpoint> is listening at the URI specified by the `announcementEndpointAddress` parameter.</span></span> <span data-ttu-id="8ee9e-120">Burada proxy duyurularını dinler budur.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-120">This is where the proxy listens to for announcements.</span></span> <span data-ttu-id="8ee9e-121">Çevrimiçi duyuru alındığında proxy hizmeti, önbelleğe ekler. ve çevrimdışı duyuru alındığında, önbelleğe alınan hizmet kaldırır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-121">When an online announcement is received, the proxy adds the service to its cache and when an offline announcement is received it removes the service from its cache.</span></span>  
  
 <span data-ttu-id="8ee9e-122">Uygulamasını DiscoveryProxy.cs içerir <xref:System.ServiceModel.Discovery.DiscoveryProxy>.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-122">The DiscoveryProxy.cs contains the implementation of the <xref:System.ServiceModel.Discovery.DiscoveryProxy>.</span></span> <span data-ttu-id="8ee9e-123">Proxy öğesinden devralmalıdır <xref:System.Object> sınıfı ve uygulaması gerektirir <xref:System.Runtime.Remoting.Messaging.AsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-123">The Proxy must inherit from the <xref:System.Object> class and requires an implementation of <xref:System.Runtime.Remoting.Messaging.AsyncResult>.</span></span> <span data-ttu-id="8ee9e-124">Örnek oluşturma sırasında yeni bir Proxy oluşturur <xref:System.Collections.Generic.Dictionary%602>, hangi bilir hakkında öğeleri depolamak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-124">At instantiation, the Proxy creates a new <xref:System.Collections.Generic.Dictionary%602>, which it uses to store elements it knows about.</span></span>  
  
 <span data-ttu-id="8ee9e-125">Dosya Proxy önbellek yöntemleri ve bulma Proxy uygulaması olmak üzere iki bölgede ayrılmıştır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-125">The file is divided into two regions, Proxy Cache Methods and Discovery Proxy Implementation.</span></span> <span data-ttu-id="8ee9e-126">Proxy önbellek yöntemleri bölge güncelleştirmek için kullanılan yöntemleri içeren <xref:System.Collections.Generic.Dictionary%602>, sorguları gerçekleştirmek <xref:System.Collections.Generic.Dictionary%602>ve kullanıcı verilerini yazdırın.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-126">The Proxy Cache Methods region contains methods used to update the <xref:System.Collections.Generic.Dictionary%602>, perform queries against the <xref:System.Collections.Generic.Dictionary%602>, and print the data for users.</span></span> <span data-ttu-id="8ee9e-127">Keşif Proxy uygulaması bölge Duyurusu ve araştırma işlevleri için gereken geçersiz kılınan yöntemler içerir.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-127">The Discovery Proxy Implementation region contains the overridden methods required for the Announcement and Probe functionality.</span></span> <span data-ttu-id="8ee9e-128">Bunlar, çevrimiçi duyuru, çevrimdışı duyuru veya bir yoklama iletisi aldıktan sonra bir proxy tarafından gerçekleştirilen eylemleri tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-128">They define the actions taken by a proxy after receiving an Online Announcement, an Offline Announcement, or a Probe message.</span></span>  
  
## <a name="service"></a><span data-ttu-id="8ee9e-129">Hizmet</span><span class="sxs-lookup"><span data-stu-id="8ee9e-129">Service</span></span>  
 <span data-ttu-id="8ee9e-130">Hizmeti projesindeki Program.cs dosyasında aynı URI kendi duyuru uç noktası için keşif proxy'si olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-130">In the Program.cs file in the Service project, the same URI is used for its announcement endpoint as the discovery proxy.</span></span> <span data-ttu-id="8ee9e-131">Hizmeti uç noktası proxy almak için kullandığı sırada duyuruları göndermek için kullandığı budur.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-131">This is because service uses the endpoint for sending the announcements, while the proxy uses it for receiving them.</span></span> <span data-ttu-id="8ee9e-132">Hizmet kullandığı <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> ve bir duyuru uç nokta ekler.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-132">The service uses the <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> and adds an announcement endpoint to it.</span></span>  
  
## <a name="client"></a><span data-ttu-id="8ee9e-133">İstemci</span><span class="sxs-lookup"><span data-stu-id="8ee9e-133">Client</span></span>  
 <span data-ttu-id="8ee9e-134">İstemci projesi aynı URI, araştırma uç noktası için Proxy olarak kullanır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-134">The Client project uses the same URI for its probe endpoint as the Proxy.</span></span> <span data-ttu-id="8ee9e-135">Bu senaryoda araştırmalar da proxy'de kullanılabilir uç nokta için özel olarak tek noktaya yayın yükleniyor olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-135">This is because the probes in this scenario are also being unicast specifically to the endpoint available on the proxy.</span></span> <span data-ttu-id="8ee9e-136">İstemci bu iyi bilinen adresine bağlanır ve hizmet için sorgular.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-136">The Client connects to this well-known address and then queries it for the service.</span></span> <span data-ttu-id="8ee9e-137">Ona bağlanan hizmet bulduktan sonra.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-137">Once it has found the service it connects to it.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="8ee9e-138">Bu örneği kullanmak için</span><span class="sxs-lookup"><span data-stu-id="8ee9e-138">To use this sample</span></span>  
  
1.  <span data-ttu-id="8ee9e-139">Proje çözümde yük [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] ve projeyi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-139">Load the project solution in [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] and build the project.</span></span>  
  
2.  <span data-ttu-id="8ee9e-140">İlk [çözüm temel dizin] \DiscoveryProxy\bin\debug oluşturulan keşif proxy'si uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-140">First run the Discovery Proxy application, generated in [solution base directory]\DiscoveryProxy\bin\debug.</span></span> <span data-ttu-id="8ee9e-141">TCP duyuru uç noktaları, duyuruları göndermek için hizmet kaydınızı olması gerektiğinden keşif proxy'si önce çalıştırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-141">The Discovery Proxy must run first because TCP announcement endpoints must be up for the service to send its announcements.</span></span>  
  
3.  <span data-ttu-id="8ee9e-142">İkinci olarak, [çözüm temel dizin] \Service\bin\debug oluşturulan hizmet uygulaması çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-142">Second, run the service application generated in [solution base directory]\Service\bin\debug.</span></span> <span data-ttu-id="8ee9e-143">Başlatma, hizmet duyuru keşif proxy'si duyuru uç noktasına gönderir ve proxy'nin Önbelleği'nde kayıtlı.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-143">At start-up, the service sends an announcement to the announcement endpoint of the discovery proxy and is registered in the proxy’s cache.</span></span>  
  
4.  <span data-ttu-id="8ee9e-144">Ardından, [çözüm temel dizin] \Client\bin\debug oluşturulan istemci uygulaması çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-144">Next, run the client application, generated in [solution base directory]\Client\bin\debug.</span></span> <span data-ttu-id="8ee9e-145">İstemci proxy sorgular, hizmeti adresi alır ve ardından hizmetine bağlanır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-145">The client queries the proxy, gets the service address and then connects to the service.</span></span>  
  
5.  <span data-ttu-id="8ee9e-146">Son olarak, istemci, hizmet ve ardından proxy sonlanır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-146">Lastly, terminate the client, service and then the proxy.</span></span> <span data-ttu-id="8ee9e-147">Proxy için hizmetin çevrimdışı duyuru almaya çalıştırıyor olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-147">The proxy must be running for it to receive the service's offline announcement.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8ee9e-148">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="8ee9e-148">See Also</span></span>
