---
title: Docker uygulama için dış döngü DevOps iş akışı adımları
description: Microsoft Platformu ve araçları ile kapsayıcılı Docker uygulama yaşam döngüsü
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: 198313c260b36d3f3025606e73e220c361a7ebb8
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33579008"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="16a44-103">Docker uygulama için dış döngü DevOps iş akışı adımları</span><span class="sxs-lookup"><span data-stu-id="16a44-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="16a44-104">Şekil 5-1 bir uçtan uca gösterimi DevOps döngü dış iş akışı kapsayan adımları gösterir.</span><span class="sxs-lookup"><span data-stu-id="16a44-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="16a44-105">Şekil 5-1: DevOps dış döngü Microsoft araçları ile Docker uygulamaları için iş akışı</span><span class="sxs-lookup"><span data-stu-id="16a44-105">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="16a44-106">Şimdi, her bu adımların daha ayrıntılı inceleyelim.</span><span class="sxs-lookup"><span data-stu-id="16a44-106">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="16a44-107">1. adım: İç döngü geliştirme iş akışı</span><span class="sxs-lookup"><span data-stu-id="16a44-107">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="16a44-108">Bu adım ayrıntılı bölüm 4'te açıklandığı ancak olduðunu için İşte burada dış-döngü, hangi geliştirici CI ardışık düzen Eylemler başlatan kodu kaynak denetimi yönetim sistemine (ör. Gıt) iter şu anda başlar.</span><span class="sxs-lookup"><span data-stu-id="16a44-108">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-visual-studio-team-services-and-git"></a><span data-ttu-id="16a44-109">2. adım: Kaynak kodu denetimi tümleştirmesinin ve Visual Studio Team Services ve Git ile Yönetimi</span><span class="sxs-lookup"><span data-stu-id="16a44-109">Step 2: Source-Code Control integration and management with Visual Studio Team Services and Git</span></span>

<span data-ttu-id="16a44-110">Bu adımda, Ekipteki farklı geliştiriciler'ten gelen tüm kodunun birleştirilmiş bir sürümünü toplamak için bir sürüm denetimi sistemi olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="16a44-110">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="16a44-111">Kaynak kodu denetimi (SCC) ve kaynak kodu Yönetimi ikinci yapısı için çoğu geliştirici, Docker uygulamaları DevOps hayatta oluştururken döngüsü görünebilir olsa bile, uygulama Docker görüntülerle göndermelisiniz değil, vurgulamak için kritik öneme sahiptir doğrudan genel Docker kayıt defterine (gibi Azure kapsayıcı kayıt defteri veya Docker hub'a) Geliştirici makineden.</span><span class="sxs-lookup"><span data-stu-id="16a44-111">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="16a44-112">Tersine, serbest ve üretim ortamlarına dağıtılır için Docker görüntüleri yalnızca tümleştirilmiş kaynak kodu üzerinde genel derleme veya kaynak kod deponuza (ör. Gıt) temel CI ardışık oluşturulması gerekir.</span><span class="sxs-lookup"><span data-stu-id="16a44-112">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="16a44-113">Geliştiriciler tarafından oluşturulan yerel görüntüleri, kendi makinelerine içinde test edilirken geliştiriciler tarafından kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="16a44-113">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="16a44-114">SCC koddan etkinleştirilmiş DevOps ardışık düzen olması önemlidir nedeni budur.</span><span class="sxs-lookup"><span data-stu-id="16a44-114">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="16a44-115">Visual Studio Team Services ve Team Foundation Server Git ve Team Foundation sürüm denetimi destekler.</span><span class="sxs-lookup"><span data-stu-id="16a44-115">Visual Studio Team Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="16a44-116">Aralarında seçin ve bir uçtan uca Microsoft deneyimi için kullanın.</span><span class="sxs-lookup"><span data-stu-id="16a44-116">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="16a44-117">Ancak, ayrıca (örneğin, GitHub, şirket içi Git depoları veya alt sürüme) dış depoları kodunuzda yönetebilir ve hala kendisine bağlanıp kodu, DevOps CI ardışık düzeni için başlangıç noktası olarak alın.</span><span class="sxs-lookup"><span data-stu-id="16a44-117">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-visual-studio-team-services-and-docker"></a><span data-ttu-id="16a44-118">3. adım: Derleme, CI, tümleştirme ve Visual Studio Team Services ve Docker ile Test</span><span class="sxs-lookup"><span data-stu-id="16a44-118">Step 3: Build, CI, Integrate, and Test with Visual Studio Team Services and Docker</span></span>

<span data-ttu-id="16a44-119">CI modern yazılım testi ve teslimat için bir standart olarak ortaya çıktı.</span><span class="sxs-lookup"><span data-stu-id="16a44-119">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="16a44-120">Docker çözüm geliştirme ve işlemleri ekipleri arasında sorunları açıkça ayrılması tutar.</span><span class="sxs-lookup"><span data-stu-id="16a44-120">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="16a44-121">Docker görüntüleri girişi ne geliştirilen CI test ve üretim ortamında çalışması arasında tekrarlanabilir bir dağıtım sağlar.</span><span class="sxs-lookup"><span data-stu-id="16a44-121">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="16a44-122">Docker altyapısına Geliştirici dizüstü bilgisayarlar arasında dağıtılır ve test altyapısını kapsayıcıları ortamlar genelinde taşınabilir hale getirir.</span><span class="sxs-lookup"><span data-stu-id="16a44-122">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="16a44-123">Bu noktada, gönderilen doğru koduyla bir sürüm denetim sisteminiz varsa sonra gereken bir *yapı hizmeti* kodu çek ve genel derleme ve testleri çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="16a44-123">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="16a44-124">İç iş akışı (CI, derleme, test) Bu adım için kod deponuza (Git, vb.) yapı sunucunuz (Visual Studio Team Services), Docker altyapısına ve Docker kayıt defteri oluşan bir CI ardışık hakkında bir yapıdır.</span><span class="sxs-lookup"><span data-stu-id="16a44-124">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Visual Studio Team Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="16a44-125">Visual Studio Team Services temel olarak uygulamalarınızı geliştirmek ve CI hattınızı ayarlama ve yerleşik "yapıları" yayımlama ", sonraki adımda açıklandığı bir yapıları havuzu" için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="16a44-125">You can use Visual Studio Team Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="16a44-126">Docker dağıtımı için "son yapıları" kullanırken dağıtılacak uygulama veya hizmetlerle Docker görüntüleri içine katıştırılır.</span><span class="sxs-lookup"><span data-stu-id="16a44-126">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="16a44-127">Bu görüntüleri gönderilen veya yayımlanan bir *Docker kayıt defteri* (Azure kapsayıcı kayıt defterinde sahip olanları veya ortak bir resmi temel görüntüleri için yaygın olarak kullanılan Docker Hub kayıt gibi gibi özel bir depo).</span><span class="sxs-lookup"><span data-stu-id="16a44-127">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="16a44-128">Temel kavramlar şöyledir: CI ardışık düzen başlayacağı zamana dışı SCC deponuza Git gibi bir yürütme tarafından olacaktır.</span><span class="sxs-lookup"><span data-stu-id="16a44-128">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="16a44-129">Yürütme Şekil 5-2'de gösterildiği gibi Visual Studio Team Docker kapsayıcısı içinde derleme işi çalıştırmak ve bu iş başarıyla tamamlandıktan sonra Docker görüntü Docker kayıt defterine itme Services neden olur.</span><span class="sxs-lookup"><span data-stu-id="16a44-129">The commit will cause Visual Studio Team Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="16a44-130">Şekil 5-2: adımlarını CI'da</span><span class="sxs-lookup"><span data-stu-id="16a44-130">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="16a44-131">Docker ve Visual Studio Team Services ile temel CI iş akışı adımlar şunlardır:</span><span class="sxs-lookup"><span data-stu-id="16a44-131">Here are the basic CI workflow steps with Docker and Visual Studio Team Services:</span></span>

1.  <span data-ttu-id="16a44-132">Geliştirici (Git/Visual Studio Team Services, GitHub, vb.) bir SCC depoya bir yürütme iter.</span><span class="sxs-lookup"><span data-stu-id="16a44-132">The developer pushes a commit to an SCC repository (Git/Visual Studio Team Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="16a44-133">Visual Studio Team Services veya Git kullanıyorsanız, CI bir onay kutusu Visual Studio Team Services içinde işaretlemektir anlamına gelir, oluşturulmuştur.</span><span class="sxs-lookup"><span data-stu-id="16a44-133">If you're using Visual Studio Team Services or Git, CI is built in, which means that it is as simple as selecting a check box in Visual Studio Team Services.</span></span> <span data-ttu-id="16a44-134">Bir dış SCC (ör. GitHub) kullanıyorsanız, bir *Web kancası* Visual Studio Team Services güncelleştirmesi bildir veya itme Git/GitHub için.</span><span class="sxs-lookup"><span data-stu-id="16a44-134">If you're using an external SCC (like GitHub), a *webhook* will notify Visual Studio Team Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="16a44-135">Visual Studio Team Services görüntü ve bunun yanı sıra uygulama ve test kodu açıklayan DockerFile dahil olmak üzere SCC depo çeker.</span><span class="sxs-lookup"><span data-stu-id="16a44-135">Visual Studio Team Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="16a44-136">Visual Studio Team Services Docker görüntüsünü oluşturur ve bir yapı numarası ile etiketler.</span><span class="sxs-lookup"><span data-stu-id="16a44-136">Visual Studio Team Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="16a44-137">Visual Studio Team Services Docker kapsayıcısı içinde sağlanan Docker ana bilgisayar oluşturur ve uygun testleri çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="16a44-137">Visual Studio Team Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="16a44-138">Testleri başarılı olursa, "en derleme" olduğunu bilmesi görüntünün ilk anlamlı bir ad ile relabeled (gibi "/ 1.0.0" veya diğer bir etiketi) ve Docker kayıt (Docker hub'a, Azure kapsayıcı kayıt defteri, DTR, vb.) için gönderilen</span><span class="sxs-lookup"><span data-stu-id="16a44-138">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-visual-studio-team-services-and-the-docker-extension-for-visual-studio-team-services"></a><span data-ttu-id="16a44-139">Visual Studio Team Services için Visual Studio Team Services ve Docker uzantısı ile CI ardışık düzeni uygulama</span><span class="sxs-lookup"><span data-stu-id="16a44-139">Implementing the CI pipeline with Visual Studio Team Services and the Docker extension for Visual Studio Team Services</span></span>

<span data-ttu-id="16a44-140">[Visual Studio Team Services Docker uzantısı](https://aka.ms/vstsdockerextension) CI hattınızı ile Docker görüntüleri oluşturmak, kimliği doğrulanmış bir Docker kayıt defterine Docker görüntüleri itme, Docker görüntüsünü çalıştırın veya için tarafından sunulan diğer işlemlerini çalıştırmak için bir görev ekler Docker CLI.</span><span class="sxs-lookup"><span data-stu-id="16a44-140">The [Visual Studio Team Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="16a44-141">Ayrıca, yapı, bildirme ve multicontainer Docker uygulamaları çalıştırmak veya oluşturma Docker CLI tarafından sunulan diğer işlemleri Şekil 5-3'te gösterildiği gibi çalıştırmak için kullanabileceğiniz bir Docker Compose görev ekler.</span><span class="sxs-lookup"><span data-stu-id="16a44-141">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="16a44-142">Şekil 5-3: Docker CI ardışık düzeninde Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="16a44-142">Figure 5-3: The Docker CI pipeline in Visual Studio Team Services</span></span>

<span data-ttu-id="16a44-143">Docker uzantısı hizmet uç noktaları ve kapsayıcı veya görüntü kayıt defterleri Docker ana bilgisayarları için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="16a44-143">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="16a44-144">Görevler varsayılan olarak yerel bir Docker ana varsa (Bu şu anda özel bir Visual Studio Team Services Aracısı gerektirir); Aksi takdirde, bunlar Docker ana bilgisayar bağlantı sağlamanızı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="16a44-144">The tasks default to using a local Docker host if available (this currently requires a custom Visual Studio Team Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="16a44-145">Bir görüntü gönderilmesi gibi bir Docker kayıt defteri ile kimlik doğrulaması üzerinde bağlı Eylemler, kayıt defteri bağlantı bir Docker sağlamanızı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="16a44-145">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="16a44-146">Visual Studio Team Services Docker uzantısı Visual Studio Team Services hesabınızı aşağıdaki bileşenleri yükler:</span><span class="sxs-lookup"><span data-stu-id="16a44-146">The Visual Studio Team Services Docker extension installs the following components in your Visual Studio Team Services account:</span></span>

-   <span data-ttu-id="16a44-147">Docker kayıt defterine bağlanma için bir hizmet uç noktası</span><span class="sxs-lookup"><span data-stu-id="16a44-147">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="16a44-148">Docker kapsayıcısı ana bilgisayara bağlanmak için bir hizmet uç noktası</span><span class="sxs-lookup"><span data-stu-id="16a44-148">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="16a44-149">Aşağıdakileri yapmak için bir Docker görevi:</span><span class="sxs-lookup"><span data-stu-id="16a44-149">A Docker task to do the following:</span></span>

-   <span data-ttu-id="16a44-150">Bir görüntü oluşturma</span><span class="sxs-lookup"><span data-stu-id="16a44-150">Build an image</span></span>

-   <span data-ttu-id="16a44-151">Bir görüntüsünü veya bir havuz için bir kayıt defteri itme</span><span class="sxs-lookup"><span data-stu-id="16a44-151">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="16a44-152">Görüntüyü bir kapsayıcıda çalıştırın</span><span class="sxs-lookup"><span data-stu-id="16a44-152">Run an image in a container</span></span>

-   <span data-ttu-id="16a44-153">Docker komutunu çalıştırın</span><span class="sxs-lookup"><span data-stu-id="16a44-153">Run a Docker command</span></span>

-   <span data-ttu-id="16a44-154">Docker Compose komutu çalıştırmak için bir Docker Compose görevi</span><span class="sxs-lookup"><span data-stu-id="16a44-154">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="16a44-155">Bu Visual Studio Team Services görevleri, bir derleme Linux Docker ana bilgisayar/VM Azure'da sağlanan ve tercih edilen Docker kaydınız (Azure kapsayıcı kayıt defteri, Docker hub'a, özel Docker DTR veya başka bir Docker kayıt) Docker CI hattınızı toplayabilir bir çok tutarlı bir yol.</span><span class="sxs-lookup"><span data-stu-id="16a44-155">With these Visual Studio Team Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="16a44-156">***Gereksinimleri:***</span><span class="sxs-lookup"><span data-stu-id="16a44-156">***Requirements:***</span></span>

-   <span data-ttu-id="16a44-157">Visual Studio Team Services veya şirket içi yüklemeleri, Team Foundation Server 2015 güncelleştirme 3 veya sonraki sürümü için.</span><span class="sxs-lookup"><span data-stu-id="16a44-157">Visual Studio Team Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="16a44-158">Docker ikili dosyaları sahip bir Visual Studio Team Services Aracısı.</span><span class="sxs-lookup"><span data-stu-id="16a44-158">A Visual Studio Team Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="16a44-159">Bunlardan birini oluşturmak için kolay bir yol, Visual Studio Team Services Aracısı Docker görüntüyü temel alarak bir kapsayıcı çalıştırmak için Docker kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="16a44-159">An easy way to create one of these is to use Docker to run a container based on the Visual Studio Team Services agent Docker image.</span></span>

<span data-ttu-id="16a44-160">**Daha fazla bilgi** okuyan bir Visual Studio Team Services Docker CI birleştirme hakkında daha fazla kanal ve incelemeleri görüntülemek için aşağıdaki siteleri ziyaret edin:</span><span class="sxs-lookup"><span data-stu-id="16a44-160">**More info** To read more about assembling a Visual Studio Team Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="16a44-161">Docker kapsayıcısı Visual Studio Team Services aracısını çalıştıran: [ https://hub.docker.com/r/\ vsts/microsoft-agent /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="16a44-161">Running a Visual Studio Team Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="16a44-162">VSTS Docker uzantısı: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="16a44-162">VSTS Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="16a44-163">Visual Studio Team Services ile .NET Core Linux Docker görüntülerinizi oluşturmak: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="16a44-163">Building .NET Core Linux Docker images with Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="16a44-164">Linux tabanlı Visual Studio Team hizmeti yapı makinesi Docker desteğiyle oluşturma: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="16a44-164">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="16a44-165">Tümleştirme, test ve multicontainer Docker uygulamaları doğrula</span><span class="sxs-lookup"><span data-stu-id="16a44-165">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="16a44-166">Genellikle, çoğu Docker uygulamaları tek bir kapsayıcı yerine birden çok kapsayıcı oluşur.</span><span class="sxs-lookup"><span data-stu-id="16a44-166">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="16a44-167">Mikro hizmet başına bir kapsayıcı olurdu mikro odaklı bir uygulama buna iyi bir örnektir.</span><span class="sxs-lookup"><span data-stu-id="16a44-167">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="16a44-168">Ancak, hatta kesinlikle mikro yaklaşım desenleri uymadan, Docker uygulamanız birden çok kapsayıcı veya services oluşan, çok olası değil.</span><span class="sxs-lookup"><span data-stu-id="16a44-168">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="16a44-169">Bu nedenle, uygulama kapsayıcıları CI ardışık düzeninde oluşturduktan sonra dağıtma, tümleştirme ve tüm kapsayıcılarında tümleştirme Docker ana bilgisayarı veya bile kapsayıcılarınızı olan bir test kümesinde bir bütün olarak uygulamadan test etmeniz Dağıtılmış.</span><span class="sxs-lookup"><span data-stu-id="16a44-169">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="16a44-170">Tek bir ana bilgisayar kullanıyorsanız, docker gibi Docker komutlarını kullanabilirsiniz-oluşturmak ve sınamak ve tek bir VM'ye Docker ortamında doğrulamak için ilgili kapsayıcıları dağıtmak için oluşturun.</span><span class="sxs-lookup"><span data-stu-id="16a44-170">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="16a44-171">Ancak, DC/OS, Kubernetes veya Docker Swarm gibi bir orchestrator küme ile çalışıyorsanız, kapsayıcılarınızı farklı mekanizması veya seçili, küme/Zamanlayıcı bağlı olarak orchestrator üzerinden dağıtmak gerekir.</span><span class="sxs-lookup"><span data-stu-id="16a44-171">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="16a44-172">Docker kapsayıcıları karşı çalıştırabilirsiniz testleri çeşitli türleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="16a44-172">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="16a44-173">Docker kapsayıcıları için birim testleri</span><span class="sxs-lookup"><span data-stu-id="16a44-173">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="16a44-174">Birbiriyle ilişkili uygulamalar veya mikro test grupları</span><span class="sxs-lookup"><span data-stu-id="16a44-174">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="16a44-175">Üretim ve "canary" sürümlerde test</span><span class="sxs-lookup"><span data-stu-id="16a44-175">Test in production and "canary" releases</span></span>

<span data-ttu-id="16a44-176">Tümleştirme ve işlevsel testleri çalıştırırken bu testlerden kapsayıcıların dışında çalıştırmalısınız önemli noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="16a44-176">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="16a44-177">Testleri gerekir değil tanımlanabilir ve kapsayıcılar tam olarak üretim ortamına dağıtma olanlar gibi olmalıdır statik görüntü tabanlı olduğundan, dağıttığınız kapsayıcılara çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="16a44-177">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="16a44-178">(Küme, küme hazırlama ve üretim kümesi test) birkaç kümeleri sınama gibi daha Gelişmiş senaryolar sınarken çok uygun bir seçenek görüntüleri çeşitli kümelerde test etmek için bir kayıt defteri yayımlamaktır.</span><span class="sxs-lookup"><span data-stu-id="16a44-178">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="16a44-179">Genel, Docker kayıt defterine özel uygulama Docker görüntüsü bildirme</span><span class="sxs-lookup"><span data-stu-id="16a44-179">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="16a44-180">Docker görüntüleri doğrulandı ve sınanmış sonra etiketi ve Docker kaydınız yayımlama istersiniz.</span><span class="sxs-lookup"><span data-stu-id="16a44-180">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="16a44-181">QA ve üretim ortamlarına dağıtılacak özel testinizi (diğer adıyla "en görüntüleri") depoladığınız merkezi konum olduğundan Docker kayıt defteri bir kritik Docker uygulama yaşam döngüsü parçasıdır.</span><span class="sxs-lookup"><span data-stu-id="16a44-181">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="16a44-182">Benzer şekilde nasıl SCC deponuza (Git, vb.) içinde depolanan uygulama kodu, "gerçekte" kaynağıdır, Docker kayıt defteri, "gerçekte" ikili uygulamanızı veya BITS QA veya üretim ortamları için dağıtılması için kaynağıdır.</span><span class="sxs-lookup"><span data-stu-id="16a44-182">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="16a44-183">Genellikle, özel depoları için kendi özel görüntülerinizi ya da özel bir depo Azure kapsayıcı kayıt defteri veya Docker güvenilen kayıt defteri gibi bir şirket içi kayıt defteri veya genel bulut kayıt defteri (gibi kısıtlı erişime sahip olmasını isteyebilirsiniz Docker hub'a), kodunuzu açık kaynak değilse bu son durumda olsa da satıcının güvenlik güvenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="16a44-183">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="16a44-184">Her iki durumda da, bunu Şekil 5-4'te gösterildiği gibi oldukça benzer ve docker anında iletme komutu, sonuçta göre yöntemidir.</span><span class="sxs-lookup"><span data-stu-id="16a44-184">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="16a44-185">Şekil 5-4: Docker kayıt defterine özel resimler yayımlama</span><span class="sxs-lookup"><span data-stu-id="16a44-185">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="16a44-186">Azure kapsayıcı kayıt defteri, Amazon Web Hizmetleri kapsayıcı kayıt defteri, Google kapsayıcı kayıt defteri, Quay kayıt defteri vb. gibi bulut satıcılardan Docker kayıt defterleri, birden çok teklifleri vardır.</span><span class="sxs-lookup"><span data-stu-id="16a44-186">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="16a44-187">Visual Studio Team Services Docker uzantısını kullanarak, Şekil 5-5'te gösterildiği gibi bir hizmet görüntü kimliği doğrulanmış bir Docker kayıt defterine (gibi Azure kapsayıcı kayıt defteri), birden çok etiketlerle bir docker-compose.yml dosyası tarafından tanımlanan kümesi gönderebilir.</span><span class="sxs-lookup"><span data-stu-id="16a44-187">Using the Visual Studio Team Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="16a44-188">Şekil 5-5: Docker kayıt defteri yayımlama özel görüntüleri için Visual Studio Team Services kullanma</span><span class="sxs-lookup"><span data-stu-id="16a44-188">Figure 5-5: Using Visual Studio Team Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="16a44-189">**Daha fazla bilgi** daha fazla bilgi için Visual Studio Team Services için Docker uzantı hakkında Git <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="16a44-189">**More info** To read more about the Docker extension for Visual Studio Team Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="16a44-190">Azure kapsayıcı kayıt hakkında daha fazla bilgi için şuraya gidin <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="16a44-190">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="16a44-191">4. adım: CD dağıtma</span><span class="sxs-lookup"><span data-stu-id="16a44-191">Step 4: CD, Deploy</span></span>

<span data-ttu-id="16a44-192">Docker görüntüleri girişi ne geliştirilen CI test ve üretim ortamında çalışması ile tekrarlanabilir bir dağıtım sağlar.</span><span class="sxs-lookup"><span data-stu-id="16a44-192">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="16a44-193">Docker kayıt defterinizde (özel veya genel) yayımlanan uygulama Docker görüntüleri oluşturduktan sonra bunları sahip olabileceğiniz çeşitli ortamlar için dağıtabilirsiniz (üretim, QA, hazırlama, vb.) Visual Studio Team Services kullanarak CD düzenindeki Ardışık Düzen görevler veya Visual Studio Team Services yayın yönetimi.</span><span class="sxs-lookup"><span data-stu-id="16a44-193">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Visual Studio Team Services pipeline tasks or Visual Studio Team Services Release Management.</span></span>

<span data-ttu-id="16a44-194">Ancak, bu noktada, dağıttığınız ne tür bir Docker uygulama üzerinde bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="16a44-194">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="16a44-195">Basit bir uygulaması (açısından bir oluşturma ve dağıtma) gibi bir tek yapılı birkaç kapsayıcıları veya hizmetleri kapsayan uygulama ve dağıtılan birkaç sunucular veya VM'ler için dağıtma gibi daha karmaşık bir uygulama dağıtımı çok farklı bir mikro odaklı uygulama ölçekte özelliklerine sahip.</span><span class="sxs-lookup"><span data-stu-id="16a44-195">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="16a44-196">Bu iki senaryo aşağıdaki bölümlerde açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="16a44-196">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="16a44-197">Docker uygulamaları birden çok Docker ortamlara oluşan dağıtma</span><span class="sxs-lookup"><span data-stu-id="16a44-197">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="16a44-198">Az karmaşık senaryo ilk bakalım: Basit Docker veya ana bilgisayar (VM'ler veya sunucular) bir ortamda birden çok ortamları dağıtma (QA hazırlama ve üretim).</span><span class="sxs-lookup"><span data-stu-id="16a44-198">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="16a44-199">Bu senaryoda, dahili olarak docker CD hattınızı kullanabilirsiniz-Şekil 5-6'gösterildiği gibi kapsayıcıları veya hizmetlerin, ilgili kümesi ile Docker uygulamaları dağıtmak için (Visual Studio Team Services dağıtım görevlerinizi) oluşturun.</span><span class="sxs-lookup"><span data-stu-id="16a44-199">In this scenario, internally your CD pipeline can use docker-compose (from your Visual Studio Team Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="16a44-200">Şekil 5-6: Basit Docker ana bilgisayar ortamları kayıt defterine uygulama kapsayıcıları dağıtma</span><span class="sxs-lookup"><span data-stu-id="16a44-200">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="16a44-201">Şekil 5-7 nasıl yapı CI Visual Studio Team Services aracılığıyla QA ve test ortamları için Docker Compose'u Görev Ekle iletişim kutusuna tıklayarak bağlayabileceğiniz vurgular.</span><span class="sxs-lookup"><span data-stu-id="16a44-201">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Visual Studio Team Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="16a44-202">Ancak, hazırlık veya üretim ortamları için dağıtırken, genellikle birden çok ortamları işleme yayın yönetimi özellikleri kullanırsınız (ister QA hazırlama ve üretim).</span><span class="sxs-lookup"><span data-stu-id="16a44-202">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="16a44-203">Tek Docker ana bilgisayarlara dağıtıyorsanız, Visual Studio Team Services kullanıyor "Docker Compose" Görev (docker çağırma-başlık altında komut oluşturma).</span><span class="sxs-lookup"><span data-stu-id="16a44-203">If you're deploying to single Docker hosts, it is using the Visual Studio Team Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="16a44-204">Azure kapsayıcı hizmeti dağıtıyorsanız, aşağıdaki bölümde açıklandığı gibi Docker dağıtım görev kullanır.</span><span class="sxs-lookup"><span data-stu-id="16a44-204">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="16a44-205">Şekil 5-7: Visual Studio Team Services ardışık düzeninde bir Docker Compose görev ekleme</span><span class="sxs-lookup"><span data-stu-id="16a44-205">Figure 5-7: Adding a Docker Compose task in a Visual Studio Team Services pipeline</span></span>

<span data-ttu-id="16a44-206">Visual Studio Team Services içinde bir yayın oluşturduğunuzda, giriş yapıları kümesini alır.</span><span class="sxs-lookup"><span data-stu-id="16a44-206">When you create a release in Visual Studio Team Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="16a44-207">Bu, birden çok ortamlar genelinde yayın yaşam süresi sabit olacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="16a44-207">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="16a44-208">Kapsayıcıları aldığımızda giriş yapıları dağıtmak için bir kayıt defteri görüntülerinde tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="16a44-208">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="16a44-209">Nasıl bunlar tanımlanır bağlı olarak, bunlar aynı sürüm, "myimage:latest" docker-compose dosyasından başvurduğunuzda olan en bariz örnek süresi boyunca kalmasına garanti edilmez.</span><span class="sxs-lookup"><span data-stu-id="16a44-209">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="16a44-210">Visual Studio Team Services Docker uzantısı, belirli kayıt defteri görüntü içeren derleme yapıları oluşturma yeteneği özetleyen, ikili aynı görüntü benzersiz şekilde tanımlamak için garanti sağlar.</span><span class="sxs-lookup"><span data-stu-id="16a44-210">The Docker extension for Visual Studio Team Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="16a44-211">Ne gerçekten yayın giriş olarak kullanmak istediğiniz bunlar.</span><span class="sxs-lookup"><span data-stu-id="16a44-211">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-visual-studio-team-services-release-management"></a><span data-ttu-id="16a44-212">Sürümleri Docker ortamlar için Visual Studio Team Services sürüm Yönetimi'ni kullanarak yönetme</span><span class="sxs-lookup"><span data-stu-id="16a44-212">Managing releases to Docker environments by using Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="16a44-213">Visual Studio Team Services uzantıları yeni bir görüntü oluşturmak, onu bir Docker kayıt defterine yayımlayabilir, Linux veya Windows ana bilgisayarda çalıştırmak ve docker gibi komutları kullanın-birden çok kapsayıcı görsel all through tüm bir uygulamayı olarak dağıtmak için oluşturma Şekil 5-8'de gösterildiği gibi birden çok ortamları için hedeflenen studio Team Services yayın yönetimi yetenekleri.</span><span class="sxs-lookup"><span data-stu-id="16a44-213">Through the Visual Studio Team Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Visual Studio Team Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="16a44-214">Şekil 5-8: Visual Studio Team Services yayın yönetimi görevleri Visual Studio Team Services Docker Compose yapılandırma</span><span class="sxs-lookup"><span data-stu-id="16a44-214">Figure 5-8: Configuring Visual Studio Team Services Docker Compose tasks from Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="16a44-215">Ancak, Şekil 5-6'da gösterilen ve Şekil 5-8'de uygulanan senaryo (Basit Docker ana bilgisayarları ve sanal makineleri dağıtma ve tek kapsayıcı veya görüntü başına örnek olacaktır) oldukça basittir ve yalnızca geliştirme veya test sc için büyük olasılıkla kullanılması gerektiğini göz önünde bulundurun enarios.</span><span class="sxs-lookup"><span data-stu-id="16a44-215">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="16a44-216">Çoğu Kurumsal üretim senaryoda, yüksek kullanılabilirlik (HA) sahip istersiniz ve yönetilmesi kolay ölçeklenebilirlik birden çok düğümleri, sunucuları ve VM'ler artı "Akıllı yerine" Bu nedenle, sunucu ya da düğümü Yük Dengeleme tarafından başarısız, hizmetlerinin ve kapsayıcılar, başka bir ana bilgisayar sunucusu veya VM taşınır.</span><span class="sxs-lookup"><span data-stu-id="16a44-216">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="16a44-217">Bu durumda, kapsayıcı kümeleri, orchestrators ve zamanlayıcılar gibi daha gelişmiş teknolojiler gerekir.</span><span class="sxs-lookup"><span data-stu-id="16a44-217">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="16a44-218">Bu nedenle, bu kümeler dağıtmak için tam olarak bir sonraki bölümde açıklanan Gelişmiş senaryolar üzerinden yoludur.</span><span class="sxs-lookup"><span data-stu-id="16a44-218">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="16a44-219">Docker kümeleri (DC/OS, Kubernetes ve Docker Swarm) karmaşık Docker uygulamalarını dağıtma</span><span class="sxs-lookup"><span data-stu-id="16a44-219">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="16a44-220">Dağıtılmış uygulamalar yapısını da dağıtılmış işlem kaynaklarını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="16a44-220">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="16a44-221">HA havuza alınmış kaynaklara bağlı ve üretim ölçeği yetenekleri sağlamak için yüksek ölçeklenebilirlik sağlamak yetenekleri kümeleme olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="16a44-221">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="16a44-222">Kapsayıcıları el ile bu kümelere Docker Swarm gibi CLI aracından dağıttığınız (kullanarak gibi [docker hizmet oluşturma](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) veya bir web kullanıcı Arabirimi gibi [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) DC/OS için kümeleri, ancak gerekir Bu, yalnızca punctual dağıtımını test etmek için veya ölçeklendirme veya izleme amacıyla gibi yönetim amacıyla ayırın.</span><span class="sxs-lookup"><span data-stu-id="16a44-222">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="16a44-223">Özellikle, bir CD bakış açısı ve Visual Studio Team Services kapsayıcılı uygulamalarınıza dağıtılmış kümelerde dağıtacağınız, Visual Studio Team Services yayın Yönetimi ortamlarından özel yapılan dağıtım görevlerini çalıştırabilirsiniz Şekil 5-9'da gösterildiği gibi kapsayıcı hizmeti.</span><span class="sxs-lookup"><span data-stu-id="16a44-223">From a CD point of view, and Visual Studio Team Services specifically, you can run specially made deployment tasks from your Visual Studio Team Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="16a44-224">Şekil 5-9: kapsayıcı hizmeti dağıtılmış uygulama dağıtma</span><span class="sxs-lookup"><span data-stu-id="16a44-224">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="16a44-225">Başlangıçta, belirli kümeleri veya orchestrators dağıtırken, geleneksel belirli dağıtım betikleri ve her orchestrator (diğer bir deyişle, Mesosphere DC/OS veya Docker ve Docker'den farklı dağıtım mekanizmaları Kubernetes başına mekanizmaları kullanır Yerine swarm) daha basit ve kullanımı kolay docker-docker-compose.yml tanımı dosyasına dayalı aracı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="16a44-225">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="16a44-226">Ancak, Şekil 5-10'da gösterilen Microsoft Visual Studio Team Services Docker dağıtımı görev sayesinde artık da DC/OS için Microsoft sizin için bu "çeviri" gerçekleştirdiğinden yalnızca bilinen docker-compose.yml dosyası kullanarak dağıtabilirsiniz (gelen, DC/OS tarafından gereken diğer biçimlere docker-compose.yml dosyası).</span><span class="sxs-lookup"><span data-stu-id="16a44-226">However, thanks to the Microsoft Visual Studio Team Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="16a44-227">Şekil 5-10: Docker dağıtım görevi, ortam RM ekleme</span><span class="sxs-lookup"><span data-stu-id="16a44-227">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="16a44-228">Şekil 5-11 Docker dağıtma görevi düzenleyin ve hedef türü (Azure kapsayıcı hizmeti DC/OS, bu durumda), Docker oluşturan dosyanızı ve Docker kayıt defteri bağlantısı (örneğin, Azure kapsayıcı kayıt defteri veya Docker hub'a) belirtin nasıl gösterir.</span><span class="sxs-lookup"><span data-stu-id="16a44-228">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="16a44-229">Görevin DC/OS kümesine kapsayıcıları olarak dağıtılması için kullanıma hazır özel Docker görüntülerinizi burada alacak budur.</span><span class="sxs-lookup"><span data-stu-id="16a44-229">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="16a44-230">Şekil 5-11: Docker dağıtma görev tanımını Azure kapsayıcı hizmeti DC/OS için dağıtma</span><span class="sxs-lookup"><span data-stu-id="16a44-230">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="16a44-231">**Daha fazla bilgi** daha fazla bilgi için Visual Studio Team Services ve Docker CD kanalı hakkında aşağıdaki siteleri ziyaret edin:</span><span class="sxs-lookup"><span data-stu-id="16a44-231">**More info** To read more about the CD pipeline with Visual Studio Team Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="16a44-232">Docker ve Azure kapsayıcı hizmeti için Visual Studio Team Services uzantısı: [ https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="16a44-232">Visual Studio Team Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="16a44-233">Azure kapsayıcı hizmeti: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="16a44-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="16a44-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="16a44-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="16a44-235">5. adım: Çalıştırma ve yönetme</span><span class="sxs-lookup"><span data-stu-id="16a44-235">Step 5: Run and manage</span></span>

<span data-ttu-id="16a44-236">Çalıştıran ve uygulamaları yönetmek için Kurumsal üretim sırasında önemli bir konu ve kendisinin ve işlemleri türü nedeniyle düzeyidir ve bu alanda büyük kapsamını yanı sıra (BT işlemleri) düzeyde çalışan kişilerin, biz tüm sonraki ayrılan Bunu açıklayan için bölüm.</span><span class="sxs-lookup"><span data-stu-id="16a44-236">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="16a44-237">6. adım: İzleme ve tanılama</span><span class="sxs-lookup"><span data-stu-id="16a44-237">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="16a44-238">Bu konuda, BT işlemleri gerçekleştirir üretim sistemleri görevleri bir parçası olarak bir sonraki bölümde ayrıca ele alınmıştır; Bununla birlikte, böylece uygulamanın sürekli geliştirilmiş Bu adımda elde edilen Öngörüler Geliştirme ekibine akış gerekir vurgulamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="16a44-238">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="16a44-239">Görevleri ve işlemleri genellikle tarafından gerçekleştirilen rağmen bu açısından bakıldığında, ayrıca DevOps, parçasıdır BT.</span><span class="sxs-lookup"><span data-stu-id="16a44-239">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="16a44-240">Yalnızca izleme ve tanılama DevOps bölge içindeki yüzde 100 olduğunda izleme işlemleri ve test etme veya beta ortamlar karşı geliştirme ekibi tarafından gerçekleştirilen analytics değildir.</span><span class="sxs-lookup"><span data-stu-id="16a44-240">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="16a44-241">Bu yük testi gerçekleştirmek veya yalnızca beta veya beta Test edenlere yeni sürümler burada çalıştığınız QA ortamları izleme tarafından gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="16a44-241">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="16a44-242">[Önceki] (index.md) [sonraki] (.. /Run-Manage-Monitor-docker-Environments/index.MD)</span><span class="sxs-lookup"><span data-stu-id="16a44-242">[Previous] (index.md) [Next] (../run-manage-monitor-docker-environments/index.md)</span></span>
