---
title: "Oturumları Kullanma"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: sessions [WCF]
ms.assetid: 864ba12f-3331-4359-a359-6d6d387f1035
caps.latest.revision: "32"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: f5f6df22918dedf32738a8cb9d73af2e625923a4
ms.sourcegitcommit: c0dd436f6f8f44dc80dc43b07f6841a00b74b23f
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/19/2018
---
# <a name="using-sessions"></a><span data-ttu-id="19e76-102">Oturumları Kullanma</span><span class="sxs-lookup"><span data-stu-id="19e76-102">Using Sessions</span></span>
<span data-ttu-id="19e76-103">İçinde [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] uygulamalar, bir *oturum* iletileri bir grup konuşma karşılık gelen.</span><span class="sxs-lookup"><span data-stu-id="19e76-103">In [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] applications, a *session* correlates a group of messages into a conversation.</span></span> [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="19e76-104">oturumları bulunan oturum nesnesi farklı [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] uygulamaları, farklı davranışlar desteklemek ve farklı şekillerde denetlenir.</span><span class="sxs-lookup"><span data-stu-id="19e76-104"> sessions are different than the session object available in [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] applications, support different behaviors, and are controlled in different ways.</span></span> <span data-ttu-id="19e76-105">Bu konu içinde oturumları etkinleştir özellikleri açıklar [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] uygulamaları ve bunların nasıl kullanılacağını.</span><span class="sxs-lookup"><span data-stu-id="19e76-105">This topic describes the features that sessions enable in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications and how to use them.</span></span>  
  
## <a name="sessions-in-windows-communication-foundation-applications"></a><span data-ttu-id="19e76-106">Windows Communication Foundation uygulamaları oturumlarında</span><span class="sxs-lookup"><span data-stu-id="19e76-106">Sessions in Windows Communication Foundation Applications</span></span>  
 <span data-ttu-id="19e76-107">Bir oturum gerektiren bir hizmet sözleşmesini belirtir, bu sözleşme tüm çağrıları (çağrıları destekleyen başka bir deyişle, temel alınan ileti alışverişlerinde) aynı konuşmada parçası olmalıdır belirtme.</span><span class="sxs-lookup"><span data-stu-id="19e76-107">When a service contract specifies that it requires a session, that contract is specifying that all calls (that is, the underlying message exchanges that support the calls) must be part of the same conversation.</span></span> <span data-ttu-id="19e76-108">Bir sözleşme oturumları sağlar ancak bir gerektirmez, istemcilerin bağlanabileceği ya da bir oturumu belirtirse veya bir oturumu değil.</span><span class="sxs-lookup"><span data-stu-id="19e76-108">If a contract specifies that it allows sessions but does not require one, clients can connect and either establish a session or not establish a session.</span></span> <span data-ttu-id="19e76-109">Sona ererse ve bir ileti bir özel durum aynı kanal gönderilir.</span><span class="sxs-lookup"><span data-stu-id="19e76-109">If the session ends and a message is sent through the same channel an exception is thrown.</span></span>  
  
 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="19e76-110">oturumları aşağıdaki ana kavramsal özelliklere sahiptir:</span><span class="sxs-lookup"><span data-stu-id="19e76-110"> sessions have the following main conceptual features:</span></span>  
  
-   <span data-ttu-id="19e76-111">Bunlar açıkça başlatılan ve çağıran uygulamada (WCF istemcisi) tarafından sonlandırıldı.</span><span class="sxs-lookup"><span data-stu-id="19e76-111">They are explicitly initiated and terminated by the calling application (the WCF client).</span></span>  
  
-   <span data-ttu-id="19e76-112">Bir oturumda teslim edilen ileti bunlar alındığı sırada işlenir.</span><span class="sxs-lookup"><span data-stu-id="19e76-112">Messages delivered during a session are processed in the order in which they are received.</span></span>  
  
-   <span data-ttu-id="19e76-113">Oturumları iletileri bir grup konuşma bağıntısını.</span><span class="sxs-lookup"><span data-stu-id="19e76-113">Sessions correlate a group of messages into a conversation.</span></span> <span data-ttu-id="19e76-114">Bağıntı farklı türlerde mümkündür.</span><span class="sxs-lookup"><span data-stu-id="19e76-114">Different types of correlation are possible.</span></span> <span data-ttu-id="19e76-115">Örneğin, bir oturum tabanlı kanalı başka bir oturum tabanlı kanal ileti gövdesinde paylaşılan bir etiket dayanan iletilerin ilişkilendirilebilir bir paylaşılan ağ bağlantısı üzerinde tabanlı iletileri ilişkilendirilebilir.</span><span class="sxs-lookup"><span data-stu-id="19e76-115">For instance, one session-based channel may correlate messages based on a shared network connection while another session-based channel may correlate messages based on a shared tag in the message body.</span></span> <span data-ttu-id="19e76-116">Oturumdan elde edilebilir özelliklerine bağıntı yapısına bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="19e76-116">The features that can be derived from the session depend on the nature of the correlation.</span></span>  
  
-   <span data-ttu-id="19e76-117">İle ilişkili bir genel veri depo bir [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] oturumu.</span><span class="sxs-lookup"><span data-stu-id="19e76-117">There is no general data store associated with a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] session.</span></span>  
  
 <span data-ttu-id="19e76-118">Hakkında bilginiz varsa <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> sınıfını [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] uygulamaları ve işlevselliği sağlar, bu tür bir oturum arasındaki aşağıdaki farkları görebilirsiniz ve [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] oturumları:</span><span class="sxs-lookup"><span data-stu-id="19e76-118">If you are familiar with the <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> class in [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] applications and the functionality it provides, you might notice the following differences between that kind of session and [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] sessions:</span></span>  
  
-   [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]<span data-ttu-id="19e76-119">oturumları her zaman sunucu-başlatılır.</span><span class="sxs-lookup"><span data-stu-id="19e76-119"> sessions are always server-initiated.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]<span data-ttu-id="19e76-120">oturumları örtük olarak sıralanmamış.</span><span class="sxs-lookup"><span data-stu-id="19e76-120"> sessions are implicitly unordered.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]<span data-ttu-id="19e76-121">oturumları istekler genelinde bir genel veri depolama mekanizması sağlar.</span><span class="sxs-lookup"><span data-stu-id="19e76-121"> sessions provide a general data storage mechanism across requests.</span></span>  
  
 <span data-ttu-id="19e76-122">Bu konuda açıklanmaktadır:</span><span class="sxs-lookup"><span data-stu-id="19e76-122">This topic describes:</span></span>  
  
-   <span data-ttu-id="19e76-123">Hizmet modeli katmanını oturum tabanlı bağlamalar kullanılarak varsayılan yürütme davranış.</span><span class="sxs-lookup"><span data-stu-id="19e76-123">The default execution behavior when using session-based bindings in the service model layer.</span></span>  
  
-   <span data-ttu-id="19e76-124">Tür özellikleri [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] oturum tabanlı, sistem tarafından sağlanan bağlamaları sağlar.</span><span class="sxs-lookup"><span data-stu-id="19e76-124">The types of features that the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] session-based, system-provided bindings provide.</span></span>  
  
-   <span data-ttu-id="19e76-125">Bir oturum gereksinim bildiren bir sözleşme oluşturma</span><span class="sxs-lookup"><span data-stu-id="19e76-125">How to create a contract that declares a session requirement.</span></span>  
  
-   <span data-ttu-id="19e76-126">Nasıl anlamak ve oluşturma ve oturum sonlandırma ve hizmet örneği oturumuna ilişki denetler.</span><span class="sxs-lookup"><span data-stu-id="19e76-126">How to understand and control the creation and termination of the session and the relationship of the session to the service instance.</span></span>  
  
## <a name="default-execution-behavior-using-sessions"></a><span data-ttu-id="19e76-127">Varsayılan yürütme davranışı kullanarak oturumları</span><span class="sxs-lookup"><span data-stu-id="19e76-127">Default Execution Behavior Using Sessions</span></span>  
 <span data-ttu-id="19e76-128">Oturum başlatma girişiminde bir bağlama adlı bir *oturum tabanlı* bağlama.</span><span class="sxs-lookup"><span data-stu-id="19e76-128">A binding that attempts to initiate a session is called a *session-based* binding.</span></span> <span data-ttu-id="19e76-129">Hizmet sözleşmeleri belirtin bunlar gerektiren, izin veya oturum tabanlı bağlamalar ayarlayarak Reddet <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> birine hizmet sözleşme arabirimi (veya sınıfı) özelliği <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> numaralandırma değerleri.</span><span class="sxs-lookup"><span data-stu-id="19e76-129">Service contracts specify that they require, permit, or refuse session-based bindings by setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on the service contract interface (or class) to one of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration values.</span></span> <span data-ttu-id="19e76-130">Varsayılan olarak, bu özellik değeri <xref:System.ServiceModel.SessionMode.Allowed>, olması durumunda bir istemci başka bir deyişle, oturum tabanlı bir bağlamayla kullanan bir [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] hizmet uygulaması, hizmet oluşturur ve sağlanan oturumu kullanır.</span><span class="sxs-lookup"><span data-stu-id="19e76-130">By default, the value of this property is <xref:System.ServiceModel.SessionMode.Allowed>, which means that if a client uses a session-based binding with a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service implementation, the service establishes and uses the session provided.</span></span>  
  
 <span data-ttu-id="19e76-131">Zaman bir [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] hizmet istemci oturumu kabul eder, aşağıdaki özellikler varsayılan olarak etkindir:</span><span class="sxs-lookup"><span data-stu-id="19e76-131">When a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service accepts a client session, the following features are enabled by default:</span></span>  
  
1.  <span data-ttu-id="19e76-132">Tüm çağrılar arasında bir [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci nesnesi aynı hizmet örneği tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="19e76-132">All calls between a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object are handled by the same service instance.</span></span>  
  
2.  <span data-ttu-id="19e76-133">Farklı oturum tabanlı bağlamalar ek özellikler sağlar.</span><span class="sxs-lookup"><span data-stu-id="19e76-133">Different session-based bindings provide additional features.</span></span>  
  
## <a name="system-provided-session-types"></a><span data-ttu-id="19e76-134">Sistem tarafından sağlanan oturum türleri</span><span class="sxs-lookup"><span data-stu-id="19e76-134">System-Provided Session Types</span></span>  
 <span data-ttu-id="19e76-135">Bir hizmet örneği varsayılan ilişki belirli bir oturum ile oturum tabanlı bir bağlama destekler.</span><span class="sxs-lookup"><span data-stu-id="19e76-135">A session-based binding supports the default association of a service instance with a particular session.</span></span> <span data-ttu-id="19e76-136">Ancak, farklı oturum tabanlı bağlamalar daha önce açıklanan oturum tabanlı örneklemesini denetimini etkinleştirme yanı sıra farklı özellikleri destekler.</span><span class="sxs-lookup"><span data-stu-id="19e76-136">However, different session-based bindings support different features in addition to enabling the session-based instancing control previously described.</span></span>  
  
 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="19e76-137">oturum tabanlı uygulama davranışına aşağıdaki türlerini sağlar:</span><span class="sxs-lookup"><span data-stu-id="19e76-137"> provides the following types of session-based application behavior:</span></span>  
  
-   <span data-ttu-id="19e76-138"><xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType> , İletişimin her iki ucuna anlaşılan belirli güvenli bir konuşma güvenlik tabanlı oturumları destekler.</span><span class="sxs-lookup"><span data-stu-id="19e76-138">The <xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType> supports security-based sessions, in which both ends of communication have agreed upon a specific secure conversation.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="19e76-139">[Hizmetleri güvenli hale getirme](../../../docs/framework/wcf/securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="19e76-139"> [Securing Services](../../../docs/framework/wcf/securing-services.md).</span></span> <span data-ttu-id="19e76-140">Örneğin, <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> bağlama, destek güvenlik oturumları ve güvenilir oturumlar için varsayılan olarak içeren şifreleyen ve iletileri dijital imzalar bir güvenli oturum kullanır.</span><span class="sxs-lookup"><span data-stu-id="19e76-140">For example, the <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> binding, which contains support for both security sessions and reliable sessions, by default uses only a secure session that encrypts and digitally signs messages.</span></span>  
  
-   <span data-ttu-id="19e76-141"><xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType> Bağlama tüm iletileri yuva düzeyinde bağlantısı tarafından bağıntılı olan emin olmak için oturumları TCP tabanlı destekler.</span><span class="sxs-lookup"><span data-stu-id="19e76-141">The <xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType> binding supports TCP/IP-based sessions to ensure that all messages are correlated by the connection at the socket level.</span></span>  
  
-   <span data-ttu-id="19e76-142"><xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType> WS-ReliableMessaging belirtimini uygular, öğe iletileri yapılandırılabilecek sırayla ve tam olarak iletileri alınan iletileri bile giderken olduktan sonra teslim edilecek güvenli oturumlar için destek sağlar Konuşma sırasında birden çok düğüm arasında.</span><span class="sxs-lookup"><span data-stu-id="19e76-142">The <xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType> element, which implements the WS-ReliableMessaging specification, provides support for reliable sessions in which messages can be configured to be delivered in order and exactly once, ensuring messages are received even when messages travel across multiple nodes during the conversation.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="19e76-143">[Güvenilir oturumlar](../../../docs/framework/wcf/feature-details/reliable-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="19e76-143"> [Reliable Sessions](../../../docs/framework/wcf/feature-details/reliable-sessions.md).</span></span>  
  
-   <span data-ttu-id="19e76-144"><xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType> Bağlama MSMQ veri birimi oturumları sağlar.</span><span class="sxs-lookup"><span data-stu-id="19e76-144">The <xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType> binding provides MSMQ datagram sessions.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="19e76-145">[Wcf'de kuyruklar](../../../docs/framework/wcf/feature-details/queues-in-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="19e76-145"> [Queues in WCF](../../../docs/framework/wcf/feature-details/queues-in-wcf.md).</span></span>  
  
 <span data-ttu-id="19e76-146">Ayar <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> özelliği olan gerektiren yalnızca sözleşme gerektirir, oturum türünü belirtmiyor.</span><span class="sxs-lookup"><span data-stu-id="19e76-146">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not specify the type of session the contract requires, only that it requires one.</span></span>  
  
## <a name="creating-a-contract-that-requires-a-session"></a><span data-ttu-id="19e76-147">Bir oturum gerektiren bir sözleşme oluşturma</span><span class="sxs-lookup"><span data-stu-id="19e76-147">Creating a Contract That Requires a Session</span></span>  
 <span data-ttu-id="19e76-148">Hizmet sözleşmesi bildirir işlemler grubunun tüm aynı oturum içinde yürütülmelidir olduğunu ve iletilerin sırayla teslim gerekir oturum durumları gerektiren bir sözleşme oluşturma.</span><span class="sxs-lookup"><span data-stu-id="19e76-148">Creating a contract that requires a session states that the group of operations that the service contract declares must all be executed within the same session and that messages must be delivered in order.</span></span> <span data-ttu-id="19e76-149">Bir hizmet sözleşmesini gerektiriyor oturum desteği düzeyini onaylanacak ayarlamak <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> hizmet sözleşme arabirimi veya değerini sınıfına özellik <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> belirtmek için numaralandırma olup olmadığını Sözleşme:</span><span class="sxs-lookup"><span data-stu-id="19e76-149">To assert the level of session support that a service contract requires, set the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on your service contract interface or class to the value of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration to specify whether the contract:</span></span>  
  
-   <span data-ttu-id="19e76-150">Bir oturum gerektirir.</span><span class="sxs-lookup"><span data-stu-id="19e76-150">Requires a session.</span></span>  
  
-   <span data-ttu-id="19e76-151">Oturum oluşturmak bir istemcinin sağlar.</span><span class="sxs-lookup"><span data-stu-id="19e76-151">Allows a client to establish a session.</span></span>  
  
-   <span data-ttu-id="19e76-152">Bir oturum açmasına izin vermez.</span><span class="sxs-lookup"><span data-stu-id="19e76-152">Prohibits a session.</span></span>  
  
 <span data-ttu-id="19e76-153">Ayar <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> özelliği, ancak belirtmiyor tür oturum tabanlı davranışı sözleşme gerektirir.</span><span class="sxs-lookup"><span data-stu-id="19e76-153">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not, however, specify the type of session-based behavior the contract requires.</span></span> <span data-ttu-id="19e76-154">Bildirir [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] çalışma zamanında onaylamak için hizmet yapar, yok veya oturum oluşturmak için (hangi iletişim kanalı oluşturur) bağlama yapılandırılan hizmet uygularken.</span><span class="sxs-lookup"><span data-stu-id="19e76-154">It instructs [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] to confirm at runtime that the configured binding (which creates the communication channel) for the service does, does not, or can establish a session when implementing a service.</span></span> <span data-ttu-id="19e76-155">Yeniden bağlama oturum tabanlı davranış herhangi bir türde seçtiği bu gereksinimi karşılayan bir — güvenlik, Aktarım, güvenilir veya bileşimi.</span><span class="sxs-lookup"><span data-stu-id="19e76-155">Again, the binding can satisfy that requirement with any type of session-based behavior it chooses—security, transport, reliable, or some combination.</span></span> <span data-ttu-id="19e76-156">Tam davranışı bağlıdır <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> seçili değer.</span><span class="sxs-lookup"><span data-stu-id="19e76-156">The exact behavior depends on the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> value selected.</span></span> <span data-ttu-id="19e76-157">Hizmetinin yapılandırılan bağlama değerine uyuşmadığı <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>, bir özel durum.</span><span class="sxs-lookup"><span data-stu-id="19e76-157">If the configured binding of the service does not conform to the value of <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>, an exception is thrown.</span></span> <span data-ttu-id="19e76-158">Bağlamalar ve Destek oturumları oturum tabanlı olduğu söylenir oluşturdukları kanalları.</span><span class="sxs-lookup"><span data-stu-id="19e76-158">Bindings and the channels they create that support sessions are said to be session-based.</span></span>  
  
 <span data-ttu-id="19e76-159">Aşağıdaki hizmet sözleşmesini belirleyen tüm işlemleri `ICalculatorSession` oturum içinde değiştirilen gerekir.</span><span class="sxs-lookup"><span data-stu-id="19e76-159">The following service contract specifies that all operations in the `ICalculatorSession` must be exchanged within a session.</span></span> <span data-ttu-id="19e76-160">İşlemlerin hiçbiri arayana dışında bir değer döndürür `Equals` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="19e76-160">None of the operations returns a value to the caller except the `Equals` method.</span></span> <span data-ttu-id="19e76-161">Ancak, `Equals` yöntem parametre almayan ve bu nedenle, yalnızca sıfır olmayan bir değer, veri zaten geçirilmiş diğer işlemlerin bir oturumu içinde geri dönebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="19e76-161">However, the `Equals` method takes no parameters and, therefore, can only return a non-zero value inside a session in which data has already been passed to the other operations.</span></span> <span data-ttu-id="19e76-162">Bu sözleşme düzgün çalışması için bir oturum gerektirir.</span><span class="sxs-lookup"><span data-stu-id="19e76-162">This contract requires a session to function properly.</span></span> <span data-ttu-id="19e76-163">Belirli bir istemciyle ilişkili bir oturumu, bu istemcinin gönderdiği önceki hangi verilerin bilerek hiçbir şekilde hizmet örneği vardır.</span><span class="sxs-lookup"><span data-stu-id="19e76-163">Without a session associated with a specific client, the service instance has no way of knowing what previous data this client has sent.</span></span>  
  
 [!code-csharp[S_Service_Session#1](../../../samples/snippets/csharp/VS_Snippets_CFX/s_service_session/cs/service.cs#1)]
 [!code-vb[S_Service_Session#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_service_session/vb/service.vb#1)]  
  
 <span data-ttu-id="19e76-164">Bir hizmet bir oturum izin veriyorsa, ardından oturumu oluşturulur ve istemci başlatıyorsa kullanılan; Aksi takdirde, hiçbir oturum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="19e76-164">If a service allows a session, then a session is established and used if the client initiates one; otherwise, no session is established.</span></span>  
  
## <a name="sessions-and-service-instances"></a><span data-ttu-id="19e76-165">Oturumlar ve hizmet örneği</span><span class="sxs-lookup"><span data-stu-id="19e76-165">Sessions and Service Instances</span></span>  
 <span data-ttu-id="19e76-166">Davranışı depolamasına varsayılan kullanırsanız [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], tüm çağrıları arasındaki bir [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci nesnesi aynı hizmet örneği tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="19e76-166">If you use the default instancing behavior in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], all calls between a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object are handled by the same service instance.</span></span> <span data-ttu-id="19e76-167">Bu nedenle, uygulama düzeyinde bir oturumun uygulama davranışına benzer bir yerel arama davranıştır etkinleştirme olarak düşünebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="19e76-167">Therefore, at the application level, you can think of a session as enabling application behavior similar to local call behavior.</span></span> <span data-ttu-id="19e76-168">Örneğin, yerel bir nesne oluştururken:</span><span class="sxs-lookup"><span data-stu-id="19e76-168">For example, when you create a local object:</span></span>  
  
-   <span data-ttu-id="19e76-169">Bir oluşturucu çağrılır.</span><span class="sxs-lookup"><span data-stu-id="19e76-169">A constructor is called.</span></span>  
  
-   <span data-ttu-id="19e76-170">Yapılan tüm sonraki çağrılar [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci nesne başvurusu, aynı nesne örneği tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="19e76-170">All subsequent calls made to the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object reference are processed by the same object instance.</span></span>  
  
-   <span data-ttu-id="19e76-171">Nesne başvurusu bozulduğunda bir yıkıcı adı verilir.</span><span class="sxs-lookup"><span data-stu-id="19e76-171">A destructor is called when the object reference is destroyed.</span></span>  
  
 <span data-ttu-id="19e76-172">Varsayılan hizmet örneği davranışı kullanılan sürece oturumları istemcileri ve Hizmetleri arasındaki benzer bir davranış sağlar.</span><span class="sxs-lookup"><span data-stu-id="19e76-172">Sessions enable a similar behavior between clients and services as long as the default service instance behavior is used.</span></span> <span data-ttu-id="19e76-173">Başlatma veya oturum ayarlayarak sonlandırma olarak bir hizmet sözleşmesini gerektirir ya da oturumları destekler, bir veya daha fazla sözleşme işlemleri işaretlenebilir <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> ve <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> özellikleri.</span><span class="sxs-lookup"><span data-stu-id="19e76-173">If a service contract requires or supports sessions, one or more contract operations can be marked as initiating or terminating a session by setting the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> and <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> properties.</span></span>  
  
 <span data-ttu-id="19e76-174">*İşlemleri başlatma* yeni bir oturum ilk işlem olarak çağrılmalıdır dosyalardır.</span><span class="sxs-lookup"><span data-stu-id="19e76-174">*Initiating operations* are those that must be called as the first operation of a new session.</span></span> <span data-ttu-id="19e76-175">Olmayan başlatma işlemlerini en az bir başlatma işlemi yalnızca çağrıldıktan sonra çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="19e76-175">Non-initiating operations can be called only after at least one initiating operation has been called.</span></span> <span data-ttu-id="19e76-176">Bu nedenle oturum Oluşturucusu bir tür, hizmet örneği başına uygun istemcilerden giriş olabilmesi için tasarlanmış başlatma işlemlerini bildirerek hizmetiniz için oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="19e76-176">You can therefore create a kind of session constructor for your service by declaring initiating operations designed to take input from clients appropriate to the beginning of the service instance.</span></span> <span data-ttu-id="19e76-177">(Oturum, ancak ve hizmet nesnesi ile ilişkili bir durumda.)</span><span class="sxs-lookup"><span data-stu-id="19e76-177">(The state is associated with the session, however, and not the service object.)</span></span>  
  
 <span data-ttu-id="19e76-178">*İşlemleri sonlandırma*, buna karşılık, en son iletinin varolan bir oturumda çağrılmalıdır izinlerdir.</span><span class="sxs-lookup"><span data-stu-id="19e76-178">*Terminating operations*, conversely, are those that must be called as the last message in an existing session.</span></span> <span data-ttu-id="19e76-179">Varsayılan durumda, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] ile hizmet ilişkili oturum kapatıldıktan sonra hizmet nesnesi ve onun bağlamı geri dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="19e76-179">In the default case, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] recycles the service object and its context after the session with which the service was associated is closed.</span></span> <span data-ttu-id="19e76-180">Bu nedenle, yıkıcı bir tür hizmet örneği sonuna uygun bir işlemi gerçekleştirmek için tasarlanmış sonlandırma işlemleri bildirerek oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="19e76-180">You can, therefore, create a kind of destructor by declaring terminating operations designed to perform a function appropriate to the end of the service instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="19e76-181">Varsayılan davranışı yerel oluşturucular ve yıkıcı bir benzerlik taşıyan rağmen bu yalnızca bir benzerlik gösterir.</span><span class="sxs-lookup"><span data-stu-id="19e76-181">Although the default behavior bears a resemblance to local constructors and destructors, it is only a resemblance.</span></span> <span data-ttu-id="19e76-182">Tüm [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] hizmet işlemi, bir başlatma veya sonlandırma işlemi veya her ikisini aynı anda olabilir.</span><span class="sxs-lookup"><span data-stu-id="19e76-182">Any [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service operation can be an initiating or terminating operation, or both at the same time.</span></span> <span data-ttu-id="19e76-183">Ayrıca, varsayılan durumda işlemleri başlatma kez herhangi bir sayıda herhangi bir sırada çağrılabilir; oturum kurulmuş ve hizmet örneği ömrü açıkça kontrol sürece bir örneği ile ilişkili sonra hiçbir ek oturum oluşturulur (düzenleme tarafından <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> nesnesi).</span><span class="sxs-lookup"><span data-stu-id="19e76-183">In addition, in the default case, initiating operations can be called any number of times in any order; no additional sessions are created once the session is established and associated with an instance unless you explicitly control the lifetime of the service instance (by manipulating the <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> object).</span></span> <span data-ttu-id="19e76-184">Son olarak, oturum ve hizmet nesnesi ile ilişkili bir durumda.</span><span class="sxs-lookup"><span data-stu-id="19e76-184">Finally, the state is associated with the session and not the service object.</span></span>  
  
 <span data-ttu-id="19e76-185">Örneğin, `ICalculatorSession` yukarıdaki örnekte kullanılan sözleşme gerekli [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci nesnesi ilk çağrıda `Clear` işlemi başka bir işlem ve, önce bu oturumla [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci nesnesi gerekir çağırdığında sonlandırmak `Equals` işlemi.</span><span class="sxs-lookup"><span data-stu-id="19e76-185">For example, the `ICalculatorSession` contract used in the preceding example requires that the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object first call the `Clear` operation prior to any other operation and that the session with this [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object should terminate when it calls the `Equals` operation.</span></span> <span data-ttu-id="19e76-186">Aşağıdaki kod örneği, bu gereksinimlerini uygulayan bir sözleşme gösterir.</span><span class="sxs-lookup"><span data-stu-id="19e76-186">The following code example shows a contract that enforces these requirements.</span></span> <span data-ttu-id="19e76-187">`Clear`bir oturum başlatmak için önce çağrılmalıdır ve oturum ne zaman sona ereceğini `Equals` olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="19e76-187">`Clear` must be called first to initiate a session, and that session ends when `Equals` is called.</span></span>  
  
 [!code-csharp[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/csharp/VS_Snippets_CFX/sca.isinitiatingisterminating/cs/service.cs#1)]
 [!code-vb[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/sca.isinitiatingisterminating/vb/service.vb#1)]  
  
 <span data-ttu-id="19e76-188">Hizmetleri oturumları istemcileriyle başlatmayın.</span><span class="sxs-lookup"><span data-stu-id="19e76-188">Services do not start sessions with clients.</span></span> <span data-ttu-id="19e76-189">İçinde [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci uygulamaları, doğrudan bir ilişki var. oturum tabanlı kanal ömrü ve oturum ömrü arasında.</span><span class="sxs-lookup"><span data-stu-id="19e76-189">In [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client applications, a direct relationship exists between the lifetime of the session-based channel and the lifetime of the session itself.</span></span> <span data-ttu-id="19e76-190">Bu nedenle, istemciler yeni oturum tabanlı kanallar oluşturarak yeni oturumlar oluşturabilirsiniz ve oturum tabanlı kanalları düzgün biçimde kapatarak oturumlarına kesmeden.</span><span class="sxs-lookup"><span data-stu-id="19e76-190">As such, clients create new sessions by creating new session-based channels and tear down existing sessions by closing session-based channels gracefully.</span></span> <span data-ttu-id="19e76-191">Bir istemci, aşağıdakilerden birini çağırarak, bir hizmet uç noktası ile bir oturumu başlatır:</span><span class="sxs-lookup"><span data-stu-id="19e76-191">A client starts a session with a service endpoint by calling one of the following:</span></span>  
  
-   <span data-ttu-id="19e76-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType>bir çağrı tarafından döndürülen kanalda <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="19e76-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="19e76-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType>üzerinde [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] tarafından oluşturulan istemci nesnesi [ServiceModel meta veri yardımcı Programracı (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="19e76-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType> on the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span>  
  
-   <span data-ttu-id="19e76-194">İki tür üzerinde bir başlatma işlemi [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci nesnesi (varsayılan olarak, tüm işlemleri başlatma).</span><span class="sxs-lookup"><span data-stu-id="19e76-194">An initiating operation on either type of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object (by default, all operations are initiating).</span></span> <span data-ttu-id="19e76-195">İlk işlemi çağrıldığında [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci nesnesi otomatik olarak kanal açar ve bir oturum başlatır.</span><span class="sxs-lookup"><span data-stu-id="19e76-195">When the first operation is called, the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="19e76-196">Genellikle bir istemci, aşağıdakilerden birini çağırarak hizmet uç noktası ile bir oturumu sonlandırır:</span><span class="sxs-lookup"><span data-stu-id="19e76-196">Typically a client ends a session with a service endpoint by calling one of the following:</span></span>  
  
-   <span data-ttu-id="19e76-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>bir çağrı tarafından döndürülen kanalda <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="19e76-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="19e76-198"><xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>üzerinde [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] Svcutil.exe tarafından oluşturulan istemci nesnesi.</span><span class="sxs-lookup"><span data-stu-id="19e76-198"><xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType> on the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object generated by Svcutil.exe.</span></span>  
  
-   <span data-ttu-id="19e76-199">İki tür üzerinde bir sonlandırma işlemi [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci nesnesi (varsayılan olarak, hiçbir işlem sonlandırma; sözleşme sonlandırma işlemi açıkça belirtmeniz gerekir).</span><span class="sxs-lookup"><span data-stu-id="19e76-199">A terminating operation on either type of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object (by default, no operations are terminating; the contract must explicitly specify a terminating operation).</span></span> <span data-ttu-id="19e76-200">İlk işlemi çağrıldığında [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] istemci nesnesi otomatik olarak kanal açar ve bir oturum başlatır.</span><span class="sxs-lookup"><span data-stu-id="19e76-200">When the first operation is called, the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="19e76-201">Örnekler için bkz: [nasıl yapılır: bir hizmet olduğundan gerektirir oturumları oluşturmak](../../../docs/framework/wcf/feature-details/how-to-create-a-service-that-requires-sessions.md) yanı sıra [varsayılan hizmet davranışı](../../../docs/framework/wcf/samples/default-service-behavior.md) ve [Instancing](../../../docs/framework/wcf/samples/instancing.md) örnekleri.</span><span class="sxs-lookup"><span data-stu-id="19e76-201">For examples, see [How to: Create a Service That Requires Sessions](../../../docs/framework/wcf/feature-details/how-to-create-a-service-that-requires-sessions.md) as well as the [Default Service Behavior](../../../docs/framework/wcf/samples/default-service-behavior.md) and [Instancing](../../../docs/framework/wcf/samples/instancing.md) samples.</span></span>  
  
 [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="19e76-202">istemcileri ve oturumlar bkz [bir WCF istemcisi kullanarak hizmetlere erişme](../../../docs/framework/wcf/feature-details/accessing-services-using-a-client.md).</span><span class="sxs-lookup"><span data-stu-id="19e76-202"> clients and sessions, see [Accessing Services Using a WCF Client](../../../docs/framework/wcf/feature-details/accessing-services-using-a-client.md).</span></span>  
  
## <a name="sessions-interact-with-instancecontext-settings"></a><span data-ttu-id="19e76-203">Oturumları InstanceContext ayarlarla etkileşim</span><span class="sxs-lookup"><span data-stu-id="19e76-203">Sessions Interact with InstanceContext Settings</span></span>  
 <span data-ttu-id="19e76-204">Arasında bir etkileşim yoktur <xref:System.ServiceModel.SessionMode> bir sözleşme numaralandırmada ve <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> kanalları belirli hizmet nesneleri arasındaki ilişki denetimleri özelliği.</span><span class="sxs-lookup"><span data-stu-id="19e76-204">There is an interaction between the <xref:System.ServiceModel.SessionMode> enumeration in a contract and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property, which controls the association between channels and specific service objects.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="19e76-205">[Oturumlar, örnek oluşturma ve eşzamanlılık](../../../docs/framework/wcf/feature-details/sessions-instancing-and-concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="19e76-205"> [Sessions, Instancing, and Concurrency](../../../docs/framework/wcf/feature-details/sessions-instancing-and-concurrency.md).</span></span>  
  
### <a name="sharing-instancecontext-objects"></a><span data-ttu-id="19e76-206">InstanceContext nesneleri paylaşımı</span><span class="sxs-lookup"><span data-stu-id="19e76-206">Sharing InstanceContext Objects</span></span>  
 <span data-ttu-id="19e76-207">Hangi oturum tabanlı kanalı kontrol edebilirsiniz veya çağrı, kendisiyle ilişkilendirilmiş <xref:System.ServiceModel.InstanceContext> kendiniz bu ilişkiyi gerçekleştirerek nesnesi.</span><span class="sxs-lookup"><span data-stu-id="19e76-207">You can also control which session-based channel or call is associated with which <xref:System.ServiceModel.InstanceContext> object by performing that association yourself.</span></span> <span data-ttu-id="19e76-208">Tam bir örnek için bkz: [InstanceContextSharing](http://msdn.microsoft.com/library/4a6a46d7-b7d7-4bb5-a0dd-03ffa3cbc230).</span><span class="sxs-lookup"><span data-stu-id="19e76-208">For a complete example, see [InstanceContextSharing](http://msdn.microsoft.com/library/4a6a46d7-b7d7-4bb5-a0dd-03ffa3cbc230).</span></span>  
  
## <a name="sessions-and-streaming"></a><span data-ttu-id="19e76-209">Oturumlar ve akış</span><span class="sxs-lookup"><span data-stu-id="19e76-209">Sessions and Streaming</span></span>  
 <span data-ttu-id="19e76-210">Büyük miktarda veri aktarmak için akış aktarım modunda olduğunda [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] arabelleğe alma ve tamamen bellekte iletileri işleme varsayılan davranışı için uygun bir alternatiftir.</span><span class="sxs-lookup"><span data-stu-id="19e76-210">When you have a large amount of data to transfer, the streaming transfer mode in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] is a feasible alternative to the default behavior of buffering and processing messages in memory in their entirety.</span></span> <span data-ttu-id="19e76-211">Oturum tabanlı bir bağlamayla çağrıları akış sırasında beklenmeyen bir davranış elde edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="19e76-211">You may get unexpected behavior when streaming calls with a session-based binding.</span></span> <span data-ttu-id="19e76-212">Tüm akış çağrılar kullanılan bağlama oturumları kullanacak şekilde yapılandırılmış olsa bile, oturumlar desteklemeyen bir tek kanalı (veri birimi kanalı) yapılır.</span><span class="sxs-lookup"><span data-stu-id="19e76-212">All streaming calls are made through a single channel (the datagram channel) that does not support sessions even if the binding being used is configured to use sessions.</span></span> <span data-ttu-id="19e76-213">Birden çok istemci aynı hizmet nesnesi akış çağrıları üzerinden oturum tabanlı bağlama yapmak ve hizmet nesnenin eşzamanlılık modu tek ve onun örnek bağlamı modu ayarlanırsa ayarlamak `PerSession`, tüm çağrıları veri birimi kanalı ve bunu gitmeniz gerekir yalnızca bir çağrı aynı anda işlenir.</span><span class="sxs-lookup"><span data-stu-id="19e76-213">If multiple clients make streaming calls to the same service object over a session-based binding, and the service object's concurrency mode is set to single and its instance context mode is set to `PerSession`, all calls must go through the datagram channel and so only one call is processed at a time.</span></span> <span data-ttu-id="19e76-214">Bir veya daha fazla istemciler daha sonra zaman aşımına olabilir. Her iki hizmet nesnenin ayarlayarak bu sorunun geçici çözümü `InstanceContextMode` için `PerCall` veya birden çok eşzamanlılık.</span><span class="sxs-lookup"><span data-stu-id="19e76-214">One or more clients may then time out. You can work around this issue by either setting the service object's `InstanceContextMode` to `PerCall` or Concurrency to multiple.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="19e76-215">Kullanılabilir tek "oturumu" olduğundan MaxConcurrentSessions bu durumda herhangi bir etkisi yoktur.</span><span class="sxs-lookup"><span data-stu-id="19e76-215">MaxConcurrentSessions have no effect in this case because there is only one "session" available.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="19e76-216">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="19e76-216">See Also</span></span>  
 <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>  
 <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A>
