---
title: Zaman uyumsuz dönüş türleri (C#)
ms.date: 05/29/2017
ms.assetid: ddb2539c-c898-48c1-ad92-245e4a996df8
ms.openlocfilehash: 07aefcf3149b2210e3dc97713647fa3a0133a535
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33334190"
---
# <a name="async-return-types-c"></a><span data-ttu-id="91eff-102">Zaman uyumsuz dönüş türleri (C#)</span><span class="sxs-lookup"><span data-stu-id="91eff-102">Async Return Types (C#)</span></span>
<span data-ttu-id="91eff-103">Zaman uyumsuz yöntemleri dönüş türleri aşağıdakilere sahip olabilir:</span><span class="sxs-lookup"><span data-stu-id="91eff-103">Async methods can have the following return types:</span></span>

- <span data-ttu-id="91eff-104"><xref:System.Threading.Tasks.Task%601>, bir değer döndüren bir zaman uyumsuz yöntem için.</span><span class="sxs-lookup"><span data-stu-id="91eff-104"><xref:System.Threading.Tasks.Task%601>, for an async method that returns a value.</span></span> 
 
-  <span data-ttu-id="91eff-105"><xref:System.Threading.Tasks.Task>, bir işlemi gerçekleştirir, ancak hiçbir değer döndürmeyen bir zaman uyumsuz yöntem için.</span><span class="sxs-lookup"><span data-stu-id="91eff-105"><xref:System.Threading.Tasks.Task>, for an async method that performs an operation but returns no value.</span></span>

- <span data-ttu-id="91eff-106">`void`, bir olay işleyici.</span><span class="sxs-lookup"><span data-stu-id="91eff-106">`void`, for an event handler.</span></span> 

- <span data-ttu-id="91eff-107">C# 7.0, bir erişilebilir olan herhangi bir tür'ile başlayan `GetAwaiter` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="91eff-107">Starting with C# 7.0, any type that has an accessible `GetAwaiter` method.</span></span> <span data-ttu-id="91eff-108">Tarafından döndürülen nesne `GetAwaiter` yöntemi uygulanmalı <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="91eff-108">The object returned by the `GetAwaiter` method must implement the <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType> interface.</span></span>
  
<span data-ttu-id="91eff-109">Zaman uyumsuz yöntemleri hakkında daha fazla bilgi için bkz: [zaman uyumsuz programlama ile async ve await (C#)](../../../../csharp/programming-guide/concepts/async/index.md).</span><span class="sxs-lookup"><span data-stu-id="91eff-109">For more information about async methods, see [Asynchronous Programming with async and await (C#)](../../../../csharp/programming-guide/concepts/async/index.md).</span></span>  
  
<span data-ttu-id="91eff-110">Her bir dönüş türü aşağıdaki bölümlerde biri incelenir ve konunun sonunda üç kullanan tam bir örnek bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="91eff-110">Each return type is examined in one of the following sections, and you can find a full example that uses all three types at the end of the topic.</span></span>  
  
##  <a name="BKMK_TaskTReturnType"></a> <span data-ttu-id="91eff-111">Task(T) dönüş türü</span><span class="sxs-lookup"><span data-stu-id="91eff-111">Task(T) Return Type</span></span>  
<span data-ttu-id="91eff-112"><xref:System.Threading.Tasks.Task%601> Dönüş türü içeren bir zaman uyumsuz yöntem için kullanılan bir [dönmek](../../../../csharp/language-reference/keywords/return.md) işlenenin türü vardır (C#) deyimi `TResult`.</span><span class="sxs-lookup"><span data-stu-id="91eff-112">The <xref:System.Threading.Tasks.Task%601> return type is used for an async method that contains a [return](../../../../csharp/language-reference/keywords/return.md) (C#) statement in which the operand has type `TResult`.</span></span>  
  
<span data-ttu-id="91eff-113">Aşağıdaki örnekte, `GetLeisureHours` async yöntemi içeren bir `return` deyimi bir tamsayı döndürür.</span><span class="sxs-lookup"><span data-stu-id="91eff-113">In the following example, the `GetLeisureHours` async method contains a `return` statement that returns an integer.</span></span> <span data-ttu-id="91eff-114">Bu nedenle, yöntem bildirimi dönüş türünü belirtmeniz gerekir `Task<int>`.</span><span class="sxs-lookup"><span data-stu-id="91eff-114">Therefore, the method declaration must specify a return type of `Task<int>`.</span></span>  <span data-ttu-id="91eff-115"><xref:System.Threading.Tasks.Task.FromResult%2A> Async yöntemi bir dize döndürür. bir işlem için bir yer tutucudur.</span><span class="sxs-lookup"><span data-stu-id="91eff-115">The <xref:System.Threading.Tasks.Task.FromResult%2A> async method is a placeholder for an operation that returns a string.</span></span>
  
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns1.cs)]

<span data-ttu-id="91eff-116">Zaman `GetLeisureHours` bekleme deyimde içinde çağrılır `ShowTodaysInfo` yöntemi, bekleme ifade tamsayı değerini alır (değerini `leisureHours`) tarafından döndürülen görev depolanan `GetLeisureHours` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="91eff-116">When `GetLeisureHours` is called from within an await expression in the `ShowTodaysInfo` method, the await expression retrieves the integer value (the value of `leisureHours`) that's stored in the task returned by the `GetLeisureHours` method.</span></span> <span data-ttu-id="91eff-117">Hakkında daha fazla bilgi için ifadeleri await, bkz: [await](../../../../csharp/language-reference/keywords/await.md).</span><span class="sxs-lookup"><span data-stu-id="91eff-117">For more information about await expressions, see [await](../../../../csharp/language-reference/keywords/await.md).</span></span>  
  
<span data-ttu-id="91eff-118">Bu çağrı ayırarak nasıl gerçekleştiğini daha iyi anlamak `GetLeisureHours` uygulamadan `await`, aşağıdaki kodda gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="91eff-118">You can better understand how this happens by separating the call to `GetLeisureHours` from the application of `await`, as the following code shows.</span></span> <span data-ttu-id="91eff-119">Yöntemine yapılan bir çağrı `TaskOfT_MethodAsync` hemen beklemenin döndürür değil bir `Task<int>`yöntemi bildiriminden beklediğiniz gibi.</span><span class="sxs-lookup"><span data-stu-id="91eff-119">A call to method `TaskOfT_MethodAsync` that isn't immediately awaited returns a `Task<int>`, as you would expect from the declaration of the method.</span></span> <span data-ttu-id="91eff-120">Görev atandığı `integerTask` örnekte değişken.</span><span class="sxs-lookup"><span data-stu-id="91eff-120">The task is assigned to the `integerTask` variable in the example.</span></span> <span data-ttu-id="91eff-121">Çünkü `integerTask` olan bir <xref:System.Threading.Tasks.Task%601>, içerdiği bir <xref:System.Threading.Tasks.Task%601.Result> türündeki özelliği `TResult`.</span><span class="sxs-lookup"><span data-stu-id="91eff-121">Because `integerTask` is a <xref:System.Threading.Tasks.Task%601>, it contains a <xref:System.Threading.Tasks.Task%601.Result> property of type `TResult`.</span></span> <span data-ttu-id="91eff-122">Bu durumda, TResult bir tamsayı türünü temsil eder.</span><span class="sxs-lookup"><span data-stu-id="91eff-122">In this case, TResult represents an integer type.</span></span> <span data-ttu-id="91eff-123">Zaman `await` uygulanan `integerTask`, içeriğini bekleme ifadeyi hesaplar <xref:System.Threading.Tasks.Task%601.Result%2A> özelliği `integerTask`.</span><span class="sxs-lookup"><span data-stu-id="91eff-123">When `await` is applied to `integerTask`, the await expression evaluates to the contents of the <xref:System.Threading.Tasks.Task%601.Result%2A> property of `integerTask`.</span></span> <span data-ttu-id="91eff-124">Değer atandığı `result2` değişkeni.</span><span class="sxs-lookup"><span data-stu-id="91eff-124">The value is assigned to the `result2` variable.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="91eff-125"><xref:System.Threading.Tasks.Task%601.Result%2A> Özelliği engelleyen bir özelliğidir.</span><span class="sxs-lookup"><span data-stu-id="91eff-125">The <xref:System.Threading.Tasks.Task%601.Result%2A> property is a blocking property.</span></span> <span data-ttu-id="91eff-126">Görevini bitmeden önce erişmeyi denerseniz, şu anda etkin olan iş parçacığının görevi tamamlandıktan ve değeri kullanılabilir kadar engellendi.</span><span class="sxs-lookup"><span data-stu-id="91eff-126">If you try to access it before its task is finished, the thread that's currently active is blocked until the task completes and the value is available.</span></span> <span data-ttu-id="91eff-127">Çoğu durumda, kullanarak değeri erişmelidir `await` özelliği doğrudan erişimini yerine.</span><span class="sxs-lookup"><span data-stu-id="91eff-127">In most cases, you should access the value by using `await` instead of accessing the property directly.</span></span> <br/> <span data-ttu-id="91eff-128">Önceki örnekte değerini alınan <xref:System.Threading.Tasks.Task%601.Result%2A> ana iş parçacığı engellemek için özellik böylece `ShowTodaysInfo` yöntemi uygulama sona ermeden önce yürütme son.</span><span class="sxs-lookup"><span data-stu-id="91eff-128">The previous example retrieved the value of the <xref:System.Threading.Tasks.Task%601.Result%2A> property to block the main thread so that the `ShowTodaysInfo` method could finish execution before the application ended.</span></span>  

[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns1a.cs#1)]
  
##  <a name="BKMK_TaskReturnType"></a> <span data-ttu-id="91eff-129">Görev dönüş türü</span><span class="sxs-lookup"><span data-stu-id="91eff-129">Task Return Type</span></span>  
<span data-ttu-id="91eff-130">İçermeyen zaman uyumsuz yöntemleri bir `return` deyimi ya da içeren bir `return` işleneni genellikle döndürmez deyim dönüş türüne sahip <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="91eff-130">Async methods that don't contain a `return` statement or that contain a `return` statement that doesn't return an operand usually have a return type of <xref:System.Threading.Tasks.Task>.</span></span> <span data-ttu-id="91eff-131">Bu tür yöntemleri döndürür `void` zaman uyumlu olarak çalıştırırsanız.</span><span class="sxs-lookup"><span data-stu-id="91eff-131">Such methods return `void` if they run synchronously.</span></span> <span data-ttu-id="91eff-132">Kullanırsanız, bir <xref:System.Threading.Tasks.Task> dönüş türü için bir zaman uyumsuz yöntemi, bir arama yöntemi kullanabilirsiniz bir `await` çağrılan zaman uyumsuz yöntem tamamlanana kadar arayanın tamamlama askıya almak için işleci.</span><span class="sxs-lookup"><span data-stu-id="91eff-132">If you use a <xref:System.Threading.Tasks.Task> return type for an async method, a calling method can use an `await` operator to suspend the caller's completion until the called async method has finished.</span></span>  
  
<span data-ttu-id="91eff-133">Aşağıdaki örnekte, `WaitAndApologize` zaman uyumsuz yöntem içermiyor bir `return` yöntemi döndürecek şekilde deyimi bir <xref:System.Threading.Tasks.Task> nesnesi.</span><span class="sxs-lookup"><span data-stu-id="91eff-133">In the following example, the `WaitAndApologize` async method doesn't contain a `return` statement, so the method returns a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="91eff-134">Böylece `WaitAndApologize` beklemenin için.</span><span class="sxs-lookup"><span data-stu-id="91eff-134">This enables `WaitAndApologize` to be awaited.</span></span> <span data-ttu-id="91eff-135">Unutmayın <xref:System.Threading.Tasks.Task> türü içermez bir `Result` özelliği bir dönüş değerine sahip olduğundan.</span><span class="sxs-lookup"><span data-stu-id="91eff-135">Note that the <xref:System.Threading.Tasks.Task> type doesn't include a `Result` property because it has no return value.</span></span>  

[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns2.cs)]  
  
<span data-ttu-id="91eff-136">`WaitAndApologize` zaman uyumlu bir geçersiz kılma döndürme yöntemi için arama deyimi benzer bir bekleme deyim yerine bir bekleme deyimi kullanarak beklemenin.</span><span class="sxs-lookup"><span data-stu-id="91eff-136">`WaitAndApologize` is awaited by using an await statement instead of an await expression, similar to the calling statement for a synchronous void-returning method.</span></span> <span data-ttu-id="91eff-137">Bekleme operatörün uygulama bu durumda bir değeri oluşturmuyor.</span><span class="sxs-lookup"><span data-stu-id="91eff-137">The application of an await operator in this case doesn't produce a value.</span></span>  
  
<span data-ttu-id="91eff-138">Önceki gibi <xref:System.Threading.Tasks.Task%601> örnek, çağrısı ayırabilirsiniz `Task_MethodAsync` aşağıdaki kod bir bekleme işleç uygulamadan gösterir.</span><span class="sxs-lookup"><span data-stu-id="91eff-138">As in the previous <xref:System.Threading.Tasks.Task%601> example, you can separate the call to `Task_MethodAsync` from the application of an await operator, as the following code shows.</span></span> <span data-ttu-id="91eff-139">Ancak, unutmayın bir `Task` sahip olmayan bir `Result` özelliği ve bekleme operatörün uygulandığında herhangi bir değer üretilir bir `Task`.</span><span class="sxs-lookup"><span data-stu-id="91eff-139">However, remember that a `Task` doesn't have a `Result` property, and that no value is produced when an await operator is applied to a `Task`.</span></span>  
  
<span data-ttu-id="91eff-140">Aşağıdaki kod arama ayıran `WaitAndApologize` yöntemi döndürür görev bekleyen gelen yöntemi.</span><span class="sxs-lookup"><span data-stu-id="91eff-140">The following code separates calling the `WaitAndApologize` method from awaiting the task that the method returns.</span></span>  
 
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns2a.cs#1)]  
 
##  <a name="BKMK_VoidReturnType"></a> <span data-ttu-id="91eff-141">Dönüş türü void</span><span class="sxs-lookup"><span data-stu-id="91eff-141">Void return type</span></span>  
<span data-ttu-id="91eff-142">Kullandığınız `void` dönüş türü gerektiren zaman uyumsuz olay işleyicileri ile bir `void` dönüş türü.</span><span class="sxs-lookup"><span data-stu-id="91eff-142">You use the `void` return type in asynchronous event handlers, which require a `void` return type.</span></span> <span data-ttu-id="91eff-143">Olay dışında yöntemleri için işleyicileri olmayan bir değer, iade bir <xref:System.Threading.Tasks.Task> bunun yerine, bir zaman uyumsuz yöntem döndürdüğünden `void` beklemenin olamaz.</span><span class="sxs-lookup"><span data-stu-id="91eff-143">For methods other than event handlers don't return a value, you should return a <xref:System.Threading.Tasks.Task> instead, because an async method that returns `void` can't be awaited.</span></span> <span data-ttu-id="91eff-144">Böyle bir yöntemin herhangi bir çağırıcı tamamlanması için çağrılan zaman uyumsuz yöntemi beklemeden tamamlanıncaya kadar devam edebilirsiniz ve çağıranın tüm değerleri veya zaman uyumsuz yöntem oluşturur özel durumlar bağımsız olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="91eff-144">Any caller of such a method must be able to continue to completion without waiting for the called async method to finish, and the caller must be independent of any values or exceptions that the async method generates.</span></span>  
  
<span data-ttu-id="91eff-145">Bir geçersiz kılma döndüren zaman uyumsuz yöntem arayan yönteminden oluşturulan özel durumları yakalamak olamaz ve böyle işlenmeyen özel durumlar, uygulamanızın başarısız olmasına yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="91eff-145">The caller of a void-returning async method can't catch exceptions that are thrown from the method, and such unhandled exceptions are likely to cause your application to fail.</span></span> <span data-ttu-id="91eff-146">Bir özel durum döndüren bir zaman uyumsuz yöntem oluşursa bir <xref:System.Threading.Tasks.Task> veya <xref:System.Threading.Tasks.Task%601>, özel durum döndürülen görevde depolanır ve görev beklemenin zaman işlenemezse.</span><span class="sxs-lookup"><span data-stu-id="91eff-146">If an exception occurs in an async method that returns a <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601>, the exception is stored in the returned task and is rethrown when the task is awaited.</span></span> <span data-ttu-id="91eff-147">Bu nedenle, bir özel durum oluşturmak üzere herhangi bir zaman uyumsuz yöntemi dönüş türüne sahip olduğundan emin olun <xref:System.Threading.Tasks.Task> veya <xref:System.Threading.Tasks.Task%601> ve yöntemine yönelik çağrılar beklemenin.</span><span class="sxs-lookup"><span data-stu-id="91eff-147">Therefore, make sure that any async method that can produce an exception has a return type of <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> and that calls to the method are awaited.</span></span>  
  
<span data-ttu-id="91eff-148">Zaman uyumsuz yöntemleri özel durumlarını yakalama hakkında daha fazla bilgi için bkz: [try-catch](../../../../csharp/language-reference/keywords/try-catch.md) .</span><span class="sxs-lookup"><span data-stu-id="91eff-148">For more information about how to catch exceptions in async methods, see [try-catch](../../../../csharp/language-reference/keywords/try-catch.md) .</span></span>  
  
<span data-ttu-id="91eff-149">Aşağıdaki eample zaman uyumsuz olay işleyicisi tanımlar.</span><span class="sxs-lookup"><span data-stu-id="91eff-149">The following eample defines an async event handler.</span></span>  
 
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-returns3.cs)]  
 
## <a name="generalized-async-return-types-and-valuetaskt"></a><span data-ttu-id="91eff-150">Genelleştirilmiş zaman uyumsuz dönüş türleri ve ValueTask<T></span><span class="sxs-lookup"><span data-stu-id="91eff-150">Generalized async return types and ValueTask<T></span></span>

<span data-ttu-id="91eff-151">C# 7. 0'dan başlayarak, bir zaman uyumsuz yöntem bir erişilebilir olan herhangi bir tür döndürebilir `GetAwaiter` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="91eff-151">Starting with C# 7.0, an async method can return any type that has an accessible `GetAwaiter` method.</span></span>
 
<span data-ttu-id="91eff-152">Çünkü <xref:System.Threading.Tasks.Task> ve <xref:System.Threading.Tasks.Task%601> olan başvuru türleri, bellek ayırma performans açısından kritik yollarda özellikle ayırmaları sıkı Döngülerde oluştuğunda olumsuz performansı etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="91eff-152">Because <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> are reference types, memory allocation in performance-critical paths, particularly when allocations occur in tight loops, can adversely affect performance.</span></span> <span data-ttu-id="91eff-153">Destek için ek bellek ayırmaları önlemek için bir başvuru türü yerine basit değer türü döndürebilir genelleştirilmiş dönüş türleri anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="91eff-153">Support for generalized return types means that you can return a lightweight value type instead of a reference type to avoid additional memory allocations.</span></span> 

<span data-ttu-id="91eff-154">.NET sağlar <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> yapısı genelleştirilmiş bir görev döndürme değeri hafif uyarlamasını olarak.</span><span class="sxs-lookup"><span data-stu-id="91eff-154">.NET provides the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> structure as a light-weight implementation of a generalized task-returning value.</span></span> <span data-ttu-id="91eff-155">Kullanılacak <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> türü eklemelisiniz `System.Threading.Tasks.Extensions` NuGet paketini projenize.</span><span class="sxs-lookup"><span data-stu-id="91eff-155">To use the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> type, you must add the `System.Threading.Tasks.Extensions` NuGet package to your project.</span></span> <span data-ttu-id="91eff-156">Aşağıdaki örnek kullanır <xref:System.Threading.Tasks.ValueTask%601> iki bölmek değerini almak için yapısı yapar.</span><span class="sxs-lookup"><span data-stu-id="91eff-156">The following example uses the <xref:System.Threading.Tasks.ValueTask%601> structure to retrieve the value of two dice rolls.</span></span> 
  
[!code-csharp[return-value](../../../../../samples/snippets/csharp/programming-guide/async/async-valuetask.cs)]

## <a name="see-also"></a><span data-ttu-id="91eff-157">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="91eff-157">See also</span></span>  
<xref:System.Threading.Tasks.Task.FromResult%2A>   
<span data-ttu-id="91eff-158">[İzlenecek yol: async kullanarak Web'e erişme ve await (C#)](../../../../csharp/programming-guide/concepts/async/walkthrough-accessing-the-web-by-using-async-and-await.md) </span><span class="sxs-lookup"><span data-stu-id="91eff-158">[Walkthrough: Accessing the Web by Using async and await (C#)](../../../../csharp/programming-guide/concepts/async/walkthrough-accessing-the-web-by-using-async-and-await.md) </span></span>  
<span data-ttu-id="91eff-159">[Denetim akışı zaman uyumsuz programlarda (C#)](../../../../csharp/programming-guide/concepts/async/control-flow-in-async-programs.md) </span><span class="sxs-lookup"><span data-stu-id="91eff-159">[Control Flow in Async Programs (C#)](../../../../csharp/programming-guide/concepts/async/control-flow-in-async-programs.md) </span></span>  
<span data-ttu-id="91eff-160">[Zaman uyumsuz](../../../../csharp/language-reference/keywords/async.md) </span><span class="sxs-lookup"><span data-stu-id="91eff-160">[async](../../../../csharp/language-reference/keywords/async.md) </span></span>  
[<span data-ttu-id="91eff-161">await</span><span class="sxs-lookup"><span data-stu-id="91eff-161">await</span></span>](../../../../csharp/language-reference/keywords/await.md)
