---
title: Dağıtılmış işlemler
ms.date: 03/30/2017
ms.assetid: 718b257c-bcb2-408e-b004-a7b0adb1c176
ms.openlocfilehash: 7792a719a73ca5183d57bcecc5d346153d824570
ms.sourcegitcommit: 11f11ca6cefe555972b3a5c99729d1a7523d8f50
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/03/2018
ms.locfileid: "32766094"
---
# <a name="distributed-transactions"></a><span data-ttu-id="8686a-102">Dağıtılmış işlemler</span><span class="sxs-lookup"><span data-stu-id="8686a-102">Distributed Transactions</span></span>
<span data-ttu-id="8686a-103">Bir işlem (kaydetme) başarılı ya da başka şeylerin bir birim olarak (iptal için) başarısız ilgili görevleri kümesidir.</span><span class="sxs-lookup"><span data-stu-id="8686a-103">A transaction is a set of related tasks that either succeeds (commit) or fails (abort) as a unit, among other things.</span></span> <span data-ttu-id="8686a-104">A *dağıtılmış işlem* birkaç kaynakları etkileyen bir işlem.</span><span class="sxs-lookup"><span data-stu-id="8686a-104">A *distributed transaction* is a transaction that affects several resources.</span></span> <span data-ttu-id="8686a-105">Yürütme dağıtılmış işlem için veri herhangi bir değişiklik kalıcı olacağını tüm katılımcılar güvence altına almalıdır.</span><span class="sxs-lookup"><span data-stu-id="8686a-105">For a distributed transaction to commit, all participants must guarantee that any change to data will be permanent.</span></span> <span data-ttu-id="8686a-106">Sistem kilitlenme veya diğer öngörülemeyen olayları rağmen değişiklikleri kalıcı gerekir.</span><span class="sxs-lookup"><span data-stu-id="8686a-106">Changes must persist despite system crashes or other unforeseen events.</span></span> <span data-ttu-id="8686a-107">Bu garantisi yapmak tek bir katılımcı başarısız olursa, tüm işlem başarısız olur ve işlem kapsamı içinde veri değişiklikler geri alınır.</span><span class="sxs-lookup"><span data-stu-id="8686a-107">If even a single participant fails to make this guarantee, the entire transaction fails, and any changes to data within the scope of the transaction are rolled back.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8686a-108">Yürütün veya bir işlem, geri çalışırsanız, bir özel durum bir `DataReader` işlem etkinken başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="8686a-108">An exception will be thrown if you attempt to commit or roll back a transaction if a `DataReader` is started while the transaction is active.</span></span>  
  
## <a name="working-with-systemtransactions"></a><span data-ttu-id="8686a-109">System.Transactions ile çalışma</span><span class="sxs-lookup"><span data-stu-id="8686a-109">Working with System.Transactions</span></span>  
 <span data-ttu-id="8686a-110">.NET Framework'teki dağıtılmış işlemler API'si aracılığıyla yönetilen <xref:System.Transactions> ad alanı.</span><span class="sxs-lookup"><span data-stu-id="8686a-110">In the .NET Framework, distributed transactions are managed through the API in the <xref:System.Transactions> namespace.</span></span> <span data-ttu-id="8686a-111"><xref:System.Transactions> API işlem İzleyicisi Microsoft Dağıtılmış İşlem Düzenleyicisi (MS DTC) gibi birden çok kalıcı kaynak yöneticileri söz konusu olduğunda işleme dağıtılmış işlem temsilci.</span><span class="sxs-lookup"><span data-stu-id="8686a-111">The <xref:System.Transactions> API will delegate distributed transaction handling to a transaction monitor such as the Microsoft Distributed Transaction Coordinator (MS DTC) when multiple persistent resource managers are involved.</span></span> <span data-ttu-id="8686a-112">Daha fazla bilgi için bkz: [işlem Temelleri](../../../../docs/framework/data/transactions/transaction-fundamentals.md).</span><span class="sxs-lookup"><span data-stu-id="8686a-112">For more information, see [Transaction Fundamentals](../../../../docs/framework/data/transactions/transaction-fundamentals.md).</span></span>  
  
 <span data-ttu-id="8686a-113">ADO.NET 2.0 kullanarak bir dağıtılmış işlem kaydetme desteği sunmuştur `EnlistTransaction` bağlantıda kaydeder yöntemi bir <xref:System.Transactions.Transaction> örneği.</span><span class="sxs-lookup"><span data-stu-id="8686a-113">ADO.NET 2.0 introduced support for enlisting in a distributed transaction using the `EnlistTransaction` method, which enlists a connection in a <xref:System.Transactions.Transaction> instance.</span></span> <span data-ttu-id="8686a-114">ADO.NET önceki sürümlerde kullanarak dağıtılmış işlemlerin açık kaydı gerçekleştirilmedi `EnlistDistributedTransaction` yöntemi bir bağlantıda listeleme bağlantısının bir <xref:System.EnterpriseServices.ITransaction> örneği, hangi için geriye dönük uyumluluk desteklenir.</span><span class="sxs-lookup"><span data-stu-id="8686a-114">In previous versions of ADO.NET, explicit enlistment in distributed transactions was performed using the `EnlistDistributedTransaction` method of a connection to enlist a connection in a <xref:System.EnterpriseServices.ITransaction> instance, which is supported for backwards compatibility.</span></span> <span data-ttu-id="8686a-115">Kurumsal Hizmetler işlemleri hakkında daha fazla bilgi için bkz: [Kurumsal Hizmetler ve COM + işlemleri ile birlikte çalışabilirlik](../../../../docs/framework/data/transactions/interoperability-with-enterprise-services-and-com-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="8686a-115">For more information on Enterprise Services transactions, see [Interoperability with Enterprise Services and COM+ Transactions](../../../../docs/framework/data/transactions/interoperability-with-enterprise-services-and-com-transactions.md).</span></span>  
  
 <span data-ttu-id="8686a-116">Kullanırken bir <xref:System.Transactions> işlem .NET Framework sağlayıcısı ile SQL Server için bir basit bir SQL Server veritabanında <xref:System.Transactions.Transaction> otomatik olarak kullanılacaktır.</span><span class="sxs-lookup"><span data-stu-id="8686a-116">When using a <xref:System.Transactions> transaction with the .NET Framework Provider for SQL Server against a SQL Server database, a lightweight <xref:System.Transactions.Transaction> will automatically be used.</span></span> <span data-ttu-id="8686a-117">İşlem, tam bir dağıtılmış işlem gerektiği düzenli olarak sonra yükseltilebilir.</span><span class="sxs-lookup"><span data-stu-id="8686a-117">The transaction can then be promoted to a full distributed transaction on an as-needed basis.</span></span> <span data-ttu-id="8686a-118">Daha fazla bilgi için bkz: [SQL Server ile System.Transactions tümleştirme](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="8686a-118">For more information, see [System.Transactions Integration with SQL Server](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8686a-119">Bir Oracle veritabanına aynı anda katılabilmesi için dağıtılmış işlemlerin sayısı 10'a varsayılan olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="8686a-119">The maximum number of distributed transactions that an Oracle database can participate in at one time is set to 10 by default.</span></span> <span data-ttu-id="8686a-120">Bir Oracle veritabanına bağlandığında sonra 10 işlem özel durum oluşur.</span><span class="sxs-lookup"><span data-stu-id="8686a-120">After the 10th transaction when connected to an Oracle database, an exception is thrown.</span></span> <span data-ttu-id="8686a-121">Oracle desteklemiyor `DDL` dağıtılmış işlem içinde.</span><span class="sxs-lookup"><span data-stu-id="8686a-121">Oracle does not support `DDL` inside of a distributed transaction.</span></span>  
  
## <a name="automatically-enlisting-in-a-distributed-transaction"></a><span data-ttu-id="8686a-122">Otomatik olarak bir dağıtılmış işlemde kaydetme</span><span class="sxs-lookup"><span data-stu-id="8686a-122">Automatically Enlisting in a Distributed Transaction</span></span>  
 <span data-ttu-id="8686a-123">Otomatik kaydı varsayılan (ve tercih edilen) ADO.NET bağlantıları ile tümleştirme şekilde `System.Transactions`.</span><span class="sxs-lookup"><span data-stu-id="8686a-123">Automatic enlistment is the default (and preferred) way of integrating ADO.NET connections with `System.Transactions`.</span></span> <span data-ttu-id="8686a-124">Bir işlem etkin olmadığını belirten bir bağlantı nesnesi otomatik olarak varolan bir dağıtılmış işlemde listeleme hangi, `System.Transaction` koşulları, yani `Transaction.Current` null değil.</span><span class="sxs-lookup"><span data-stu-id="8686a-124">A connection object will automatically enlist in an existing distributed transaction if it determines that a transaction is active, which, in `System.Transaction` terms, means that `Transaction.Current` is not null.</span></span> <span data-ttu-id="8686a-125">Bağlantı açıldığında otomatik işlem kaydı oluşur.</span><span class="sxs-lookup"><span data-stu-id="8686a-125">Automatic transaction enlistment occurs when the connection is opened.</span></span> <span data-ttu-id="8686a-126">Bir komut bir işlem kapsamı içinde yürütülür olsa bile, sonra yapılmaz.</span><span class="sxs-lookup"><span data-stu-id="8686a-126">It will not happen after that even if a command is executed inside of a transaction scope.</span></span> <span data-ttu-id="8686a-127">Belirterek otomatik kaydı varolan işlemlerde devre dışı bırakabilirsiniz `Enlist=false` için bir bağlantı dizesi parametresi olarak bir <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A?displayProperty=nameWithType>, veya `OLE DB Services=-7` için bir bağlantı dizesi parametresi olarak bir <xref:System.Data.OleDb.OleDbConnection.ConnectionString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8686a-127">You can disable auto-enlistment in existing transactions by specifying `Enlist=false` as a connection string parameter for a <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A?displayProperty=nameWithType>, or `OLE DB Services=-7` as a connection string parameter for an <xref:System.Data.OleDb.OleDbConnection.ConnectionString%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="8686a-128">Oracle ve ODBC bağlantı dizesi parametreleri hakkında daha fazla bilgi için bkz: <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A?displayProperty=nameWithType> ve <xref:System.Data.Odbc.OdbcConnection.ConnectionString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8686a-128">For more information on Oracle and ODBC connection string parameters, see <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A?displayProperty=nameWithType> and <xref:System.Data.Odbc.OdbcConnection.ConnectionString%2A?displayProperty=nameWithType>.</span></span>  
  
## <a name="manually-enlisting-in-a-distributed-transaction"></a><span data-ttu-id="8686a-129">El ile bir dağıtılmış işlemde kaydetme</span><span class="sxs-lookup"><span data-stu-id="8686a-129">Manually Enlisting in a Distributed Transaction</span></span>  
 <span data-ttu-id="8686a-130">Otomatik kaydı devre dışıysa veya bağlantı açıldıktan sonra başlatıldığından işlem listeleme gerekirse, varolan bir kullanarak dağıtılmış işlem listeleme `EnlistTransaction` yöntemi <xref:System.Data.Common.DbConnection> çalıştığınız sağlayıcı nesnesi ile.</span><span class="sxs-lookup"><span data-stu-id="8686a-130">If auto-enlistment is disabled or you need to enlist a transaction that was started after the connection was opened, you can enlist in an existing distributed transaction using the `EnlistTransaction` method of the <xref:System.Data.Common.DbConnection> object for the provider you are working with.</span></span> <span data-ttu-id="8686a-131">Varolan bir dağıtılmış işlemde kaydetme işlem yürütülmeli veya geri, veri kaynağında kodu tarafından yapılan değişiklikler yürütülmeli veya geri de, sağlar.</span><span class="sxs-lookup"><span data-stu-id="8686a-131">Enlisting in an existing distributed transaction ensures that, if the transaction is committed or rolled back, modifications made by the code at the data source will be committed or rolled back as well.</span></span>  
  
 <span data-ttu-id="8686a-132">Dağıtılmış işlemlere kaydetme iş nesneleri havuzu olduğunda özellikle geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="8686a-132">Enlisting in distributed transactions is particularly applicable when pooling business objects.</span></span> <span data-ttu-id="8686a-133">Bir iş nesnesi ile açık bir bağlantı havuza varsa, bu bağlantı açıldığında otomatik işlem kaydı yalnızca oluşur.</span><span class="sxs-lookup"><span data-stu-id="8686a-133">If a business object is pooled with an open connection, automatic transaction enlistment only occurs when that connection is opened.</span></span> <span data-ttu-id="8686a-134">Birden çok işlem havuza alınmış iş nesnesini kullanarak gerçekleştirdiyseniz, bu nesne için açık bağlantı otomatik olarak yeni başlatılan işlemlerde listesine değil.</span><span class="sxs-lookup"><span data-stu-id="8686a-134">If multiple transactions are performed using the pooled business object, the open connection for that object will not automatically enlist in newly initiated transactions.</span></span> <span data-ttu-id="8686a-135">Bu durumda, bağlantı için otomatik işlem kaydı devre dışı bırakın ve işlemleri kullanarak bağlantı listeleme `EnlistTransaction`.</span><span class="sxs-lookup"><span data-stu-id="8686a-135">In this case, you can disable automatic transaction enlistment for the connection and enlist the connection in transactions using `EnlistTransaction`.</span></span>  
  
 <span data-ttu-id="8686a-136">`EnlistTransaction` tek bir bağımsız değişken türü <xref:System.Transactions.Transaction> diğer bir deyişle mevcut işlem başvuru.</span><span class="sxs-lookup"><span data-stu-id="8686a-136">`EnlistTransaction` takes a single argument of type <xref:System.Transactions.Transaction> that is a reference to the existing transaction.</span></span> <span data-ttu-id="8686a-137">Bağlantının çağrıldıktan sonra `EnlistTransaction` yöntemi, veri kaynağı bağlantısı işlemde dahil kullanarak yapılan tüm değişiklikler.</span><span class="sxs-lookup"><span data-stu-id="8686a-137">After calling the connection's `EnlistTransaction` method, all modifications made at the data source using the connection are included in the transaction.</span></span> <span data-ttu-id="8686a-138">Bir null değer geçirme, geçerli bir dağıtılmış işlem kaydı bağlantısından unenlists.</span><span class="sxs-lookup"><span data-stu-id="8686a-138">Passing a null value unenlists the connection from its current distributed transaction enlistment.</span></span> <span data-ttu-id="8686a-139">Çağırmadan önce bağlantıyı açılmalıdır Not `EnlistTransaction`.</span><span class="sxs-lookup"><span data-stu-id="8686a-139">Note that the connection must be opened before calling `EnlistTransaction`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8686a-140">Bağlantı bir işleme açıkça kayıtlı sonra ilk işlem tamamlanana kadar beklemediğiniz kayıtlı veya başka bir işlemde kayıtlı olamaz.</span><span class="sxs-lookup"><span data-stu-id="8686a-140">Once a connection is explicitly enlisted on a transaction, it cannot be un-enlisted or enlisted in another transaction until the first transaction finishes.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="8686a-141">`EnlistTransaction` bağlantı bağlantı kullanarak bir işlem zaten başlamış bir özel durum döndürürse <xref:System.Data.Common.DbConnection.BeginTransaction%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8686a-141">`EnlistTransaction` throws an exception if the connection has already begun a transaction using the connection's <xref:System.Data.Common.DbConnection.BeginTransaction%2A> method.</span></span> <span data-ttu-id="8686a-142">Ancak, işlem veri kaynağında başlatılan yerel bir işlem olup olmadığını (örneğin, açıkça kullanarak BEGIN TRANSACTION deyimi yürütme bir <xref:System.Data.SqlClient.SqlCommand>), `EnlistTransaction` yerel işlem geri alma ve dağıtılmış varolan listeleme İstenen işlem.</span><span class="sxs-lookup"><span data-stu-id="8686a-142">However, if the transaction is a local transaction started at the data source (for example, executing the BEGIN TRANSACTION statement explicitly using a <xref:System.Data.SqlClient.SqlCommand>), `EnlistTransaction` will roll back the local transaction and enlist in the existing distributed transaction as requested.</span></span> <span data-ttu-id="8686a-143">Yerel işlem geri alındı bildirimi almaz ve kullanmaya değil yerel işlemler yönetmelisiniz <xref:System.Data.Common.DbConnection.BeginTransaction%2A>.</span><span class="sxs-lookup"><span data-stu-id="8686a-143">You will not receive notice that the local transaction was rolled back, and must manage any local transactions not started using <xref:System.Data.Common.DbConnection.BeginTransaction%2A>.</span></span> <span data-ttu-id="8686a-144">SQL Server için .NET Framework veri sağlayıcısı kullanıyorsanız (`SqlClient`) SQL Server ile listeleme girişimi bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8686a-144">If you are using the .NET Framework Data Provider for SQL Server (`SqlClient`) with SQL Server, an attempt to enlist will throw an exception.</span></span> <span data-ttu-id="8686a-145">Diğer tüm durumlarda algılanmayan geçer.</span><span class="sxs-lookup"><span data-stu-id="8686a-145">All other cases will go undetected.</span></span>  
  
## <a name="promotable-transactions-in-sql-server"></a><span data-ttu-id="8686a-146">SQL Server'ın yükseltilebilir işlemleri</span><span class="sxs-lookup"><span data-stu-id="8686a-146">Promotable Transactions in SQL Server</span></span>  
 <span data-ttu-id="8686a-147">SQL Server, yalnızca gerekli olduğunda, yerel bir basit işlem otomatik olarak bir dağıtılmış işlem yükseltilebilir yükseltilebilir işlemleri destekler.</span><span class="sxs-lookup"><span data-stu-id="8686a-147">SQL Server supports promotable transactions in which a local lightweight transaction can be automatically promoted to a distributed transaction only if it is required.</span></span> <span data-ttu-id="8686a-148">Yükseltilebilir işlem eklenen çağrılmaz işlemlerinin ek yükü dağıtılmış işlem eklenen ek yükü gerekli olmadığı sürece.</span><span class="sxs-lookup"><span data-stu-id="8686a-148">A promotable transaction does not invoke the added overhead of a distributed transaction unless the added overhead is required.</span></span> <span data-ttu-id="8686a-149">Daha fazla bilgi ve bir kod örneği için bkz: [SQL Server ile System.Transactions tümleştirme](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="8686a-149">For more information and a code sample, see [System.Transactions Integration with SQL Server](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md).</span></span>  
  
## <a name="configuring-distributed-transactions"></a><span data-ttu-id="8686a-150">Dağıtılmış işlemler yapılandırma</span><span class="sxs-lookup"><span data-stu-id="8686a-150">Configuring Distributed Transactions</span></span>  
 <span data-ttu-id="8686a-151">Dağıtılmış işlemler kullanmak için ağ üzerinden MS DTC etkinleştirmeniz gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="8686a-151">You may need to enable the MS DTC over the network in order to use distributed transactions.</span></span> <span data-ttu-id="8686a-152">Windows varsa Güvenlik Duvarı etkinleştirildiyse, ağ kullanın veya MS DTC bağlantı noktasını açmak MS DTC hizmetinin izin vermeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8686a-152">If have the Windows Firewall enabled, you must allow the MS DTC service to use the network or open the MS DTC port.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8686a-153">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="8686a-153">See Also</span></span>  
 [<span data-ttu-id="8686a-154">İşlemler ve Eşzamanlılık</span><span class="sxs-lookup"><span data-stu-id="8686a-154">Transactions and Concurrency</span></span>](../../../../docs/framework/data/adonet/transactions-and-concurrency.md)  
 [<span data-ttu-id="8686a-155">SQL Server ile System.Transactions Tümleştirmesi</span><span class="sxs-lookup"><span data-stu-id="8686a-155">System.Transactions Integration with SQL Server</span></span>](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md)  
 [<span data-ttu-id="8686a-156">ADO.NET yönetilen sağlayıcıları ve veri kümesi Geliştirici Merkezi</span><span class="sxs-lookup"><span data-stu-id="8686a-156">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
