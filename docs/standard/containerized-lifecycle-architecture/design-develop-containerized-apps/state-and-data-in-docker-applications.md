---
title: Durum ve Docker uygulamalarda verileri
description: Microsoft Platformu ve araçları ile kapsayıcılı Docker uygulama yaşam döngüsü
ms.prod: .net
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 83094cd9a13d77f489df639096bb42b23ce152e7
ms.sourcegitcommit: 9a4fe1a1c37b26532654b4bbe22d702237950009
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/16/2018
---
# <a name="state-and-data-in-docker-applications"></a><span data-ttu-id="f6d47-103">Durum ve Docker uygulamalarda verileri</span><span class="sxs-lookup"><span data-stu-id="f6d47-103">State and data in Docker applications</span></span>

<span data-ttu-id="f6d47-104">Kapsayıcıların bir temel girişi olur.</span><span class="sxs-lookup"><span data-stu-id="f6d47-104">A primitive of containers is immutability.</span></span> <span data-ttu-id="f6d47-105">Bir VM'ye karşılaştırıldığında kapsayıcılar sık karşılaştıkları kayboluyor yok.</span><span class="sxs-lookup"><span data-stu-id="f6d47-105">When compared to a VM, containers don't disappear as a common occurrence.</span></span> <span data-ttu-id="f6d47-106">VM aşırı yüklenmiş CPU veya tam ya da başarısız disk ölü işlemler çeşitli formlardan başarısız olabilir.</span><span class="sxs-lookup"><span data-stu-id="f6d47-106">A VM might fail in various forms from dead processes, overloaded CPU, or a full or failed disk.</span></span> <span data-ttu-id="f6d47-107">Henüz kullanılabilir olması için VM bekliyoruz ve sürücü hataları verileri tutmak güvence altına almak için sıradan bir hale RAID sürücülerdir.</span><span class="sxs-lookup"><span data-stu-id="f6d47-107">Yet, we expect the VM to be available and RAID drives are commonplace to assure drive failures maintain data.</span></span>

<span data-ttu-id="f6d47-108">İşlem örneklerinin olmasını kapsayıcıları zorlayıcı ancak.</span><span class="sxs-lookup"><span data-stu-id="f6d47-108">However, containers are thought to be instances of processes.</span></span> <span data-ttu-id="f6d47-109">Bir işlem dayanıklı durum bilgisini korumaz.</span><span class="sxs-lookup"><span data-stu-id="f6d47-109">A process doesn't maintain durable state.</span></span> <span data-ttu-id="f6d47-110">Yerel depolama alanı için bir kapsayıcı yazabilirsiniz olsa bile, o örneği çevresinde süresiz olarak olacağını varsayılarak tek kopyası bellek dayanıklı olduğu varsayılarak için eşdeğer olacaktır.</span><span class="sxs-lookup"><span data-stu-id="f6d47-110">Even though a container can write to its local storage, assuming that that instance will be around indefinitely would be equivalent to assuming a single-copy memory will be durable.</span></span> <span data-ttu-id="f6d47-111">Sonlandırıldı, işlemleri gibi kapsayıcıları yinelenir veya bir kapsayıcı orchestrator ile yönetilen, bunlar taşınmış olabilir varsayalım.</span><span class="sxs-lookup"><span data-stu-id="f6d47-111">You should assume that containers, like processes, are duplicated, killed, or, when managed with a container orchestrator, they might be moved.</span></span>

<span data-ttu-id="f6d47-112">Docker olarak bilinen bir özelliği kullanan bir *kaplama dosya sistemi* herhangi depolar yazarken kopyalama işlemi uygulamak için temel özgün görüntüsüne karşılaştırıldığında, bir kapsayıcı kök dosya sistemi bilgiler güncelleştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="f6d47-112">Docker uses a feature known as an *overlay file system* to implement a copy-on-write process that stores any updated information to the root file system of a container, compared to the original image on which it is based.</span></span> <span data-ttu-id="f6d47-113">Kapsayıcı sonradan sistemden silinirse, bu değişiklikler kaybolur.</span><span class="sxs-lookup"><span data-stu-id="f6d47-113">These changes are lost if the container is subsequently deleted from the system.</span></span> <span data-ttu-id="f6d47-114">Kapsayıcı, bu nedenle, varsayılan olarak kalıcı depolama yok.</span><span class="sxs-lookup"><span data-stu-id="f6d47-114">A container, therefore, does not have persistent storage by default.</span></span> <span data-ttu-id="f6d47-115">Bir kapsayıcı durumunu kaydetmek mümkün olsa da, bu geçici bir sistemi tasarladığınız kapsayıcı mimarisi ilkesini çakışıyor olabilir.</span><span class="sxs-lookup"><span data-stu-id="f6d47-115">Although it's possible to save the state of a container, designing a system around this would be in conflict with the principle of container architecture.</span></span>

<span data-ttu-id="f6d47-116">Docker uygulamaları kalıcı verileri yönetmek için yaygın çözümleri vardır:</span><span class="sxs-lookup"><span data-stu-id="f6d47-116">To manage persistent data in Docker applications, there are common solutions:</span></span>

-   <span data-ttu-id="f6d47-117">[**Veri birimleri**](https://docs.docker.com/engine/tutorials/dockervolumes/) bunlar yalnızca belirtilen ana bilgisayara bağlayın.</span><span class="sxs-lookup"><span data-stu-id="f6d47-117">[**Data volumes**](https://docs.docker.com/engine/tutorials/dockervolumes/) These mount to the host, as just noted.</span></span>

-   <span data-ttu-id="f6d47-118">[**Veri birim kapsayıcıları**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) bunlar gezinebilirsiniz dış bir kapsayıcı kullanılarak kapsayıcıları arasında paylaşılan depolama alanı sağlar.</span><span class="sxs-lookup"><span data-stu-id="f6d47-118">[**Data volume containers**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) These provide shared storage across containers, using an external container that can cycle.</span></span>

-   <span data-ttu-id="f6d47-119">[**Birim eklentileri**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) bu uzun vadeli Kalıcılık sağlayan uzak konumlara birimlerini bağlayın.</span><span class="sxs-lookup"><span data-stu-id="f6d47-119">[**Volume Plugins**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) These mount volumes to remote locations, providing long-term persistence.</span></span>

-   <span data-ttu-id="f6d47-120">**Uzak Veri kaynaklarını** örnekler SQL ve Hayır SQL veritabanları dahil etmek veya önbelleğe Redis gibi hizmetler.</span><span class="sxs-lookup"><span data-stu-id="f6d47-120">**Remote data sources** Examples include SQL and NO-SQL databases or cache services like Redis.</span></span>

-   <span data-ttu-id="f6d47-121">[**Azure depolama**](https://docs.microsoft.com/azure/storage/) bu kadar uzun vadeli Kalıcılık kapsayıcıların en iyi sağlayan bir hizmet (PaaS) depolama coğrafi dağıtılabilir platform sağlar.</span><span class="sxs-lookup"><span data-stu-id="f6d47-121">[**Azure Storage**](https://docs.microsoft.com/azure/storage/) This provides geo distributable platform as a service (PaaS) storage, providing the best of containers as long-term persistence.</span></span>

<span data-ttu-id="f6d47-122">Veri birimleri özel dizinleri atlama bir veya daha fazla kapsayıcı içinde belirtilen [birleşim dosya sistemi](https://docs.docker.com/v1.8/reference/glossary#union-file-system).</span><span class="sxs-lookup"><span data-stu-id="f6d47-122">Data volumes are specially designated directories within one or more containers that bypass the [Union File System](https://docs.docker.com/v1.8/reference/glossary#union-file-system).</span></span> <span data-ttu-id="f6d47-123">Veri birimleri, verileri, kapsayıcının yaşam döngüsünü bağımsız korumak için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="f6d47-123">Data volumes are designed to maintain data, independent of the container's life cycle.</span></span> <span data-ttu-id="f6d47-124">Bir kapsayıcı kaldırın ya da artık kapsayıcı tarafından başvurulan "Çöp toplama" birimleri olur, docker bu nedenle hiçbir zaman otomatik olarak birimleri siler.</span><span class="sxs-lookup"><span data-stu-id="f6d47-124">Docker therefore never automatically deletes volumes when you remove a container, nor will it "garbage collect" volumes that are no longer referenced by a container.</span></span> <span data-ttu-id="f6d47-125">Konak işletim sistemi göz atın ve veri birimlerini tutumlu kullanmak için başka bir neden olduğu herhangi bir birimdeki veriler serbestçe, Düzenle.</span><span class="sxs-lookup"><span data-stu-id="f6d47-125">The host operating system can browse and edit the data in any volume freely, which is just another reason to use data volumes sparingly.</span></span>

<span data-ttu-id="f6d47-126">A [veri birim kapsayıcısı](https://docs.docker.com/v1.8/userguide/dockervolumes/) bir geliştirme normal veri birimleri üzerinde değil.</span><span class="sxs-lookup"><span data-stu-id="f6d47-126">A [data volume container](https://docs.docker.com/v1.8/userguide/dockervolumes/) is an improvement over regular data volumes.</span></span> <span data-ttu-id="f6d47-127">İçinde oluşturulan (daha önce açıklandığı gibi) bir veya daha fazla veri birimleri sahip temelde bir etkinliği olmayan kapsayıcıdır.</span><span class="sxs-lookup"><span data-stu-id="f6d47-127">It is essentially a dormant container that has one or more data volumes created within it (as described earlier).</span></span> <span data-ttu-id="f6d47-128">Veri birim kapsayıcısı, bir merkezi bağlama noktası kapsayıcılara erişim sağlar.</span><span class="sxs-lookup"><span data-stu-id="f6d47-128">The data volume container provides access to containers from a central mount point.</span></span> <span data-ttu-id="f6d47-129">Bu yöntem erişim avantajı veri kapsayıcısı mantıksal bağlama noktası yapma özgün verilerin konumu soyutlar ' dir.</span><span class="sxs-lookup"><span data-stu-id="f6d47-129">The benefit of this method of access is that it abstracts the location of the original data, making the data container a logical mount point.</span></span> <span data-ttu-id="f6d47-130">Ayrıca, "uygulama" kapsayıcıları veri kapsayıcısı birimlerinin oluşturulabilir ve verileri ayrılmış bir kapsayıcıda kalıcı tutarken yok erişim sağlar.</span><span class="sxs-lookup"><span data-stu-id="f6d47-130">It also allows "application" containers accessing the data container volumes to be created and destroyed while keeping the data persistent in a dedicated container.</span></span>

<span data-ttu-id="f6d47-131">Şekil 4-5, normal Docker birimleri depolama kapsayıcıları kendilerini dışında ancak ana bilgisayar sunucusu/VM fiziksel sınırları içinde yerleştirilebilir gösterir.</span><span class="sxs-lookup"><span data-stu-id="f6d47-131">Figure 4-5 shows that regular Docker volumes can be placed on storage out of the containers themselves but within the host server/VM physical boundaries.</span></span> <span data-ttu-id="f6d47-132">*Docker birimler bir konak sunucu/VM biriminden diğerine kullanma yeteneğini sahip değilseniz*.</span><span class="sxs-lookup"><span data-stu-id="f6d47-132">*Docker volumes don't have the ability to use a volume from one host server/VM to another*.</span></span>

![](./media/image5.png)

<span data-ttu-id="f6d47-133">Şekil 4-5: veri birimlerini ve kapsayıcıları apps/kapsayıcıları için dış veri kaynakları</span><span class="sxs-lookup"><span data-stu-id="f6d47-133">Figure 4-5: Data volumes and external data sources for containers apps/containers</span></span>

<span data-ttu-id="f6d47-134">Doğrulanamadığından ayrı fiziksel ana bilgisayarda çalıştırılan kapsayıcıları arasında paylaşılan verileri yönetmek için sabit konak/VM, Docker ana bilgisayar olmadığı sürece, birimleri iş verilerini çünkü kullanmamasını önerilir Docker kapsayıcıları bir orchestrator'da kullanırken kapsayıcı, bir küme tarafından gerçekleştirilmek üzere en iyi duruma getirme bağlı olarak başka bir konağa taşınıp beklenir.</span><span class="sxs-lookup"><span data-stu-id="f6d47-134">Due to the inability to manage data shared between containers that run on separate physical hosts, it is recommended that you not use volumes for business data unless the Docker host is a fixed host/VM, because when using Docker containers in an orchestrator, containers are expected to be moved from one to another host, depending on the optimizations to be performed by the cluster.</span></span>

<span data-ttu-id="f6d47-135">Bu nedenle, normal veri birimleri izleme dosyaları, zamana bağlı dosyaları ya da iş veri tutarlılığını varsa veya birden çok konak genelinde kapsayıcılarınızı taşındıklarında etkilemez benzer kavram çalışmak için iyi bir mekanizma altındadır.</span><span class="sxs-lookup"><span data-stu-id="f6d47-135">Therefore, regular data volumes are a good mechanism to work with trace files, temporal files, or any similar concept that won't affect the business data consistency if or when your containers are moved across multiple hosts.</span></span>

<span data-ttu-id="f6d47-136">Birim eklentileri ister [Flocker](https://clusterhq.com/flocker/) bir kümedeki tüm ana bilgisayarlar arasında veri sağlar.</span><span class="sxs-lookup"><span data-stu-id="f6d47-136">Volume plug-ins like [Flocker](https://clusterhq.com/flocker/) provide data across all hosts in a cluster.</span></span> <span data-ttu-id="f6d47-137">Tüm birim eklentileri eşit olarak oluşturulur ancak birim eklentileri genellikle değişmez kapsayıcılarla externalized kalıcı güvenilir depolama sağlar.</span><span class="sxs-lookup"><span data-stu-id="f6d47-137">Although not all volume plug-ins are created equally, volume plug-ins typically provide externalized persistent reliable storage from the immutable containers.</span></span>

<span data-ttu-id="f6d47-138">Uzak Veri kaynaklarını ve SQL Database, DocumentDB veya Redis gibi uzak bir önbellek gibi önbellekleri kapsayıcıları geliştirme ile aynı olacaktır.</span><span class="sxs-lookup"><span data-stu-id="f6d47-138">Remote data sources and caches like SQL Database, DocumentDB, or a remote cache like Redis would be the same as developing without containers.</span></span> <span data-ttu-id="f6d47-139">Bu, iş uygulama verilerini depolamak için tercih edilen ve kanıtlanmış, yolları biridir.</span><span class="sxs-lookup"><span data-stu-id="f6d47-139">This is one of the preferred, and proven, ways to store business application data.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="f6d47-140">[Önceki] (tek yapılı-applications.md) [sonraki] (soa-applications.md)</span><span class="sxs-lookup"><span data-stu-id="f6d47-140">[Previous] (monolithic-applications.md) [Next] (soa-applications.md)</span></span>
