---
title: Güvenli Oturumlar için En İyi Uygulamalar
ms.date: 03/30/2017
ms.assetid: b94f6e01-8070-40b6-aac7-a2cb7b4cb4f2
ms.openlocfilehash: 1d9671e7e3124d535b66de8cd8468f76dcb32b10
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33491633"
---
# <a name="best-practices-for-reliable-sessions"></a><span data-ttu-id="49f16-102">Güvenli Oturumlar için En İyi Uygulamalar</span><span class="sxs-lookup"><span data-stu-id="49f16-102">Best Practices for Reliable Sessions</span></span>

<span data-ttu-id="49f16-103">Bu konu, güvenilir oturumlar için en iyi uygulamaları açıklar.</span><span class="sxs-lookup"><span data-stu-id="49f16-103">This topic discusses best practices for reliable sessions.</span></span>

## <a name="setting-maxtransferwindowsize"></a><span data-ttu-id="49f16-104">MaxTransferWindowSize ayarlama</span><span class="sxs-lookup"><span data-stu-id="49f16-104">Setting MaxTransferWindowSize</span></span>

<span data-ttu-id="49f16-105">Güvenilir oturumlar Windows Communication Foundation (WCF) aktarımı pencere iletileri istemci ve hizmet tutmak için kullanın.</span><span class="sxs-lookup"><span data-stu-id="49f16-105">Reliable sessions in Windows Communication Foundation (WCF) use a transfer window to hold messages on the client and service.</span></span> <span data-ttu-id="49f16-106">Yapılandırılabilir özellik <xref:System.ServiceModel.Channels.ReliableSessionBindingElement.MaxTransferWindowSize%2A> aktarımı penceresi tutun kaç iletileri gösterir.</span><span class="sxs-lookup"><span data-stu-id="49f16-106">The configurable property <xref:System.ServiceModel.Channels.ReliableSessionBindingElement.MaxTransferWindowSize%2A> indicates how many messages the transfer window can hold.</span></span>

<span data-ttu-id="49f16-107">Gönderenin, bu aktarım penceresi için onay beklenirken tutabilir kaç iletileri gösterir; Alıcı, hizmet için arabelleğe alınacak kaç iletileri gösterir.</span><span class="sxs-lookup"><span data-stu-id="49f16-107">On the sender, this indicates how many messages the transfer window can hold while waiting for acknowledgements; on the receiver, it indicates how many messages to buffer for the service.</span></span>

<span data-ttu-id="49f16-108">Doğru boyutta seçme, ağ verimliliğini ve en iyi kapasitesi etkiler.</span><span class="sxs-lookup"><span data-stu-id="49f16-108">Choosing the right size impacts the efficiency of the network and the optimal capacity of the service.</span></span> <span data-ttu-id="49f16-109">Aşağıdaki bölümlerde bu özellik ve değer etkisini için bir değer seçerken dikkat edilmesi gerekenler ayrıntılı olarak açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="49f16-109">The following sections detail what to consider when choosing a value for this property and the impact of the value.</span></span>

<span data-ttu-id="49f16-110">Varsayılan aktarımı pencere boyutu sekiz iletileri ' dir.</span><span class="sxs-lookup"><span data-stu-id="49f16-110">The default transfer window size is eight messages.</span></span>

### <a name="efficient-use-of-the-network"></a><span data-ttu-id="49f16-111">Verimli kullanımı, ağ</span><span class="sxs-lookup"><span data-stu-id="49f16-111">Efficient use of the network</span></span>

<span data-ttu-id="49f16-112">Bu bağlamda terimi *ağ* her şeyi (gönderen) istemci ve hizmet (alıcı) arasındaki iletişimin temel olarak kullanılan karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="49f16-112">In this context, the term *network* corresponds to everything used as the basis of communication between a client (sender) and a service (receiver).</span></span> <span data-ttu-id="49f16-113">Bu aktarım bağlantıları ve herhangi bir aracı veya köprüleri arasındaki, SOAP yönlendiriciler veya HTTP Proxy/Güvenlik duvarları gibi içerir.</span><span class="sxs-lookup"><span data-stu-id="49f16-113">This includes the transport connections and any intermediary or bridges in between, including SOAP routers or HTTP proxies/firewalls.</span></span>

<span data-ttu-id="49f16-114">Verimli kullanımı, ağ, ağ kapasitesi tam olarak kullanılmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="49f16-114">Efficient use of the network ensures that network capacity is fully used.</span></span> <span data-ttu-id="49f16-115">Her iki saniye başına ağ üzerinden aktarılabilir veri miktarını (*veri oranı*) ve veri gönderenden alıcıya aktarım süresini (*gecikme*) nasıl etkili bir şekilde etkileyen ağ kullanılır.</span><span class="sxs-lookup"><span data-stu-id="49f16-115">Both the amount of data that can be transferred per second over the network (*data rate*) and the time it takes to transfer data from the sender to the receiver (*latency*) impact how effectively the network is utilized.</span></span>

<span data-ttu-id="49f16-116">Gönderen, özellik üzerinde <xref:System.ServiceModel.Channels.ReliableSessionBindingElement.MaxTransferWindowSize%2A> aktarımı penceresi tutmak için onay beklenirken kaç iletileri gösterir.</span><span class="sxs-lookup"><span data-stu-id="49f16-116">On the sender, the property <xref:System.ServiceModel.Channels.ReliableSessionBindingElement.MaxTransferWindowSize%2A> indicates how many messages its transfer window can hold while waiting for acknowledgements.</span></span> <span data-ttu-id="49f16-117">Varsa ağ gecikmesi yüksektir ve esnek gönderen ve etkili ağ kullanımını sağlamak için Aktarım pencere boyutunu artırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="49f16-117">If the network latency is high and in order to ensure a responsive sender and effective network utilization, you should increase the transfer window size.</span></span>

<span data-ttu-id="49f16-118">Örneğin gönderici ile veri oranı tutar durumunda bile, gecikme süresi birkaç aracılar gönderici ve alıcı arasında mevcut ya da veri kayıplı aracı veya ağ geçmesi gereken yüksek olabilir.</span><span class="sxs-lookup"><span data-stu-id="49f16-118">For example even if the sender keeps up with data rate, latency could be high if several intermediaries exist between the sender and receiver or the data must pass through a lossy intermediary or network.</span></span> <span data-ttu-id="49f16-119">Bu nedenle, kendi aktarımı penceresindeki iletileri için onayları kablo göndermek için yeni iletileri kabul etmeden önce beklenecek göndericisi vardır.</span><span class="sxs-lookup"><span data-stu-id="49f16-119">Thus, the sender has to wait for acknowledgements for the messages in its transfer window before accepting new messages to send on the wire.</span></span> <span data-ttu-id="49f16-120">Yüksek gecikme, daha az etkili küçük arabellekle ağ kullanımı.</span><span class="sxs-lookup"><span data-stu-id="49f16-120">The smaller the buffer with high latency, the less effective the network utilization.</span></span> <span data-ttu-id="49f16-121">Diğer taraftan, istemci tarafından gönderilen verileri Yüksek orandaki yakalamak hizmet gerekebileceğinden çok yüksek bir aktarım pencere boyutu hizmet etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="49f16-121">On the other hand, too high a transfer window size may impact the service because the service may need to catch up to the high rate of data sent by the client.</span></span>

### <a name="running-the-service-to-capacity"></a><span data-ttu-id="49f16-122">Kapasitede hizmet çalışıyor</span><span class="sxs-lookup"><span data-stu-id="49f16-122">Running the service to capacity</span></span>

<span data-ttu-id="49f16-123">İdeal olarak ağ verimli bir şekilde kullanılan kadar da en iyi kapasitede çalıştırılacak hizmetinin isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49f16-123">As much as the network is used efficiently, ideally you also want the service to run at optimal capacity.</span></span> <span data-ttu-id="49f16-124">Alıcı aktarımı pencere boyutu özellikte alıcı arabellek kaç iletileri gösterir.</span><span class="sxs-lookup"><span data-stu-id="49f16-124">The transfer window size property on the receiver indicates how many messages the receiver can buffer.</span></span> <span data-ttu-id="49f16-125">Bu ileti arabelleğe alma, yalnızca ağ akış denetimi yardımcı olur, ancak ayrıca tam kapasite çalıştırmak hizmeti sağlar.</span><span class="sxs-lookup"><span data-stu-id="49f16-125">This message buffering helps not only the network flow control but also enables the service to run to full capacity.</span></span> <span data-ttu-id="49f16-126">Örneğin, bir ileti arabellek ise ve hizmet bunları işleyebileceğinden daha hızlı iletiler geldiğinde sonra ağ iletileri bırakmak ve kapasite küçülttüğü iyi bir şekilde veya az.</span><span class="sxs-lookup"><span data-stu-id="49f16-126">For example if the buffer is one message and messages arrive faster than the service can process them, then the network might drop messages and capacity might be wasted or underutilized.</span></span>

<span data-ttu-id="49f16-127">Aynı anda alır ve daha önce alınan iletileri işlenirken bir ileti arabelleği gibi bir arabellek kullanarak hizmet kullanılabilirliğini artırır.</span><span class="sxs-lookup"><span data-stu-id="49f16-127">Using a buffer increases the availability of the service as it concurrently receives and buffers a message while processing the previously received messages.</span></span>

<span data-ttu-id="49f16-128">Aynı kullanmanız önerilir `MaxTransferWindowSize` gönderici ve alıcı.</span><span class="sxs-lookup"><span data-stu-id="49f16-128">We recommended that you use the same `MaxTransferWindowSize` on both the sender and receiver.</span></span>

### <a name="enabling-flow-control"></a><span data-ttu-id="49f16-129">Akış denetimi etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="49f16-129">Enabling flow control</span></span>

<span data-ttu-id="49f16-130">*Akış denetimi* sağlar göndereni ve alıcısı ayak birbirleri ile tutmak, diğer bir deyişle, iletiler tüketilen ve üzerinde işlem mekanizmasıdır üretilen kadar hızlı.</span><span class="sxs-lookup"><span data-stu-id="49f16-130">*Flow control* is a mechanism that ensures that the sender and receiver keep pace with each other, that is, the messages are consumed and acted upon as fast as they're produced.</span></span> <span data-ttu-id="49f16-131">İstemci ve hizmet aktarımı pencere boyutu göndereni ve alıcısı makul bir eşitleme pencere içinde olmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="49f16-131">The transfer window size on the client and service ensures that the sender and receiver are within a reasonable window of synchronization.</span></span>

<span data-ttu-id="49f16-132">Özellik set önerilen <xref:System.ServiceModel.Channels.ReliableSessionBindingElement.FlowControlEnabled%2A> için `true` bir WCF istemcisi ve bir WCF hizmeti arasında güvenli bir oturum kullanırken.</span><span class="sxs-lookup"><span data-stu-id="49f16-132">We highly recommended that you set the property <xref:System.ServiceModel.Channels.ReliableSessionBindingElement.FlowControlEnabled%2A> to `true` when you're using a reliable session between a WCF client and a WCF service.</span></span>

## <a name="setting-maxpendingchannels"></a><span data-ttu-id="49f16-133">MaxPendingChannels ayarlama</span><span class="sxs-lookup"><span data-stu-id="49f16-133">Setting MaxPendingChannels</span></span>

<span data-ttu-id="49f16-134">Güvenilir oturum farklı istemcilerden gelen iletişimi sağlayan bir hizmet yazarken, birçok istemciniz hizmetine güvenilir oturum aynı anda oluşturmak mümkündür.</span><span class="sxs-lookup"><span data-stu-id="49f16-134">When writing a service that enables reliable session communication from different clients, it's possible to have many clients establish a reliable session to the service at the same time.</span></span> <span data-ttu-id="49f16-135">Bu gibi durumlarda hizmetinin yanıt bağlıdır `MaxPendingChannels` özelliği.</span><span class="sxs-lookup"><span data-stu-id="49f16-135">The response of the service in these situations depends on the `MaxPendingChannels` property.</span></span>

<span data-ttu-id="49f16-136">Gönderenin alıcı bir güvenilir oturum kanalı oluşturduğunda, bunlar arasında bir el sıkışması güvenilir oturum kurar.</span><span class="sxs-lookup"><span data-stu-id="49f16-136">When the sender creates a reliable session channel to a receiver, a handshake between them establishes a reliable session.</span></span> <span data-ttu-id="49f16-137">Güvenilir oturum kurulduktan sonra kanal kabul bekleyen kanal sırada hizmet tarafından yerleştirilir.</span><span class="sxs-lookup"><span data-stu-id="49f16-137">After the reliable session is established, the channel is put in a pending channel queue for acceptance by the service.</span></span> <span data-ttu-id="49f16-138">`MaxPendingChannels` Özelliği gösterir kaç kanalları bu durumda olabilir.</span><span class="sxs-lookup"><span data-stu-id="49f16-138">The `MaxPendingChannels` property indicates how many channels can be in this state.</span></span>

<span data-ttu-id="49f16-139">Daha fazla kanalları burada kabul edemez bir durumda olması için hizmet mümkündür.</span><span class="sxs-lookup"><span data-stu-id="49f16-139">It's possible for the service to be in a state where it can't accept more channels.</span></span> <span data-ttu-id="49f16-140">Sıra dolu olduğunda, güvenilir bir oturumu girişimi reddedilir ve istemci yeniden gerekir.</span><span class="sxs-lookup"><span data-stu-id="49f16-140">If the queue is full, an attempt to establish a reliable session is rejected, and the client must retry.</span></span>

<span data-ttu-id="49f16-141">Sıranın bekleyen kanallarında uzun bir süre sırada kalmasını mümkündür.</span><span class="sxs-lookup"><span data-stu-id="49f16-141">It's also possible that the pending channels in the queue remain in the queue for a longer duration.</span></span> <span data-ttu-id="49f16-142">Bu arada, hatalı bir duruma geçiş kanalı neden bir güvenilir oturum etkin olmama zaman aşımı oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="49f16-142">In the meantime, an inactivity timeout on the reliable session may occur, causing the channel to transition to a faulted state.</span></span>

<span data-ttu-id="49f16-143">Aynı anda birden fazla istemciye hizmet bir hizmet yazarken, gereksinimlerinize uygun olan bir değer ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="49f16-143">When writing a service that services multiple clients simultaneously, you should set a value that's suitable for your needs.</span></span> <span data-ttu-id="49f16-144">İçin çok yüksek bir değere ayarlamak `MaxPendingChannels` özelliği, çalışma kümesi etkiler.</span><span class="sxs-lookup"><span data-stu-id="49f16-144">Setting too high a value for the `MaxPendingChannels` property impacts your working set.</span></span>

<span data-ttu-id="49f16-145">İçin varsayılan değer <xref:System.ServiceModel.Channels.ReliableSessionBindingElement.MaxPendingChannels%2A> dört kanalları.</span><span class="sxs-lookup"><span data-stu-id="49f16-145">The default value for <xref:System.ServiceModel.Channels.ReliableSessionBindingElement.MaxPendingChannels%2A> is four channels.</span></span>

## <a name="reliable-sessions-and-hosting"></a><span data-ttu-id="49f16-146">Güvenilir oturumlar ve barındırma</span><span class="sxs-lookup"><span data-stu-id="49f16-146">Reliable sessions and hosting</span></span>

<span data-ttu-id="49f16-147">Güvenilir oturumlar kullanan bir hizmet barındırma zaman web, aşağıdaki önemli noktalar göz önünde bulundurmalıdır:</span><span class="sxs-lookup"><span data-stu-id="49f16-147">When web hosting a service that uses reliable sessions, you should keep the following important considerations in mind:</span></span>

- <span data-ttu-id="49f16-148">Güvenilir oturumlar durum bilgisi olan ve durumu AppDomain'e korunur.</span><span class="sxs-lookup"><span data-stu-id="49f16-148">Reliable sessions are stateful, and state is maintained in the AppDomain.</span></span> <span data-ttu-id="49f16-149">Bu, güvenilir bir oturum parçası olan tüm iletileri aynı AppDomain'e işlenmelidir anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="49f16-149">This means that all messages that are part of a reliable session must be processed in the same AppDomain.</span></span> <span data-ttu-id="49f16-150">Web grupları ve web bahçelerinde grubu ya da bahçesi boyutunu tek bir düğüm büyük olduğu bu kısıtlamayı garanti edemez.</span><span class="sxs-lookup"><span data-stu-id="49f16-150">Web farms and web gardens where the size of the farm or garden is greater than one node can't guarantee this constraint.</span></span>

- <span data-ttu-id="49f16-151">Güvenilir oturumlar çift HTTP kanalı kullanılarak (örneğin, kullanarak `WsDualHttpBinding`) en fazla iki HTTP bağlantıları stemci varsayılan gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="49f16-151">Reliable sessions using dual HTTP channels (for example, using `WsDualHttpBinding`) can require more than the default of two HTTP connections per-client.</span></span> <span data-ttu-id="49f16-152">Başka bir deyişle, belirli bir zamanda her eş zamanlı uygulama ve protokol iletilerini aktarma çünkü en fazla iki bağlantıları her şekilde çift yönlü bir güvenilir oturum gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="49f16-152">This means a duplex reliable session can require up to two connections each way because concurrent application and protocol messages may be transferring each way at any given time.</span></span> <span data-ttu-id="49f16-153">Hizmetinin ileti değişim deseni bağlı olarak belirli koşullar altında bu çift HTTP ve güvenilir oturumlar kullanarak bir web barındırılan hizmet kilitlenme mümkün olduğu anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="49f16-153">Under certain conditions depending on the message exchange pattern of the service, this means that it's possible to deadlock a web-hosted service using dual HTTP and reliable sessions.</span></span> <span data-ttu-id="49f16-154">Aşağıdaki istemci başına izin verilen HTTP bağlantılarını sayısını artırmak için ilgili yapılandırma dosyasına ekleyin (örneğin, *web.config* söz konusu hizmetinin):</span><span class="sxs-lookup"><span data-stu-id="49f16-154">To increase the number of allowable HTTP connections per client, add the following to the relevant configuration file (for example, *web.config* of the service in question):</span></span>

  ```xml
  <configuration>
    <system.net>
      <connectionManagement>
        <add name="*" maxconnection="4" />
      </connectionManagement>
    </system.net>
  </configuration>
  ```

  <span data-ttu-id="49f16-155">Değeri `maxconnection` özniteliği gereken bağlantı sayısıdır.</span><span class="sxs-lookup"><span data-stu-id="49f16-155">The value of the `maxconnection` attribute is the number of connections needed.</span></span> <span data-ttu-id="49f16-156">En az dört bağlantıları bu durumda olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="49f16-156">The minimum in this case should be four connections.</span></span>
