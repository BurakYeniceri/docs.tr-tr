---
title: "Profil Oluşturma Ortamını Ayarlama"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: reference
helpviewer_keywords:
- environment variables, profiling API
- profiling API [.NET Framework], setting up environment
- COR_PROFILER environment variable
- Windows Service applications, profiling
- profiling API [.NET Framework], Windows Service applications
- COR_ENABLE_PROFILING environment variable
- profiling API [.NET Framework], enabling
ms.assetid: fefca07f-7555-4e77-be86-3c542e928312
caps.latest.revision: "29"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: dc3d490284e371aefb2de712cb5721b0246caa6a
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/22/2017
---
# <a name="setting-up-a-profiling-environment"></a><span data-ttu-id="0cbb9-102">Profil Oluşturma Ortamını Ayarlama</span><span class="sxs-lookup"><span data-stu-id="0cbb9-102">Setting Up a Profiling Environment</span></span>
> [!NOTE]
>  <span data-ttu-id="0cbb9-103">İçinde profil oluşturma için önemli değişiklikler olmuştur [!INCLUDE[net_v40_long](../../../../includes/net-v40-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0cbb9-103">There have been substantial changes to profiling in the [!INCLUDE[net_v40_long](../../../../includes/net-v40-long-md.md)].</span></span>  
  
 <span data-ttu-id="0cbb9-104">(Uygulama veya hizmet) yönetilen bir işlemi başladığında, ortak dil çalışma zamanı (CLR) yükler.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-104">When a managed process (application or service) starts, it loads the common language runtime (CLR).</span></span> <span data-ttu-id="0cbb9-105">CLR başlatıldığında işlemi için profil oluşturucu bağlanıp bağlanmadığını karar vermek için aşağıdaki iki ortam değişkenleri değerlendirir:</span><span class="sxs-lookup"><span data-stu-id="0cbb9-105">When the CLR is initialized, it evaluates the following two environmental variables to decide whether the process should connect to a profiler:</span></span>  
  
-   <span data-ttu-id="0cbb9-106">Cor_enable_profılıng: Bu ortam değişkenini varsa ve 1 olarak ayarlanmış bir profil oluşturucu CLR bağlanır.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-106">COR_ENABLE_PROFILING: The CLR connects to a profiler only if this environment variable exists and is set to 1.</span></span>  
  
-   <span data-ttu-id="0cbb9-107">Cor_profıler: cor_enable_profılıng onay geçerse, CLR bu CLSID ya da daha önce kayıt defterinde depolandı gerekir ProgID sahip profil oluşturucu bağlanır.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-107">COR_PROFILER: If the COR_ENABLE_PROFILING check passes, the CLR connects to the profiler that has this CLSID or ProgID, which must have been stored previously in the registry.</span></span> <span data-ttu-id="0cbb9-108">Cor_profıler ortam değişkeni, aşağıdaki iki örnekte gösterildiği gibi bir dize olarak tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-108">The COR_PROFILER environment variable is defined as a string, as shown in the following two examples.</span></span>  
  
    ```  
    set COR_PROFILER={32E2F4DA-1BEA-47ea-88F9-C5DAF691C94A}  
    set COR_PROFILER="MyProfiler"  
    ```  
  
 <span data-ttu-id="0cbb9-109">Bir CLR uygulama profili için uygulamayı çalıştırmadan önce cor_enable_profılıng ve cor_profıler ortam değişkenleri ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-109">To profile a CLR application, you must set the COR_ENABLE_PROFILING and COR_PROFILER environment variables before you run the application.</span></span> <span data-ttu-id="0cbb9-110">Profil Oluşturucu DLL kayıtlı olduğundan emin olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-110">You must also make sure that the profiler DLL is registered.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0cbb9-111">İle başlayarak [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)], profil oluşturucular kayıtlı olması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-111">Starting with the [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)], profilers do not have to be registered.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0cbb9-112">.NET Framework sürüm 2.0, 3.0 ve 3.5 profil oluşturucular içinde kullanmak için [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)] ve sonraki sürümlerinde COMPLUS_ProfAPI_ProfilerCompatibilitySetting ortam değişkeni ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-112">To use .NET Framework versions 2.0, 3.0, and 3.5 profilers in the [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)] and later versions, you must set the COMPLUS_ProfAPI_ProfilerCompatibilitySetting environment variable.</span></span>  
  
## <a name="environment-variable-scope"></a><span data-ttu-id="0cbb9-113">Ortam değişken kapsamı</span><span class="sxs-lookup"><span data-stu-id="0cbb9-113">Environment Variable Scope</span></span>  
 <span data-ttu-id="0cbb9-114">Cor_enable_profılıng ve cor_profıler ortam değişkenlerini ayarlama nasıl kendi kapsamı belirler.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-114">How you set the COR_ENABLE_PROFILING and COR_PROFILER environment variables will determine their scope of influence.</span></span> <span data-ttu-id="0cbb9-115">Bu değişkenleri aşağıdaki yollardan biriyle ayarlayabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="0cbb9-115">You can set these variables in one of the following ways:</span></span>  
  
-   <span data-ttu-id="0cbb9-116">Değişkenleri ayarlarsanız bir [Icordebug::CreateProcess](../../../../docs/framework/unmanaged-api/debugging/icordebug-createprocess-method.md) çağrısı, bunlar uygulanacak aynı anda çalışmakta olan uygulama.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-116">If you set the variables in an [ICorDebug::CreateProcess](../../../../docs/framework/unmanaged-api/debugging/icordebug-createprocess-method.md) call, they will apply only to the application that you are running at the time.</span></span> <span data-ttu-id="0cbb9-117">(Bunlar da ortam devralan bir uygulama tarafından başlatılan başka uygulamalar için uygulanır.)</span><span class="sxs-lookup"><span data-stu-id="0cbb9-117">(They will also apply to other applications started by that application that inherit the environment.)</span></span>  
  
-   <span data-ttu-id="0cbb9-118">Bir komut istemi penceresinde değişkenleri ayarladıysanız, o penceresinden başlatılan tüm uygulamalar için geçerli olur.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-118">If you set the variables in a Command Prompt window, they will apply to all applications that are started from that window.</span></span>  
  
-   <span data-ttu-id="0cbb9-119">Kullanıcı düzeyinde değişkenleri ayarlarsanız, dosya Gezgini ile başlayan tüm uygulamalar için geçerli olur.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-119">If you set the variables at the user level, they will apply to all applications that you start with File Explorer.</span></span> <span data-ttu-id="0cbb9-120">Bir komut istemi penceresi değişkenleri ayarladıktan sonra açtığınız bu ortam ayarlarına sahip olur ve bu nedenle bu penceresinden başlatmak herhangi bir uygulama olur.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-120">A Command Prompt window that you open after you set the variables will have these environment settings, and so will any application that you start from that window.</span></span> <span data-ttu-id="0cbb9-121">Ortam değişkenleri kullanıcı düzeyinde ayarlamak için sağ tıklatın **Bilgisayarım**, tıklatın **özellikleri**, tıklatın **Gelişmiş** sekmesini tıklatın, **ortamı Değişkenleri**ve değişkenleri ekleyip **kullanıcı değişkenleri** listesi.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-121">To set environment variables at the user level, right-click **My Computer**, click **Properties**, click the **Advanced** tab, click **Environment Variables**, and add the variables to the **User variables** list.</span></span>  
  
-   <span data-ttu-id="0cbb9-122">Bilgisayar düzeyinde değişkenleri ayarlarsanız, bu bilgisayar üzerinde başlatılan tüm uygulamalar için geçerli olur.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-122">If you set the variables at the computer level, they will apply to all applications that are started on that computer.</span></span> <span data-ttu-id="0cbb9-123">Bu bilgisayarda açık bir komut istemi penceresi bu ortam ayarları varsa ve bu nedenle bu penceresinden başlatmak herhangi bir uygulama olur.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-123">A Command Prompt window that you open on that computer will have these environment settings, and so will any application that you start from that window.</span></span> <span data-ttu-id="0cbb9-124">Başka bir deyişle, bu bilgisayarda yönetilen her işlem, Profil Oluşturucu ile başlar.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-124">This means that every managed process on that computer will start with your profiler.</span></span> <span data-ttu-id="0cbb9-125">Ortam değişkenleri bilgisayar düzeyinde ayarlamak için sağ tıklatın **Bilgisayarım**, tıklatın **özellikleri**, tıklatın **Gelişmiş** sekmesini tıklatın, **ortamı Değişkenleri**, değişkenleri ekleyip **sistem değişkenleri** listesinde ve bilgisayarınızı yeniden başlatın.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-125">To set environment variables at the computer level, right-click **My Computer**, click **Properties**, click the **Advanced** tab, click **Environment Variables**, add the variables to the **System variables** list, and then restart your computer.</span></span> <span data-ttu-id="0cbb9-126">Yeniden başlattıktan sonra değişkenleri sistem genelinde kullanılabilir olacaktır.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-126">After restarting, the variables will be available system-wide.</span></span>  
  
 <span data-ttu-id="0cbb9-127">Bir Windows hizmeti profil, ortam değişkenlerini ayarlama ve profil oluşturucu DLL kaydetme sonra bilgisayarınızı yeniden başlatmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-127">If you are profiling a Windows Service, you must restart your computer after you set the environment variables and register the profiler DLL.</span></span> <span data-ttu-id="0cbb9-128">Bu konuları hakkında daha fazla bilgi için bkz [bir Windows hizmeti profil](#windows_service).</span><span class="sxs-lookup"><span data-stu-id="0cbb9-128">For more information about these considerations, see the section [Profiling a Windows Service](#windows_service).</span></span>  
  
## <a name="additional-considerations"></a><span data-ttu-id="0cbb9-129">Ek hususlar</span><span class="sxs-lookup"><span data-stu-id="0cbb9-129">Additional Considerations</span></span>  
  
-   <span data-ttu-id="0cbb9-130">Profil Oluşturucu sınıfı uygulayan [Icorprofilercallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) ve [Icorprofilercallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) arabirimleri.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-130">The profiler class implements the [ICorProfilerCallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) and [ICorProfilerCallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) interfaces.</span></span> <span data-ttu-id="0cbb9-131">.NET Framework sürüm 2. 0'da, bir profil oluşturucu uygulamalıdır `ICorProfilerCallback2`.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-131">In the .NET Framework version 2.0, a profiler must implement `ICorProfilerCallback2`.</span></span> <span data-ttu-id="0cbb9-132">Yoksa `ICorProfilerCallback2` yüklenmeyecek.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-132">If it does not, `ICorProfilerCallback2` will not be loaded.</span></span>  
  
-   <span data-ttu-id="0cbb9-133">Yalnızca bir profil oluşturucu bir işlemde aynı anda belirli bir ortam profil.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-133">Only one profiler can profile a process at one time in a given environment.</span></span> <span data-ttu-id="0cbb9-134">İki farklı profil oluşturucular farklı ortamlarda kaydedebilirsiniz, ancak her ayrı işlemler profil gerekir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-134">You can register two different profilers in different environments, but each must profile separate processes.</span></span> <span data-ttu-id="0cbb9-135">Profil Oluşturucu, işlem içi COM sunucusu profili oluşturuluyor bir işlem olarak aynı adres alanına eşlenen DLL olarak uygulanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-135">The profiler must be implemented as an in-process COM server DLL, which is mapped into the same address space as the process that is being profiled.</span></span> <span data-ttu-id="0cbb9-136">Bu profil oluşturucu işlemdeki çalıştığını anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-136">This means that the profiler runs in-process.</span></span> <span data-ttu-id="0cbb9-137">.NET Framework başka türde bir COM sunucusu desteklemez.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-137">The .NET Framework does not support any other type of COM server.</span></span> <span data-ttu-id="0cbb9-138">Örneğin, uzak bir bilgisayardan uygulamaları izlemek bir profil oluşturucu istiyorsa, her bilgisayarda Toplayıcı aracıları uyguladıktan gerekir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-138">For example, if a profiler wants to monitor applications from a remote computer, it must implement collector agents on each computer.</span></span> <span data-ttu-id="0cbb9-139">Bu aracıları sonuçları toplu ve bunları merkezi veri toplama bilgisayara iletişim kurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-139">These agents will batch results and communicate them to the central data collection computer.</span></span>  
  
-   <span data-ttu-id="0cbb9-140">Profil Oluşturucu başlatılan işlem bir COM nesnesi olduğundan, her profili uygulamaya profil oluşturucu kopyasını sahip olacaksınız.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-140">Because the profiler is a COM object that is instantiated in-process, each profiled application will have its own copy of the profiler.</span></span> <span data-ttu-id="0cbb9-141">Bu nedenle, birden çok uygulama verileri işlemek bir tek profil oluşturucu örneği yok.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-141">Therefore, a single profiler instance does not have to handle data from multiple applications.</span></span> <span data-ttu-id="0cbb9-142">Ancak, günlük dosyası önlemek için Profil Oluşturucu'nın günlük kodu mantığı profili diğer uygulamalardan üzerine yazar eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-142">However, you will have to add logic to the profiler's logging code to prevent log file overwrites from other profiled applications.</span></span>  
  
## <a name="initializing-the-profiler"></a><span data-ttu-id="0cbb9-143">Profil oluşturucu başlatma</span><span class="sxs-lookup"><span data-stu-id="0cbb9-143">Initializing the Profiler</span></span>  
 <span data-ttu-id="0cbb9-144">Her iki ortam değişkeni denetimleri geçirdiğinizde, CLR benzer şekilde COM için profil oluşturucu örneği oluşturur `CoCreateInstance` işlevi.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-144">When both environment variable checks pass, the CLR creates an instance of the profiler in a similar manner to the COM `CoCreateInstance` function.</span></span> <span data-ttu-id="0cbb9-145">Profil Oluşturucu doğrudan çağrısıyla yüklü değil `CoCreateInstance`.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-145">The profiler is not loaded through a direct call to `CoCreateInstance`.</span></span> <span data-ttu-id="0cbb9-146">Bu nedenle, yapılan bir çağrı `CoInitialize`, iş parçacığı modelini ayarlama gerektiren engellenir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-146">Therefore, a call to `CoInitialize`, which requires setting the threading model, is avoided.</span></span> <span data-ttu-id="0cbb9-147">CLR sonra çağırır [Icorprofilercallback::Initialize](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-initialize-method.md) profil oluşturucu yöntemi.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-147">The CLR then calls the [ICorProfilerCallback::Initialize](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-initialize-method.md) method in the profiler.</span></span> <span data-ttu-id="0cbb9-148">Bu yöntem imzası aşağıdaki gibidir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-148">The signature of this method is as follows.</span></span>  
  
```  
HRESULT Initialize(IUnknown *pICorProfilerInfoUnk)  
```  
  
 <span data-ttu-id="0cbb9-149">Profil Oluşturucu sorgulaması gerekir `pICorProfilerInfoUnk` için bir [Icorprofilerınfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) veya [Icorprofilerınfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md) arabirimi işaretçisi ve böylece profil oluşturma sırasında daha sonra daha fazla bilgi isteyebilir kaydedin.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-149">The profiler must query `pICorProfilerInfoUnk` for an [ICorProfilerInfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) or [ICorProfilerInfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md) interface pointer and save it so that it can request more information later during profiling.</span></span>  
  
## <a name="setting-event-notifications"></a><span data-ttu-id="0cbb9-150">Olay bildirimlerini ayarlama</span><span class="sxs-lookup"><span data-stu-id="0cbb9-150">Setting Event Notifications</span></span>  
 <span data-ttu-id="0cbb9-151">Profil Oluşturucu sonra çağırır [Icorprofilerınfo::seteventmask](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-seteventmask-method.md) yöntemi içinde ilgileniyor kategorilerini bildirimler belirtin.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-151">The profiler then calls the [ICorProfilerInfo::SetEventMask](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-seteventmask-method.md) method to specify which categories of notifications it is interested in.</span></span> <span data-ttu-id="0cbb9-152">Örneğin, yalnızca profil oluşturucu ilgilenmektedir işlevi girin ve bildirimleri ve çöp toplama bildirimleri bırakın, aşağıdaki belirtir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-152">For example, if the profiler is interested only in function enter and leave notifications and garbage collection notifications, it specifies the following.</span></span>  
  
```  
ICorProfilerInfo* pInfo;  
pICorProfilerInfoUnk->QueryInterface(IID_ICorProfilerInfo, (void**)&pInfo);  
pInfo->SetEventMask(COR_PRF_MONITOR_ENTERLEAVE | COR_PRF_MONITOR_GC)  
```  
  
 <span data-ttu-id="0cbb9-153">Bu şekilde bildirimleri maskesi ayarlayarak, profil oluşturucu aldığı hangi bildirimleri sınırlayabilir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-153">By setting the notifications mask in this manner, the profiler can limit which notifications it receives.</span></span> <span data-ttu-id="0cbb9-154">Bu yaklaşım basit veya özel amaçlı profil oluşturucu derleme kullanıcı yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-154">This approach helps the user build a simple or special-purpose profiler.</span></span> <span data-ttu-id="0cbb9-155">Ayrıca, profil oluşturucu yalnızca yoksay bildirimleri gönderme küçülttüğü iyi bir şekilde CPU zamanı azaltır.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-155">It also reduces CPU time that would be wasted sending notifications that the profiler would just ignore.</span></span>  
  
 <span data-ttu-id="0cbb9-156">Belirli profil oluşturucu olayları değişmez.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-156">Certain profiler events are immutable.</span></span> <span data-ttu-id="0cbb9-157">Bu olaylar kümesinde hemen buna `ICorProfilerCallback::Initialize` geri arama, bunlar devre dışı bırakılamaz ve yeni olaylar açılamaz.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-157">This means that as soon as these events are set in the `ICorProfilerCallback::Initialize` callback, they cannot be turned off and new events cannot be turned on.</span></span> <span data-ttu-id="0cbb9-158">Değişmez olaya değiştirme girişimleri neden olur `ICorProfilerInfo::SetEventMask` başarısız HRESULT döndürüyor.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-158">Attempts to change an immutable event will result in `ICorProfilerInfo::SetEventMask` returning a failed HRESULT.</span></span>  
  
<a name="windows_service"></a>   
## <a name="profiling-a-windows-service"></a><span data-ttu-id="0cbb9-159">Bir Windows hizmeti profil oluşturma</span><span class="sxs-lookup"><span data-stu-id="0cbb9-159">Profiling a Windows Service</span></span>  
 <span data-ttu-id="0cbb9-160">Bir Windows hizmeti profil, bir ortak dil çalışma zamanı uygulama profili oluşturma gibi olur.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-160">Profiling a Windows Service is like profiling a common language runtime application.</span></span> <span data-ttu-id="0cbb9-161">Her iki profil oluşturma işlemlerini ortam değişkenleri etkinleştirilir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-161">Both profiling operations are enabled through environment variables.</span></span> <span data-ttu-id="0cbb9-162">İşletim sistemi başlar, bu konuda daha önce tartışılan ortam değişkenleri zaten olması gerektiğinde bir Windows hizmeti başlatıldığı için sunmak ve sistem başlamadan önce gerekli değerleri ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-162">Because a Windows Service is started when the operating system starts, the environment variables discussed previously in this topic must already be present and set to the required values before the system starts.</span></span> <span data-ttu-id="0cbb9-163">Ayrıca, profil DLL sistemde zaten kaydedilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-163">In addition, the profiling DLL must already be registered on the system.</span></span>  
  
 <span data-ttu-id="0cbb9-164">Cor_enable_profılıng ve cor_profıler ortam değişkenlerini ayarlama ve profil oluşturucu DLL kaydetme sonra Windows hizmeti bu değişiklikleri algılayabilmesi hedef bilgisayarı yeniden başlatmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-164">After you set the COR_ENABLE_PROFILING and COR_PROFILER environment variables and register the profiler DLL, you should restart the target computer so that the Windows Service can detect those changes.</span></span>  
  
 <span data-ttu-id="0cbb9-165">Bu değişiklikler sistem genelinde profil etkinleştirecek unutmayın.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-165">Note that these changes will enable profiling on a system-wide basis.</span></span> <span data-ttu-id="0cbb9-166">Daha sonra profili oluşturuluyor çalıştıran her yönetilen uygulamayı önlemek için hedef bilgisayar yeniden başlatıldıktan sonra sistem ortam değişkenleri silmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-166">To prevent every managed application that subsequently runs from being profiled, you should delete the system environment variables after you restart the target computer.</span></span>  
  
 <span data-ttu-id="0cbb9-167">Bu teknik de profili her bir CLR işleme yol açar.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-167">This technique also leads to every CLR process getting profiled.</span></span> <span data-ttu-id="0cbb9-168">Profil Oluşturucu mantığı eklemeniz gerekir, [Icorprofilercallback::Initialize](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-initialize-method.md) geçerli işlem ilgi olup olmadığını saptamak için geri çağırma.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-168">The profiler should add logic to its [ICorProfilerCallback::Initialize](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-initialize-method.md) callback to detect whether the current process is of interest.</span></span> <span data-ttu-id="0cbb9-169">Değilse, profil oluşturucu başlatma yapmadan geri arama başarısız olabilir.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-169">If it is not, the profiler can fail the callback without performing the initialization.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0cbb9-170">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="0cbb9-170">See Also</span></span>  
 [<span data-ttu-id="0cbb9-171">Profil Oluşturmaya Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="0cbb9-171">Profiling Overview</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-overview.md)
