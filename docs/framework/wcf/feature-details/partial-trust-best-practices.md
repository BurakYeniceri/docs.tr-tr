---
title: Kısmi Güven En İyi Uygulamaları
ms.date: 03/30/2017
ms.assetid: 0d052bc0-5b98-4c50-8bb5-270cc8a8b145
ms.openlocfilehash: fca975ff4216384b970535273511eb07cd6ded68
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33497275"
---
# <a name="partial-trust-best-practices"></a><span data-ttu-id="a12d7-102">Kısmi Güven En İyi Uygulamaları</span><span class="sxs-lookup"><span data-stu-id="a12d7-102">Partial Trust Best Practices</span></span>
<span data-ttu-id="a12d7-103">Bu konu, Windows Communication Foundation (WCF) bir kısmi güven ortamında çalışırken en iyi uygulamaları açıklar.</span><span class="sxs-lookup"><span data-stu-id="a12d7-103">This topic describes best practices when running Windows Communication Foundation (WCF) in a partial trust environment.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="a12d7-104">Serileştirme</span><span class="sxs-lookup"><span data-stu-id="a12d7-104">Serialization</span></span>  
 <span data-ttu-id="a12d7-105">Kullanırken aşağıdaki yöntemleri uygulayın <xref:System.Runtime.Serialization.DataContractSerializer> kısmen güvenilen uygulamada.</span><span class="sxs-lookup"><span data-stu-id="a12d7-105">Apply the following practices when using the <xref:System.Runtime.Serialization.DataContractSerializer> in a partially-trusted application.</span></span>  
  
-   <span data-ttu-id="a12d7-106">Tüm seri hale getirilebilir türler ile açıkça işaretlenmelidir `[DataContract]` özniteliği.</span><span class="sxs-lookup"><span data-stu-id="a12d7-106">All serializable types must be explicitly marked with the `[DataContract]` attribute.</span></span> <span data-ttu-id="a12d7-107">Aşağıdaki teknikler, kısmi güven ortamında desteklenmez:</span><span class="sxs-lookup"><span data-stu-id="a12d7-107">The following techniques are not supported in a partial trust environment:</span></span>  
  
-   <span data-ttu-id="a12d7-108">İle serileştirilecek sınıfları işaretleme <xref:System.SerializableAttribute>.</span><span class="sxs-lookup"><span data-stu-id="a12d7-108">Marking classes to be serialized with the <xref:System.SerializableAttribute>.</span></span>  
  
-   <span data-ttu-id="a12d7-109">Uygulama <xref:System.Runtime.Serialization.ISerializable> seri hale getirme işlemini kontrol eden bir sınıf izin vermek için arabirim.</span><span class="sxs-lookup"><span data-stu-id="a12d7-109">Implementing the <xref:System.Runtime.Serialization.ISerializable> interface to allow a class to control its serialization process.</span></span>  
  
### <a name="using-datacontractserializer"></a><span data-ttu-id="a12d7-110">DataContractSerializer kullanılarak</span><span class="sxs-lookup"><span data-stu-id="a12d7-110">Using DataContractSerializer</span></span>  
  
-   <span data-ttu-id="a12d7-111">Tüm türleri ile işaretlenen `[DataContract]` özniteliği ortak olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="a12d7-111">All types marked with the `[DataContract]` attribute must be public.</span></span> <span data-ttu-id="a12d7-112">Ortak olmayan türleri bir kısmi güven ortamında seri hale getirilemez.</span><span class="sxs-lookup"><span data-stu-id="a12d7-112">Non-public types cannot be serialized in a partial trust environment.</span></span>  
  
-   <span data-ttu-id="a12d7-113">Tüm `[DataContract]` üyeleri bir serileştirilebilir `[DataContract]` türü ortak olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="a12d7-113">All `[DataContract]` members in a serializable `[DataContract]` type must be public.</span></span> <span data-ttu-id="a12d7-114">Genel olmayan bir türüyle `[DataMember]` bir kısmi güven ortamında seri hale getirilemez.</span><span class="sxs-lookup"><span data-stu-id="a12d7-114">A type with a non-public `[DataMember]` cannot be serialized in a partial trust environment.</span></span>  
  
-   <span data-ttu-id="a12d7-115">Seri hale getirme olayları işlemek yöntemleri (gibi `OnSerializing`, `OnSerialized`, `OnDeserializing`, ve `OnDeserialized`) genel olarak bildirilmelidir.</span><span class="sxs-lookup"><span data-stu-id="a12d7-115">Methods that handle serialization events (such as `OnSerializing`, `OnSerialized`, `OnDeserializing`, and `OnDeserialized`) must be declared as public.</span></span> <span data-ttu-id="a12d7-116">Ancak, açık ve kapalı uygulamaları <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%28System.Object%29> desteklenir.</span><span class="sxs-lookup"><span data-stu-id="a12d7-116">However, both explicit and implicit implementations of <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%28System.Object%29> are supported.</span></span>  
  
-   <span data-ttu-id="a12d7-117">`[DataContract]` derlemelerde uygulanan türleri ile işaretlenen <xref:System.Security.AllowPartiallyTrustedCallersAttribute> Tür oluşturucu Eylemler güvenlikle ilgili olarak gerçekleştirmelisiniz değil <xref:System.Runtime.Serialization.DataContractSerializer> Oluşturucusu yeni örneği nesnesinin seri durumdan çıkarma sırasında çağırmaz.</span><span class="sxs-lookup"><span data-stu-id="a12d7-117">`[DataContract]` types implemented in assemblies marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> must not perform security-related actions in the type constructor, as the <xref:System.Runtime.Serialization.DataContractSerializer> does not call the constructor of the newly-instantiated object during deserialization.</span></span> <span data-ttu-id="a12d7-118">Özellikle, aşağıdaki genel güvenlik teknikleri için kaçınılmalıdır `[DataContract]` türleri:</span><span class="sxs-lookup"><span data-stu-id="a12d7-118">Specifically, the following common security techniques must be avoided for `[DataContract]` types:</span></span>  
  
-   <span data-ttu-id="a12d7-119">İç veya özel tür Oluşturucu yaparak kısmi güven erişimi kısıtlamak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="a12d7-119">Attempting to restrict partial trust access by making the type's constructor internal or private.</span></span>  
  
-   <span data-ttu-id="a12d7-120">Ekleyerek türü için erişimi kısıtlamak bir `[LinkDemand]` tür oluşturucuya.</span><span class="sxs-lookup"><span data-stu-id="a12d7-120">Restricting access to the type by adding a `[LinkDemand]` to the type's constructor.</span></span>  
  
-   <span data-ttu-id="a12d7-121">Nesne başarıyla örneği olduğundan oluşturucusu tarafından zorlanan tüm doğrulama denetimleri başarıyla başarılı olduğunu varsayarak.</span><span class="sxs-lookup"><span data-stu-id="a12d7-121">Assuming that because the object has been successfully instantiated, any validation checks enforced by the constructor have passed successfully.</span></span>  
  
### <a name="using-ixmlserializable"></a><span data-ttu-id="a12d7-122">IXmlSerializable kullanma</span><span class="sxs-lookup"><span data-stu-id="a12d7-122">Using IXmlSerializable</span></span>  
 <span data-ttu-id="a12d7-123">Uygulama türleri için aşağıdaki en iyi yöntemleri uygulayın <xref:System.Xml.Serialization.IXmlSerializable> ve kullanılarak serileştirilmiş <xref:System.Runtime.Serialization.DataContractSerializer>:</span><span class="sxs-lookup"><span data-stu-id="a12d7-123">The following best practices apply for types that implement <xref:System.Xml.Serialization.IXmlSerializable> and are serialized using the <xref:System.Runtime.Serialization.DataContractSerializer>:</span></span>  
  
-   <span data-ttu-id="a12d7-124"><xref:System.Xml.Serialization.IXmlSerializable.GetSchema%2A> Statik yöntem uygulamalarını olmalıdır `public`.</span><span class="sxs-lookup"><span data-stu-id="a12d7-124">The <xref:System.Xml.Serialization.IXmlSerializable.GetSchema%2A> static method implementations must be `public`.</span></span>  
  
-   <span data-ttu-id="a12d7-125">Uygulama örnek yöntemleri <xref:System.Xml.Serialization.IXmlSerializable> arabirimi olmalıdır `public`.</span><span class="sxs-lookup"><span data-stu-id="a12d7-125">The instance methods that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface must be `public`.</span></span>  
  
## <a name="using-wcf-from-fully-trusted-platform-code-that-allows-calls-from-partially-trusted-callers"></a><span data-ttu-id="a12d7-126">WCF gelen çağrıları kısmen sağlayan tam olarak Güvenilir Platform kodundan kullanarak güvenilen arayanlara</span><span class="sxs-lookup"><span data-stu-id="a12d7-126">Using WCF from Fully-Trusted Platform Code that Allows Calls from Partially Trusted Callers</span></span>  
 <span data-ttu-id="a12d7-127">WCF kısmi güven güvenlik modeli bir WCF ortak yöntemi veya özelliği herhangi bir çağırıcı barındırma uygulama kod erişim güvenliği (CAS) bağlamında çalıştığını varsayar.</span><span class="sxs-lookup"><span data-stu-id="a12d7-127">The WCF partial trust security model assumes that any caller of a WCF public method or property is running in the code access security (CAS) context of the hosting application.</span></span> <span data-ttu-id="a12d7-128">WCF aynı zamanda bu yalnızca bir uygulama güvenlik bağlamı bulunduğunu varsayar her biri için <xref:System.AppDomain>, ve bu bağlamda adresindeki oluşturulmuş <xref:System.AppDomain> bir güvenilir ana bilgisayar tarafından oluşturma zamanı (örneğin, bir çağrı tarafından <xref:System.AppDomain.CreateDomain%2A> veya ASP.NET Uygulama Yöneticisi tarafından).</span><span class="sxs-lookup"><span data-stu-id="a12d7-128">WCF also assumes that only one application security context exists for each <xref:System.AppDomain>, and that this context is established at <xref:System.AppDomain> creation time by a trusted host (for example, by a call to <xref:System.AppDomain.CreateDomain%2A> or by the ASP.NET Application Manager).</span></span>  
  
 <span data-ttu-id="a12d7-129">Bu güvenlik modeli, bir orta güven ASP.NET uygulamasında çalışan kullanıcı kodu gibi ek CA'lar izinler assert olamaz kullanıcı tarafından yazılan uygulamaları için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="a12d7-129">This security model applies to user-written applications that cannot assert additional CAS permissions, such as user code running in a Medium Trust ASP.NET application.</span></span> <span data-ttu-id="a12d7-130">Ancak, tam olarak güvenilir platform kodu (örneğin, genel derleme önbelleğinde yüklü olan ve kısmen güvenilen kod gelen çağrıları kabul eden bir üçüncü taraf derleme) açık WCF kısmen güvenilen bir uygulama adına çağrılırken özen gerekir Uygulama düzeyi güvenlik açıkları Tanıtımı kaçının.</span><span class="sxs-lookup"><span data-stu-id="a12d7-130">However, fully-trusted platform code (for example, a third-party assembly that is installed in the global assembly cache and accepts calls from partially-trusted code) must take explicit care when calling into WCF on behalf of a partially-trusted application to avoid introducing application-level security vulnerabilities.</span></span>  
  
 <span data-ttu-id="a12d7-131">Tam güven kodlardan kaçının geçerli iş parçacığının CA'lar izin kümesini değiştirme (çağırarak <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, veya <xref:System.Security.PermissionSet.Deny%2A>) kısmen güvenilen kod adına WCF API'lerini çağırmadan önce.</span><span class="sxs-lookup"><span data-stu-id="a12d7-131">Full-trust code should avoid altering the CAS permission set of the current thread (by calling <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, or <xref:System.Security.PermissionSet.Deny%2A>) prior to calling WCF APIs on behalf of partially-trusted code.</span></span> <span data-ttu-id="a12d7-132">Sunduğundan, engelleme ya da aksi takdirde uygulama düzeyinde güvenlik bağlamı bağımsız olan bir iş parçacığına özgü izni bağlamı oluşturma beklenmeyen davranışlara neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="a12d7-132">Asserting, denying, or otherwise creating a thread-specific permission context that is independent of the application-level security context can result in unexpected behavior.</span></span> <span data-ttu-id="a12d7-133">Uygulamaya bağlı olarak, bu davranış, uygulama düzeyinde güvenlik açıklarına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="a12d7-133">Depending on the application, this behavior may result in application-level security vulnerabilities.</span></span>  
  
 <span data-ttu-id="a12d7-134">Bir iş parçacığına özgü izni bağlamı kullanarak WCF çağrılarını kaynaklanabilecek aşağıdaki durumlarda işlemek için hazırlanması gerekir kodu:</span><span class="sxs-lookup"><span data-stu-id="a12d7-134">Code that calls into WCF using a thread-specific permission context must be prepared to handle the following situations that may arise:</span></span>  
  
-   <span data-ttu-id="a12d7-135">İş parçacığına özgü güvenlik bağlamı olası güvenlik özel durumlarıyla sonuçları işlemi süresince saklanması değil.</span><span class="sxs-lookup"><span data-stu-id="a12d7-135">The thread-specific security context may not be maintained for the duration of the operation, which results in potential security exceptions.</span></span>  
  
-   <span data-ttu-id="a12d7-136">Hiçbir kullanıcı tarafından sağlanan geri aramalar yanı sıra iç WCF kodu farklı güvenlik bağlamı altında çağrı başlangıçta başlatıldı fazla çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a12d7-136">Internal WCF code as well as any user-provided callbacks may run in a different security context than the one under which the call was originally initiated.</span></span> <span data-ttu-id="a12d7-137">Bu içerikler şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="a12d7-137">These contexts include:</span></span>  
  
    -   <span data-ttu-id="a12d7-138">Uygulama izni bağlamı.</span><span class="sxs-lookup"><span data-stu-id="a12d7-138">The application permission context.</span></span>  
  
    -   <span data-ttu-id="a12d7-139">Şu anda çalışan ömrü boyunca WCF çağırmak için kullanılan başka bir kullanıcı iş parçacığı tarafından daha önce oluşturulan her iş parçacığına özgü izni bağlam <xref:System.AppDomain>.</span><span class="sxs-lookup"><span data-stu-id="a12d7-139">Any thread-specific permission context previously created by other user threads used to call into WCF during the lifetime of the currently running <xref:System.AppDomain>.</span></span>  
  
 <span data-ttu-id="a12d7-140">WCF bu izinlere WCF ortak API'ler içine çağrılmadan önce tam olarak güvenilir bir bileşen tarafından uygulanan sürece kısmen güvenilen kodu tam güven izinleri elde edemiyor güvence altına alır.</span><span class="sxs-lookup"><span data-stu-id="a12d7-140">WCF guarantees that partially-trusted code cannot obtain full-trust permissions unless such permissions are asserted by a fully-trusted component prior to calling into WCF public APIs.</span></span> <span data-ttu-id="a12d7-141">Ancak, onu tam güven sunduğundan etkilerini belirli iş parçacığı, işlem veya kullanıcı eylemi yalıtılmış garanti etmez.</span><span class="sxs-lookup"><span data-stu-id="a12d7-141">However, it does not guarantee that the effects of asserting full trust is isolated to a particular thread, operation, or user action.</span></span>  
  
 <span data-ttu-id="a12d7-142">En iyi uygulama, iş parçacığına özgü izni bağlam çağırarak oluşturmamak <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, veya <xref:System.Security.PermissionSet.Deny%2A>.</span><span class="sxs-lookup"><span data-stu-id="a12d7-142">As a best practice, avoid creating thread-specific permission context by calling <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, or <xref:System.Security.PermissionSet.Deny%2A>.</span></span> <span data-ttu-id="a12d7-143">Bunun yerine, vermek ya da uygulamaya kendisini ayrıcalık reddetmek için hiçbir <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.Deny%2A>, veya <xref:System.Security.PermissionSet.PermitOnly%2A> gereklidir.</span><span class="sxs-lookup"><span data-stu-id="a12d7-143">Instead, grant or deny the privilege to the application itself, so that no <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.Deny%2A>, or <xref:System.Security.PermissionSet.PermitOnly%2A> is required.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a12d7-144">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="a12d7-144">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractSerializer>  
 <xref:System.Xml.Serialization.IXmlSerializable>
