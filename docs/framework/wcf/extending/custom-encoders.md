---
title: "Özel Kodlayıcılar"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: fa0e1d7f-af36-4bf4-aac9-cd4eab95bc4f
caps.latest.revision: "15"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: d9a6c9705fbcf4dd3b9aeb6f07a7973081ea66c3
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/21/2017
---
# <a name="custom-encoders"></a><span data-ttu-id="ab816-102">Özel Kodlayıcılar</span><span class="sxs-lookup"><span data-stu-id="ab816-102">Custom Encoders</span></span>
<span data-ttu-id="ab816-103">Bu konu özel kodlayıcılar oluşturulacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="ab816-103">This topic discusses how to create custom encoders.</span></span>  
  
 <span data-ttu-id="ab816-104">İçinde [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], kullandığınız bir *bağlama* uç noktaları arasında bir ağ üzerinden veri aktarımı nasıl belirtmek için.</span><span class="sxs-lookup"><span data-stu-id="ab816-104">In [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], you use a *binding* to specify how to transfer data across a network between endpoints.</span></span> <span data-ttu-id="ab816-105">Bir dizi oluşan bir bağlama yapılır *bağlama öğeleri*.</span><span class="sxs-lookup"><span data-stu-id="ab816-105">A binding is made up of a sequence of *binding elements*.</span></span> <span data-ttu-id="ab816-106">İsteğe bağlı Protokolü bağlama öğeleri gibi güvenlik, gerekli bir bağlama içerir *ileti Kodlayıcı* bağlama öğesi ve gerekli aktarım bağlama öğesi.</span><span class="sxs-lookup"><span data-stu-id="ab816-106">A binding includes optional protocol binding elements such as security, a required *Message Encoder* binding element, and a required transport binding element.</span></span> <span data-ttu-id="ab816-107">İleti Kodlayıcı bağlama öğesi kodlama bir ileti gösterilir.</span><span class="sxs-lookup"><span data-stu-id="ab816-107">A message encoder is represented by a message encoding binding element.</span></span> <span data-ttu-id="ab816-108">Üç ileti kodlayıcılar dahil edilmiştir [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]: ikili, ileti iletim en iyi duruma getirme mekanizmasını (MTOM) ve metin.</span><span class="sxs-lookup"><span data-stu-id="ab816-108">Three message encoders are included in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]: Binary, Message Transmission Optimization Mechanism (MTOM), and Text.</span></span>  
  
 <span data-ttu-id="ab816-109">Kodlama bağlama öğesi serileştiren bir giden bir ileti <xref:System.ServiceModel.Channels.Message> ve taşıma için geçirir veya taşımadan serileştirilmiş formun bir ileti alır ve protokol katmanında varsa veya uygulamaya geçirir, yüklü değilse.</span><span class="sxs-lookup"><span data-stu-id="ab816-109">A message encoding binding element serializes an outgoing <xref:System.ServiceModel.Channels.Message> and passes it to the transport, or receives the serialized form of a message from the transport and passes it to the protocol layer if present, or to the application, if not present.</span></span>  
  
 <span data-ttu-id="ab816-110">İleti kodlayıcılar dönüştürme <xref:System.ServiceModel.Channels.Message> örnekleri hat gösterimine gelen ve giden.</span><span class="sxs-lookup"><span data-stu-id="ab816-110">Message encoders transform <xref:System.ServiceModel.Channels.Message> instances to and from a wire representation.</span></span> <span data-ttu-id="ab816-111">Kodlayıcılar kanal yığınındaki taşıma katmanının bir defada olarak açıklanan rağmen Aktarım katmanı içinde bulundukları.</span><span class="sxs-lookup"><span data-stu-id="ab816-111">Although encoders are described as sitting above the transport layer in the channel stack, they reside inside the transport layer.</span></span> <span data-ttu-id="ab816-112">Taşımalar (örneğin HTTP) ileti aktarma standart gereksinimlerine göre biçimlendirin.</span><span class="sxs-lookup"><span data-stu-id="ab816-112">Transports (for example HTTP) format the message according to the requirements of the transport standard.</span></span> <span data-ttu-id="ab816-113">Kodlayıcılar (örneğin metin Xml), yalnızca ileti kodlayın.</span><span class="sxs-lookup"><span data-stu-id="ab816-113">Encoders (for example Text Xml) just encode the message.</span></span>  
  
 <span data-ttu-id="ab816-114">Bir önceden var olan istemci veya sunucu bağlanırken belirli ileti kodlama kullanma hakkında bir seçenek olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="ab816-114">When connecting to a preexisting client or server, you may not have a choice about using a particular message encoding.</span></span> <span data-ttu-id="ab816-115">Ancak, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Hizmetleri yapılabilir birden çok uç nokta, her biri farklı ileti Kodlayıcı üzerinden erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="ab816-115">However, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services can be made accessible through multiple endpoints, each with a different message encoder.</span></span> <span data-ttu-id="ab816-116">Tek bir kodlayıcı hedef kitle hizmetiniz için kapsamaz, birden çok Uç noktalara hizmetinizi gösterme göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="ab816-116">When a single encoder does not cover the entire audience for your service, consider exposing your service over multiple endpoints.</span></span> <span data-ttu-id="ab816-117">İstemci uygulamaları sonra bunlar için en iyisidir uç noktası seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ab816-117">Client applications can then choose the endpoint that is best for them.</span></span> <span data-ttu-id="ab816-118">Birden çok uç noktalarını kullanarak diğer bağlama öğeleriyle farklı ileti kodlayıcılar avantajları birleştirmek sağlar.</span><span class="sxs-lookup"><span data-stu-id="ab816-118">Using multiple endpoints allows you to combine the advantages of different message encoders with other binding elements.</span></span>  
  
## <a name="system-provided-encoders"></a><span data-ttu-id="ab816-119">Sistem tarafından sağlanan kodlayıcılar</span><span class="sxs-lookup"><span data-stu-id="ab816-119">System-Provided Encoders</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="ab816-120">en yaygın uygulama senaryolarını kapsamak üzere tasarlanmış birçok sistem tarafından sağlanan bağlamaları sağlar.</span><span class="sxs-lookup"><span data-stu-id="ab816-120"> provides several system-provided bindings that are designed to cover the most common application scenarios.</span></span> <span data-ttu-id="ab816-121">Her bu bağlamaların bir aktarım, ileti Kodlayıcı ve diğer seçenekleri (örneğin, güvenlik) birleştirir.</span><span class="sxs-lookup"><span data-stu-id="ab816-121">Each of these bindings combine a transport, message encoder, and other options (security, for example).</span></span> <span data-ttu-id="ab816-122">Bu konuda nasıl genişletileceğini açıklar `Text`, `Binary`, ve `MTOM` iletisi içinde yer alan kodlayıcılar [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], veya kendi özel Kodlayıcı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="ab816-122">This topic describes how to extend the `Text`, `Binary`, and `MTOM` message encoders that are included in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], or create your own custom encoder.</span></span> <span data-ttu-id="ab816-123">Metin ileti Kodlayıcı hem bir düz XML kodlama yanı sıra SOAP Kodlamalar destekler.</span><span class="sxs-lookup"><span data-stu-id="ab816-123">The text message encoder supports both a plain XML encoding as well as SOAP encodings.</span></span> <span data-ttu-id="ab816-124">Metin ileti Kodlayıcı düz XML kodlama modunu metin tabanlı SOAP kodlamadan ayırt etmek için POX ("düz eski XML") Kodlayıcı adı verilir.</span><span class="sxs-lookup"><span data-stu-id="ab816-124">The plain XML encoding mode of the text message encoder is called the POX ("Plain Old XML") encoder to distinguish it from the text-based SOAP encoding.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="ab816-125">Sistem tarafından sağlanan bağlamalar tarafından sağlanan bağlama öğeleri birleşimlerini karşılık gelen bölümüne bakın [taşıma seçme](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="ab816-125"> the combinations of binding elements provided by the system-provided bindings, see the corresponding section in [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
## <a name="how-to-work-with-system-provided-encoders"></a><span data-ttu-id="ab816-126">Sistem tarafından sağlanan kodlayıcılar ile çalışma</span><span class="sxs-lookup"><span data-stu-id="ab816-126">How to Work with System-Provided Encoders</span></span>  
 <span data-ttu-id="ab816-127">Bir kodlama türetilmiş bir sınıf kullanarak bir bağlama eklenir <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="ab816-127">An encoding is added to a binding using a class derived from <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="ab816-128">aşağıdaki türden türetilmiş bağlama öğeleri sağlar <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> metin, ikili ve ileti iletim en iyi duruma getirme mekanizmasını (MTOM) kodlama için sağlayabilen sınıfı:</span><span class="sxs-lookup"><span data-stu-id="ab816-128"> provides the following types of binding elements derived from the <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> class that can provide for text, binary and Message Transmission Optimization Mechanism (MTOM) encoding:</span></span>  
  
-   <span data-ttu-id="ab816-129"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>: En birlikte çalışabilir, ancak XML iletileri için az verimli Kodlayıcı.</span><span class="sxs-lookup"><span data-stu-id="ab816-129"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>: The most interoperable, but the least efficient encoder for XML messages.</span></span> <span data-ttu-id="ab816-130">Genellikle Web hizmeti veya Web hizmeti istemcisi metinsel XML anlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ab816-130">A Web service or Web service client can generally understand textual XML.</span></span> <span data-ttu-id="ab816-131">Ancak, büyük metin olarak ikili veri blokları iletmek etkili değildir.</span><span class="sxs-lookup"><span data-stu-id="ab816-131">However, transmitting large blocks of binary data as text is not efficient.</span></span>  
  
-   <span data-ttu-id="ab816-132"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>: Karakter kodlamasını belirtir bağlama öğesi ve sürüm oluşturma ikili tabanlı XML iletileri için kullanılan ileti temsil eder.</span><span class="sxs-lookup"><span data-stu-id="ab816-132"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>: Represents the binding element that specifies the character encoding and message versioning used for binary-based XML messages.</span></span> <span data-ttu-id="ab816-133">Bu kodlama seçeneklerini, ancak en az çalışabilen en etkili yoldur yalnızca tarafından desteklenmediği için [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uç noktaları.</span><span class="sxs-lookup"><span data-stu-id="ab816-133">This is most efficient of the encoding options, but the least interoperable, because it is only supported by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoints.</span></span>  
  
-   <span data-ttu-id="ab816-134"><<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement -->`System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`>: bir ileti iletim en iyi duruma getirme mekanizmasını (MTOM) kodlama kullanılarak bir ileti için kullanılan ileti sürüm oluşturma ve karakter kodlamasını belirtir bağlama öğesi temsil eder.</span><span class="sxs-lookup"><span data-stu-id="ab816-134"><<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement --> `System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`>: Represents the binding element that specifies the character encoding and message versioning used for a message using a Message Transmission Optimization Mechanism (MTOM) encoding.</span></span> <span data-ttu-id="ab816-135">MTOM, ikili dosya verilerini iletmek için verimli bir teknolojisidir [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] iletileri.</span><span class="sxs-lookup"><span data-stu-id="ab816-135">MTOM is an efficient technology for transmitting binary data in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] messages.</span></span> <span data-ttu-id="ab816-136">MTOM Kodlayıcısı verimliliği ve birlikte çalışabilirlik arasında dengelemek çalışır.</span><span class="sxs-lookup"><span data-stu-id="ab816-136">The MTOM encoder attempts to balance between efficiency and interoperability.</span></span> <span data-ttu-id="ab816-137">MTOM kodlama çoğu XML metin biçiminde aktarır ancak bunları olarak ileterek büyük ikili veri blokları en iyi duruma getirir-metne dönüştürme olmadan, ise.</span><span class="sxs-lookup"><span data-stu-id="ab816-137">The MTOM encoding transmits most XML in textual form, but optimizes large blocks of binary data by transmitting them as-is, without conversion to text.</span></span>  
  
 <span data-ttu-id="ab816-138">Bir ikili, MTOM veya metin bağlama öğesi oluşturur <xref:System.ServiceModel.Channels.MessageEncoderFactory>.</span><span class="sxs-lookup"><span data-stu-id="ab816-138">The binding element creates a binary, MTOM, or text <xref:System.ServiceModel.Channels.MessageEncoderFactory>.</span></span> <span data-ttu-id="ab816-139">Bir ikili, MTOM veya metin üreteci oluşturur <xref:System.ServiceModel.Channels.MessageEncoderFactory> örneği.</span><span class="sxs-lookup"><span data-stu-id="ab816-139">The factory creates a binary, MTOM, or text <xref:System.ServiceModel.Channels.MessageEncoderFactory> instance.</span></span> <span data-ttu-id="ab816-140">Genellikle, yalnızca tek bir örneği yoktur.</span><span class="sxs-lookup"><span data-stu-id="ab816-140">Typically, there is only a single instance.</span></span> <span data-ttu-id="ab816-141">Ancak oturumları kullandıysanız, farklı bir kodlayıcı her oturuma sağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="ab816-141">However if sessions are used, a different encoder may be provided to each session.</span></span> <span data-ttu-id="ab816-142">İkili kodlama sağlar (bkz. XML altyapı) dinamik sözlük koordine etmek için bu kullanın.</span><span class="sxs-lookup"><span data-stu-id="ab816-142">The Binary encoder makes use of this to coordinate dynamic dictionaries (see XML Infrastructure).</span></span>  
  
 <span data-ttu-id="ab816-143"><xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> Ve <xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> kodlayıcılar çekirdek yöntemleridir.</span><span class="sxs-lookup"><span data-stu-id="ab816-143">The <xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> and <xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> methods are the core of the encoders.</span></span> <span data-ttu-id="ab816-144">Bir akış ya da bir ileti okumak için yöntemleri sunar bir <xref:System.Byte> dizi.</span><span class="sxs-lookup"><span data-stu-id="ab816-144">The methods provide for reading a message from a stream or from a <xref:System.Byte> array.</span></span> <span data-ttu-id="ab816-145">Bayt dizileri taşıma arabelleğe alınan modunda olduğunda kullanılır.</span><span class="sxs-lookup"><span data-stu-id="ab816-145">Byte arrays are used when the transport is operating in buffered mode.</span></span> <span data-ttu-id="ab816-146">İletileri her zaman akışlara yazılır.</span><span class="sxs-lookup"><span data-stu-id="ab816-146">Messages are always written to streams.</span></span> <span data-ttu-id="ab816-147">Taşıma ileti arabellek gerekir, arabelleğe alma yapan bir akış sağlar.</span><span class="sxs-lookup"><span data-stu-id="ab816-147">If the transport must buffer the message, it provides a stream that does the buffering.</span></span>  
  
 <span data-ttu-id="ab816-148">Kalan üyeleri iş destek içerik, medya türleriyle ve <xref:System.ServiceModel.Channels.MessageEncoder.MessageVersion%2A>.</span><span class="sxs-lookup"><span data-stu-id="ab816-148">The rest of the members work with support content, media types, and <xref:System.ServiceModel.Channels.MessageEncoder.MessageVersion%2A>.</span></span> <span data-ttu-id="ab816-149">Taşıma tarafından gelen ileti çözülebilir olup olmadığını sınamak için ya da giden ileti bu Kodlayıcı için geçerli olup olmadığını belirlemek için bu Kodlayıcı yöntemleri çağırır.</span><span class="sxs-lookup"><span data-stu-id="ab816-149">The transport calls these encoder methods to test whether the incoming message can be decoded by it, or to determine if the outgoing message is valid for this encoder.</span></span>  
  
 <span data-ttu-id="ab816-150">Üç Kodlayıcı uygulamaların her biri belirli kodlamaları için uygun olan özellikler ekler ve tam olarak yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="ab816-150">Each of the three encoder implementations adds properties that are relevant to the specific encodings and is fully configurable.</span></span> <span data-ttu-id="ab816-151">Kodlayıcılar güvenli varsayılanlar sahip okuyucu kotaları da açın.</span><span class="sxs-lookup"><span data-stu-id="ab816-151">The encoders also expose reader quotas that have secure defaults.</span></span> <span data-ttu-id="ab816-152">XML altyapı kotalar bir tartışma için bkz.</span><span class="sxs-lookup"><span data-stu-id="ab816-152">See XML Infrastructure for a discussion of the quotas.</span></span>  
  
## <a name="features-of-system-provided-encoders"></a><span data-ttu-id="ab816-153">Sistem tarafından sağlanan kodlayıcılar özellikleri</span><span class="sxs-lookup"><span data-stu-id="ab816-153">Features of System-Provided Encoders</span></span>  
 <span data-ttu-id="ab816-154">Sistem tarafından sağlanan kodlayıcılar tarafından sağlanan özellikleri vardır.</span><span class="sxs-lookup"><span data-stu-id="ab816-154">There are a number of features provided by the system-provided encoders.</span></span>  
  
### <a name="pooling"></a><span data-ttu-id="ab816-155">Biriktirme</span><span class="sxs-lookup"><span data-stu-id="ab816-155">Pooling</span></span>  
 <span data-ttu-id="ab816-156">Kodlayıcı uygulamaların her biri mümkün olduğunca havuz dener.</span><span class="sxs-lookup"><span data-stu-id="ab816-156">Each of the encoder implementations tries to pool as much as possible.</span></span> <span data-ttu-id="ab816-157">Ayırmalar azaltma, yönetilen kod performansını artırmak için anahtar bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="ab816-157">Reducing allocations is a key way to improve the performance of managed code.</span></span> <span data-ttu-id="ab816-158">Bu havuzu gerçekleştirmek için uygulamaları kullanır `SynchronizedPool` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="ab816-158">To accomplish this pooling, the implementations use the `SynchronizedPool` class.</span></span> <span data-ttu-id="ab816-159">C# dosyasına bu sınıf tarafından kullanılan ek iyileştirmeler açıklamasını içerir.</span><span class="sxs-lookup"><span data-stu-id="ab816-159">The C# file contains a description of the additional optimizations used by this class.</span></span>  
  
 <span data-ttu-id="ab816-160">`XmlDictionaryReader`ve `XmlDictionaryWriter` örnekleri havuza ve yenilerini her ileti için ayırma önlemek için yeniden başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="ab816-160">`XmlDictionaryReader` and `XmlDictionaryWriter` instances are pooled and reinitialized to prevent allocating new ones for each message.</span></span> <span data-ttu-id="ab816-161">Okuyucular için bir `OnClose` geri çağırma kaldırsa okuyucu olduğunda `Close()` olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="ab816-161">For the readers, an `OnClose` callback reclaims the reader when `Close()` is called.</span></span> <span data-ttu-id="ab816-162">Kodlayıcı iletileri oluştururken kullanılan bazı ileti durumu nesneler de geri dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="ab816-162">The encoder also recycles some message state objects used when constructing messages.</span></span> <span data-ttu-id="ab816-163">Bu havuzları tarafından yapılandırılabilir boyutlarıdır `MaxReadPoolSize` ve `MaxWritePoolSize` her üç sınıfların özelliklerini türetilen <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="ab816-163">The sizes of these pools are configurable by the `MaxReadPoolSize` and `MaxWritePoolSize` properties on each of the three classes derived from <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span></span>  
  
### <a name="binary-encoding"></a><span data-ttu-id="ab816-164">İkili kodlama</span><span class="sxs-lookup"><span data-stu-id="ab816-164">Binary Encoding</span></span>  
 <span data-ttu-id="ab816-165">Dinamik sözlük dize ikili zaman kullandığı oturumları kodlama, ileti alıcısı için bildirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="ab816-165">When binary encoding uses sessions, the dynamic dictionary string must be communicated to the receiver of the message.</span></span> <span data-ttu-id="ab816-166">Bu, dinamik sözlük dizeleri iletisiyle ekleyerek yapılır.</span><span class="sxs-lookup"><span data-stu-id="ab816-166">This is done by prefixing the message with the dynamic dictionary strings.</span></span> <span data-ttu-id="ab816-167">Alıcı dizeleri kaldırır, oturumuna ekler ve iletiyi işler.</span><span class="sxs-lookup"><span data-stu-id="ab816-167">The receiver strips off the strings, adds them to the session, and processes the message.</span></span> <span data-ttu-id="ab816-168">Sözlük dizeler doğru geçirme taşıma arabelleğe alınıp gerektirir.</span><span class="sxs-lookup"><span data-stu-id="ab816-168">Correctly passing dictionary strings requires that the transport be buffered.</span></span>  
  
 <span data-ttu-id="ab816-169">Dizeleri iletiye iç tarafından eklenen `AddSessionInformationToMessage` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="ab816-169">The strings are appended to the message by an internal `AddSessionInformationToMessage` method.</span></span> <span data-ttu-id="ab816-170">Dizeleri, kendi uzunluğunda önekli ileti önüne UTF-8 olarak ekler.</span><span class="sxs-lookup"><span data-stu-id="ab816-170">It adds the strings as UTF-8 to the front of the message prefixed with their length.</span></span> <span data-ttu-id="ab816-171">Tüm sözlük üst bilgisi sonra kendi veri uzunluğu olan öneki.</span><span class="sxs-lookup"><span data-stu-id="ab816-171">The entire dictionary header is then prefixed with the length of its data.</span></span> <span data-ttu-id="ab816-172">Tersine çevirme işlemi bir iç tarafından gerçekleştirilen `ExtractSessionInformationFromMessage` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="ab816-172">The reverse operation is performed by an internal `ExtractSessionInformationFromMessage` method.</span></span>  
  
 <span data-ttu-id="ab816-173">Dinamik sözlük anahtarları işleme ek olarak, arabelleğe alınan süre sonuyla iletileri benzersiz bir şekilde alınır.</span><span class="sxs-lookup"><span data-stu-id="ab816-173">In addition to processing dynamic dictionary keys, buffered sessionful messages are received in a unique way.</span></span> <span data-ttu-id="ab816-174">Belge üzerinde bir okuyucu oluşturma ve işlemeyi yerine ikili kodlama dahili kullanım `MessagePatterns` ikili akış deconstruct sınıfı.</span><span class="sxs-lookup"><span data-stu-id="ab816-174">Instead of creating a reader over the document and processing it, the binary encoder uses the internal `MessagePatterns` class to deconstruct the binary stream.</span></span> <span data-ttu-id="ab816-175">Çoğu iletileri tarafından oluşturulan, belirli bir sipariş görünmesini üstbilgileri belirli kümesine sahip olur [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ab816-175">The idea is that most messages have a certain set of headers that show up in a certain order when generated by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="ab816-176">Desen sistem parçalayın bunu beklediği üzerinde temel ileti keser.</span><span class="sxs-lookup"><span data-stu-id="ab816-176">The pattern system breaks the message apart based on what it expects.</span></span> <span data-ttu-id="ab816-177">Başarılı olursa, başlatır bir <xref:System.ServiceModel.Channels.MessageHeaders> XML Ayrıştırma olmadan nesnesi.</span><span class="sxs-lookup"><span data-stu-id="ab816-177">If it is successful, it initializes a <xref:System.ServiceModel.Channels.MessageHeaders> object without parsing the XML.</span></span> <span data-ttu-id="ab816-178">Aksi durumda, standart yöntemi geri döner.</span><span class="sxs-lookup"><span data-stu-id="ab816-178">If not, it falls back to the standard method.</span></span>  
  
### <a name="mtom-encoding"></a><span data-ttu-id="ab816-179">MTOM Kodlama</span><span class="sxs-lookup"><span data-stu-id="ab816-179">MTOM Encoding</span></span>  
 <span data-ttu-id="ab816-180"><<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement --> `System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`> Sınıfı adlı bir ek yapılandırma özelliği vardır <<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement --> `System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`. MaxBufferSize % 2A >.</span><span class="sxs-lookup"><span data-stu-id="ab816-180">The <<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement --> `System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`> class has an additional configuration property called <<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement --> `System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`.MaxBufferSize%2A>.</span></span> <span data-ttu-id="ab816-181">Bu, bir üst sınır ne kadar veri bir ileti okuma işlemi sırasında arabellek etmesine izin verilen üzerinde yerleştirir.</span><span class="sxs-lookup"><span data-stu-id="ab816-181">This places an upper bound on how much data it is allowed to buffer during the process of reading a message.</span></span> <span data-ttu-id="ab816-182">XML bilgi ayarlayın (bilgi) veya diğer MIME bölümleri, tek bir iletiye tüm MIME bölümleri yeniden birleştirmek için arabelleğe gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="ab816-182">The XML Information Set (Infoset), or other MIME parts, may need to be buffered to reassemble all the MIME parts into a single message.</span></span>  
  
 <span data-ttu-id="ab816-183">HTTP ile düzgün çalışması için bazı iç API'ler iç MTOM ileti Kodlayıcı sınıfı sağlar `GetContentType` (olduğu de dahili) ve `WriteMessage`, ortak ve geçersiz kılınabilir.</span><span class="sxs-lookup"><span data-stu-id="ab816-183">To work correctly with HTTP, the internal MTOM message encoder class provides some internal APIs for `GetContentType` (which is also internal) and `WriteMessage`, which is public and can be overridden.</span></span> <span data-ttu-id="ab816-184">Daha fazla iletişim MIME Üstbilgileri değerleriyle HTTP üstbilgileri değerleri kabul emin olmak üzere yapılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="ab816-184">More communication must occur to ensure values in the HTTP headers agree with values in the MIME headers.</span></span>  
  
 <span data-ttu-id="ab816-185">MTOM ileti Kodlayıcı düzenlenmemeli [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]metin okuyucu kullanıcının ve metin Kodlayıcı benzer.</span><span class="sxs-lookup"><span data-stu-id="ab816-185">Internally, the MTOM message encoder uses [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]'s text readers, and is similar to the Text encoder.</span></span> <span data-ttu-id="ab816-186">İkisi arasındaki temel fark ikili veya "İkili büyük nesneler" (BLOB) büyük parçalarını iyileştirir bunları ileti baytlarının katıştırılmış önce 64 tabanlı kodlama için değil dönüştürmektir.</span><span class="sxs-lookup"><span data-stu-id="ab816-186">The main difference is that it optimizes large chunks of binary, or "Binary Large Objects" (BLOBs), by not converting them to Base-64 encoding prior to being embedded into the message bytes.</span></span> <span data-ttu-id="ab816-187">Bunun yerine, bu BLOB'lar ayıklanan ve başvurulan MIME ek olarak tutulur.</span><span class="sxs-lookup"><span data-stu-id="ab816-187">Instead, these BLOBs are kept extracted, and referenced as the MIME attachments.</span></span>  
  
## <a name="writing-your-own-encoder"></a><span data-ttu-id="ab816-188">Kendi Kodlayıcı yazma</span><span class="sxs-lookup"><span data-stu-id="ab816-188">Writing your own Encoder</span></span>  
 <span data-ttu-id="ab816-189">Kendi özel ileti Kodlayıcı uygulamak için aşağıdaki soyut taban sınıfları özel uygulamaları sağlamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="ab816-189">To implement your own custom message encoder, you must provide custom implementations of the following abstract base classes:</span></span>  
  
-   <xref:System.ServiceModel.Channels.MessageEncoder>  
  
-   <xref:System.ServiceModel.Channels.MessageEncoderFactory>  
  
-   <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>  
  
 <span data-ttu-id="ab816-190">Bellek içi gösteriminden bir iletinin bir akış yazılabilir bir gösterimi dönüştürme kapsüllenmiş içinde <xref:System.ServiceModel.Channels.MessageEncoder> XML okuyucular ve XML Kodlamalar belirli türlerini desteklemek XML yazarları için bir üreteci olarak hizmet veren sınıfı.</span><span class="sxs-lookup"><span data-stu-id="ab816-190">Converting from the in-memory representation of a message to a representation that can be written to a stream is encapsulated within the <xref:System.ServiceModel.Channels.MessageEncoder> class, which serves as a factory for XML readers and XML writers that support specific types of XML encodings.</span></span>  
  
-   <span data-ttu-id="ab816-191">Geçersiz kılmanız gerekir bu sınıfın anahtar yöntemler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="ab816-191">The key methods of this class that you must override are:</span></span>  
  
-   <span data-ttu-id="ab816-192"><xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A>hangi alır bir <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> nesne ve içine Yazar bir <xref:System.IO.Stream> nesnesi.</span><span class="sxs-lookup"><span data-stu-id="ab816-192"><xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> which takes a <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> object and writes it into a <xref:System.IO.Stream> object.</span></span>  
  
-   <span data-ttu-id="ab816-193"><xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A>hangi alır bir <xref:System.IO.Stream> nesne ve en fazla üstbilgi boyutu ve döndürür bir <xref:System.ServiceModel.Channels.Message> nesnesi.</span><span class="sxs-lookup"><span data-stu-id="ab816-193"><xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> which takes a <xref:System.IO.Stream> object and a maximum header size and returns a <xref:System.ServiceModel.Channels.Message> object.</span></span>  
  
 <span data-ttu-id="ab816-194">Bu yöntemleri yazma standart Aktarım Protokolü ve özelleştirilmiş kodlama arasında dönüştürme işleyen kodu değil.</span><span class="sxs-lookup"><span data-stu-id="ab816-194">It is the code you write in these methods that handles conversion between the standard transport protocol, and your customized encoding.</span></span>  
  
 <span data-ttu-id="ab816-195">Ardından özel kodlayıcıyı oluşturan bir Üreteç sınıfını kod gerekir.</span><span class="sxs-lookup"><span data-stu-id="ab816-195">Next you need to code a factory class that creates your custom encoder.</span></span> <span data-ttu-id="ab816-196">Geçersiz kılma <xref:System.ServiceModel.Channels.MessageEncoderFactory.Encoder%2A> özel bir örneğini döndürmek için <xref:System.ServiceModel.Channels.MessageEncoder>.</span><span class="sxs-lookup"><span data-stu-id="ab816-196">Override the <xref:System.ServiceModel.Channels.MessageEncoderFactory.Encoder%2A> to return an instance of your custom <xref:System.ServiceModel.Channels.MessageEncoder>.</span></span>  
  
 <span data-ttu-id="ab816-197">Özel bağlanma <xref:System.ServiceModel.Channels.MessageEncoderFactory> hizmet veya istemci geçersiz kılarak yapılandırmak için kullanılan bağlama öğesi yığınına <xref:System.ServiceModel.Channels.MessageEncodingBindingElement.CreateMessageEncoderFactory%2A> yöntemi bu üretecin bir örneğini döndürür.</span><span class="sxs-lookup"><span data-stu-id="ab816-197">Then connect your custom <xref:System.ServiceModel.Channels.MessageEncoderFactory> to the binding element stack used to configure the service or client by overriding the <xref:System.ServiceModel.Channels.MessageEncodingBindingElement.CreateMessageEncoderFactory%2A> method to return an instance of this factory.</span></span>  
  
 <span data-ttu-id="ab816-198">İle sağlanan iki örnek vardır [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] örnek kod ile bu işlem gösterilmektedir: [özel ileti Kodlayıcı: özel metin Kodlayıcı](../../../../docs/framework/wcf/samples/custom-message-encoder-custom-text-encoder.md) ve [özel ileti Kodlayıcı: sıkıştırma Kodlayıcısı](../../../../docs/framework/wcf/samples/custom-message-encoder-compression-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="ab816-198">There are two samples provided with [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] that illustrate this process with sample code: [Custom Message Encoder: Custom Text Encoder](../../../../docs/framework/wcf/samples/custom-message-encoder-custom-text-encoder.md) and [Custom Message Encoder: Compression Encoder](../../../../docs/framework/wcf/samples/custom-message-encoder-compression-encoder.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ab816-199">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="ab816-199">See Also</span></span>  
 <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>  
 <xref:System.ServiceModel.Channels.MessageEncoderFactory>  
 <xref:System.ServiceModel.Channels.MessageEncoder>  
 [<span data-ttu-id="ab816-200">Veri aktarımı mimarisi genel bakış</span><span class="sxs-lookup"><span data-stu-id="ab816-200">Data Transfer Architectural Overview</span></span>](../../../../docs/framework/wcf/feature-details/data-transfer-architectural-overview.md)  
 [<span data-ttu-id="ab816-201">İleti Kodlayıcı seçme</span><span class="sxs-lookup"><span data-stu-id="ab816-201">Choosing a Message Encoder</span></span>](../../../../docs/framework/wcf/feature-details/choosing-a-message-encoder.md)  
 [<span data-ttu-id="ab816-202">Taşıma seçme</span><span class="sxs-lookup"><span data-stu-id="ab816-202">Choosing a Transport</span></span>](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md)
