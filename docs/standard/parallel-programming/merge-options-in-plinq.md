---
title: PLINQ'te Birleştirme Seçenekleri
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: ''
ms.suite: ''
ms.technology: dotnet-standard
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- PLINQ queries, merge options
ms.assetid: e8f7be3b-88de-4f33-ab14-dc008e76c1ba
caps.latest.revision: 10
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 9e155ee8de2846fc3c8c767a77f365127923f757
ms.sourcegitcommit: 86adcc06e35390f13c1e372c36d2e044f1fc31ef
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/26/2018
---
# <a name="merge-options-in-plinq"></a><span data-ttu-id="d1bfc-102">PLINQ'te Birleştirme Seçenekleri</span><span class="sxs-lookup"><span data-stu-id="d1bfc-102">Merge Options in PLINQ</span></span>
<span data-ttu-id="d1bfc-103">Birden çok iş parçacığı farklı bölümleri eşzamanlı olarak, genellikle ayrı iş parçacıklarına çalışabilmeniz için ne zaman bir sorgu paralel PLINQ bölümleri kaynak sıradaki yürütülüyor.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-103">When a query is executing as parallel, PLINQ partitions the source sequence so that multiple threads can work on different parts concurrently, typically on separate threads.</span></span> <span data-ttu-id="d1bfc-104">Sonuçları bir iş parçacığı üzerinde tüketilmesi varsa örneğin, bir `foreach` (`For Each` Visual Basic'te) döngü her iş parçacığı sonuçlarından bir sıralı geri birleştirilmelidir sonra.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-104">If the results are to be consumed on one thread, for example, in a `foreach` (`For Each` in Visual Basic) loop, then the results from every thread must be merged back into one sequence.</span></span> <span data-ttu-id="d1bfc-105">Sorguda mevcut işleçleri PLINQ gerçekleştirir birleştirme türünü bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-105">The kind of merge that PLINQ performs depends on the operators that are present in the query.</span></span> <span data-ttu-id="d1bfc-106">Örneğin, yeni bir sipariş sonuçlarını zorunlu tuttukları işleçleri tüm iş parçacıklarının tüm öğeleri arabellek gerekir.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-106">For example, operators that impose a new order on the results must buffer all elements from all threads.</span></span> <span data-ttu-id="d1bfc-107">(Aynı zamanda olan, uygulama kullanıcısı) Süren iş parçacığı açısından bir belirgin süre ilk sonucu üreten önce tamamen arabelleğe alınan bir sorgu çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-107">From the perspective of the consuming thread (which is also that of the application user) a fully buffered query might run for a noticeable period of time before it produces its first result.</span></span> <span data-ttu-id="d1bfc-108">Diğer işleçler varsayılan olarak, kısmen arabelleğe; Bunlar kendi yığınlardaki sonuçlar.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-108">Other operators, by default, are partially buffered; they yield their results in batches.</span></span> <span data-ttu-id="d1bfc-109">Bir işleç <xref:System.Linq.ParallelEnumerable.ForAll%2A> varsayılan olarak arabelleğe değil.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-109">One operator, <xref:System.Linq.ParallelEnumerable.ForAll%2A> is not buffered by default.</span></span> <span data-ttu-id="d1bfc-110">Bunu tüm öğeleri tüm iş parçacıklarından hemen verir.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-110">It yields all elements from all threads immediately.</span></span>  
  
 <span data-ttu-id="d1bfc-111">Kullanarak <xref:System.Linq.ParallelEnumerable.WithMergeOptions%2A> yöntemi, aşağıdaki örnekte gösterildiği gibi sağlayabileceğiniz bir ipucu gerçekleştirmek için birleştirmenin ne tür gösteren PLINQ.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-111">By using the <xref:System.Linq.ParallelEnumerable.WithMergeOptions%2A> method, as shown in the following example, you can provide a hint to PLINQ that indicates what kind of merging to perform.</span></span>  
  
 [!code-csharp[PLINQ#26](../../../samples/snippets/csharp/VS_Snippets_Misc/plinq/cs/plinqsamples.cs#26)]
 [!code-vb[PLINQ#26](../../../samples/snippets/visualbasic/VS_Snippets_Misc/plinq/vb/plinq2_vb.vb#26)]  
  
 <span data-ttu-id="d1bfc-112">Tam bir örnek için bkz: [nasıl yapılır: plınq'te birleştirme seçeneklerini belirtin](../../../docs/standard/parallel-programming/how-to-specify-merge-options-in-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="d1bfc-112">For the complete example, see [How to: Specify Merge Options in PLINQ](../../../docs/standard/parallel-programming/how-to-specify-merge-options-in-plinq.md).</span></span>  
  
 <span data-ttu-id="d1bfc-113">Belirli bir sorgu istenen seçeneği destekleyemiyorsa, seçeneği yalnızca yoksayılacak.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-113">If the particular query cannot support the requested option, then the option will just be ignored.</span></span> <span data-ttu-id="d1bfc-114">Çoğu durumda, bir PLINQ sorgu için bir birleştirme seçeneği belirtmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-114">In most cases, you do not have to specify a merge option for a PLINQ query.</span></span> <span data-ttu-id="d1bfc-115">Ancak, bazı durumlarda, test ve bir sorgu en iyi bir varsayılan olmayan modda yürütülür ölçüm tarafından bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-115">However, in some cases you may find by testing and measurement that a query executes best in a non-default mode.</span></span> <span data-ttu-id="d1bfc-116">Bir ortak bu seçeneğin sonuçlarını daha esnek bir kullanıcı arabirimi için akışını sağlamak için bir öbek birleştirme işleci zorlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-116">A common use of this option is to force a chunk-merging operator to stream its results in order to provide a more responsive user interface.</span></span>  
  
## <a name="parallelmergeoptions"></a><span data-ttu-id="d1bfc-117">ParallelMergeOptions</span><span class="sxs-lookup"><span data-stu-id="d1bfc-117">ParallelMergeOptions</span></span>  
 <span data-ttu-id="d1bfc-118"><xref:System.Linq.ParallelMergeOptions> Numaralandırma, desteklenen sorgu şekiller için sonuçları bir iş parçacığında kullanılan zaman sorgunun son Çıktıyı nasıl verdiğini belirtin aşağıdaki seçenekleri içerir:</span><span class="sxs-lookup"><span data-stu-id="d1bfc-118">The <xref:System.Linq.ParallelMergeOptions> enumeration includes the following options that specify, for supported query shapes, how the final output of the query is yielded when the results are consumed on one thread:</span></span>  
  
-   `Not Buffered`  
  
     <span data-ttu-id="d1bfc-119"><xref:System.Linq.ParallelMergeOptions.NotBuffered> Seçeneği, üretilen hemen her iş parçacığından döndürülecek işlenen her öğe neden olur.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-119">The <xref:System.Linq.ParallelMergeOptions.NotBuffered> option causes each processed element to be returned from each thread as soon as it is produced.</span></span> <span data-ttu-id="d1bfc-120">Bu davranış, "çıkış akış" benzerdir.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-120">This behavior is analogous to "streaming" the output.</span></span> <span data-ttu-id="d1bfc-121">Varsa <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> işlecidir sorgu, mevcut `NotBuffered` kaynak öğelerin sırasını korur.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-121">If the <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> operator is present in the query, `NotBuffered` preserves the order of the source elements.</span></span> <span data-ttu-id="d1bfc-122">Ancak `NotBuffered` başlatır, kullanılabilir hemen sonuçları oluşturan tüm sonuçları yine üretmek için gereken toplam süre bir birleştirme seçeneklerinden birini kullanarak daha uzun.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-122">Although `NotBuffered` starts yielding results as soon as they're available,, the total time to produce all the results might still be longer than using one of the other merge options.</span></span>  
  
-   `Auto Buffered`  
  
     <span data-ttu-id="d1bfc-123"><xref:System.Linq.ParallelMergeOptions.AutoBuffered> Seçeneği bir arabelleğe öğeleri toplamak ve düzenli aralıklarla arabellek içeriği aynı anda süren iş parçacığı yield sorgu neden olur.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-123">The <xref:System.Linq.ParallelMergeOptions.AutoBuffered> option causes the query to collect elements into a buffer and then periodically yield the buffer contents all at once to the consuming thread.</span></span> <span data-ttu-id="d1bfc-124">Bu "akış" davranışını kullanmak yerine "öbek" kaynak verilerde sağlayan için benzer `NotBuffered`.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-124">This is analogous to yielding the source data in "chunks" instead of using the "streaming" behavior of `NotBuffered`.</span></span> <span data-ttu-id="d1bfc-125">`AutoBuffered` daha uzun sürebilir `NotBuffered` ilk öğe alabilir iş parçacığı üzerinde kullanılabilir hale getirmek.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-125">`AutoBuffered` may take longer than `NotBuffered` to make the first element available on the consuming thread.</span></span> <span data-ttu-id="d1bfc-126">Arabellek boyutu tam yielding davranışı, yapılandırılabilir olmayan ve sorguya ilişkili çeşitli etkenlere bağlı olarak değişebilir.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-126">The size of the buffer and the exact yielding behavior are not configurable and may vary, depending on various factors that relate to the query.</span></span>  
  
-   `FullyBuffered`  
  
     <span data-ttu-id="d1bfc-127"><xref:System.Linq.ParallelMergeOptions.FullyBuffered> Seçenek herhangi bir verdiğini önce arabelleğe alınan tüm sorgu çıktısı neden olur.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-127">The <xref:System.Linq.ParallelMergeOptions.FullyBuffered> option causes the output of the whole query to be buffered before any of the elements are yielded.</span></span> <span data-ttu-id="d1bfc-128">Bu seçeneği kullandığınızda, ilk öğe alabilir iş parçacığı üzerinde kullanılabilir, ancak tüm sonuçları hala üretilen önce daha uzun sürebilir diğer seçenekleri kullanarak daha hızlı.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-128">When you use this option, it can take longer before the first element is available on the consuming thread, but the complete results might still be produced faster than by using the other options.</span></span>  
  
## <a name="query-operators-that-support-merge-options"></a><span data-ttu-id="d1bfc-129">Birleştirme seçeneklerini destekleyen sorgu işleçleri</span><span class="sxs-lookup"><span data-stu-id="d1bfc-129">Query Operators that Support Merge Options</span></span>  
 <span data-ttu-id="d1bfc-130">Aşağıdaki tabloda belirtilen kısıtlamalarına tabidir tüm birleştirme seçeneği modlarını desteklemek işleçleri listeler.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-130">The following table lists the operators that support all merge option modes, subject to the specified restrictions.</span></span>  
  
|<span data-ttu-id="d1bfc-131">İşleç</span><span class="sxs-lookup"><span data-stu-id="d1bfc-131">Operator</span></span>|<span data-ttu-id="d1bfc-132">Kısıtlamalar</span><span class="sxs-lookup"><span data-stu-id="d1bfc-132">Restrictions</span></span>|  
|--------------|------------------|  
|<xref:System.Linq.ParallelEnumerable.AsEnumerable%2A>|<span data-ttu-id="d1bfc-133">Yok.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-133">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Cast%2A>|<span data-ttu-id="d1bfc-134">Yok.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-134">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Concat%2A>|<span data-ttu-id="d1bfc-135">Bir dizi veya liste kaynağı yalnızca sahip olmayan sıralı sorgular.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-135">Non-ordered queries that have an Array or List source only.</span></span>|  
|<xref:System.Linq.ParallelEnumerable.DefaultIfEmpty%2A>|<span data-ttu-id="d1bfc-136">Yok.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-136">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.OfType%2A>|<span data-ttu-id="d1bfc-137">Yok.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-137">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Reverse%2A>|<span data-ttu-id="d1bfc-138">Bir dizi veya liste kaynağı yalnızca sahip olmayan sıralı sorgular.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-138">Non-ordered queries that have an Array or List source only.</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Select%2A>|<span data-ttu-id="d1bfc-139">Yok.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-139">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.SelectMany%2A>|<span data-ttu-id="d1bfc-140">Yok.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-140">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Skip%2A>|<span data-ttu-id="d1bfc-141">Yok.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-141">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Take%2A>|<span data-ttu-id="d1bfc-142">Yok.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-142">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Where%2A>|<span data-ttu-id="d1bfc-143">Yok.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-143">None</span></span>|  
  
 <span data-ttu-id="d1bfc-144">Tüm diğer PLINQ sorgu işleçleri kullanıcı tarafından sağlanan birleştirme seçeneklerini yoksay.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-144">All other PLINQ query operators might ignore user-provided merge options.</span></span> <span data-ttu-id="d1bfc-145">Bazı sorgu işleçleri, örneğin, <xref:System.Linq.ParallelEnumerable.Reverse%2A> ve <xref:System.Linq.ParallelEnumerable.OrderBy%2A>, tüm üretilen kaldırılmasında ve kadar herhangi bir öğe verim olamaz.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-145">Some query operators, for example, <xref:System.Linq.ParallelEnumerable.Reverse%2A> and <xref:System.Linq.ParallelEnumerable.OrderBy%2A>, cannot yield any elements until all have been produced and reordered.</span></span> <span data-ttu-id="d1bfc-146">Bu nedenle, <xref:System.Linq.ParallelMergeOptions> da operatörün gibi içeren bir sorguda kullanılan <xref:System.Linq.ParallelEnumerable.Reverse%2A>, işleç sonuçlarını üretilen sonra birleştirme davranışı sorgu kadar uygulanmaz.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-146">Therefore, when <xref:System.Linq.ParallelMergeOptions> is used in a query that also contains an operator such as <xref:System.Linq.ParallelEnumerable.Reverse%2A>, the merge behavior will not be applied in the query until after that operator has produced its results.</span></span>  
  
 <span data-ttu-id="d1bfc-147">Birleştirme seçeneklerini işleme yeteneği bazı işleçlerinin kaynak sırası türüne göre değişir ve olup <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> işleci sorgu daha önce kullanıldı.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-147">The ability of some operators to handle merge options depends on the type of the source sequence, and whether the <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> operator was used earlier in the query.</span></span> <span data-ttu-id="d1bfc-148"><xref:System.Linq.ParallelEnumerable.ForAll%2A> her zaman <xref:System.Linq.ParallelMergeOptions.NotBuffered> ; öğeleri hemen verir.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-148"><xref:System.Linq.ParallelEnumerable.ForAll%2A> is always <xref:System.Linq.ParallelMergeOptions.NotBuffered> ; it yields its elements immediately.</span></span> <span data-ttu-id="d1bfc-149"><xref:System.Linq.ParallelEnumerable.OrderBy%2A> her zaman <xref:System.Linq.ParallelMergeOptions.FullyBuffered>; bunu verir önce tüm listeyi sıralamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-149"><xref:System.Linq.ParallelEnumerable.OrderBy%2A> is always <xref:System.Linq.ParallelMergeOptions.FullyBuffered>; it must sort the whole list before it yields.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d1bfc-150">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="d1bfc-150">See Also</span></span>  
 [<span data-ttu-id="d1bfc-151">Paralel LINQ (PLINQ)</span><span class="sxs-lookup"><span data-stu-id="d1bfc-151">Parallel LINQ (PLINQ)</span></span>](../../../docs/standard/parallel-programming/parallel-linq-plinq.md)  
 [<span data-ttu-id="d1bfc-152">Nasıl yapılır: PLINQ'te Birleştirme Seçeneklerini Belirtme</span><span class="sxs-lookup"><span data-stu-id="d1bfc-152">How to: Specify Merge Options in PLINQ</span></span>](../../../docs/standard/parallel-programming/how-to-specify-merge-options-in-plinq.md)
