---
title: "Genişletilmiş koruma ile tümleşik Windows kimlik doğrulaması"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 81731998-d5e7-49e4-ad38-c8e6d01689d0
caps.latest.revision: "13"
author: mcleblanc
ms.author: markl
manager: markl
ms.workload: dotnet
ms.openlocfilehash: a453a2142ee8c3d1ab8d8d00e84e1ead60c46d91
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/22/2017
---
# <a name="integrated-windows-authentication-with-extended-protection"></a><span data-ttu-id="8a0a4-102">Genişletilmiş koruma ile tümleşik Windows kimlik doğrulaması</span><span class="sxs-lookup"><span data-stu-id="8a0a4-102">Integrated Windows Authentication with Extended Protection</span></span>
<span data-ttu-id="8a0a4-103">Geliştirmeler nasıl tümleşik Windows kimlik doğrulaması tarafından işlenir etkileyen yapıldı <xref:System.Net.HttpWebRequest>, <xref:System.Net.HttpListener>, <xref:System.Net.Mail.SmtpClient>, <xref:System.Net.Security.SslStream>, <xref:System.Net.Security.NegotiateStream>, ilgili sınıflar ve <xref:System.Net> ve ilgili ad alanları.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-103">Enhancements were made that affect how integrated Windows authentication is handled by the <xref:System.Net.HttpWebRequest>, <xref:System.Net.HttpListener>, <xref:System.Net.Mail.SmtpClient>, <xref:System.Net.Security.SslStream>, <xref:System.Net.Security.NegotiateStream>, and related classes in the <xref:System.Net> and related namespaces.</span></span> <span data-ttu-id="8a0a4-104">Güvenliği artırmak genişletilmiş koruma için destek eklendi.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-104">Support was added for extended protection to enhance security.</span></span>  
  
 <span data-ttu-id="8a0a4-105">Bu değişiklikler, tümleşik Windows kimlik doğrulaması kullanıldığı web isteği yapmak ve yanıtları almak için bu sınıfları kullanan uygulamaları etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-105">These changes can affect applications that use these classes to make web requests and receive responses where integrated Windows authentication is used.</span></span> <span data-ttu-id="8a0a4-106">Bu değişiklik Ayrıca web sunucuları ve tümleşik Windows kimlik doğrulaması kullanmak üzere yapılandırılmış istemci uygulamaları etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-106">This change can also impact web servers and client applications that are configured to use integrated Windows authentication.</span></span>  
  
 <span data-ttu-id="8a0a4-107">Bu değişiklikler, tümleşik Windows kimlik doğrulaması kullanıldığı isteklerinin diğer türleri olmasını sağlayın ve yanıtları almak için bu sınıfları kullanan uygulamalar da etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-107">These changes can also affect applications that use these classes to make other types of requests and receive responses where integrated Windows authentication is used.</span></span>  
  
 <span data-ttu-id="8a0a4-108">Genişletilmiş korumayı desteklemek için değişiklikler yalnızca Windows 7 ve Windows Server 2008 R2 üzerinde uygulamalar için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-108">The changes to support extended protection are available only for applications on Windows 7 and Windows Server 2008 R2.</span></span> <span data-ttu-id="8a0a4-109">Genişletilmiş Koruma özellikler önceki Windows sürümlerinde kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-109">The extended protection features are not available on earlier versions of Windows.</span></span>  
  
## <a name="overview"></a><span data-ttu-id="8a0a4-110">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="8a0a4-110">Overview</span></span>  
 <span data-ttu-id="8a0a4-111">Tümleşik Windows kimlik doğrulaması tasarımını bazı kimlik bilgileri sınama yanıtlarının bunlar yeniden kullanılan iletilen veya anlamı Evrensel olmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-111">The design of integrated Windows authentication allows for some credential challenge responses to be universal, meaning they can be re-used or forwarded.</span></span> <span data-ttu-id="8a0a4-112">Sınama yanıtları hedef belirli bilgileri ve tercihen en az bazı kanal belirli bilgiler ile oluşturulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-112">The challenge responses should be constructed at a minimum with target specific information and preferably also with some channel specific information.</span></span> <span data-ttu-id="8a0a4-113">Hizmetleri sonra kimlik bilgisi sınama yanıtları hizmet belirli bilgileri gibi bir hizmet asıl adı (SPN) içerdiğinden emin olmak için genişletilmiş koruma sağlayabilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-113">Services can then provide extended protection to ensure that credential challenge responses contain service specific information such as a Service Principal Name (SPN).</span></span> <span data-ttu-id="8a0a4-114">Kimlik bilgisi alışverişleri bu bilgilerle, hizmetleri yanlış kullanılmış kimlik bilgisi sınama yanıtları kötü niyetli kullanımına karşı daha iyi koruyabilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-114">With this information in the credential exchanges, services are able to better protect against malicious use of credential challenge responses that might have been improperly used.</span></span>  
  
 <span data-ttu-id="8a0a4-115">Genişletilmiş Koruma tasarım, kimlik doğrulama geçiş saldırıları azaltmak için tasarlanmış kimlik doğrulama protokolleri için bir yeniliktir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-115">The extended protection design is an enhancement to authentication protocols designed to mitigate authentication relay attacks.</span></span> <span data-ttu-id="8a0a4-116">Kanal ve hizmet bağlama bilgileri kavramı döner.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-116">It revolves around the concept of channel and service binding information.</span></span>  
  
 <span data-ttu-id="8a0a4-117">Genel hedefleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-117">The overall objectives are the following:</span></span>  
  
1.  <span data-ttu-id="8a0a4-118">İstemcinin genişletilmiş korumayı desteklemek için güncelleştirilirse, uygulamalar bir kanal bağlama ve tüm desteklenen kimlik doğrulama protokolleri için hizmet bağlama bilgileri vermeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-118">If the client is updated to support the extended protection, applications should supply a channel binding and service binding information to all supported authentication protocols.</span></span> <span data-ttu-id="8a0a4-119">Bir kanal bağlamak için (TLS) olduğunda kanal bağlama bilgileri yalnızca sağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-119">Channel binding information can only be supplied when there is a channel (TLS) to bind to.</span></span> <span data-ttu-id="8a0a4-120">Hizmet bağlama bilgileri her zaman sağlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-120">Service binding information should always be supplied.</span></span>  
  
2.  <span data-ttu-id="8a0a4-121">Düzgün yapılandırıldığından da güncelleştirilmiş sunucu, istemci kimlik doğrulaması belirteçte mevcut olduğunda kanalı ve hizmet bağlama bilgileri doğrulayın ve kanal bağlamaları eşleşmiyorsa kimlik doğrulama girişimini reddet.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-121">Updated servers which are properly configured may verify the channel and service binding information when it is present in the client authentication token and reject the authentication attempt if the channel bindings do not match.</span></span> <span data-ttu-id="8a0a4-122">Dağıtım senaryosuna bağlı olarak, kanal bağlama, hizmet bağlama veya her ikisini sunucuları doğrulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-122">Depending on the deployment scenario, servers may verify channel binding, service binding or both.</span></span>  
  
3.  <span data-ttu-id="8a0a4-123">Güncelleştirilmiş sunucuları kabul edin veya reddedin ilkesini temel alarak kanal bağlama bilgileri içermez alt düzey istemci isteklerini seçeneğine sahipsiniz.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-123">Updated servers have the ability to accept or reject down-level client requests that do not contain the channel binding information based on policy.</span></span>  
  
 <span data-ttu-id="8a0a4-124">Genişletilmiş koruma tarafından kullanılan bilgileri birini veya her ikisini aşağıdaki iki bölümden oluşur:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-124">Information used by extended protection consists of one or both of the following two parts:</span></span>  
  
1.  <span data-ttu-id="8a0a4-125">Bir kanal bağlama belirteci veya CBT.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-125">A Channel Binding Token or CBT.</span></span>  
  
2.  <span data-ttu-id="8a0a4-126">Bir hizmet asıl adı ya da SPN hizmet bağlama bilgileri.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-126">Service Binding information in the form of a Service Principal Name or SPN.</span></span>  
  
 <span data-ttu-id="8a0a4-127">Hizmet bağlama bilgileri belirli bir hizmet uç noktası için kimlik doğrulaması için bir istemcinin hedefinin göstergesidir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-127">Service Binding information is an indication of a client’s intent to authenticate to a particular service endpoint.</span></span> <span data-ttu-id="8a0a4-128">Aşağıdaki özelliklerle sunucuya istemciden bildirilir:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-128">It is communicated from client to server with the following properties:</span></span>  
  
-   <span data-ttu-id="8a0a4-129">SPN değeri sunucunun düz metin biçiminde istemci kimlik doğrulaması gerçekleştirmek için kullanılabilir olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-129">The SPN value must be available to the server performing client authentication in clear text form.</span></span>  
  
-   <span data-ttu-id="8a0a4-130">SPN ortak değeri.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-130">The value of the SPN is public.</span></span>  
  
-   <span data-ttu-id="8a0a4-131">ADAM-in--middle saldırı eklemek, kaldırmak veya değiştiremezsiniz değerini şekilde SPN aktarım sırasında şifreleme açısından korunması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-131">The SPN must be cryptographically protected in transit such that a man-in-the-middle attack cannot insert, remove or modify its value.</span></span>  
  
 <span data-ttu-id="8a0a4-132">Bir CBT bağlamanın kullanılan dış güvenli kanal (örneğin, TLS) (BIND) özelliğidir iç ve istemci kimliği doğrulanmış bir kanal üzerinden bir konuşma için.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-132">A CBT is a property of the outer secure channel (such as TLS) used to tie (bind) it to a conversation over an inner, client-authenticated channel.</span></span> <span data-ttu-id="8a0a4-133">CBT (Ayrıca IETF RFC 5056 tarafından tanımlanan) aşağıdaki özelliklere sahip olmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-133">The CBT must have the following properties (also defined by IETF RFC 5056):</span></span>  
  
-   <span data-ttu-id="8a0a4-134">Bir dış kanal mevcut olduğunda CBT değerini dış kanalına veya bağımsız olarak bir konuşma hem istemci hem de sunucu tarafında tarafından gelen sunucusu uç noktası tanımlayan bir özellik olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-134">When an outer channel exists, the value of the CBT must be a property identifying either the outer channel or the server endpoint, independently arrived at by both client and server sides of a conversation.</span></span>  
  
-   <span data-ttu-id="8a0a4-135">İstemci tarafından gönderilen CBT değerini bir saldırganın etkileyebilir olmaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-135">Value of the CBT sent by the client must not be something an attacker can influence.</span></span>  
  
-   <span data-ttu-id="8a0a4-136">Garanti CBT değeri gizliliği hakkında yapılır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-136">No guarantees are made about secrecy of the CBT value.</span></span> <span data-ttu-id="8a0a4-137">Bu ancak CBT taşıyan protokolü, şifreleme olarak hizmet bağlama yanı sıra kanal bağlama bilgileri değeri her zaman diğer ancak sunucu kimlik doğrulaması gerçekleştirme incelenebilir olduğunu anlamına gelmez.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-137">This does not however mean that the value of the service binding as well as channel binding information can always be examined by any other but the server performing authentication, as the protocol carrying the CBT may be encrypting it.</span></span>  
  
-   <span data-ttu-id="8a0a4-138">CBT şifreleme açısından bir saldırganın eklemek, kaldırmak veya değiştiremezsiniz değeri, aktarım sırasında korumalı bütünlüğü olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-138">The CBT must be cryptographically integrity protected in transit such that an attacker cannot insert, remove or modify its value.</span></span>  
  
 <span data-ttu-id="8a0a4-139">Kanal bağlama SPN ve CBT tamperproof şekilde sunucuya aktarma istemci tarafından gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-139">Channel binding is accomplished by the client transferring the SPN and the CBT to the server in a tamperproof fashion.</span></span> <span data-ttu-id="8a0a4-140">Sunucunun kanal bağlama bilgileri kendi ilke uygun olarak doğrular ve kimlik doğrulama girişimleri için hedef silinmiş kendisine düşünüyorsanız değil reddeder.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-140">The server validates the channel binding information in accordance with its policy and rejects authentication attempts for which it does not believe itself to have been the intended target.</span></span> <span data-ttu-id="8a0a4-141">Bu şekilde, iki kanalı şifreleme açısından birbirine bağlı olur.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-141">This way, the two channels become cryptographically bound together.</span></span>  
  
 <span data-ttu-id="8a0a4-142">Var olan istemciler ve uygulamalar ile uyumluluğu korumak için bir sunucu kimlik doğrulama girişimlerini izin vermek için genişletilmiş koruma henüz desteklemeyen istemciler tarafından yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-142">To preserve compatibility with existing clients and applications, a server may be configured to allow authentication attempts by clients that do not yet support extended protection.</span></span> <span data-ttu-id="8a0a4-143">Bu bir "tam sağlamlaştırılmış" yapılandırma aksine "kısmen sağlamlaştırılmış" bir yapılandırma olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-143">This is referred to as a "partially hardened" configuration, in contrast to a "fully hardened" configuration.</span></span>  
  
 <span data-ttu-id="8a0a4-144">Birden çok bileşeni <xref:System.Net> ve <xref:System.Net.Security> ad alanları çağıran bir uygulama adına tümleşik Windows kimlik doğrulaması gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-144">Multiple components in the <xref:System.Net> and <xref:System.Net.Security> namespaces perform integrated Windows authentication on behalf of a calling application.</span></span> <span data-ttu-id="8a0a4-145">Bu bölümde, tümleşik Windows kimlik doğrulaması kullanımları genişletilmiş koruma eklenecek System.Net bileşenleri değişiklikler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-145">This section describes changes to System.Net components to add extended protection in their use of integrated Windows authentication.</span></span>  
  
 <span data-ttu-id="8a0a4-146">Genişletilmiş koruma, şu anda Windows 7'de desteklenir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-146">Extended protection is currently supported on Windows 7.</span></span> <span data-ttu-id="8a0a4-147">Bir uygulamayı işletim sistemi genişletilmiş koruma destekleyip desteklemediğini belirlemek için bir mekanizma sağlanır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-147">A mechanism is provided so an application can determine if the operating system supports extended protection.</span></span>  
  
## <a name="changes-to-support-extended-protection"></a><span data-ttu-id="8a0a4-148">Genişletilmiş Koruma destekleyen değişiklikler</span><span class="sxs-lookup"><span data-stu-id="8a0a4-148">Changes to Support Extended Protection</span></span>  
 <span data-ttu-id="8a0a4-149">Tümleşik Windows kimlik doğrulaması, kimlik doğrulama protokolü bağlı olarak kullanılan kimlik doğrulama işleminde kullanılan, genellikle istemci bilgisayarına geri gönderilen ve hedef bilgisayar tarafından verilen bir sınama içerir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-149">The authentication process used with integrated Windows authentication, depending on the authentication protocol used, often includes a challenge issued by the destination computer and sent back to the client computer.</span></span> <span data-ttu-id="8a0a4-150">Genişletilmiş koruma için bu kimlik doğrulama işlemi yeni özellikleri ekler</span><span class="sxs-lookup"><span data-stu-id="8a0a4-150">Extended protection adds new features to this authentication process</span></span>  
  
 <span data-ttu-id="8a0a4-151"><xref:System.Security.Authentication.ExtendedProtection> Ad alanı, uygulamalar için genişletilmiş koruma kullanarak kimlik doğrulaması için destek sağlar.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-151">The <xref:System.Security.Authentication.ExtendedProtection> namespace provides support for authentication using extended protection for applications.</span></span> <span data-ttu-id="8a0a4-152"><xref:System.Security.Authentication.ExtendedProtection.ChannelBinding> Sınıfı bu ad alanındaki bir kanal bağlama temsil eder.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-152">The <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding> class in this namespace represents a channel binding.</span></span> <span data-ttu-id="8a0a4-153"><xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> Sınıfı bu ad alanındaki gelen istemci bağlantılarını doğrulamak için sunucu tarafından kullanılan genişletilmiş koruma ilkesini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-153">The <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> class in this namespace represents the extended protection policy used by the server to validate incoming client connections.</span></span> <span data-ttu-id="8a0a4-154">Diğer sınıf üyeleri ile genişletilmiş koruma kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-154">Other class members are used with extended protection.</span></span>  
  
 <span data-ttu-id="8a0a4-155">Sunucu uygulamaları için bu sınıfları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-155">For server applications, these classes include the following:</span></span>  
  
 <span data-ttu-id="8a0a4-156">A <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> aşağıdaki öğelere sahiptir:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-156">A <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> that has the following elements:</span></span>  
  
-   <span data-ttu-id="8a0a4-157">Bir <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy.OSSupportsExtendedProtection%2A> işletim sistemi genişletilmiş koruma ile tümleşik windows kimlik doğrulamasını destekleyip desteklemediğini belirten özellik.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-157">An <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy.OSSupportsExtendedProtection%2A> property that indicates whether the operating system supports integrated windows authentication with extended protection.</span></span>  
  
-   <span data-ttu-id="8a0a4-158">A <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> genişletilmiş koruma İlkesi zaman zorlanıp zorlanmayacağını belirten değer.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-158">A <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> value that indicates when the extended protection policy should be enforced.</span></span>  
  
-   <span data-ttu-id="8a0a4-159">A <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> dağıtım senaryosuna belirten değer.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-159">A <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> value that indicates the deployment scenario.</span></span> <span data-ttu-id="8a0a4-160">Bu nasıl genişletilmiş koruma etkilediğini denetlenir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-160">This influences how extended protection is checked.</span></span>  
  
-   <span data-ttu-id="8a0a4-161">İsteğe bağlı bir <xref:System.Security.Authentication.ExtendedProtection.ServiceNameCollection> kimlik doğrulamasının hedeflenen hedefi olarak istemci tarafından sağlanan SPN eşleştirilecek kullanılan özel SPN listesini içerir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-161">An optional <xref:System.Security.Authentication.ExtendedProtection.ServiceNameCollection> that contains the custom SPN list that is used to match against the SPN provided by the client as the intended target of the authentication.</span></span>  
  
-   <span data-ttu-id="8a0a4-162">İsteğe bağlı bir <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding> doğrulama için kullanılacak bir özel kanal bağlama içerir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-162">An optional <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding> that contains a custom channel binding to use for validation.</span></span> <span data-ttu-id="8a0a4-163">Bu senaryo karşılaşılan bir durumda değil</span><span class="sxs-lookup"><span data-stu-id="8a0a4-163">This scenario is not a common case</span></span>  
  
 <span data-ttu-id="8a0a4-164"><xref:System.Security.Authentication.ExtendedProtection.Configuration> Ad alanı, uygulamalar için genişletilmiş koruma kullanarak kimlik doğrulaması yapılandırması için destek sağlar.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-164">The <xref:System.Security.Authentication.ExtendedProtection.Configuration> namespace provides support for configuration of authentication using extended protection for applications.</span></span>  
  
 <span data-ttu-id="8a0a4-165">Özellik değişiklikleri sayısı varolan genişletilmiş korumayı desteklemek için yapılan <xref:System.Net> ad alanı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-165">A number of feature changes were made to support extended protection in the existing <xref:System.Net> namespace.</span></span> <span data-ttu-id="8a0a4-166">Bu değişiklikler şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-166">These changes include the following:</span></span>  
  
-   <span data-ttu-id="8a0a4-167">Yeni bir <xref:System.Net.TransportContext> eklenen sınıfı <xref:System.Net> taşıma bağlamını temsil eder ad alanı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-167">A new <xref:System.Net.TransportContext> class added to the <xref:System.Net> namespace that represents a transport context.</span></span>  
  
-   <span data-ttu-id="8a0a4-168">Yeni <xref:System.Net.HttpWebRequest.EndGetRequestStream%2A> ve <xref:System.Net.HttpWebRequest.GetRequestStream%2A> yöntemlerini aşırı yükleme <xref:System.Net.HttpWebRequest> alma izin sınıfı <xref:System.Net.TransportContext> istemci uygulamalar için genişletilmiş korumayı desteklemek için.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-168">New <xref:System.Net.HttpWebRequest.EndGetRequestStream%2A> and <xref:System.Net.HttpWebRequest.GetRequestStream%2A> overload methods in the <xref:System.Net.HttpWebRequest> class that allow retrieving the <xref:System.Net.TransportContext> to support extended protection for client applications.</span></span>  
  
-   <span data-ttu-id="8a0a4-169">Eklemeler <xref:System.Net.HttpListener> ve <xref:System.Net.HttpListenerRequest> sunucu uygulamalarını desteklemek için sınıflar.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-169">Additions to the <xref:System.Net.HttpListener> and <xref:System.Net.HttpListenerRequest> classes to support server applications.</span></span>  
  
 <span data-ttu-id="8a0a4-170">Mevcut olan SMTP istemci uygulamaları için genişletilmiş korumayı desteklemek için bir özellik değişiklik yapılmıştır <xref:System.Net.Mail> ad alanı:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-170">A feature change was made to support extended protection for SMTP client applications in the existing <xref:System.Net.Mail> namespace:</span></span>  
  
-   <span data-ttu-id="8a0a4-171">A <xref:System.Net.Mail.SmtpClient.TargetName%2A> özelliğinde <xref:System.Net.Mail.SmtpClient> kullanırken kimlik doğrulaması için kullanılacak SPN temsil eden sınıf genişletilmiş koruma için SMTP istemci uygulamaları.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-171">A <xref:System.Net.Mail.SmtpClient.TargetName%2A> property in the <xref:System.Net.Mail.SmtpClient> class that represents the SPN to use for authentication when using extended protection for SMTP client applications.</span></span>  
  
 <span data-ttu-id="8a0a4-172">Özellik değişiklikleri sayısı varolan genişletilmiş korumayı desteklemek için yapılan <xref:System.Net.Security> ad alanı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-172">A number of feature changes were made to support extended protection in the existing <xref:System.Net.Security> namespace.</span></span> <span data-ttu-id="8a0a4-173">Bu değişiklikler şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-173">These changes include the following:</span></span>  
  
-   <span data-ttu-id="8a0a4-174">Yeni <xref:System.Net.Security.NegotiateStream.BeginAuthenticateAsClient%2A> ve <xref:System.Net.Security.NegotiateStream.AuthenticateAsClient%2A> yöntemlerini aşırı yükleme <xref:System.Net.Security.NegotiateStream> istemci uygulamalar için genişletilmiş korumayı desteklemek için CBT geçirme izni sınıfı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-174">New <xref:System.Net.Security.NegotiateStream.BeginAuthenticateAsClient%2A> and <xref:System.Net.Security.NegotiateStream.AuthenticateAsClient%2A> overload methods in the <xref:System.Net.Security.NegotiateStream> class that allow passing a CBT to support extended protection for client applications.</span></span>  
  
-   <span data-ttu-id="8a0a4-175">Yeni <xref:System.Net.Security.NegotiateStream.BeginAuthenticateAsServer%2A> ve <xref:System.Net.Security.NegotiateStream.AuthenticateAsServer%2A> yöntemlerini aşırı yükleme <xref:System.Net.Security.NegotiateStream> geçirme izin sınıfı bir <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> sunucu uygulamaları için genişletilmiş korumayı desteklemek için.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-175">New <xref:System.Net.Security.NegotiateStream.BeginAuthenticateAsServer%2A> and <xref:System.Net.Security.NegotiateStream.AuthenticateAsServer%2A> overload methods in the <xref:System.Net.Security.NegotiateStream> class that allow passing an <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> to support extended protection for server applications.</span></span>  
  
-   <span data-ttu-id="8a0a4-176">Yeni bir <xref:System.Net.Security.SslStream.TransportContext%2A> özelliğinde <xref:System.Net.Security.SslStream> istemci ve sunucu uygulamaları için genişletilmiş korumayı desteklemek için sınıf.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-176">A new <xref:System.Net.Security.SslStream.TransportContext%2A> property in the <xref:System.Net.Security.SslStream> class to support extended protection for client and server applications.</span></span>  
  
 <span data-ttu-id="8a0a4-177">A <xref:System.Net.Configuration.SmtpNetworkElement> özelliği, SMTP istemcileri için genişletilmiş koruma yapılandırmasını desteklemek için eklenen <xref:System.Net.Security> ad alanı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-177">A <xref:System.Net.Configuration.SmtpNetworkElement> property was added to support configuration of extended protection for SMTP clients in the <xref:System.Net.Security> namespace.</span></span>  
  
## <a name="extended-protection-for-client-applications"></a><span data-ttu-id="8a0a4-178">İstemci uygulamaları için genişletilmiş koruma</span><span class="sxs-lookup"><span data-stu-id="8a0a4-178">Extended Protection for Client Applications</span></span>  
 <span data-ttu-id="8a0a4-179">Çoğu istemci uygulamaları için genişletilmiş koruma desteği otomatik olarak gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-179">Extended protection support for most client applications happens automatically.</span></span> <span data-ttu-id="8a0a4-180"><xref:System.Net.HttpWebRequest> Ve <xref:System.Net.Mail.SmtpClient> sınıfları, genişletilmiş koruma temel alınan Windows sürümünü destekleyen her genişletilmiş korumayı destekler.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-180">The <xref:System.Net.HttpWebRequest> and <xref:System.Net.Mail.SmtpClient> classes support extended protection whenever the underlying version of Windows supports extended protection.</span></span> <span data-ttu-id="8a0a4-181">Bir <xref:System.Net.HttpWebRequest> örneği gönderir gelen oluşturulan bir SPN <xref:System.Uri>.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-181">An <xref:System.Net.HttpWebRequest> instance sends an SPN constructed from the <xref:System.Uri>.</span></span> <span data-ttu-id="8a0a4-182">Varsayılan olarak, bir <xref:System.Net.Mail.SmtpClient> örneği SMTP posta sunucusunun ana bilgisayar adından oluşturulmuş bir SPN gönderir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-182">By default, an <xref:System.Net.Mail.SmtpClient> instance sends an SPN constructed from the host name of the SMTP mail server.</span></span>  
  
 <span data-ttu-id="8a0a4-183">Özel kimlik doğrulaması için istemci uygulamaları kullanabilir <xref:System.Net.HttpWebRequest.EndGetRequestStream%28System.IAsyncResult%2CSystem.Net.TransportContext%40%29?displayProperty=nameWithType> veya <xref:System.Net.HttpWebRequest.GetRequestStream%28System.Net.TransportContext%40%29?displayProperty=nameWithType> yöntemleri <xref:System.Net.HttpWebRequest> alma izin sınıfı <xref:System.Net.TransportContext> ve CBT kullanarak <xref:System.Net.TransportContext.GetChannelBinding%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-183">For custom authentication, client applications can use the <xref:System.Net.HttpWebRequest.EndGetRequestStream%28System.IAsyncResult%2CSystem.Net.TransportContext%40%29?displayProperty=nameWithType> or <xref:System.Net.HttpWebRequest.GetRequestStream%28System.Net.TransportContext%40%29?displayProperty=nameWithType> methods in the <xref:System.Net.HttpWebRequest> class that allow retrieving the <xref:System.Net.TransportContext> and the CBT using the <xref:System.Net.TransportContext.GetChannelBinding%2A> method.</span></span>  
  
 <span data-ttu-id="8a0a4-184">SPN tarafından gönderilen tümleşik Windows kimlik doğrulaması için kullanılacak bir <xref:System.Net.HttpWebRequest> belirli bir hizmeti örneğine ayarlayarak geçersiz kılınmış <xref:System.Net.AuthenticationManager.CustomTargetNameDictionary%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-184">The SPN to use for integrated Windows authentication sent by an <xref:System.Net.HttpWebRequest> instance to a given service can be overridden by setting the <xref:System.Net.AuthenticationManager.CustomTargetNameDictionary%2A> property.</span></span>  
  
 <span data-ttu-id="8a0a4-185"><xref:System.Net.Mail.SmtpClient.TargetName%2A> Özelliği, SMTP bağlantı için tümleşik Windows kimlik doğrulaması için kullanılacak özel bir SPN ayarlamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-185">The <xref:System.Net.Mail.SmtpClient.TargetName%2A> property can be used to set a custom SPN to use for integrated Windows authentication for the SMTP connection.</span></span>  
  
## <a name="extended-protection-for-server-applications"></a><span data-ttu-id="8a0a4-186">Sunucu uygulamaları için genişletilmiş koruma</span><span class="sxs-lookup"><span data-stu-id="8a0a4-186">Extended Protection for Server Applications</span></span>  
 <span data-ttu-id="8a0a4-187"><xref:System.Net.HttpListener>otomatik olarak hizmet bağlamaları HTTP kimlik doğrulaması gerçekleştirirken doğrulama mekanizmaları sağlar.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-187"><xref:System.Net.HttpListener> automatically provides mechanisms for validating service bindings when performing HTTP authentication.</span></span>  
  
 <span data-ttu-id="8a0a4-188">HTTPS:// önekler için genişletilmiş koruma özelliğini etkinleştirmek için en güvenli senaryodur bakın.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-188">The most secure scenario is to enable extended protection for HTTPS:// prefixes.</span></span> <span data-ttu-id="8a0a4-189">Bu durumda, ayarlamak <xref:System.Net.HttpListener.ExtendedProtectionPolicy%2A?displayProperty=nameWithType> için bir <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> ile <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> kümesine <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> veya <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>, ve <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> kümesine <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario.TransportSelected> değerini <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> koyar <xref:System.Net.HttpListener> sırasındakısmensağlamlaştırılmışmodda<xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> tam sağlamlaştırılmış moduna karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-189">In this case, set <xref:System.Net.HttpListener.ExtendedProtectionPolicy%2A?displayProperty=nameWithType> to an <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> with <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> set to <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> or <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>, and <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> set to <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario.TransportSelected> A value of  <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> puts <xref:System.Net.HttpListener> in partially hardened mode, while <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> corresponds to fully hardened mode.</span></span>  
  
 <span data-ttu-id="8a0a4-190">Dış bir güvenli kanal üzerinden sunucusuna bir istek yapıldığında bu yapılandırmada dış kanal için bir kanal bağlama sorgulanır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-190">In this configuration when a request is made to the server through an outer secure channel, the outer channel is queried for a channel binding.</span></span> <span data-ttu-id="8a0a4-191">Bu kanal bağlama doğrulamak kimlik doğrulaması SSPI çağrıları kimlik doğrulaması blob eşleşmeleri kanal bağlamasında geçirilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-191">This channel binding is passed to the authentication SSPI calls, which validate that the channel binding in the authentication blob matches.</span></span> <span data-ttu-id="8a0a4-192">Üç olası sonuçları vardır:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-192">There are three possible outcomes:</span></span>  
  
1.  <span data-ttu-id="8a0a4-193">Sunucunun temel işletim sistemi genişletilmiş korumayı desteklemiyor.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-193">The server’s underlying operating system does not support extended protection.</span></span> <span data-ttu-id="8a0a4-194">İstek uygulamaya gösterilmeyen ve yetkisiz (401) yanıt istemciye döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-194">The request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="8a0a4-195">Bir ileti için oturum <xref:System.Net.HttpListener> başarısızlığın nedenini belirten izleme kaynağı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-195">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
2.  <span data-ttu-id="8a0a4-196">Dış kanaldan beklenen değerle eşleşmedi bir kanal bağlama alınan istemci belirtilen veya sunucusundaki genişletilmiş koruma İlkesi yapılandırıldığında bir kanal bağlama sağlamak istemci başarısız belirten SSPI çağrısı başarısız oluyor için <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-196">The SSPI call fails indicating that either the client specified a channel binding that did not match the expected value retrieved from the outer channel or the client failed to supply a channel binding when the extended protection policy on the server was configured for <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>.</span></span> <span data-ttu-id="8a0a4-197">Her iki durumda da istek uygulamaya gösterilmeyen ve yetkisiz (401) yanıt istemciye döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-197">In both cases, the request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="8a0a4-198">Bir ileti için oturum <xref:System.Net.HttpListener> başarısızlığın nedenini belirten izleme kaynağı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-198">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
3.  <span data-ttu-id="8a0a4-199">İstemci doğru kanal bağlama belirtir veya sunucusundaki genişletilmiş koruma İlkesi ile yapılandırıldıktan sonra bir kanal bağlama belirtmeden bağlanmasına izin <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> istek işleme için uygulama döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-199">The client specifies the correct channel binding or is allowed to connect without specifying a channel binding since the extended protection policy on the server is configured with <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> The request is returned to the application for processing.</span></span> <span data-ttu-id="8a0a4-200">Hizmet adı onay otomatik olarak gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-200">No service name check is performed automatically.</span></span> <span data-ttu-id="8a0a4-201">Kendi hizmet adını doğrulama kullanarak gerçekleştirmek bir uygulama seçebilirsiniz <xref:System.Net.HttpListenerRequest.ServiceName%2A> özelliği, ancak bu koşullarda gereksiz.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-201">An application may choose to perform its own service name validation using the <xref:System.Net.HttpListenerRequest.ServiceName%2A> property, but under these circumstances it is redundant.</span></span>  
  
 <span data-ttu-id="8a0a4-202">Bir uygulama ve geriye bir HTTP isteğinin gövdesi içinde geçirilen BLOB'ları temel kimlik doğrulaması gerçekleştirmek için kendi SSPI çağrıları yapar ve kanal bağlama desteklemek istediği, beklenen kanal bağlama kullanarakdışgüvenlikanaldanalmakgereken<xref:System.Net.HttpListener> yerel Win32'ye geçirmek için [AcceptSecurityContext](http://go.microsoft.com/fwlink/?LinkId=147021) işlevi.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-202">If an application makes its own SSPI calls to perform authentication based on blobs passed back and forth within the body of an HTTP request and wishes to support channel binding, it needs to retrieve the expected channel binding from the outer secure channel using <xref:System.Net.HttpListener> in order to pass it to native Win32 [AcceptSecurityContext](http://go.microsoft.com/fwlink/?LinkId=147021) function.</span></span> <span data-ttu-id="8a0a4-203">Bunu yapmak için kullanın <xref:System.Net.HttpListenerRequest.TransportContext%2A> özelliği ve çağrı <xref:System.Net.TransportContext.GetChannelBinding%2A> CBT alma yöntemi.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-203">To do this, use the <xref:System.Net.HttpListenerRequest.TransportContext%2A> property and call <xref:System.Net.TransportContext.GetChannelBinding%2A> method to retrieve the CBT.</span></span> <span data-ttu-id="8a0a4-204">Yalnızca endpoint bağlamaları desteklenir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-204">Only endpoint bindings are supported.</span></span> <span data-ttu-id="8a0a4-205">Herhangi bir şey varsa diğer <xref:System.Security.Authentication.ExtendedProtection.ChannelBindingKind.Endpoint> belirtilirse, bir <xref:System.NotSupportedException> oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-205">If anything other <xref:System.Security.Authentication.ExtendedProtection.ChannelBindingKind.Endpoint> is specified, a <xref:System.NotSupportedException> will be thrown.</span></span> <span data-ttu-id="8a0a4-206">Kanal bağlama, temel işletim sistemini destekleyip desteklemediğini <xref:System.Net.TransportContext.GetChannelBinding%2A> yöntemi döndürür bir <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding> <xref:System.Runtime.InteropServices.SafeHandle> bir kanal geçişine uygun bağlama için bir işaretçi kaydırma [AcceptSecurityContext](http://go.microsoft.com/fwlink/?LinkId=147021) işlevi SecBuffer yapısı üyesi pvBuffer geçirilen `pInput` parametresi.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-206">If the underlying operating system supports channel binding, the <xref:System.Net.TransportContext.GetChannelBinding%2A> method will return a <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding><xref:System.Runtime.InteropServices.SafeHandle> wrapping a pointer to a channel binding suitable for passing to [AcceptSecurityContext](http://go.microsoft.com/fwlink/?LinkId=147021) function as the pvBuffer member of a SecBuffer structure passed in the `pInput` parameter.</span></span> <span data-ttu-id="8a0a4-207"><xref:System.Security.Authentication.ExtendedProtection.ChannelBinding.Size%2A> Özelliği, bayt cinsinden uzunluğu kanal bağlama içerir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-207">The <xref:System.Security.Authentication.ExtendedProtection.ChannelBinding.Size%2A> property contains the length, in bytes, of the channel binding.</span></span> <span data-ttu-id="8a0a4-208">Altta yatan işletim sistemi kanal bağlamaları desteklemiyor varsa, işlev döndürülecek `null`.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-208">If the underlying operating system does not support channel bindings, the function will return `null`.</span></span>  
  
 <span data-ttu-id="8a0a4-209">Başka bir olası proxy'leri kullanılmadığı HTTP:// önekler için genişletilmiş koruma özelliğini etkinleştirmek için bir senaryodur.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-209">Another possible scenario is to enable extended protection for HTTP:// prefixes when proxies are not used.</span></span> <span data-ttu-id="8a0a4-210">Bu durumda, ayarlamak <xref:System.Net.HttpListener.ExtendedProtectionPolicy%2A?displayProperty=nameWithType> için bir <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> ile <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> kümesine <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> veya <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>, ve <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> kümesine <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario.TransportSelected> değerini <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> koyar <xref:System.Net.HttpListener> sırasındakısmensağlamlaştırılmışmodda<xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> tam sağlamlaştırılmış moduna karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-210">In this case, set <xref:System.Net.HttpListener.ExtendedProtectionPolicy%2A?displayProperty=nameWithType> to an <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> with <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement> set to <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> or <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always>, and <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario> set to <xref:System.Security.Authentication.ExtendedProtection.ProtectionScenario.TransportSelected> A value of  <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> puts <xref:System.Net.HttpListener> in partially hardened mode, while <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> corresponds to fully hardened mode.</span></span>  
  
 <span data-ttu-id="8a0a4-211">İzin verilen hizmet adlarını varsayılan listesi ile kayıtlı önekleri temel alınarak oluşturulur <xref:System.Net.HttpListener>.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-211">A default list of allowed service names is created based on the prefixes which have been registered with the <xref:System.Net.HttpListener>.</span></span> <span data-ttu-id="8a0a4-212">Bu varsayılan liste üzerinden incelenebilir <xref:System.Net.HttpListener.DefaultServiceNames%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-212">This default list can be examined through the <xref:System.Net.HttpListener.DefaultServiceNames%2A> property.</span></span> <span data-ttu-id="8a0a4-213">Bu liste kapsamlı değilse, bir uygulama bir özel hizmet adı koleksiyon Oluşturucusu belirtebilirsiniz <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> varsayılan hizmet adı listesi yerine kullanılacak sınıfı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-213">If this list is not comprehensive, an application can specify a custom service name collection in the constructor for the <xref:System.Security.Authentication.ExtendedProtection.ExtendedProtectionPolicy> class which will be used instead of the default service name list.</span></span>  
  
 <span data-ttu-id="8a0a4-214">Bir istek bir dış olmadan sunucuya güvenli yapıldığında bu yapılandırmada, kanal kimlik doğrulaması normalde bir kanal onay bağlama devam eder.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-214">In this configuration, when a request is made to the server without an outer secure channel authentication proceeds normally without a channel binding check.</span></span> <span data-ttu-id="8a0a4-215">Doğrulama başarılı olursa, bağlam istemci sağlanan ve kabul edilebilir hizmet adları listesi karşı hizmet adı için sorgulanır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-215">If the authentication succeeds, the context is queried for the service name that the client provided and validated against the list of acceptable service names.</span></span> <span data-ttu-id="8a0a4-216">Dört olası sonuçları vardır:</span><span class="sxs-lookup"><span data-stu-id="8a0a4-216">There are four possible outcomes:</span></span>  
  
1.  <span data-ttu-id="8a0a4-217">Sunucunun temel işletim sistemi genişletilmiş korumayı desteklemiyor.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-217">The server’s underlying operating system does not support extended protection.</span></span> <span data-ttu-id="8a0a4-218">İstek uygulamaya gösterilmeyen ve yetkisiz (401) yanıt istemciye döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-218">The request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="8a0a4-219">Bir ileti için oturum <xref:System.Net.HttpListener> başarısızlığın nedenini belirten izleme kaynağı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-219">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
2.  <span data-ttu-id="8a0a4-220">İstemcinin temel işletim sistemi genişletilmiş korumayı desteklemiyor.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-220">The client’s underlying operating system does not support extended protection.</span></span> <span data-ttu-id="8a0a4-221">İçinde <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> yapılandırma, kimlik doğrulama girişimi başarısız olur ve istek uygulamaya döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-221">In the <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.WhenSupported> configuration, the authentication attempt will succeed and the request will be returned to the application.</span></span> <span data-ttu-id="8a0a4-222">İçinde <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> yapılandırma, kimlik doğrulama girişimi başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-222">In the <xref:System.Security.Authentication.ExtendedProtection.PolicyEnforcement.Always> configuration, the authentication attempt will fail.</span></span> <span data-ttu-id="8a0a4-223">İstek uygulamaya gösterilmeyen ve yetkisiz (401) yanıt istemciye döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-223">The request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="8a0a4-224">Bir ileti için oturum <xref:System.Net.HttpListener> başarısızlığın nedenini belirten izleme kaynağı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-224">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
3.  <span data-ttu-id="8a0a4-225">İstemcinin temel işletim sistemi genişletilmiş korumayı destekler, ancak uygulama hizmet bağlama belirtmedi.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-225">The client’s underlying operating system supports extended protection, but the application did not specify a service binding.</span></span> <span data-ttu-id="8a0a4-226">İstek uygulamaya gösterilmeyen ve yetkisiz (401) yanıt istemciye döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-226">The request will not be exposed to the application, and an unauthorized (401) response will be returned to the client.</span></span> <span data-ttu-id="8a0a4-227">Bir ileti için oturum <xref:System.Net.HttpListener> başarısızlığın nedenini belirten izleme kaynağı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-227">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
4.  <span data-ttu-id="8a0a4-228">İstemci hizmet bağlama belirtildi.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-228">The client specified a service binding.</span></span> <span data-ttu-id="8a0a4-229">Hizmet bağlama izin verilen hizmet bağlamaları listesine karşılaştırılır.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-229">The service binding is compared to the list of allowed service bindings.</span></span> <span data-ttu-id="8a0a4-230">Eşleşirse, istek uygulamaya döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-230">If it matches, the request is returned to the application.</span></span> <span data-ttu-id="8a0a4-231">Aksi takdirde, istek uygulamaya gösterilmeyen ve yetkisiz (401) yanıt istemciye otomatik olarak döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-231">Otherwise, the request will not be exposed to the application, and an unauthorized (401) response will be automatically returned to the client.</span></span> <span data-ttu-id="8a0a4-232">Bir ileti için oturum <xref:System.Net.HttpListener> başarısızlığın nedenini belirten izleme kaynağı.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-232">A message will be logged to the <xref:System.Net.HttpListener> trace source specifying the reason for the failure.</span></span>  
  
 <span data-ttu-id="8a0a4-233">Kabul edilebilir hizmet adlarına izin verilen bir listesini kullanarak bu basit bir yaklaşım yetersizse, uygulamanın kendi hizmet adı doğrulama sorgulayarak sağlayabilir <xref:System.Net.HttpListenerRequest.ServiceName%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-233">If this simple approach using an allowed list of acceptable service names is insufficient, an application may provide its own service name validation by querying the <xref:System.Net.HttpListenerRequest.ServiceName%2A> property.</span></span> <span data-ttu-id="8a0a4-234">Yukarıdaki 1 ve 2 durumda da, özellik döndürülecek `null`.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-234">In cases 1 and 2 above, the property will return `null`.</span></span> <span data-ttu-id="8a0a4-235">3. durumda, boş bir dize döndürür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-235">In case 3, it will return an empty string.</span></span> <span data-ttu-id="8a0a4-236">4 durumda, istemci tarafından belirtilen hizmet adı döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-236">In case 4, the service name specified by the client will be returned.</span></span>  
  
 <span data-ttu-id="8a0a4-237">Bu genişletilmiş koruma özellikleri, ayrıca diğer türleri isteklerinin ve güvenilir proxy'leri kullanıldığında kimlik doğrulaması için sunucu uygulamaları tarafından kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-237">These extended protection features can also be used by server applications for authentication with other types of requests and when trusted proxies are used.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8a0a4-238">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="8a0a4-238">See Also</span></span>  
 <xref:System.Security.Authentication.ExtendedProtection>  
 <xref:System.Security.Authentication.ExtendedProtection.Configuration>
