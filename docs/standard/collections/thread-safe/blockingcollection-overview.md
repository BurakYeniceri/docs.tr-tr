---
title: "BlockingCollection Genel Bakışı"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: BlockingCollection, overview
ms.assetid: 987ea3d7-0ad5-4238-8b64-331ce4eb3f0b
caps.latest.revision: "12"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 5e2235c1a5bbe4a39cf029059290268faa5be154
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/23/2017
---
# <a name="blockingcollection-overview"></a><span data-ttu-id="17eca-102">BlockingCollection Genel Bakışı</span><span class="sxs-lookup"><span data-stu-id="17eca-102">BlockingCollection Overview</span></span>
<span data-ttu-id="17eca-103"><xref:System.Collections.Concurrent.BlockingCollection%601>Aşağıdaki özellikleri sağlayan bir iş parçacığı koleksiyonunun sınıfı şöyledir:</span><span class="sxs-lookup"><span data-stu-id="17eca-103"><xref:System.Collections.Concurrent.BlockingCollection%601> is a thread-safe collection class that provides the following features:</span></span>  
  
-   <span data-ttu-id="17eca-104">Üretici-tüketici düzeni uygulaması.</span><span class="sxs-lookup"><span data-stu-id="17eca-104">An implementation of the Producer-Consumer pattern.</span></span>  
  
-   <span data-ttu-id="17eca-105">Eşzamanlı eklemek ve birden çok iş parçacığından öğelerinin sürüyor.</span><span class="sxs-lookup"><span data-stu-id="17eca-105">Concurrent adding and taking of items from multiple threads.</span></span>  
  
-   <span data-ttu-id="17eca-106">İsteğe bağlı kapasite üst sınırı.</span><span class="sxs-lookup"><span data-stu-id="17eca-106">Optional maximum capacity.</span></span>  
  
-   <span data-ttu-id="17eca-107">Koleksiyon boş ya da tam olduğunda engelleme ekleme ve kaldırma işlemleri.</span><span class="sxs-lookup"><span data-stu-id="17eca-107">Insertion and removal operations that block when collection is empty or full.</span></span>  
  
-   <span data-ttu-id="17eca-108">Ekleme ve kaldırma ", değil engelleyebilir veya belirli bir süre kadar engelleyebilir işlemleri deneyin".</span><span class="sxs-lookup"><span data-stu-id="17eca-108">Insertion and removal "try" operations that do not block or that block up to a specified period of time.</span></span>  
  
-   <span data-ttu-id="17eca-109">Uygulayan herhangi bir koleksiyon türü yalıtır<xref:System.Collections.Concurrent.IProducerConsumerCollection%601></span><span class="sxs-lookup"><span data-stu-id="17eca-109">Encapsulates any collection type that implements <xref:System.Collections.Concurrent.IProducerConsumerCollection%601></span></span>  
  
-   <span data-ttu-id="17eca-110">İptal belirteçleri iptalini.</span><span class="sxs-lookup"><span data-stu-id="17eca-110">Cancellation with cancellation tokens.</span></span>  
  
-   <span data-ttu-id="17eca-111">İki tür olan numaralandırma `foreach` (`For Each` Visual Basic'te):</span><span class="sxs-lookup"><span data-stu-id="17eca-111">Two kinds of enumeration with `foreach` (`For Each` in Visual Basic):</span></span>  
  
    1.  <span data-ttu-id="17eca-112">Salt okunur numaralandırması.</span><span class="sxs-lookup"><span data-stu-id="17eca-112">Read-only enumeration.</span></span>  
  
    2.  <span data-ttu-id="17eca-113">Bunlar numaralandırılır gibi öğeleri kaldırır numaralandırması.</span><span class="sxs-lookup"><span data-stu-id="17eca-113">Enumeration that removes items as they are enumerated.</span></span>  
  
## <a name="bounding-and-blocking-support"></a><span data-ttu-id="17eca-114">Sınırlama ve engelleme desteği</span><span class="sxs-lookup"><span data-stu-id="17eca-114">Bounding and Blocking Support</span></span>  
 <span data-ttu-id="17eca-115"><xref:System.Collections.Concurrent.BlockingCollection%601>sınırlama ve engelleme destekler.</span><span class="sxs-lookup"><span data-stu-id="17eca-115"><xref:System.Collections.Concurrent.BlockingCollection%601> supports bounding and blocking.</span></span> <span data-ttu-id="17eca-116">Anlamına gelir sınırlayıcı koleksiyon maksimum kapasitesini ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="17eca-116">Bounding means you can set the maximum capacity of the collection.</span></span> <span data-ttu-id="17eca-117">Sınırlayıcı bellek koleksiyonunda en büyük boyutunu denetlemek sağlar ve öncesinde Süren iş parçacığı çok taşıma üretmeye iş parçacığı engeller belirli senaryolarda önemlidir.</span><span class="sxs-lookup"><span data-stu-id="17eca-117">Bounding is important in certain scenarios because it enables you to control the maximum size of the collection in memory, and it prevents the producing threads from moving too far ahead of the consuming threads.</span></span>  
  
 <span data-ttu-id="17eca-118">Birden çok iş parçacığı veya görevleri öğeler koleksiyonuna eşzamanlı olarak ekleyebilirsiniz ve koleksiyon belirtilen kapasitesinin üst sınırına ulaşırsa, öğeyi kaldırılana kadar üretmeye iş parçacığı engeller.</span><span class="sxs-lookup"><span data-stu-id="17eca-118">Multiple threads or tasks can add items to the collection concurrently, and if the collection reaches its specified maximum capacity, the producing threads will block until an item is removed.</span></span> <span data-ttu-id="17eca-119">Birden çok tüketiciye öğeleri aynı anda kaldırabilirsiniz ve koleksiyonu boş olursa, bir üretici bir öğe ekler kadar süren iş parçacığı engeller.</span><span class="sxs-lookup"><span data-stu-id="17eca-119">Multiple consumers can remove items concurrently, and if the collection becomes empty, the consuming threads will block until a producer adds an item.</span></span> <span data-ttu-id="17eca-120">Oluşturmayan bir iş parçacığı çağırabilir <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A> başka öğe yok eklenmesi belirtmek için.</span><span class="sxs-lookup"><span data-stu-id="17eca-120">A producing thread can call <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A> to indicate that no more items will be added.</span></span> <span data-ttu-id="17eca-121">Tüketiciler İzleyici <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> zaman koleksiyonu boş olan ve daha fazla öğe eklenecek bilmeniz özelliği.</span><span class="sxs-lookup"><span data-stu-id="17eca-121">Consumers monitor the <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> property to know when the collection is empty and no more items will be added.</span></span> <span data-ttu-id="17eca-122">Aşağıdaki örnek, 100 sınırlanmış kapasitesine sahip basit bir BlockingCollection gösterir.</span><span class="sxs-lookup"><span data-stu-id="17eca-122">The following example shows a simple BlockingCollection with a bounded capacity of 100.</span></span> <span data-ttu-id="17eca-123">Bazı dış koşul true olduğunda ve daha sonra çağırır sürece üretici görev öğeler koleksiyonuna ekler. <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A>.</span><span class="sxs-lookup"><span data-stu-id="17eca-123">A producer task adds items to the collection as long as some external condition is true, and then calls <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A>.</span></span> <span data-ttu-id="17eca-124">Tüketici Görev öğeleri kadar geçen <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> özelliği true ise.</span><span class="sxs-lookup"><span data-stu-id="17eca-124">The consumer task takes items until the <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> property is true.</span></span>  
  
 [!code-csharp[CDS_BlockingCollection#04](../../../../samples/snippets/csharp/VS_Snippets_Misc/cds_blockingcollection/cs/blockingcollection.cs#04)]
 [!code-vb[CDS_BlockingCollection#04](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_blockingcollection/vb/introsnippetsbc.vb#04)]  
  
 <span data-ttu-id="17eca-125">Tam bir örnek için bkz: [nasıl yapılır: ekleme ve ele öğeleri tek tek bir BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span><span class="sxs-lookup"><span data-stu-id="17eca-125">For a complete example, see [How to: Add and Take Items Individually from a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span></span>  
  
## <a name="timed-blocking-operations"></a><span data-ttu-id="17eca-126">İşlemleri engelleyen zaman aşımına uğradı</span><span class="sxs-lookup"><span data-stu-id="17eca-126">Timed Blocking Operations</span></span>  
 <span data-ttu-id="17eca-127">Buna engelleme zaman aşımına <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> ve <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> işlemleri sınırlanmış koleksiyonlarda yöntemi çalıştığında eklemek veya öğeyi almak.</span><span class="sxs-lookup"><span data-stu-id="17eca-127">In timed blocking <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> and <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> operations on bounded collections, the method tries to add or take an item.</span></span> <span data-ttu-id="17eca-128">Bir öğe varsa dosya başvuruya göre geçirilen değişkeni yerleştirilir ve yöntem true değerini döndürür.</span><span class="sxs-lookup"><span data-stu-id="17eca-128">If an item is available it is placed into the variable that was passed in by reference, and the method returns true.</span></span> <span data-ttu-id="17eca-129">Hiçbir öğe belirtilen bir zaman aşımı süresi alınır varsa yöntemi false değerini döndürür.</span><span class="sxs-lookup"><span data-stu-id="17eca-129">If no item is retrieved after a specified time-out period the method returns false.</span></span> <span data-ttu-id="17eca-130">İş parçacığı sonra koleksiyonuna erişmek yeniden denemeden önce biraz diğer yararlı çalışmanız ücretsizdir.</span><span class="sxs-lookup"><span data-stu-id="17eca-130">The thread is then free to do some other useful work before trying again to access the collection.</span></span> <span data-ttu-id="17eca-131">İkinci örnekte bir zaman aşımına erişimi engelleme örnek için bkz [nasıl yapılır: ekleme ve ele öğeleri tek tek bir BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span><span class="sxs-lookup"><span data-stu-id="17eca-131">For an example of timed blocking access, see the second example in [How to: Add and Take Items Individually from a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span></span>  
  
## <a name="cancelling-add-and-take-operations"></a><span data-ttu-id="17eca-132">Ekleme ve ele işlemleri iptal ediliyor</span><span class="sxs-lookup"><span data-stu-id="17eca-132">Cancelling Add and Take Operations</span></span>  
 <span data-ttu-id="17eca-133">Ekleyin ve alma işlemleri genellikle bir döngüde gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="17eca-133">Add and Take operations are typically performed in a loop.</span></span> <span data-ttu-id="17eca-134">Geçirerek bir döngü iptal bir <xref:System.Threading.CancellationToken> için <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> veya <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> yöntemi ve belirtecin değeri denetleme <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> her bir yineleme özelliği.</span><span class="sxs-lookup"><span data-stu-id="17eca-134">You can cancel a loop by passing in a <xref:System.Threading.CancellationToken> to the <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> or <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> method, and then checking the value of the token's <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> property on each iteration.</span></span> <span data-ttu-id="17eca-135">Ardından değeri true ise, tüm kaynakları temizleme ve döngüden çıkma iptal isteğini yanıt size kadar olan.</span><span class="sxs-lookup"><span data-stu-id="17eca-135">If the value is true, then it is up to you to respond the cancellation request by cleaning up any resources and exiting the loop.</span></span> <span data-ttu-id="17eca-136">Aşağıdaki örnek, bir aşırı yüklemesini gösterir <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> iptal belirteci alır ve kod kullanan bu:</span><span class="sxs-lookup"><span data-stu-id="17eca-136">The following example shows an overload of <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> that takes a cancellation token, and the code that uses it:</span></span>  
  
 [!code-csharp[CDS_BlockingCollection#05](../../../../samples/snippets/csharp/VS_Snippets_Misc/cds_blockingcollection/cs/blockingcollection.cs#05)]
 [!code-vb[CDS_BlockingCollection#05](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_blockingcollection/vb/introsnippetsbc.vb#05)]  
  
 <span data-ttu-id="17eca-137">İkinci örnekte iptal desteği eklemek nasıl bir örnek için bkz: [nasıl yapılır: ekleme ve ele öğeleri tek tek bir BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span><span class="sxs-lookup"><span data-stu-id="17eca-137">For an example of how to add cancellation support, see the second example in [How to: Add and Take Items Individually from a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span></span>  
  
## <a name="specifying-the-collection-type"></a><span data-ttu-id="17eca-138">Koleksiyon türünü belirtme</span><span class="sxs-lookup"><span data-stu-id="17eca-138">Specifying the Collection Type</span></span>  
 <span data-ttu-id="17eca-139">Oluştururken bir <xref:System.Collections.Concurrent.BlockingCollection%601>, yalnızca sınırlı kapasite aynı zamanda koleksiyon türünü kullanmak için belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="17eca-139">When you create a <xref:System.Collections.Concurrent.BlockingCollection%601>, you can specify not only the bounded capacity but also the type of collection to use.</span></span> <span data-ttu-id="17eca-140">Örneğin, belirtebilirsiniz bir <xref:System.Collections.Concurrent.ConcurrentQueue%601> ilk olarak-ilk çıkar (FIFO) davranışı için veya bir <xref:System.Collections.Concurrent.ConcurrentStack%601> son içinde-ilk çıkar (LIFO) davranışı için.</span><span class="sxs-lookup"><span data-stu-id="17eca-140">For example, you could specify a <xref:System.Collections.Concurrent.ConcurrentQueue%601> for first in-first out (FIFO) behavior, or a <xref:System.Collections.Concurrent.ConcurrentStack%601> for last in-first out (LIFO) behavior.</span></span> <span data-ttu-id="17eca-141">Uygulayan herhangi bir koleksiyon sınıf kullanabilirsiniz <xref:System.Collections.Concurrent.IProducerConsumerCollection%601> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="17eca-141">You can use any collection class that implements the <xref:System.Collections.Concurrent.IProducerConsumerCollection%601> interface.</span></span> <span data-ttu-id="17eca-142">Varsayılan koleksiyon türü <xref:System.Collections.Concurrent.BlockingCollection%601> olan <xref:System.Collections.Concurrent.ConcurrentQueue%601>.</span><span class="sxs-lookup"><span data-stu-id="17eca-142">The default collection type for <xref:System.Collections.Concurrent.BlockingCollection%601> is <xref:System.Collections.Concurrent.ConcurrentQueue%601>.</span></span> <span data-ttu-id="17eca-143">Aşağıdaki kod örneğinde nasıl oluşturulacağını gösterir bir <xref:System.Collections.Concurrent.BlockingCollection%601> 1000 kapasitesine sahiptir ve kullandığı dizelerin bir <xref:System.Collections.Concurrent.ConcurrentBag%601>:</span><span class="sxs-lookup"><span data-stu-id="17eca-143">The following code example shows how to create a <xref:System.Collections.Concurrent.BlockingCollection%601> of strings that has a capacity of 1000 and uses a <xref:System.Collections.Concurrent.ConcurrentBag%601>:</span></span>  
  
```vb  
Dim bc = New BlockingCollection(Of String)(New ConcurrentBag(Of String()), 1000)  
```  
  
```csharp  
BlockingCollection<string> bc = new BlockingCollection<string>(new ConcurrentBag<string>(), 1000 );  
```  
  
 <span data-ttu-id="17eca-144">Daha fazla bilgi için bkz: [nasıl yapılır: ekleme sınırlama ve engelleme işlevi bir koleksiyona](../../../../docs/standard/collections/thread-safe/how-to-add-bounding-and-blocking.md).</span><span class="sxs-lookup"><span data-stu-id="17eca-144">For more information, see [How to: Add Bounding and Blocking Functionality to a Collection](../../../../docs/standard/collections/thread-safe/how-to-add-bounding-and-blocking.md).</span></span>  
  
## <a name="ienumerable-support"></a><span data-ttu-id="17eca-145">IEnumerable desteği</span><span class="sxs-lookup"><span data-stu-id="17eca-145">IEnumerable Support</span></span>  
 <span data-ttu-id="17eca-146"><xref:System.Collections.Concurrent.BlockingCollection%601>sağlayan bir <xref:System.Collections.Concurrent.BlockingCollection%601.GetConsumingEnumerable%2A> kullanmasına olanak sağlayan yöntemi `foreach` (`For Each` içinde [!INCLUDE[vbprvb](../../../../includes/vbprvb-md.md)]) koleksiyon tamamlanana kadar öğeleri kaldırmak için yani boştur ve daha fazla öğe eklenir.</span><span class="sxs-lookup"><span data-stu-id="17eca-146"><xref:System.Collections.Concurrent.BlockingCollection%601> provides a <xref:System.Collections.Concurrent.BlockingCollection%601.GetConsumingEnumerable%2A> method that enables consumers to use `foreach` (`For Each` in [!INCLUDE[vbprvb](../../../../includes/vbprvb-md.md)]) to remove items until the collection is completed, which means it is empty and no more items will be added.</span></span> <span data-ttu-id="17eca-147">Daha fazla bilgi için bkz: [nasıl yapılır: bir BlockingCollection öğeleri kaldırmak için kullanım ForEach](../../../../docs/standard/collections/thread-safe/how-to-use-foreach-to-remove.md).</span><span class="sxs-lookup"><span data-stu-id="17eca-147">For more information, see [How to: Use ForEach to Remove Items in a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-use-foreach-to-remove.md).</span></span>  
  
## <a name="using-many-blockingcollections-as-one"></a><span data-ttu-id="17eca-148">Birçok BlockingCollections olarak kullanma</span><span class="sxs-lookup"><span data-stu-id="17eca-148">Using Many BlockingCollections As One</span></span>  
 <span data-ttu-id="17eca-149">İçinde bir tüketici gereken aynı anda birden fazla koleksiyonun öğelerinden yapılacak senaryoları için dizileri oluşturabilirsiniz <xref:System.Collections.Concurrent.BlockingCollection%601> ve statik yöntemler gibi kullandığınız <xref:System.Collections.Concurrent.BlockingCollection%601.TakeFromAny%2A> ve <xref:System.Collections.Concurrent.BlockingCollection%601.AddToAny%2A> , ekleme veya herhangi birinden koleksiyonlardaki alın dizi.</span><span class="sxs-lookup"><span data-stu-id="17eca-149">For scenarios in which a consumer needs to take items from multiple collections simultaneously, you can create arrays of <xref:System.Collections.Concurrent.BlockingCollection%601> and use the static methods such as <xref:System.Collections.Concurrent.BlockingCollection%601.TakeFromAny%2A> and <xref:System.Collections.Concurrent.BlockingCollection%601.AddToAny%2A> that will add to or take from any of the collections in the array.</span></span> <span data-ttu-id="17eca-150">Bir koleksiyon engelleme varsa, işlemi gerçekleştiren bir tane bulana kadar yöntemi hemen başka çalışır.</span><span class="sxs-lookup"><span data-stu-id="17eca-150">If one collection is blocking, the method immediately tries another until it finds one that can perform the operation.</span></span> <span data-ttu-id="17eca-151">Daha fazla bilgi için bkz: [nasıl yapılır: ardışık düzende engelleme koleksiyonları kullanım diziler](../../../../docs/standard/collections/thread-safe/how-to-use-arrays-of-blockingcollections.md).</span><span class="sxs-lookup"><span data-stu-id="17eca-151">For more information, see [How to: Use Arrays of Blocking Collections in a Pipeline](../../../../docs/standard/collections/thread-safe/how-to-use-arrays-of-blockingcollections.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="17eca-152">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="17eca-152">See Also</span></span>  
 <xref:System.Collections.Concurrent?displayProperty=nameWithType>  
 [<span data-ttu-id="17eca-153">Koleksiyonlar ve Veri Yapıları</span><span class="sxs-lookup"><span data-stu-id="17eca-153">Collections and Data Structures</span></span>](../../../../docs/standard/collections/index.md)  
 [<span data-ttu-id="17eca-154">İş Parçacığı Güvenli Koleksiyonları</span><span class="sxs-lookup"><span data-stu-id="17eca-154">Thread-Safe Collections</span></span>](../../../../docs/standard/collections/thread-safe/index.md)
