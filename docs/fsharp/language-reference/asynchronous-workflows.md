---
title: "Zaman Uyumsuz İş Akışları (F#)"
description: "F # programlama dili hesaplamalar zaman uyumsuz olarak gerçekleştirmek için destek, diğer iş yürütme engellenmeden yürütme öğrenin."
keywords: "Visual f #, f # işlevsel programlama"
author: cartermp
ms.author: phcart
ms.date: 05/16/2016
ms.topic: language-reference
ms.prod: .net
ms.technology: devlang-fsharp
ms.devlang: fsharp
ms.assetid: ee2bb9bf-e04a-4fbe-bf58-46d07229e981
ms.openlocfilehash: e1cbdb452c8f77d97a0231a5ec75d752a98d2ed6
ms.sourcegitcommit: 655fd4f78741967f80c409cef98347fdcf77857d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/28/2018
---
# <a name="asynchronous-workflows"></a><span data-ttu-id="84a11-104">Zaman Uyumsuz İş Akışları</span><span class="sxs-lookup"><span data-stu-id="84a11-104">Asynchronous Workflows</span></span>

> [!NOTE]
<span data-ttu-id="84a11-105">API başvuru bağlantısı sizi MSDN'ye götürür.</span><span class="sxs-lookup"><span data-stu-id="84a11-105">The API reference link will take you to MSDN.</span></span>  <span data-ttu-id="84a11-106">Docs.microsoft.com API Başvurusu tamamlanmadı.</span><span class="sxs-lookup"><span data-stu-id="84a11-106">The docs.microsoft.com API reference is not complete.</span></span>

<span data-ttu-id="84a11-107">Bu konu, hesaplamalar zaman uyumsuz olarak, diğer bir deyişle, diğer iş yürütme engellenmeden gerçekleştirmek için destek F # açıklar.</span><span class="sxs-lookup"><span data-stu-id="84a11-107">This topic describes support in F# for performing computations asynchronously, that is, without blocking execution of other work.</span></span> <span data-ttu-id="84a11-108">Örneğin, uygulama diğer iş gerçekleştirirken, kullanıcılara yanıt verebilir durumda kalması Uı'lar uygulamaları yazmak için zaman uyumsuz hesapları kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="84a11-108">For example, asynchronous computations can be used to write applications that have UIs that remain responsive to users as the application performs other work.</span></span>

## <a name="syntax"></a><span data-ttu-id="84a11-109">Sözdizimi</span><span class="sxs-lookup"><span data-stu-id="84a11-109">Syntax</span></span>

```fsharp
async { expression }
```

## <a name="remarks"></a><span data-ttu-id="84a11-110">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="84a11-110">Remarks</span></span>

<span data-ttu-id="84a11-111">Önceki sözdiziminde hesaplama temsil ettiği `expression` zaman uyumsuz olarak, diğer bir deyişle, uyku zaman uyumsuz işlemler, g/ç ve diğer zaman uyumsuz işlemleri gerçekleştirildiğinde geçerli hesaplama iş parçacığı engellenmeden çalıştırmak için ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="84a11-111">In the previous syntax, the computation represented by `expression` is set up to run asynchronously, that is, without blocking the current computation thread when asynchronous sleep operations, I/O, and other asynchronous operations are performed.</span></span> <span data-ttu-id="84a11-112">Geçerli iş parçacığı üzerinde yürütme devam ederken zaman uyumsuz hesapları genellikle arka plan iş parçacığında başlatılır.</span><span class="sxs-lookup"><span data-stu-id="84a11-112">Asynchronous computations are often started on a background thread while execution continues on the current thread.</span></span> <span data-ttu-id="84a11-113">İfade türü `Async<'T>`, burada `'T` ifadesi tarafından döndürülen tür zaman `return` anahtar sözcüğü kullanılır.</span><span class="sxs-lookup"><span data-stu-id="84a11-113">The type of the expression is `Async<'T>`, where `'T` is the type returned by the expression when the `return` keyword is used.</span></span> <span data-ttu-id="84a11-114">Kod içinde bu tür bir ifade olarak adlandırılır bir *zaman uyumsuz blok*, veya *zaman uyumsuz blok*.</span><span class="sxs-lookup"><span data-stu-id="84a11-114">The code in such an expression is referred to as an *asynchronous block*, or *async block*.</span></span>

<span data-ttu-id="84a11-115">Çeşitli şekillerde zaman uyumsuz olarak programlama vardır ve [ `Async` ](https://msdn.microsoft.com/library/03eb4d12-a01a-4565-a077-5e83f17cf6f7) sınıfı çeşitli senaryoları desteklemek yöntemler sağlar.</span><span class="sxs-lookup"><span data-stu-id="84a11-115">There are a variety of ways of programming asynchronously, and the [`Async`](https://msdn.microsoft.com/library/03eb4d12-a01a-4565-a077-5e83f17cf6f7) class provides methods that support several scenarios.</span></span> <span data-ttu-id="84a11-116">Genel yaklaşım oluşturmaktır `Async` hesaplama veya zaman uyumsuz olarak çalıştırmak istediğiniz hesaplamalar temsil eder ve tetikleme işlevleri birini kullanarak bu hesaplamalar başlatın nesneleri.</span><span class="sxs-lookup"><span data-stu-id="84a11-116">The general approach is to create `Async` objects that represent the computation or computations that you want to run asynchronously, and then start these computations by using one of the triggering functions.</span></span> <span data-ttu-id="84a11-117">Zaman uyumsuz hesapları çalışan farklı yollar çeşitli tetikleme işlevleri sağlar ve bir kullandığınız, geçerli iş parçacığı, arka plan iş parçacığı veya .NET Framework görev nesnesi kullanmak isteyip istememenize bağlıdır ve devamlılık olup Hesaplama tamamlandığında çalışması gerektiğini işlevleri.</span><span class="sxs-lookup"><span data-stu-id="84a11-117">The various triggering functions provide different ways of running asynchronous computations, and which one you use depends on whether you want to use the current thread, a background thread, or a .NET Framework task object, and whether there are continuation functions that should run when the computation finishes.</span></span> <span data-ttu-id="84a11-118">Örneğin, zaman uyumsuz bir hesaplama geçerli iş parçacığı üzerinde başlatmak için kullanabileceğiniz [ `Async.StartImmediate` ](https://msdn.microsoft.com/library/2f71d1cc-187f-48cf-ac66-e7fda41c46e3).</span><span class="sxs-lookup"><span data-stu-id="84a11-118">For example, to start an asynchronous computation on the current thread, you can use [`Async.StartImmediate`](https://msdn.microsoft.com/library/2f71d1cc-187f-48cf-ac66-e7fda41c46e3).</span></span> <span data-ttu-id="84a11-119">Kullanıcı Arabirimi iş parçacığından zaman uyumsuz bir hesaplama başlattığınızda kullanıcı eylemleri tuş vuruşları ve fare etkinliği gibi uygulamanızı esnek böylece işleyen ana olay döngüsünü engellemez.</span><span class="sxs-lookup"><span data-stu-id="84a11-119">When you start an asynchronous computation from the UI thread, you do not block the main event loop that processes user actions such as keystrokes and mouse activity, so your application remains responsive.</span></span>

## <a name="asynchronous-binding-by-using-let"></a><span data-ttu-id="84a11-120">Let kullanarak zaman uyumsuz bağlama!</span><span class="sxs-lookup"><span data-stu-id="84a11-120">Asynchronous Binding by Using let!</span></span>

<span data-ttu-id="84a11-121">Zaman uyumsuz bir iş akışı bazı ifadeleri ve işlemleri zaman uyumlu ve zaman uyumsuz sonuç için tasarlanmış uzun hesaplamalar bazılarıdır.</span><span class="sxs-lookup"><span data-stu-id="84a11-121">In an asynchronous workflow, some expressions and operations are synchronous, and some are longer computations that are designed to return a result asynchronously.</span></span> <span data-ttu-id="84a11-122">Çağırdığınızda bir yöntem zaman uyumsuz olarak bir sıradan yerine `let` kullandığınız bağlama, `let!`.</span><span class="sxs-lookup"><span data-stu-id="84a11-122">When you call a method asynchronously, instead of an ordinary `let` binding, you use `let!`.</span></span> <span data-ttu-id="84a11-123">Etkisini `let!` hesaplama gerçekleştirilir gibi diğer hesaplamalar veya iş parçacığının devam etmek yürütme sağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="84a11-123">The effect of `let!` is to enable execution to continue on other computations or threads as the computation is being performed.</span></span> <span data-ttu-id="84a11-124">Sağ tarafındaki sonra `let!` bağlama döndürür, zaman uyumsuz iş akışının geri kalanı yürütme devam ettirir.</span><span class="sxs-lookup"><span data-stu-id="84a11-124">After the right side of the `let!` binding returns, the rest of the asynchronous workflow resumes execution.</span></span>

<span data-ttu-id="84a11-125">Aşağıdaki kod arasındaki farkı gösterir `let` ve `let!`.</span><span class="sxs-lookup"><span data-stu-id="84a11-125">The following code shows the difference between `let` and `let!`.</span></span> <span data-ttu-id="84a11-126">Kullanan kod satırı `let` yalnızca daha sonra kullanarak, örneğin, çalıştırabileceğiniz bir nesne olarak zaman uyumsuz bir hesaplama oluşturur `Async.StartImmediate` veya [ `Async.RunSynchronously` ](https://msdn.microsoft.com/library/0a6663a9-50f2-4d38-8bf3-cefd1a51fd6b).</span><span class="sxs-lookup"><span data-stu-id="84a11-126">The line of code that uses `let` just creates an asynchronous computation as an object that you can run later by using, for example, `Async.StartImmediate` or [`Async.RunSynchronously`](https://msdn.microsoft.com/library/0a6663a9-50f2-4d38-8bf3-cefd1a51fd6b).</span></span> <span data-ttu-id="84a11-127">Kullanan kod satırı `let!` hesaplama başlar ve ardından sonucu hangi noktası yürütme devam ediyor kullanılabilir oluncaya kadar iş parçacığı askıya alınır.</span><span class="sxs-lookup"><span data-stu-id="84a11-127">The line of code that uses `let!` starts the computation, and then the thread is suspended until the result is available, at which point execution continues.</span></span>

```fsharp
// let just stores the result as an asynchronous operation.
let (result1 : Async<byte[]>) = stream.AsyncRead(bufferSize)
// let! completes the asynchronous operation and returns the data.
let! (result2 : byte[])  = stream.AsyncRead(bufferSize)
```

<span data-ttu-id="84a11-128">Ek olarak `let!`, kullanabileceğiniz `use!` zaman uyumsuz bağlamaları gerçekleştirmek için.</span><span class="sxs-lookup"><span data-stu-id="84a11-128">In addition to `let!`, you can use `use!` to perform asynchronous bindings.</span></span> <span data-ttu-id="84a11-129">Arasındaki farkı `let!` ve `use!` arasındaki farkı aynı `let` ve `use`.</span><span class="sxs-lookup"><span data-stu-id="84a11-129">The difference between `let!` and `use!` is the same as the difference between `let` and `use`.</span></span> <span data-ttu-id="84a11-130">İçin `use!`, nesne, geçerli kapsamdaki kapanışında atıldı.</span><span class="sxs-lookup"><span data-stu-id="84a11-130">For `use!`, the object is disposed of at the close of the current scope.</span></span> <span data-ttu-id="84a11-131">F # dili, geçerli sürümde unutmayın `use!` değeri null olarak rağmen başlatılması izin verme `use` yapar.</span><span class="sxs-lookup"><span data-stu-id="84a11-131">Note that in the current release of the F# language, `use!` does not allow a value to be initialized to null, even though `use` does.</span></span>

## <a name="asynchronous-primitives"></a><span data-ttu-id="84a11-132">Zaman uyumsuz temelleri</span><span class="sxs-lookup"><span data-stu-id="84a11-132">Asynchronous Primitives</span></span>

<span data-ttu-id="84a11-133">Tek bir zaman uyumsuz görevi gerçekleştirir ve sonuç döndüren bir yöntem olarak adlandırılan bir *zaman uyumsuz ilkel*, ve bunlar ile kullanılmak üzere özel olarak tasarlanmıştır `let!`.</span><span class="sxs-lookup"><span data-stu-id="84a11-133">A method that performs a single asynchronous task and returns the result is called an *asynchronous primitive*, and these are designed specifically for use with `let!`.</span></span> <span data-ttu-id="84a11-134">Birkaç zaman uyumsuz temelleri F # core Kitaplığı'nda tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="84a11-134">Several asynchronous primitives are defined in the F# core library.</span></span> <span data-ttu-id="84a11-135">Web uygulamaları için iki tür yöntem modülde tanımlanan [ `Microsoft.FSharp.Control.WebExtensions` ](https://msdn.microsoft.com/library/95ef17bc-ee3f-44ba-8a11-c90fcf4cf003): [ `WebRequest.AsyncGetResponse` ](https://msdn.microsoft.com/library/09a60c31-e6e2-4b5c-ad23-92a86e50060c) ve [ `WebClient.AsyncDownloadString` ](https://msdn.microsoft.com/library/8a85a9b7-f712-4cac-a0ce-0a797f8ea32a).</span><span class="sxs-lookup"><span data-stu-id="84a11-135">Two such methods for Web applications are defined in the module [`Microsoft.FSharp.Control.WebExtensions`](https://msdn.microsoft.com/library/95ef17bc-ee3f-44ba-8a11-c90fcf4cf003): [`WebRequest.AsyncGetResponse`](https://msdn.microsoft.com/library/09a60c31-e6e2-4b5c-ad23-92a86e50060c) and [`WebClient.AsyncDownloadString`](https://msdn.microsoft.com/library/8a85a9b7-f712-4cac-a0ce-0a797f8ea32a).</span></span> <span data-ttu-id="84a11-136">Her iki temelleri veri Web bir URL bir sayfasından indirin.</span><span class="sxs-lookup"><span data-stu-id="84a11-136">Both primitives download data from a Web page, given a URL.</span></span> <span data-ttu-id="84a11-137">`AsyncGetResponse` üreten bir `System.Net.WebResponse` nesnesi ve `AsyncDownloadString` bir Web sayfasının HTML temsil eden bir dize oluşturur.</span><span class="sxs-lookup"><span data-stu-id="84a11-137">`AsyncGetResponse` produces a `System.Net.WebResponse` object, and `AsyncDownloadString` produces a string that represents the HTML for a Web page.</span></span>

<span data-ttu-id="84a11-138">Birkaç temel öğeler zaman uyumsuz g/ç işlemleri dahil edilen [ `Microsoft.FSharp.Control.CommonExtensions` ](https://msdn.microsoft.com/library/2edb67cb-6814-4a30-849f-b6dbdd042396) modülü.</span><span class="sxs-lookup"><span data-stu-id="84a11-138">Several primitives for asynchronous I/O operations are included in the [`Microsoft.FSharp.Control.CommonExtensions`](https://msdn.microsoft.com/library/2edb67cb-6814-4a30-849f-b6dbdd042396) module.</span></span> <span data-ttu-id="84a11-139">Bu uzantı yöntemleri `System.IO.Stream` sınıfı olan [ `Stream.AsyncRead` ](https://msdn.microsoft.com/library/85698aaa-bdda-47e6-abed-3730f59fda5e) ve [ `Stream.AsyncWrite` ](https://msdn.microsoft.com/library/1b0a2751-e42a-47e1-bd27-020224adc618).</span><span class="sxs-lookup"><span data-stu-id="84a11-139">These extension methods of the `System.IO.Stream` class are [`Stream.AsyncRead`](https://msdn.microsoft.com/library/85698aaa-bdda-47e6-abed-3730f59fda5e) and [`Stream.AsyncWrite`](https://msdn.microsoft.com/library/1b0a2751-e42a-47e1-bd27-020224adc618).</span></span>

<span data-ttu-id="84a11-140">Ek zaman uyumsuz temelleri kullanılabilir [F # PowerTools](https://fsprojects.github.io/VisualFSharpPowerTools/).</span><span class="sxs-lookup"><span data-stu-id="84a11-140">Additional asynchronous primitives are available in the [F# PowerTools](https://fsprojects.github.io/VisualFSharpPowerTools/).</span></span> <span data-ttu-id="84a11-141">Zaman uyumsuz kendi temelleri, tam gövdesi bir zaman uyumsuz bloğunda içine bir işlev tanımlayarak de yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="84a11-141">You can also write your own asynchronous primitives by defining a function whose complete body is enclosed in an async block.</span></span>

<span data-ttu-id="84a11-142">F # zaman uyumsuz programlama modeli ile diğer zaman uyumsuz modeller için tasarlanmış .NET Framework zaman uyumsuz yöntemleri kullanmak için bir F # döndüren bir işlev oluşturun. `Async` nesnesi.</span><span class="sxs-lookup"><span data-stu-id="84a11-142">To use asynchronous methods in the .NET Framework that are designed for other asynchronous models with the F# asynchronous programming model, you create a function that returns an F# `Async` object.</span></span> <span data-ttu-id="84a11-143">F # kitaplığı bunu yapmak kolaylaştırmak işlevi vardır.</span><span class="sxs-lookup"><span data-stu-id="84a11-143">The F# library has functions that make this easy to do.</span></span>

<span data-ttu-id="84a11-144">Zaman uyumsuz iş akışları kullanmaya ilişkin bir örnek buraya dahil edilir; vardır diğer birçok yöntemlerinin belgelerindeki [Async sınıfı](https://msdn.microsoft.com/library/03eb4d12-a01a-4565-a077-5e83f17cf6f7).</span><span class="sxs-lookup"><span data-stu-id="84a11-144">One example of using asynchronous workflows is included here; there are many others in the documentation for the methods of the [Async class](https://msdn.microsoft.com/library/03eb4d12-a01a-4565-a077-5e83f17cf6f7).</span></span>

<span data-ttu-id="84a11-145">Bu örnekte, zaman uyumsuz iş akışları paralel olarak hesaplamalar için nasıl kullanılacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="84a11-145">This example shows how to use asynchronous workflows to perform computations in parallel.</span></span>

<span data-ttu-id="84a11-146">Aşağıdaki kod örneğinde, bir işlev `fetchAsync` HTML metin Web isteğinden döndürülen alır.</span><span class="sxs-lookup"><span data-stu-id="84a11-146">In the following code example, a function `fetchAsync` gets the HTML text returned from a Web request.</span></span> <span data-ttu-id="84a11-147">`fetchAsync` İşlevi, zaman uyumsuz bir kod bloğunu içeriyor.</span><span class="sxs-lookup"><span data-stu-id="84a11-147">The `fetchAsync` function contains an asynchronous block of code.</span></span> <span data-ttu-id="84a11-148">Ne zaman bir bağlama yapılan zaman uyumsuz bir ilkel sonucuna bu durumda [ `AsyncDownloadString` ](https://msdn.microsoft.com/library/8a85a9b7-f712-4cac-a0ce-0a797f8ea32a), let!</span><span class="sxs-lookup"><span data-stu-id="84a11-148">When a binding is made to the result of an asynchronous primitive, in this case [`AsyncDownloadString`](https://msdn.microsoft.com/library/8a85a9b7-f712-4cac-a0ce-0a797f8ea32a), let!</span></span> <span data-ttu-id="84a11-149">let yerine kullanılır.</span><span class="sxs-lookup"><span data-stu-id="84a11-149">is used instead of let.</span></span>

<span data-ttu-id="84a11-150">İşlevi kullanmak [ `Async.RunSynchronously` ](https://msdn.microsoft.com/library/0a6663a9-50f2-4d38-8bf3-cefd1a51fd6b) zaman uyumsuz bir işlem çalıştırmak ve sonucu için bekleyin.</span><span class="sxs-lookup"><span data-stu-id="84a11-150">You use the function [`Async.RunSynchronously`](https://msdn.microsoft.com/library/0a6663a9-50f2-4d38-8bf3-cefd1a51fd6b) to execute an asynchronous operation and wait for its result.</span></span> <span data-ttu-id="84a11-151">Örnek olarak, birden çok zaman uyumsuz işlemleri paralel olarak kullanarak yürütebilirsiniz [ `Async.Parallel` ](https://msdn.microsoft.com/library/aa9b0355-2d55-4858-b943-cbe428de9dc4) ile birlikte çalışması `Async.RunSynchronously` işlevi.</span><span class="sxs-lookup"><span data-stu-id="84a11-151">As an example, you can execute multiple asynchronous operations in parallel by using the [`Async.Parallel`](https://msdn.microsoft.com/library/aa9b0355-2d55-4858-b943-cbe428de9dc4) function together with the `Async.RunSynchronously` function.</span></span> <span data-ttu-id="84a11-152">`Async.Parallel` İşlev listesini alır `Async` nesneleri, kodu her biri için ayarlar `Async` paralel ve döndürür çalıştırmak için görev nesnesi bir `Async` Paralel hesaplama temsil eden nesne.</span><span class="sxs-lookup"><span data-stu-id="84a11-152">The `Async.Parallel` function takes a list of the `Async` objects, sets up the code for each `Async` task object to run in parallel, and returns an `Async` object that represents the parallel computation.</span></span> <span data-ttu-id="84a11-153">Yalnızca tek bir işlem için olduğu gibi çağrı `Async.RunSynchronously` yürütme başlatmak için.</span><span class="sxs-lookup"><span data-stu-id="84a11-153">Just as for a single operation, you call `Async.RunSynchronously` to start the execution.</span></span>

<span data-ttu-id="84a11-154">`runAll` İşlevi üç zaman uyumsuz iş akışları paralel başlatır ve tüm tamamlayıncaya kadar bekler.</span><span class="sxs-lookup"><span data-stu-id="84a11-154">The `runAll` function launches three asynchronous workflows in parallel and waits until they have all completed.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet8003.fs)]

## <a name="see-also"></a><span data-ttu-id="84a11-155">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="84a11-155">See Also</span></span>

[<span data-ttu-id="84a11-156">F# Dili Başvurusu</span><span class="sxs-lookup"><span data-stu-id="84a11-156">F# Language Reference</span></span>](index.md)

[<span data-ttu-id="84a11-157">Hesaplama İfadeleri</span><span class="sxs-lookup"><span data-stu-id="84a11-157">Computation Expressions</span></span>](computation-expressions.md)

[<span data-ttu-id="84a11-158">Control.Async sınıfı</span><span class="sxs-lookup"><span data-stu-id="84a11-158">Control.Async Class</span></span>](https://msdn.microsoft.com/visualfsharpdocs/conceptual/control.async-class-%5bfsharp%5d)
