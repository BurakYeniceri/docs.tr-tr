---
title: "İleti Güvenliğinde Etkinlik İzleme"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 68862534-3b2e-4270-b097-8121b12a2c97
caps.latest.revision: "7"
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.workload: dotnet
ms.openlocfilehash: db9b05217bbbf91bfc3cd315801b4e511f82d04c
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/22/2017
---
# <a name="activity-tracing-in-message-security"></a><span data-ttu-id="2fb5a-102">İleti Güvenliğinde Etkinlik İzleme</span><span class="sxs-lookup"><span data-stu-id="2fb5a-102">Activity Tracing in Message Security</span></span>
<span data-ttu-id="2fb5a-103">Bu konu, aşağıdaki üç aşamaya olur güvenlik işleme için etkinlik izleme açıklar.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-103">This topic describes activity tracing for security processing, which happens in the following three phases.</span></span>  
  
-   <span data-ttu-id="2fb5a-104">Anlaşma/SCT exchange.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-104">Negotiation/SCT exchange.</span></span> <span data-ttu-id="2fb5a-105">Bu, daha sonra (aracılığıyla ikili veri değişimi) taşıma veya ileti katman (aracılığıyla SOAP ileti alışverişlerinde) olabilir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-105">This can happen at the transport later (through binary data exchange) or message layer (through SOAP message exchanges).</span></span>  
  
-   <span data-ttu-id="2fb5a-106">İleti şifreleme/şifre çözme, imza doğrulaması ve kimlik doğrulaması ile.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-106">Message encryption/decryption, with signature verification and authentication.</span></span> <span data-ttu-id="2fb5a-107">İzlemeler ortam etkinlik, genellikle "işlem eylem." görüntülenir</span><span class="sxs-lookup"><span data-stu-id="2fb5a-107">Traces appear in the ambient activity, typically "Process Action."</span></span>  
  
-   <span data-ttu-id="2fb5a-108">Yetkilendirme ve doğrulama.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-108">Authorization and verification.</span></span> <span data-ttu-id="2fb5a-109">Bu, yerel olarak veya ne zaman uç noktalar arasında iletişim meydana gelebilir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-109">This can happen locally or when communicating between endpoints.</span></span>  
  
## <a name="negotiationsct-exchange"></a><span data-ttu-id="2fb5a-110">Anlaşma/SCT exchange</span><span class="sxs-lookup"><span data-stu-id="2fb5a-110">Negotiation/SCT exchange</span></span>  
 <span data-ttu-id="2fb5a-111">Anlaşma/SCT exchange aşamasında, istemcide iki etkinlik türleri oluşturulur: "Ayarlamak yukarı güvenli oturum" ve "Güvenli oturumu kapat."</span><span class="sxs-lookup"><span data-stu-id="2fb5a-111">In the negotiation/SCT exchange phase, two activity types are created on the client: "Set up Secure Session" and "Close Secure Session."</span></span> <span data-ttu-id="2fb5a-112">"Güvenli oturum ayarlayın", "Güvenli Oturumu Kapat" Cancel iletisi izlemelerini içerir ancak RSTR/RST/SCT ileti alışverişlerinde izlemelerini kapsar.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-112">"Set up Secure Session" encompasses traces for the RST/RSTR/SCT message exchanges, while "Close Secure Session" includes traces for the Cancel message.</span></span>  
  
 <span data-ttu-id="2fb5a-113">Sunucuda, her istek/yanıt RST/RSTR/SCT için kendi etkinliğinde görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-113">On the server, each request/reply for the RST/RSTR/SCT appears in its own activity.</span></span> <span data-ttu-id="2fb5a-114">Varsa `propagateActivity` = `true` hem sunucu hem de istemci, sunucunun etkinliklerde aynı Kimliğe sahip ve birlikte "Kurulum güvenli hizmet izleme görüntüleyicisini görüntülendiğinde oturum" görünür.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-114">If `propagateActivity`=`true` on both the server and client, activities on the server have the same ID, and appear together in the "Setup Secure Session" when viewed through Service Trace Viewer.</span></span>  
  
 <span data-ttu-id="2fb5a-115">Bu etkinlik izleme modeli kullanıcı adı/parola kimlik doğrulaması, sertifika kimlik doğrulaması ve NTLM kimlik doğrulaması için geçerli değil.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-115">This activity tracing model is valid for user name/password authentication, certificate authentication, and NTLM authentication.</span></span>  
  
 <span data-ttu-id="2fb5a-116">Etkinlikleri ve anlaşma ve SCT exchange izlemelerini aşağıdaki tabloda listelenmektedir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-116">The following table lists the activities and traces for negotiation and SCT exchange.</span></span>  
  
||<span data-ttu-id="2fb5a-117">Anlaşma/SCT exchange durumda süre</span><span class="sxs-lookup"><span data-stu-id="2fb5a-117">Time when Negotiation/SCT exchange happens</span></span>|<span data-ttu-id="2fb5a-118">Etkinlikler</span><span class="sxs-lookup"><span data-stu-id="2fb5a-118">Activities</span></span>|<span data-ttu-id="2fb5a-119">İzlemeler</span><span class="sxs-lookup"><span data-stu-id="2fb5a-119">Traces</span></span>|  
|-|-------------------------------------------------|----------------|------------|  
|<span data-ttu-id="2fb5a-120">Güvenli aktarım</span><span class="sxs-lookup"><span data-stu-id="2fb5a-120">Secure Transport</span></span><br /><br /> <span data-ttu-id="2fb5a-121">(HTTPS, SSL)</span><span class="sxs-lookup"><span data-stu-id="2fb5a-121">(HTTPS, SSL)</span></span>|<span data-ttu-id="2fb5a-122">İlk iletisi aldı.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-122">On first message received.</span></span>|<span data-ttu-id="2fb5a-123">İzlemeler ortam etkinliğin gösterilen.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-123">Traces are emitted in the ambient activity.</span></span>|<span data-ttu-id="2fb5a-124">-Exchange izler</span><span class="sxs-lookup"><span data-stu-id="2fb5a-124">-   Exchange traces</span></span><br /><span data-ttu-id="2fb5a-125">-Oluşturulan güvenli kanal</span><span class="sxs-lookup"><span data-stu-id="2fb5a-125">-   Secure channel established</span></span><br /><span data-ttu-id="2fb5a-126">-Alınan gizlilikler paylaşın.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-126">-   Share secrets obtained.</span></span>|  
|<span data-ttu-id="2fb5a-127">Güvenli ileti katmanı</span><span class="sxs-lookup"><span data-stu-id="2fb5a-127">Secure Message Layer</span></span><br /><br /> <span data-ttu-id="2fb5a-128">(WSHTTP)</span><span class="sxs-lookup"><span data-stu-id="2fb5a-128">(WSHTTP)</span></span>|<span data-ttu-id="2fb5a-129">İlk iletisi aldı.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-129">On first message received.</span></span>|<span data-ttu-id="2fb5a-130">İstemci üzerinde:</span><span class="sxs-lookup"><span data-stu-id="2fb5a-130">On the client:</span></span><br /><br /> <span data-ttu-id="2fb5a-131">-"Kurulum güvenli oturum" söz konusu ilk iletinin "işlem eylem" dışında her istek/yanıt RSTR/RST/SCT için.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-131">-   "Setup Secure Session" out of "Process Action" of that first message, for each request/reply for RST/RSTR/SCT.</span></span><br /><span data-ttu-id="2fb5a-132">-"Kapat güvenli oturum" için "Kapat Proxy etkinliği." dışında iptal exchange</span><span class="sxs-lookup"><span data-stu-id="2fb5a-132">-   "Close Secure Session" for the CANCEL exchange, out of the "Close Proxy activity."</span></span> <span data-ttu-id="2fb5a-133">Bu etkinlik, güvenli oturum kapatıldığında bağlı olarak bazı diğer ortam etkinliği dışında ortaya çıkabilir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-133">This activity may happen out of some other ambient activity, depending on when the secure session is closed.</span></span><br /><br /> <span data-ttu-id="2fb5a-134">Sunucuda:</span><span class="sxs-lookup"><span data-stu-id="2fb5a-134">On the server:</span></span><br /><br /> <span data-ttu-id="2fb5a-135">-Bir "İşlem eylem" etkinlik her istek/yanıt SCT/RST/iptal için sunucu üzerinde.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-135">-   One "Process Action" activity for each request/reply for RST/SCT/Cancel on the server.</span></span> <span data-ttu-id="2fb5a-136">Varsa `propagateActivity` = `true`RSTR/RST/SCT etkinlikler "Ayarlamak yukarı güvenlik oturumla" birleştirilir ve iptal istemciden "Kapat" etkinliği ile birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-136">If `propagateActivity`=`true`, RST/RSTR/SCT activities are merged with "Set up Security Session", and Cancel is merged with the "Close" activity from the client.</span></span><br /><br /> <span data-ttu-id="2fb5a-137">"Ayarla yukarı güvenli oturum için" iki aşama vardır:</span><span class="sxs-lookup"><span data-stu-id="2fb5a-137">There are two stages for "Set up Secure Session":</span></span><br /><br /> <span data-ttu-id="2fb5a-138">1.  Kimlik doğrulama anlaşma.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-138">1.  Authentication negotiation.</span></span> <span data-ttu-id="2fb5a-139">Bu istemci uygun kimlik bilgilerine zaten sahipse, isteğe bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-139">This is optional if the client already has the proper credentials.</span></span> <span data-ttu-id="2fb5a-140">Bu aşama, güvenli aktarım aracılığıyla ya da ileti alışverişlerinde aracılığıyla yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-140">This phase can be done through secure transport, or through message exchanges.</span></span> <span data-ttu-id="2fb5a-141">İkinci durumda, 1 veya 2 RST/RSTR alışverişleri oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-141">In the latter case, 1 or 2 RST/RSTR exchanges can happen.</span></span> <span data-ttu-id="2fb5a-142">Bu değişimler için daha önce tasarlanan yeni istek/yanıt aktivitelerde izlemeleri gösterilen.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-142">For these exchanges, traces are emitted in new request/reply activities as previously designed.</span></span><br /><span data-ttu-id="2fb5a-143">2.  Bir RST/RSTR exchange burada olur oturum kurma (SCT) güvenli hale getirin.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-143">2.  Secure session establishment (SCT), in which one RST/RSTR exchange happens here.</span></span> <span data-ttu-id="2fb5a-144">Bu, daha önce açıklandığı gibi aynı ortam etkinlikler içeriyor.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-144">This has the same ambient activities as described previously.</span></span>|<span data-ttu-id="2fb5a-145">-Exchange izler</span><span class="sxs-lookup"><span data-stu-id="2fb5a-145">-   Exchange traces</span></span><br /><span data-ttu-id="2fb5a-146">-Oluşturulan güvenli kanal</span><span class="sxs-lookup"><span data-stu-id="2fb5a-146">-   Secure channel established</span></span><br /><span data-ttu-id="2fb5a-147">-Alınan gizlilikler paylaşın.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-147">-   Share secrets obtained.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="2fb5a-148">Karışık güvenlik modunda ikili alışverişlerine Anlaşma kimlik doğrulaması gerçekleşir, ancak ileti değiş tokuşunu SCT olur.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-148">In mixed security mode, negotiation authentication happens in binary exchanges, but SCT happens in message exchange.</span></span> <span data-ttu-id="2fb5a-149">Saf aktarım modunda anlaşma yalnızca hiçbir ek etkinlikler ile aktarma içinde gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-149">In pure transport mode, negotiation happens only in transport with no additional activities.</span></span>  
  
## <a name="message-encryption-and-decryption"></a><span data-ttu-id="2fb5a-150">İleti şifreleme ve şifre çözme</span><span class="sxs-lookup"><span data-stu-id="2fb5a-150">Message Encryption and Decryption</span></span>  
 <span data-ttu-id="2fb5a-151">Aşağıdaki tabloda imzası kimlik doğrulaması yanı sıra ileti şifreleme/şifre çözme için izlemeleri ve etkinlikleri listeler.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-151">The following table lists the activities and traces for message encryption/decryption, as well as signature authentication.</span></span>  
  
||<span data-ttu-id="2fb5a-152">Güvenli aktarım</span><span class="sxs-lookup"><span data-stu-id="2fb5a-152">Secure Transport</span></span><br /><br /> <span data-ttu-id="2fb5a-153">(HTTPS, SSL) ve güvenli ileti katmanı</span><span class="sxs-lookup"><span data-stu-id="2fb5a-153">(HTTPS, SSL) and Secure Message Layer</span></span><br /><br /> <span data-ttu-id="2fb5a-154">(WSHTTP)</span><span class="sxs-lookup"><span data-stu-id="2fb5a-154">(WSHTTP)</span></span>|  
|-|---------------------------------------------------------------------------------|  
|<span data-ttu-id="2fb5a-155">Saati şifreleme/şifre çözme, yanı sıra imzası kimlik doğrulaması gerçekleşir iletisi</span><span class="sxs-lookup"><span data-stu-id="2fb5a-155">Time when message encryption/decryption, as well as signature authentication happens</span></span>|<span data-ttu-id="2fb5a-156">İleti alındı</span><span class="sxs-lookup"><span data-stu-id="2fb5a-156">On message received</span></span>|  
|<span data-ttu-id="2fb5a-157">Etkinlikler</span><span class="sxs-lookup"><span data-stu-id="2fb5a-157">Activities</span></span>|<span data-ttu-id="2fb5a-158">İstemci ve sunucu ProcessAction etkinliğinde izlemeleri gösterilen.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-158">Traces are emitted in the ProcessAction activity on the client and server.</span></span>|  
|<span data-ttu-id="2fb5a-159">İzlemeler</span><span class="sxs-lookup"><span data-stu-id="2fb5a-159">Traces</span></span>|<span data-ttu-id="2fb5a-160">-sendSecurityHeader (gönderen):</span><span class="sxs-lookup"><span data-stu-id="2fb5a-160">-   sendSecurityHeader (sender):</span></span><br /><span data-ttu-id="2fb5a-161">-Oturum iletisi</span><span class="sxs-lookup"><span data-stu-id="2fb5a-161">-   Sign message</span></span><br /><span data-ttu-id="2fb5a-162">-İstek verileri şifreleme</span><span class="sxs-lookup"><span data-stu-id="2fb5a-162">-   Encrypt request data</span></span><br /><span data-ttu-id="2fb5a-163">-receiveSecurityHeader (alıcı):</span><span class="sxs-lookup"><span data-stu-id="2fb5a-163">-   receiveSecurityHeader (receiver):</span></span><br /><span data-ttu-id="2fb5a-164">-İmzası doğrulayın</span><span class="sxs-lookup"><span data-stu-id="2fb5a-164">-   Verify signature</span></span><br /><span data-ttu-id="2fb5a-165">-Yanıt verilerin şifresini</span><span class="sxs-lookup"><span data-stu-id="2fb5a-165">-   Decrypt response data</span></span><br /><span data-ttu-id="2fb5a-166">-Kimlik doğrulama</span><span class="sxs-lookup"><span data-stu-id="2fb5a-166">-   Authentication</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="2fb5a-167">Saf aktarım modunda ileti şifreleme/şifre çözme yalnızca hiçbir ek etkinlikler ile aktarma içinde gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-167">In pure transport mode, message encryption/decryption happens only in transport with no additional activities.</span></span>  
  
## <a name="authorization-and-verification"></a><span data-ttu-id="2fb5a-168">Yetkilendirme ve doğrulama</span><span class="sxs-lookup"><span data-stu-id="2fb5a-168">Authorization and Verification</span></span>  
 <span data-ttu-id="2fb5a-169">Aşağıdaki tabloda etkinlikler ve yetkilendirme için izlemeleri listeler.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-169">The following table lists the activities and traces for authorization.</span></span>  
  
||<span data-ttu-id="2fb5a-170">Yetkilendirme durumda süre</span><span class="sxs-lookup"><span data-stu-id="2fb5a-170">Time when authorization happens</span></span>|<span data-ttu-id="2fb5a-171">Etkinlikler</span><span class="sxs-lookup"><span data-stu-id="2fb5a-171">Activities</span></span>|<span data-ttu-id="2fb5a-172">İzlemeler</span><span class="sxs-lookup"><span data-stu-id="2fb5a-172">Traces</span></span>|  
|-|-------------------------------------|----------------|------------|  
|<span data-ttu-id="2fb5a-173">Yerel (varsayılan)</span><span class="sxs-lookup"><span data-stu-id="2fb5a-173">Local (default)</span></span>|<span data-ttu-id="2fb5a-174">İletinin sonra sunucuda şifresi çözülür</span><span class="sxs-lookup"><span data-stu-id="2fb5a-174">After the message is decrypted on the server</span></span>|<span data-ttu-id="2fb5a-175">Sunucuda ProcessAction etkinliğinde izlemeleri gösterilen.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-175">Traces are emitted in the ProcessAction activity at the server.</span></span>|<span data-ttu-id="2fb5a-176">Yetkili kullanıcı.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-176">User authorized.</span></span>|  
|<span data-ttu-id="2fb5a-177">Remote</span><span class="sxs-lookup"><span data-stu-id="2fb5a-177">Remote</span></span>|<span data-ttu-id="2fb5a-178">İletinin sonra sunucuda şifresi çözülür</span><span class="sxs-lookup"><span data-stu-id="2fb5a-178">After the message is decrypted on the server</span></span>|<span data-ttu-id="2fb5a-179">İzlemeler ProcessAction etkinlik tarafından çağrılan yeni bir etkinlik olarak gösterilen.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-179">Traces are emitted in a new activity invoked by the ProcessAction activity.</span></span>|<span data-ttu-id="2fb5a-180">Yetkili kullanıcı.</span><span class="sxs-lookup"><span data-stu-id="2fb5a-180">User authorized.</span></span>|
