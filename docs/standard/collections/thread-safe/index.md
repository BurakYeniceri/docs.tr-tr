---
title: "İş Parçacığı Koleksiyonları"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: thread-safe collections, overview
ms.assetid: 2e7ca21f-786c-4367-96be-0cf3f3dcc6bd
caps.latest.revision: "24"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.openlocfilehash: b5394cd2e9c9fa2b0cacb93ddf2cf05b33fabc71
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/18/2017
---
# <a name="thread-safe-collections"></a><span data-ttu-id="b4f69-102">İş Parçacığı Koleksiyonları</span><span class="sxs-lookup"><span data-stu-id="b4f69-102">Thread-Safe Collections</span></span>
<span data-ttu-id="b4f69-103">[!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)], iş parçacığı açısından güvenli ve ölçeklenebilir birkaç koleksiyon sınıfı içeren <xref:System.Collections.Concurrent?displayProperty=nameWithType> ad alanını tanıtır.</span><span class="sxs-lookup"><span data-stu-id="b4f69-103">The [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)] introduces the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, which includes several collection classes that are both thread-safe and scalable.</span></span> <span data-ttu-id="b4f69-104">Birden çok iş parçacığı güvenli bir şekilde ve verimli bir şekilde eklemek veya kullanıcı kodu ek eşitleme gerek kalmadan bu koleksiyonlardan öğeleri kaldırın.</span><span class="sxs-lookup"><span data-stu-id="b4f69-104">Multiple threads can safely and efficiently add or remove items from these collections, without requiring additional synchronization in user code.</span></span> <span data-ttu-id="b4f69-105">Yeni kod yazdığınızda, koleksiyon birden çok iş parçacığına aynı anda yazdığında eşzamanlı koleksiyon sınıflarını kullanın.</span><span class="sxs-lookup"><span data-stu-id="b4f69-105">When you write new code, use the concurrent collection classes whenever the collection will be writing to multiple threads concurrently.</span></span> <span data-ttu-id="b4f69-106">Yalnızca paylaşılan bir koleksiyondan okuyorsanız <xref:System.Collections.Generic?displayProperty=nameWithType> ad alanındaki sınıfları kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b4f69-106">If you are only reading from a shared collection, then you can use the classes in the <xref:System.Collections.Generic?displayProperty=nameWithType> namespace.</span></span> <span data-ttu-id="b4f69-107">.NET Framework 1.1 veya önceki çalışma zamanı sürümünü hedeflemeniz gerekmedikçe 1.0 koleksiyon sınıflarını kullanmamanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="b4f69-107">We recommend that you do not use 1.0 collection classes unless you are required to target the .NET Framework 1.1 or earlier runtime.</span></span>  
  
## <a name="thread-synchronization-in-the-net-framework-10-and-20-collections"></a><span data-ttu-id="b4f69-108">.NET Framework 1.0 ve 2.0 Koleksiyonlarındaki İş Parçacığı Eşitlemesi</span><span class="sxs-lookup"><span data-stu-id="b4f69-108">Thread Synchronization in the .NET Framework 1.0 and 2.0 Collections</span></span>  
 <span data-ttu-id="b4f69-109">.NET Framework 1.0'da tanıtılan koleksiyonlar <xref:System.Collections?displayProperty=nameWithType> ad alanında bulunur.</span><span class="sxs-lookup"><span data-stu-id="b4f69-109">The collections introduced in the .NET Framework 1.0 are found in the <xref:System.Collections?displayProperty=nameWithType> namespace.</span></span> <span data-ttu-id="b4f69-110">Sık kullanılan <xref:System.Collections.ArrayList> ve <xref:System.Collections.Hashtable> öğelerini içeren bu koleksiyonlar, koleksiyon etrafında bir iş parçacığı güvenlikli sarmalayıcıyı döndüren `Synchronized` özelliği ile biraz iş parçacığı güvenliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-110">These collections, which include the commonly used <xref:System.Collections.ArrayList> and <xref:System.Collections.Hashtable>, provide some thread-safety through the `Synchronized` property, which returns a thread-safe wrapper around the collection.</span></span> <span data-ttu-id="b4f69-111">Sarmalayıcı, her ekleme veya kaldırma işleminde tüm koleksiyonu kilitleyerek çalışır.</span><span class="sxs-lookup"><span data-stu-id="b4f69-111">The wrapper works by locking the entire collection on every add or remove operation.</span></span> <span data-ttu-id="b4f69-112">Bu nedenle, koleksiyona erişmeye çalışan her bir iş parçacığının bir kilidi almak için kendi sırasını beklemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="b4f69-112">Therefore, each thread that is attempting to access the collection must wait for its turn to take the one lock.</span></span> <span data-ttu-id="b4f69-113">Bu ölçeklenebilir değildir ve büyük koleksiyonlar için önemli performans düşüşüne neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="b4f69-113">This is not scalable and can cause significant performance degradation for large collections.</span></span> <span data-ttu-id="b4f69-114">Ayrıca tasarım, yarış durumlarına karşı tamamen korumalı değildir.</span><span class="sxs-lookup"><span data-stu-id="b4f69-114">Also, the design is not completely protected from race conditions.</span></span> <span data-ttu-id="b4f69-115">Daha fazla bilgi için bkz: [genel koleksiyonlar eşitleme](http://go.microsoft.com/fwlink/?LinkID=161130) MSDN Web sitesinde.</span><span class="sxs-lookup"><span data-stu-id="b4f69-115">For more information, see [Synchronization in Generic Collections](http://go.microsoft.com/fwlink/?LinkID=161130) on the MSDN Web site.</span></span>  
  
 <span data-ttu-id="b4f69-116">.NET Framework 2.0'da tanıtılan koleksiyon sınıfları <xref:System.Collections.Generic?displayProperty=nameWithType> ad alanında bulunur.</span><span class="sxs-lookup"><span data-stu-id="b4f69-116">The collection classes introduced in the .NET Framework 2.0 are found in the <xref:System.Collections.Generic?displayProperty=nameWithType> namespace.</span></span> <span data-ttu-id="b4f69-117">Bunlar <xref:System.Collections.Generic.List%601>, <xref:System.Collections.Generic.Dictionary%602> ve benzerlerini içerir.</span><span class="sxs-lookup"><span data-stu-id="b4f69-117">These include <xref:System.Collections.Generic.List%601>, <xref:System.Collections.Generic.Dictionary%602>, and so on.</span></span> <span data-ttu-id="b4f69-118">Bu sınıflar, .NET Framework 1.0 sınıfları ile karşılaştırıldığında geliştirilmiş tür güvenliği ve performans sağlar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-118">These classes provide improved type safety and performance compared to the .NET Framework 1.0 classes.</span></span> <span data-ttu-id="b4f69-119">Ancak, .NET Framework 2.0 koleksiyon sınıfları herhangi bir iş parçacığı eşitlemesi sağlamaz; kullanıcı kodunun, öğeler aynı anda birden çok iş parçacığına eklendiğinde veya kaldırıldığında tüm eşitlemeyi sağlaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b4f69-119">However, the .NET Framework 2.0 collection classes do not provide any thread synchronization; user code must provide all synchronization when items are added or removed on multiple threads concurrently.</span></span>  
  
 <span data-ttu-id="b4f69-120">Eşzamanlı koleksiyonları sınıflarda öneririz [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)] yalnızca .NET Framework 2.0 koleksiyon sınıflarının tür güvenliği ancak daha da daha etkili ve daha kapsamlı iş parçacığı güvenliği sağladıkları için [!INCLUDE[net_v10_short](../../../../includes/net-v10-short-md.md)] koleksiyonları sağlar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-120">We recommend the concurrent collections classes in the [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)] because they provide not only the type safety of the .NET Framework 2.0 collection classes, but also more efficient and more complete thread safety than the [!INCLUDE[net_v10_short](../../../../includes/net-v10-short-md.md)] collections provide.</span></span>  
  
## <a name="fine-grained-locking-and-lock-free-mechanisms"></a><span data-ttu-id="b4f69-121">Hassas Kilitleme ve Kilitsiz Mekanizmalar</span><span class="sxs-lookup"><span data-stu-id="b4f69-121">Fine-Grained Locking and Lock-Free Mechanisms</span></span>  
 <span data-ttu-id="b4f69-122">Bazı eşzamanlı koleksiyon türleri <xref:System.Threading.SpinLock>'da yeni olan <xref:System.Threading.SpinWait>, <xref:System.Threading.SemaphoreSlim>, <xref:System.Threading.CountdownEvent> ve [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)] gibi hafif eşitleme mekanizmalarını kullanır.</span><span class="sxs-lookup"><span data-stu-id="b4f69-122">Some of the concurrent collection types use lightweight synchronization mechanisms such as <xref:System.Threading.SpinLock>, <xref:System.Threading.SpinWait>, <xref:System.Threading.SemaphoreSlim>, and <xref:System.Threading.CountdownEvent>, which are new in the [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)].</span></span> <span data-ttu-id="b4f69-123">Bu eşitleme türleri genellikle kullanmasına *meşgul dönen* true bekleme durumuna iş parçacığı koyarlar önce kısa bir süreliğine.</span><span class="sxs-lookup"><span data-stu-id="b4f69-123">These synchronization types typically use *busy spinning* for brief periods before they put the thread into a true Wait state.</span></span> <span data-ttu-id="b4f69-124">Bekleme sürelerinin çok kısa olması beklendiğinde pahalı bir çekirdek dönüşümünü içeren dönme beklemeden hesaplama açısından çok daha ucuzdur.</span><span class="sxs-lookup"><span data-stu-id="b4f69-124">When wait times are expected to be very short, spinning is far less computationally expensive than waiting, which involves an expensive kernel transition.</span></span> <span data-ttu-id="b4f69-125">Dönme kullanan koleksiyon sınıfları için bu verimlilik, birden çok iş parçacığının yüksek bir hızda öğe ekleyip kaldırabildiği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="b4f69-125">For collection classes that use spinning, this efficiency means that multiple threads can add and remove items at a very high rate.</span></span> <span data-ttu-id="b4f69-126">Dönen engelleme karşılaştırması hakkında daha fazla bilgi için bkz: [SpinLock](../../../../docs/standard/threading/spinlock.md) ve [SpinWait](../../../../docs/standard/threading/spinwait.md).</span><span class="sxs-lookup"><span data-stu-id="b4f69-126">For more information about spinning vs. blocking, see [SpinLock](../../../../docs/standard/threading/spinlock.md) and [SpinWait](../../../../docs/standard/threading/spinwait.md).</span></span>  
  
 <span data-ttu-id="b4f69-127"><xref:System.Collections.Concurrent.ConcurrentQueue%601> ve <xref:System.Collections.Concurrent.ConcurrentStack%601> sınıfları kilitleri hiç kullanmaz.</span><span class="sxs-lookup"><span data-stu-id="b4f69-127">The <xref:System.Collections.Concurrent.ConcurrentQueue%601> and <xref:System.Collections.Concurrent.ConcurrentStack%601> classes do not use locks at all.</span></span> <span data-ttu-id="b4f69-128">Bunun yerine, iş parçacığı güvenliğini sağlamak için <xref:System.Threading.Interlocked> işlemlerine dayanırlar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-128">Instead, they rely on <xref:System.Threading.Interlocked> operations to achieve thread-safety.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b4f69-129">Eşzamanlı koleksiyon sınıfları <xref:System.Collections.ICollection> öğesini desteklediğinden, ilgisi olmasa bile <xref:System.Collections.ICollection.IsSynchronized%2A> ve <xref:System.Collections.ICollection.SyncRoot%2A> özellikleri için uygulama sağlarlar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-129">Because the concurrent collections classes support <xref:System.Collections.ICollection>, they provide implementations for the <xref:System.Collections.ICollection.IsSynchronized%2A> and <xref:System.Collections.ICollection.SyncRoot%2A> properties, even though these properties are irrelevant.</span></span> <span data-ttu-id="b4f69-130">`IsSynchronized` her zaman `false`'i döndürür ve `SyncRoot` her zaman `null` (Visual Basic'te `Nothing`) olarak ayarlıdır.</span><span class="sxs-lookup"><span data-stu-id="b4f69-130">`IsSynchronized` always returns `false` and `SyncRoot` is always `null` (`Nothing` in Visual Basic).</span></span>  
  
 <span data-ttu-id="b4f69-131">Aşağıdaki tablo, <xref:System.Collections.Concurrent?displayProperty=nameWithType> ad alanındaki koleksiyon türlerini listeler.</span><span class="sxs-lookup"><span data-stu-id="b4f69-131">The following table lists the collection types in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace.</span></span>  
  
|<span data-ttu-id="b4f69-132">Tür</span><span class="sxs-lookup"><span data-stu-id="b4f69-132">Type</span></span>|<span data-ttu-id="b4f69-133">Açıklama</span><span class="sxs-lookup"><span data-stu-id="b4f69-133">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Collections.Concurrent.BlockingCollection%601>|<span data-ttu-id="b4f69-134"><xref:System.Collections.Concurrent.IProducerConsumerCollection%601> öğesini uygulayan herhangi bir tür için sınırlama ve engelleme işlevleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-134">Provides bounding and blocking functionality for any type that implements <xref:System.Collections.Concurrent.IProducerConsumerCollection%601>.</span></span> <span data-ttu-id="b4f69-135">Daha fazla bilgi için bkz: [BlockingCollection genel bakışı](../../../../docs/standard/collections/thread-safe/blockingcollection-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b4f69-135">For more information, see [BlockingCollection Overview](../../../../docs/standard/collections/thread-safe/blockingcollection-overview.md).</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentDictionary%602>|<span data-ttu-id="b4f69-136">Anahtar-değer çiftlerinin sözlüğünün iş parçacığı açısından güvenli uygulaması.</span><span class="sxs-lookup"><span data-stu-id="b4f69-136">Thread-safe implementation of a dictionary of key-value pairs.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentQueue%601>|<span data-ttu-id="b4f69-137">Bir FIFO (ilk giren ilk çıkar) sırasının iş parçacığı açısından güvenli uygulaması.</span><span class="sxs-lookup"><span data-stu-id="b4f69-137">Thread-safe implementation of a FIFO (first-in, first-out) queue.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentStack%601>|<span data-ttu-id="b4f69-138">Bir LIFO (son giren ilk çıkar) yığının iş parçacığı açısından güvenli uygulaması.</span><span class="sxs-lookup"><span data-stu-id="b4f69-138">Thread-safe implementation of a LIFO (last-in, first-out) stack.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentBag%601>|<span data-ttu-id="b4f69-139">Öğelerin sırasız koleksiyonunun iş parçacığı açısından güvenli uygulaması.</span><span class="sxs-lookup"><span data-stu-id="b4f69-139">Thread-safe implementation of an unordered collection of elements.</span></span>|  
|<xref:System.Collections.Concurrent.IProducerConsumerCollection%601>|<span data-ttu-id="b4f69-140">Bir türün `BlockingCollection` içinde kullanılabilmesi için uygulaması gereken ara birim.</span><span class="sxs-lookup"><span data-stu-id="b4f69-140">The interface that a type must implement to be used in a `BlockingCollection`.</span></span>|  
  
## <a name="related-topics"></a><span data-ttu-id="b4f69-141">İlgili Konular</span><span class="sxs-lookup"><span data-stu-id="b4f69-141">Related Topics</span></span>  
  
|<span data-ttu-id="b4f69-142">Başlık</span><span class="sxs-lookup"><span data-stu-id="b4f69-142">Title</span></span>|<span data-ttu-id="b4f69-143">Açıklama</span><span class="sxs-lookup"><span data-stu-id="b4f69-143">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="b4f69-144">BlockingCollection genel bakışı</span><span class="sxs-lookup"><span data-stu-id="b4f69-144">BlockingCollection Overview</span></span>](../../../../docs/standard/collections/thread-safe/blockingcollection-overview.md)|<span data-ttu-id="b4f69-145"><xref:System.Collections.Concurrent.BlockingCollection%601> türü tarafından sağlanan işlevselliği açıklar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-145">Describes the functionality provided by the <xref:System.Collections.Concurrent.BlockingCollection%601> type.</span></span>|  
|[<span data-ttu-id="b4f69-146">Nasıl yapılır: öğe ekleme ve kaldırma ConcurrentDictionary</span><span class="sxs-lookup"><span data-stu-id="b4f69-146">How to: Add and Remove Items from a ConcurrentDictionary</span></span>](../../../../docs/standard/collections/thread-safe/how-to-add-and-remove-items.md)|<span data-ttu-id="b4f69-147">Bir <xref:System.Collections.Concurrent.ConcurrentDictionary%602> öğesine öğelerin nasıl ekleneceğini ve kaldırılacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-147">Describes how to add and remove elements from a <xref:System.Collections.Concurrent.ConcurrentDictionary%602></span></span>|  
|[<span data-ttu-id="b4f69-148">Nasıl yapılır: ekleme ve ele öğeleri tek tek bir BlockingCollection</span><span class="sxs-lookup"><span data-stu-id="b4f69-148">How to: Add and Take Items Individually from a BlockingCollection</span></span>](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md)|<span data-ttu-id="b4f69-149">Salt okunur numaralayıcı kullanmadan bir engelleme koleksiyonundan öğelerin nasıl eklenip alınacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-149">Describes how to add and retrieve items from a blocking collection without using the read-only enumerator.</span></span>|  
|[<span data-ttu-id="b4f69-150">Nasıl yapılır: sınırlama ve engelleme işlevi bir koleksiyona ekleme</span><span class="sxs-lookup"><span data-stu-id="b4f69-150">How to: Add Bounding and Blocking Functionality to a Collection</span></span>](../../../../docs/standard/collections/thread-safe/how-to-add-bounding-and-blocking.md)|<span data-ttu-id="b4f69-151">Bir <xref:System.Collections.Concurrent.IProducerConsumerCollection%601> koleksiyonu için herhangi bir koleksiyon sınıfının temel depolama mekanizması olarak nasıl kullanılacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-151">Describes how to use any collection class as the underlying storage mechanism for an <xref:System.Collections.Concurrent.IProducerConsumerCollection%601> collection.</span></span>|  
|[<span data-ttu-id="b4f69-152">Nasıl yapılır: bir Blockingcollection'daki öğeleri kaldırmak için ForEach kullanma</span><span class="sxs-lookup"><span data-stu-id="b4f69-152">How to: Use ForEach to Remove Items in a BlockingCollection</span></span>](../../../../docs/standard/collections/thread-safe/how-to-use-foreach-to-remove.md)|<span data-ttu-id="b4f69-153">Bir engelleme koleksiyondaki tüm öğeleri kaldırmak için `foreach` (Visual Basic'te `For Each`) öğesinin nasıl kullanılacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-153">Describes how to use `foreach`, (`For Each` in Visual Basic) to remove all items in a blocking collection.</span></span>|  
|[<span data-ttu-id="b4f69-154">Nasıl yapılır: ardışık düzende engelleme koleksiyonu dizilerini kullanma</span><span class="sxs-lookup"><span data-stu-id="b4f69-154">How to: Use Arrays of Blocking Collections in a Pipeline</span></span>](../../../../docs/standard/collections/thread-safe/how-to-use-arrays-of-blockingcollections.md)|<span data-ttu-id="b4f69-155">Bir ardışık düzeni uygulamak için birden çok engelleme koleksiyonunun aynı anda nasıl kullanılacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="b4f69-155">Describes how to use multiple blocking collections at the same time to implement a pipeline.</span></span>|  
|[<span data-ttu-id="b4f69-156">Nasıl yapılır: ConcurrentBag kullanarak nesne havuzu oluşturma</span><span class="sxs-lookup"><span data-stu-id="b4f69-156">How to: Create an Object Pool by Using a ConcurrentBag</span></span>](../../../../docs/standard/collections/thread-safe/how-to-create-an-object-pool.md)|<span data-ttu-id="b4f69-157">Sürekli yenilerini oluşturmak yerine, nesneleri yeniden kullanabileceğiniz senaryolarda performansı artırmak için eşzamanlı torbaların nasıl kullanılacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="b4f69-157">Shows how to use a concurrent bag to improve performance in scenarios where you can reuse objects instead of continually creating new ones.</span></span>|  
  
## <a name="reference"></a><span data-ttu-id="b4f69-158">Başvuru</span><span class="sxs-lookup"><span data-stu-id="b4f69-158">Reference</span></span>  
 <xref:System.Collections.Concurrent?displayProperty=nameWithType>
