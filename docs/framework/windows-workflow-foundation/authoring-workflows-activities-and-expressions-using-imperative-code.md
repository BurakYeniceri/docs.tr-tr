---
title: "İş akışları, etkinlikler ve ifadeler kesinlik temelli kod kullanarak geliştirme"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: cefc9cfc-2882-4eb9-8c94-7a6da957f2b2
caps.latest.revision: "16"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: ee7c5320caa3b7704813b94d4ddfbf1ce0fecf96
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/22/2017
---
# <a name="authoring-workflows-activities-and-expressions-using-imperative-code"></a><span data-ttu-id="91a17-102">İş akışları, etkinlikler ve ifadeler kesinlik temelli kod kullanarak geliştirme</span><span class="sxs-lookup"><span data-stu-id="91a17-102">Authoring Workflows, Activities, and Expressions Using Imperative Code</span></span>
<span data-ttu-id="91a17-103">Bir iş akışı tanımı yapılandırılmış etkinlik nesne ağacının ' dir.</span><span class="sxs-lookup"><span data-stu-id="91a17-103">A workflow definition is a tree of configured activity objects.</span></span> <span data-ttu-id="91a17-104">Bu ağaç etkinlikler XAML elle düzenlemeye veya XAML üretmek için iş akışı Tasarımcısı kullanarak da dahil olmak üzere birçok şekilde tanımlanabilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-104">This tree of activities can be defined many ways, including by hand-editing XAML or by using the Workflow Designer to produce XAML.</span></span> <span data-ttu-id="91a17-105">XAML kullanın, ancak, bir gereksinim değildir.</span><span class="sxs-lookup"><span data-stu-id="91a17-105">Use of XAML, however, is not a requirement.</span></span> <span data-ttu-id="91a17-106">İş akışı tanımları de bir program aracılığıyla oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-106">Workflow definitions can also be created programmatically.</span></span> <span data-ttu-id="91a17-107">Bu konu, kod kullanarak iş akışı tanımları, etkinlikler ve ifadeler oluşturmaya genel bir bakış sağlar.</span><span class="sxs-lookup"><span data-stu-id="91a17-107">This topic provides an overview of creating workflow definitions, activities, and expressions by using code.</span></span> <span data-ttu-id="91a17-108">Kod kullanarak XAML iş akışlarıyla çalışma örnekleri için bkz: [seri hale getirme iş akışları ve etkinlikler XAML gelen ve giden](../../../docs/framework/windows-workflow-foundation/serializing-workflows-and-activities-to-and-from-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="91a17-108">For examples of working with XAML workflows using code, see [Serializing Workflows and Activities to and from XAML](../../../docs/framework/windows-workflow-foundation/serializing-workflows-and-activities-to-and-from-xaml.md).</span></span>  
  
## <a name="creating-workflow-definitions"></a><span data-ttu-id="91a17-109">İş akışı tanımları oluşturma</span><span class="sxs-lookup"><span data-stu-id="91a17-109">Creating Workflow Definitions</span></span>  
 <span data-ttu-id="91a17-110">Bir iş akışı tanımı, bir etkinlik türünün bir örneği başlatmasını ve etkinlik nesnenin özelliklerini yapılandırma oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-110">A workflow definition can be created by instantiating an instance of an activity type and configuring the activity object’s properties.</span></span> <span data-ttu-id="91a17-111">Alt etkinlikler içermeyen etkinlikler için bu kodu birkaç satırlık kullanılarak gerçekleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-111">For activities that do not contain child activities, this can be accomplished using a few lines of code.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#47](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#47)]  
  
> [!NOTE]
>  <span data-ttu-id="91a17-112">Bu konuda kullanım örnekleri <xref:System.Activities.WorkflowInvoker> örnek iş akışlarını çalıştırmak için.</span><span class="sxs-lookup"><span data-stu-id="91a17-112">The examples in this topic use <xref:System.Activities.WorkflowInvoker> to run the sample workflows.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="91a17-113">İş akışları, bağımsız değişkenleri geçirme ve kullanılabilir farklı barındırma seçenekleri çağrılırken, bkz: [kullanarak WorkflowInvoker ve WorkflowApplication](../../../docs/framework/windows-workflow-foundation/using-workflowinvoker-and-workflowapplication.md).</span><span class="sxs-lookup"><span data-stu-id="91a17-113"> invoking workflows, passing arguments, and the different hosting choices that are available, see [Using WorkflowInvoker and WorkflowApplication](../../../docs/framework/windows-workflow-foundation/using-workflowinvoker-and-workflowapplication.md).</span></span>  
  
 <span data-ttu-id="91a17-114">Bu örnekte, bir tek oluşan bir iş akışı <xref:System.Activities.Statements.WriteLine> etkinlik oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="91a17-114">In this example, a workflow that consists of a single <xref:System.Activities.Statements.WriteLine> activity is created.</span></span> <span data-ttu-id="91a17-115"><xref:System.Activities.Statements.WriteLine> Etkinliğin <xref:System.Activities.Statements.WriteLine.Text%2A> bağımsız değişkeni olarak ayarlanmış ve iş akışı çağrılır.</span><span class="sxs-lookup"><span data-stu-id="91a17-115">The <xref:System.Activities.Statements.WriteLine> activity’s <xref:System.Activities.Statements.WriteLine.Text%2A> argument is set, and the workflow is invoked.</span></span> <span data-ttu-id="91a17-116">Oluşturma yöntemi, bir etkinlik alt etkinlikleri içeriyorsa, benzer.</span><span class="sxs-lookup"><span data-stu-id="91a17-116">If an activity contains child activities, the method of construction is similar.</span></span> <span data-ttu-id="91a17-117">Aşağıdaki örnek kullanan bir <xref:System.Activities.Statements.Sequence> iki etkinlik <xref:System.Activities.Statements.WriteLine> etkinlikler.</span><span class="sxs-lookup"><span data-stu-id="91a17-117">The following example uses a <xref:System.Activities.Statements.Sequence> activity that contains two <xref:System.Activities.Statements.WriteLine> activities.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#48](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#48)]  
  
### <a name="using-object-initializers"></a><span data-ttu-id="91a17-118">Nesne başlatıcıları kullanma</span><span class="sxs-lookup"><span data-stu-id="91a17-118">Using Object Initializers</span></span>  
 <span data-ttu-id="91a17-119">Bu konudaki örnekler nesne başlatma sözdizimini kullanın.</span><span class="sxs-lookup"><span data-stu-id="91a17-119">The examples in this topic use object initialization syntax.</span></span> <span data-ttu-id="91a17-120">Nesne başlatma sözdizimi etkinlikleri arasındaki ilişkiyi gösterir ve iş akışındaki etkinliklerin hiyerarşik bir görünümü sağlar kodda iş akışı tanımları oluşturmak için kullanışlı bir yol olabilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-120">Object initialization syntax can be a useful way to create workflow definitions in code because it provides a hierarchical view of the activities in the workflow and shows the relationship between the activities.</span></span> <span data-ttu-id="91a17-121">Program aracılığıyla iş akışları oluşturduğunuzda, nesne başlatma sözdizimi kullanma zorunluluğu yoktur.</span><span class="sxs-lookup"><span data-stu-id="91a17-121">There is no requirement to use object initialization syntax when you programmatically create workflows.</span></span> <span data-ttu-id="91a17-122">Aşağıdaki örnek önceki örneğe işlevsel olarak eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="91a17-122">The following example is functionally equivalent to the previous example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#49](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#49)]  
  
 [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="91a17-123">Nesne başlatıcılar, bkz: [nasıl yapılır: nesneler Oluşturucusu (C# programlama Kılavuzu) çağırma olmadan başlatmak](http://go.microsoft.com/fwlink/?LinkId=161015) ve [nasıl yapılır: nesne Başlatıcı kullanarak nesne bildirme](http://go.microsoft.com/fwlink/?LinkId=161016).</span><span class="sxs-lookup"><span data-stu-id="91a17-123"> object initializers, see [How to: Initialize Objects without Calling a Constructor (C# Programming Guide)](http://go.microsoft.com/fwlink/?LinkId=161015) and [How to: Declare an Object by Using an Object Initializer](http://go.microsoft.com/fwlink/?LinkId=161016).</span></span>  
  
### <a name="working-with-variables-literal-values-and-expressions"></a><span data-ttu-id="91a17-124">Değişkenleri, değişmez değerler ve ifadeler ile çalışma</span><span class="sxs-lookup"><span data-stu-id="91a17-124">Working with Variables, Literal Values, and Expressions</span></span>  
 <span data-ttu-id="91a17-125">Kod kullanarak bir iş akışı tanımı oluşturma sırasında hangi kod oluşturma iş akışı tanımının bir parçası olarak çalıştırır ve bu iş akışı örneği yürütülmesini bir parçası olarak hangi kodu yürütür unutmayın.</span><span class="sxs-lookup"><span data-stu-id="91a17-125">When creating a workflow definition using code, be aware of what code executes as part of the creation of the workflow definition and what code executes as part of the execution of an instance of that workflow.</span></span> <span data-ttu-id="91a17-126">Örneğin, aşağıdaki iş akışı, rastgele bir sayı üretmek ve konsola yazma için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="91a17-126">For example, the following workflow is intended to generate a random number and write it to the console.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#50](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#50)]  
  
 <span data-ttu-id="91a17-127">Bu iş akışı tanımı kod zaman yürütülür, çağrısı `Random.Next` yapılır ve sonucu iş akışı tanımı bir hazır değer olarak depolanır.</span><span class="sxs-lookup"><span data-stu-id="91a17-127">When this workflow definition code is executed, the call to `Random.Next` is made and the result is stored in the workflow definition as a literal value.</span></span> <span data-ttu-id="91a17-128">Bu iş akışının çok sayıda örnekleri çağrılabilir ve tüm aynı numarasını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="91a17-128">Many instances of this workflow can be invoked, and all would display the same number.</span></span> <span data-ttu-id="91a17-129">Diğer bir deyişle bir ifade kullanılan iş akışı yürütme sırasında ortaya rastgele sayı oluşturma için iş akışı her çalıştığında değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-129">To have the random number generation occur during workflow execution, an expression must be used that is evaluated each time the workflow runs.</span></span> <span data-ttu-id="91a17-130">Aşağıdaki örnekte, bir Visual Basic ifade ile kullanılan bir <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601>.</span><span class="sxs-lookup"><span data-stu-id="91a17-130">In the following example, a Visual Basic expression is used with a <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601>.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#51](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#51)]  
  
 <span data-ttu-id="91a17-131">Önceki örnekte ifade kullanarak da uygulanabilir bir <xref:Microsoft.CSharp.Activities.CSharpValue%601> ve C# ifade.</span><span class="sxs-lookup"><span data-stu-id="91a17-131">The expression in the previous example could also be implemented using a <xref:Microsoft.CSharp.Activities.CSharpValue%601> and a C# expression.</span></span>  
  
```csharp  
new Assign<int>  
{  
    To = n,  
    Value = new CSharpValue<int>("new Random().Next(1, 101)")  
}  
```  
  
 <span data-ttu-id="91a17-132">Bunları içeren iş akışı çağrılmadan önce C# ifadeleri derlenmiş olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="91a17-132">C# expressions must be compiled before the workflow containing them is invoked.</span></span> <span data-ttu-id="91a17-133">C# ifadeleri derlenmemiş, bir <xref:System.NotSupportedException> aşağıdakine benzer bir ileti ile iş akışı çağrıldığında oluşturulur: `Expression Activity type 'CSharpValue`1' derleme çalıştırmak için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="91a17-133">If the C# expressions are not compiled, a <xref:System.NotSupportedException> is thrown when the workflow is invoked with a message similar to the following: `Expression Activity type 'CSharpValue`1' requires compilation in order to run.</span></span>  <span data-ttu-id="91a17-134">Lütfen iş akışının derlendikten olduğundan emin olun.' Visual Studio'da C# oluşturulan iş akışı içeren çoğu senaryoda ifadeleri otomatik olarak derlenen ancak kodu iş akışları gibi bazı senaryolarda C# ifadeleri el ile derlenmiş olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="91a17-134">Please ensure that the workflow has been compiled.\` In most scenarios involving workflows created in Visual Studio the C# expressions are compiled automatically, but in some scenarios, such as code workflows, the C# expressions must be manually compiled.</span></span> <span data-ttu-id="91a17-135">C# ifadeleri derlemek nasıl bir örnek için bkz: [kullanarak C# kod iş akışları ifadelerinde](../../../docs/framework/windows-workflow-foundation/csharp-expressions.md#CodeWorkflows) bölümünü [C# ifadeleri](../../../docs/framework/windows-workflow-foundation/csharp-expressions.md) konu.</span><span class="sxs-lookup"><span data-stu-id="91a17-135">For an example of how to compile C# expressions, see the [Using C# expressions in code workflows](../../../docs/framework/windows-workflow-foundation/csharp-expressions.md#CodeWorkflows) section of the [C# Expressions](../../../docs/framework/windows-workflow-foundation/csharp-expressions.md) topic.</span></span>  
  
 <span data-ttu-id="91a17-136">A <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601> bir ifadede bir r olarak kullanılan Visual Basic söz dizimine bir ifadeyi temsil eder ve bir <xref:Microsoft.CSharp.Activities.CSharpValue%601> bir ifadede bir r olarak kullanılan C# sözdizimi bir ifadeyi temsil eder.</span><span class="sxs-lookup"><span data-stu-id="91a17-136">A <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601> represents an expression in Visual Basic syntax that can be used as an r-value in an expression, and a <xref:Microsoft.CSharp.Activities.CSharpValue%601> represents an expression in C# syntax that can be used as an r-value in an expression.</span></span> <span data-ttu-id="91a17-137">Bu ifadeler içeren etkinlik her yürütüldüğünde değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-137">These expressions are evaluated each time the containing activity is executed.</span></span> <span data-ttu-id="91a17-138">İfadenin sonucu iş akışı değişkenine atanan `n`, ve bu sonuçların sonraki etkinliği iş akışı tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="91a17-138">The result of the expression is assigned to the workflow variable `n`, and these results are used by the next activity in the workflow.</span></span> <span data-ttu-id="91a17-139">İş akışı değişkeninin değerini erişmek için `n` çalışma zamanında <xref:System.Activities.ActivityContext> gereklidir.</span><span class="sxs-lookup"><span data-stu-id="91a17-139">To access the value of the workflow variable `n` at runtime, the <xref:System.Activities.ActivityContext> is required.</span></span> <span data-ttu-id="91a17-140">Bu, aşağıdaki lambda ifadesi kullanılarak erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-140">This can be accessed by using the following lambda expression.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="91a17-141">Hem de bu kodu örnekleri olduğunu unutmayın kullandığınız C# programlama dili olarak, ancak bir kullanan bir <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601> ve bir kullanan bir <xref:Microsoft.CSharp.Activities.CSharpValue%601>.</span><span class="sxs-lookup"><span data-stu-id="91a17-141">Note that both of these code are examples are using C# as the programming language, but one uses a <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601> and one uses a <xref:Microsoft.CSharp.Activities.CSharpValue%601>.</span></span> <span data-ttu-id="91a17-142"><xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601>ve <xref:Microsoft.CSharp.Activities.CSharpValue%601> hem Visual Basic ve Visual C# projeleri içinde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-142"><xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601> and <xref:Microsoft.CSharp.Activities.CSharpValue%601> can be used in both Visual Basic and C# projects.</span></span> <span data-ttu-id="91a17-143">Varsayılan olarak, iş akışı Tasarımcısı'nda oluşturulan ifadeler barındırma projenin dili eşleşmesi.</span><span class="sxs-lookup"><span data-stu-id="91a17-143">By default, expressions created in the workflow designer match the language of the hosting project.</span></span> <span data-ttu-id="91a17-144">İş akışları kodda oluştururken, istenen iş akışı yazarı kümeleri dilidir.</span><span class="sxs-lookup"><span data-stu-id="91a17-144">When creating workflows in code, the desired language is at the discretion of the workflow author.</span></span>  
  
 <span data-ttu-id="91a17-145">Bu örneklerde ifadenin sonucu iş akışı değişkenine atanan `n`, ve bu sonuçların sonraki etkinliği iş akışı tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="91a17-145">In these examples the result of the expression is assigned to the workflow variable `n`, and these results are used by the next activity in the workflow.</span></span> <span data-ttu-id="91a17-146">İş akışı değişkeninin değerini erişmek için `n` çalışma zamanında <xref:System.Activities.ActivityContext> gereklidir.</span><span class="sxs-lookup"><span data-stu-id="91a17-146">To access the value of the workflow variable `n` at runtime, the <xref:System.Activities.ActivityContext> is required.</span></span> <span data-ttu-id="91a17-147">Bu, aşağıdaki lambda ifadesi kullanılarak erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-147">This can be accessed by using the following lambda expression.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#52](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#52)]  
  
 [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="91a17-148">Lambda ifadeleri bkz [Lambda ifadeleri (C# programlama Kılavuzu)](http://go.microsoft.com/fwlink/?LinkID=152436) veya [Lambda ifadeleri (Visual Basic)](http://go.microsoft.com/fwlink/?LinkID=152437).</span><span class="sxs-lookup"><span data-stu-id="91a17-148"> lambda expressions, see [Lambda Expressions (C# Programming Guide)](http://go.microsoft.com/fwlink/?LinkID=152436) or [Lambda Expressions (Visual Basic)](http://go.microsoft.com/fwlink/?LinkID=152437).</span></span>  
  
 <span data-ttu-id="91a17-149">Lambda ifadeleri XAML biçimine seri hale getirilebilir değildir.</span><span class="sxs-lookup"><span data-stu-id="91a17-149">Lambda expressions are not serializable to XAML format.</span></span> <span data-ttu-id="91a17-150">Lambda ifadeleri bir iş akışıyla seri denemesi yapılırsa, bir <xref:System.Activities.Expressions.LambdaSerializationException> aşağıdaki iletiyle oluşturulur: "Bu iş akışı kodunda belirtilen lambda ifadeleri içerir.</span><span class="sxs-lookup"><span data-stu-id="91a17-150">If an attempt to serialize a workflow with lambda expressions is made, a <xref:System.Activities.Expressions.LambdaSerializationException> is thrown with the following message: "This workflow contains lambda expressions specified in code.</span></span> <span data-ttu-id="91a17-151">Bu deyimler XAML seri hale getirilebilir değildir.</span><span class="sxs-lookup"><span data-stu-id="91a17-151">These expressions are not XAML serializable.</span></span> <span data-ttu-id="91a17-152">İş akışınızı XAML serileştirilebilir yapmak için ya da VisualBasicValue/VisualBasicReference veya ExpressionServices.Convert(lambda) kullanın.</span><span class="sxs-lookup"><span data-stu-id="91a17-152">In order to make your workflow XAML-serializable, either use VisualBasicValue/VisualBasicReference or ExpressionServices.Convert(lambda).</span></span> <span data-ttu-id="91a17-153">Bu, lambda ifadeleri ifade etkinliklerine dönüştürür."</span><span class="sxs-lookup"><span data-stu-id="91a17-153">This will convert your lambda expressions into expression activities."</span></span> <span data-ttu-id="91a17-154">Bu ifade XAML ile uyumlu hale getirmek için kullanmak <xref:System.Activities.Expressions.ExpressionServices> ve <xref:System.Activities.Expressions.ExpressionServices.Convert%2A>, aşağıdaki örnekte gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="91a17-154">To make this expression compatible with XAML, use <xref:System.Activities.Expressions.ExpressionServices> and <xref:System.Activities.Expressions.ExpressionServices.Convert%2A>, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#53](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#53)]  
  
 <span data-ttu-id="91a17-155">A <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601> de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-155">A <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601> could also be used.</span></span> <span data-ttu-id="91a17-156">Lambda ifadesi bir Visual Basic ifade kullanırken gerekli olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="91a17-156">Note that no lambda expression is required when using a Visual Basic expression.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#54](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#54)]  
  
 <span data-ttu-id="91a17-157">Çalışma zamanında, Visual Basic ifadeleri LINQ ifadelere derlenir.</span><span class="sxs-lookup"><span data-stu-id="91a17-157">At run time, Visual Basic expressions are compiled into LINQ expressions.</span></span> <span data-ttu-id="91a17-158">Önceki örneklerde her ikisi de serileştirilmiş XAML görüntülenmesine ve iş akışı Tasarımcısı'nda düzenlenemiyor kullanmak için tasarlanmıştır, ancak XAML serileştirilebilir <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601> , ifadeler için.</span><span class="sxs-lookup"><span data-stu-id="91a17-158">Both of the previous examples are serializable to XAML, but if the serialized XAML is intended to be viewed and edited in the workflow designer, use <xref:Microsoft.VisualBasic.Activities.VisualBasicValue%601> for your expressions.</span></span> <span data-ttu-id="91a17-159">Serileştirilmiş kullanan iş akışları `ExpressionServices.Convert` tasarımcıda açılır, ancak ifadesinin değerini boş olacaktır.</span><span class="sxs-lookup"><span data-stu-id="91a17-159">Serialized workflows that use `ExpressionServices.Convert` can be opened in the designer, but the value of the expression will be blank.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="91a17-160">XAML iş akışlarına seri hale getirme, bkz: [seri hale getirme iş akışları ve etkinlikler XAML gelen ve giden](../../../docs/framework/windows-workflow-foundation/serializing-workflows-and-activities-to-and-from-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="91a17-160"> serializing workflows to XAML, see [Serializing Workflows and Activities to and from XAML](../../../docs/framework/windows-workflow-foundation/serializing-workflows-and-activities-to-and-from-xaml.md).</span></span>  
  
#### <a name="literal-expressions-and-reference-types"></a><span data-ttu-id="91a17-161">Sabit ifadeleri ve başvuru türleri</span><span class="sxs-lookup"><span data-stu-id="91a17-161">Literal Expressions and Reference Types</span></span>  
 <span data-ttu-id="91a17-162">Sabit ifadeleri iş akışlarında tarafından gösterilen <xref:System.Activities.Expressions.Literal%601> etkinlik.</span><span class="sxs-lookup"><span data-stu-id="91a17-162">Literal expressions are represented in workflows by the <xref:System.Activities.Expressions.Literal%601> activity.</span></span> <span data-ttu-id="91a17-163">Aşağıdaki <xref:System.Activities.Statements.WriteLine> etkinlikleri işlevsel olarak eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="91a17-163">The following <xref:System.Activities.Statements.WriteLine> activities are functionally equivalent.</span></span>  
  
```csharp  
new WriteLine  
{  
    Text = "Hello World."  
},  
new WriteLine  
{  
    Text = new Literal<string>("Hello World.")  
}  
```  
  
 <span data-ttu-id="91a17-164">Değişmez değer ifadesi dışında herhangi bir başvuru türü ile başlatmak için geçersiz <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="91a17-164">It is invalid to initialize a literal expression with any reference type except <xref:System.String>.</span></span> <span data-ttu-id="91a17-165">Aşağıdaki örnekte, bir <xref:System.Activities.Statements.Assign> etkinliğin <xref:System.Activities.Statements.Assign.Value%2A> özelliğinin başlatıldığı değişmez değer ifadesi kullanarak bir `List<string>`.</span><span class="sxs-lookup"><span data-stu-id="91a17-165">In the following example, an <xref:System.Activities.Statements.Assign> activity's <xref:System.Activities.Statements.Assign.Value%2A> property is initialized with a literal expression using a `List<string>`.</span></span>  
  
```csharp  
new Assign  
{  
    To = new OutArgument<List<string>>(items),  
    Value = new InArgument<List<string>>(new List<string>())  
},  
```  
  
 <span data-ttu-id="91a17-166">Bu etkinliğini içeren iş akışı doğrulandığında, aşağıdaki doğrulama hatasını döndürdü: "değişmez değeri yalnızca değer türleri ve destekler System.String sabit türü.</span><span class="sxs-lookup"><span data-stu-id="91a17-166">When the workflow containing this activity is validated, the following validation error is returned: "Literal only supports value types and the immutable type System.String.</span></span> <span data-ttu-id="91a17-167">Tür System.Collections.Generic.List'1[System.String] sabit değer olarak kullanılamaz."</span><span class="sxs-lookup"><span data-stu-id="91a17-167">The type System.Collections.Generic.List\`1[System.String] cannot be used as a literal."</span></span> <span data-ttu-id="91a17-168">İş akışı çağrılırsa, bir <xref:System.Activities.InvalidWorkflowException> atılır doğrulama hatasının metni içerir.</span><span class="sxs-lookup"><span data-stu-id="91a17-168">If the workflow is invoked, an <xref:System.Activities.InvalidWorkflowException> is thrown that contains the text of the validation error.</span></span> <span data-ttu-id="91a17-169">Bir başvuru türü ile bir değişmez değer ifadesi oluşturma iş akışı her örneği için başvuru türü yeni bir örneğini oluşturmaz bir doğrulama hatası olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="91a17-169">This is a validation error because creating a literal expression with a reference type does not create a new instance of the reference type for each instance of the workflow.</span></span> <span data-ttu-id="91a17-170">Bu sorunu çözmek için değişmez değer ifadesi oluşturur ve başvuru türü yeni bir örneğini döndüren bir ile değiştirin.</span><span class="sxs-lookup"><span data-stu-id="91a17-170">To resolve this, replace the literal expression with one that creates and returns a new instance of the reference type.</span></span>  
  
```csharp  
new Assign  
{  
    To = new OutArgument<List<string>>(items),  
    Value = new InArgument<List<string>>(new VisualBasicValue<List<string>>("New List(Of String)"))  
},  
```  
  
 [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="91a17-171">ifadeler, bkz: [ifadeleri](../../../docs/framework/windows-workflow-foundation/expressions.md).</span><span class="sxs-lookup"><span data-stu-id="91a17-171"> expressions, see [Expressions](../../../docs/framework/windows-workflow-foundation/expressions.md).</span></span>  
  
#### <a name="invoking-methods-on-objects-using-expressions-and-the-invokemethod-activity"></a><span data-ttu-id="91a17-172">İfadeler ve InvokeMethod etkinliğini kullanarak nesneleri yöntemleri çağırma</span><span class="sxs-lookup"><span data-stu-id="91a17-172">Invoking Methods on Objects using Expressions and the InvokeMethod Activity</span></span>  
 <span data-ttu-id="91a17-173"><xref:System.Activities.Expressions.InvokeMethod%601> Etkinlik, statik çağırma ve .NET Framework sınıfları, yöntemleri örneği için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-173">The <xref:System.Activities.Expressions.InvokeMethod%601> activity can be used to invoke static and instance methods of classes in the .NET Framework.</span></span> <span data-ttu-id="91a17-174">Bu konuda önceki örnekte rastgele bir sayı kullanılarak oluşturulan <xref:System.Random> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="91a17-174">In a previous example in this topic, a random number was generated using the <xref:System.Random> class.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#51](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#51)]  
  
 <span data-ttu-id="91a17-175"><xref:System.Activities.Expressions.InvokeMethod%601> Etkinlik da kullanılabilirdi çağırmak için <xref:System.Random.Next%2A> yöntemi <xref:System.Random> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="91a17-175">The <xref:System.Activities.Expressions.InvokeMethod%601> activity could also have been used to call the <xref:System.Random.Next%2A> method of the <xref:System.Random> class.</span></span>  
  
```csharp  
new InvokeMethod<int>  
{  
    TargetObject = new InArgument<Random>(new VisualBasicValue<Random>("New Random()")),  
    MethodName = "Next",  
    Parameters =   
    {  
        new InArgument<int>(1),  
        new InArgument<int>(101)  
    },  
    Result = n  
}  
```  
  
 <span data-ttu-id="91a17-176">Bu yana <xref:System.Random.Next%2A> örneği bir statik yöntem değildir <xref:System.Random> sınıfı için sağlanmaktadır <xref:System.Activities.Expressions.InvokeMethod%601.TargetObject%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="91a17-176">Since <xref:System.Random.Next%2A> is not a static method, an instance of the <xref:System.Random> class is supplied for the <xref:System.Activities.Expressions.InvokeMethod%601.TargetObject%2A> property.</span></span> <span data-ttu-id="91a17-177">Bu örnekte, bir Visual Basic ifade kullanılarak yeni bir örneği oluşturulur, ancak bunu de daha önce oluşturulmuş ve bir iş akışı değişkeninde depolanan.</span><span class="sxs-lookup"><span data-stu-id="91a17-177">In this example a new instance is created using a Visual Basic expression, but it could also have been created previously and stored in a workflow variable.</span></span> <span data-ttu-id="91a17-178">Bu örnekte, kullanmayı daha kolay olacaktır <xref:System.Activities.Statements.Assign%601> yerine etkinlik <xref:System.Activities.Expressions.InvokeMethod%601> etkinlik.</span><span class="sxs-lookup"><span data-stu-id="91a17-178">In this example, it would be simpler to use the <xref:System.Activities.Statements.Assign%601> activity instead of the <xref:System.Activities.Expressions.InvokeMethod%601> activity.</span></span> <span data-ttu-id="91a17-179">Yöntem çağrısının sonuçta ya da başlatılırsa <xref:System.Activities.Statements.Assign%601> veya <xref:System.Activities.Expressions.InvokeMethod%601> etkinlikleri uzun çalışan, <xref:System.Activities.Expressions.InvokeMethod%601> içerdiğinden bir avantajı vardır, bir <xref:System.Activities.Expressions.InvokeMethod%601.RunAsynchronously%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="91a17-179">If the method call ultimately invoked by either the <xref:System.Activities.Statements.Assign%601> or <xref:System.Activities.Expressions.InvokeMethod%601> activities is long running, <xref:System.Activities.Expressions.InvokeMethod%601> has an advantage since it has a <xref:System.Activities.Expressions.InvokeMethod%601.RunAsynchronously%2A> property.</span></span> <span data-ttu-id="91a17-180">Bu özellik ayarlandığında `true`, çağrılan yöntem iş akışı göre zaman uyumsuz olarak çalışır.</span><span class="sxs-lookup"><span data-stu-id="91a17-180">When this property is set to `true`, the invoked method will run asynchronously with regard to the workflow.</span></span> <span data-ttu-id="91a17-181">Paralel olarak diğer etkinlikler varsa yöntemi zaman uyumsuz olarak yürütülürken bunlar engellenmez.</span><span class="sxs-lookup"><span data-stu-id="91a17-181">If other activities are in parallel, they will not be blocked while the method is asynchronously executing.</span></span> <span data-ttu-id="91a17-182">Ayrıca, çağrılacak yöntemin dönüş değeri, ardından yoksa <xref:System.Activities.Expressions.InvokeMethod%601> yöntemini çağırmak için uygun bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="91a17-182">Also, if the method to be invoked has no return value, then <xref:System.Activities.Expressions.InvokeMethod%601> is the appropriate way to invoke the method.</span></span>  
  
## <a name="arguments-and-dynamic-activities"></a><span data-ttu-id="91a17-183">Bağımsız değişkenler ve dinamik etkinlikleri</span><span class="sxs-lookup"><span data-stu-id="91a17-183">Arguments and Dynamic Activities</span></span>  
 <span data-ttu-id="91a17-184">Bir iş akışı tanımı kod içinde bir etkinlik ağacına etkinlikleri birleştirme ve tüm özellikleri ve bağımsız değişkenler yapılandırma oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="91a17-184">A workflow definition is created in code by assembling activities into an activity tree and configuring any properties and arguments.</span></span> <span data-ttu-id="91a17-185">Var olan bağımsız değişkenler bağlanabilir ancak yeni bağımsız değişkenleri etkinlikler için eklenemiyor.</span><span class="sxs-lookup"><span data-stu-id="91a17-185">Existing arguments can be bound, but new arguments cannot be added to activities.</span></span> <span data-ttu-id="91a17-186">Bu kök etkinlik geçirilen iş akışı değişkenleri içerir.</span><span class="sxs-lookup"><span data-stu-id="91a17-186">This includes workflow arguments passed to the root activity.</span></span> <span data-ttu-id="91a17-187">Yeni bir CLR türü özellikleri olarak belirtilen kesinlik temelli kodda iş akışı değişkenleri ve XAML'de bunlar kullanarak bildirilir `x:Class` ve `x:Member`.</span><span class="sxs-lookup"><span data-stu-id="91a17-187">In imperative code, workflow arguments are specified as properties on a new CLR type, and in XAML they are declared by using `x:Class` and `x:Member`.</span></span> <span data-ttu-id="91a17-188">Bağımsız değişkenler, bir iş akışı tanımı bellek içi nesnelerin ağaç oluşturulduğunda yeni bir CLR türü olduğundan eklenemez.</span><span class="sxs-lookup"><span data-stu-id="91a17-188">Because there is no new CLR type created when a workflow definition is created as a tree of in-memory objects, arguments cannot be added.</span></span> <span data-ttu-id="91a17-189">Bağımsız değişkenler ancak, eklenebilir bir <xref:System.Activities.DynamicActivity>.</span><span class="sxs-lookup"><span data-stu-id="91a17-189">However, arguments can be added to a <xref:System.Activities.DynamicActivity>.</span></span> <span data-ttu-id="91a17-190">Bu örnekte, bir <xref:System.Activities.DynamicActivity%601> bu alır iki tamsayı bağımsız değişkeni oluşturulur, birlikte ekler ve sonucu döndürür.</span><span class="sxs-lookup"><span data-stu-id="91a17-190">In this example, a <xref:System.Activities.DynamicActivity%601> is created that takes two integer arguments, adds them together, and returns the result.</span></span> <span data-ttu-id="91a17-191">A <xref:System.Activities.DynamicActivityProperty> her bağımsız değişkeni için oluşturulan ve işleminin sonucu atandığı <xref:System.Activities.Activity%601.Result%2A> bağımsız değişkeni <xref:System.Activities.DynamicActivity%601>.</span><span class="sxs-lookup"><span data-stu-id="91a17-191">A <xref:System.Activities.DynamicActivityProperty> is created for each argument, and the result of the operation is assigned to the <xref:System.Activities.Activity%601.Result%2A> argument of the <xref:System.Activities.DynamicActivity%601>.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#55](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#55)]  
  
 [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="91a17-192">dinamik etkinlikleri bkz [çalışma zamanında bir etkinlik oluşturma](../../../docs/framework/windows-workflow-foundation/creating-an-activity-at-runtime-with-dynamicactivity.md).</span><span class="sxs-lookup"><span data-stu-id="91a17-192"> dynamic activities, see [Creating an Activity at Runtime](../../../docs/framework/windows-workflow-foundation/creating-an-activity-at-runtime-with-dynamicactivity.md).</span></span>  
  
## <a name="compiled-activities"></a><span data-ttu-id="91a17-193">Derlenmiş etkinlikleri</span><span class="sxs-lookup"><span data-stu-id="91a17-193">Compiled Activities</span></span>  
 <span data-ttu-id="91a17-194">Dinamik etkinlikleri kod kullanarak bağımsız değişkenleri içeren bir etkinlik tanımlamak için bir yol sunar, ancak etkinlikler ayrıca kod oluşturulabilir ve türleriyle derlenmiş.</span><span class="sxs-lookup"><span data-stu-id="91a17-194">Dynamic activities are one way to define an activity that contains arguments using code, but activities can also be created in code and compiled into types.</span></span> <span data-ttu-id="91a17-195">Öğesinden türetilen basit etkinlikleri oluşturulabilir <xref:System.Activities.CodeActivity>ve türetilen zaman uyumsuz etkinlikleri <xref:System.Activities.AsyncCodeActivity>.</span><span class="sxs-lookup"><span data-stu-id="91a17-195">Simple activities can be created that derive from <xref:System.Activities.CodeActivity>, and asynchronous activities that derive from <xref:System.Activities.AsyncCodeActivity>.</span></span> <span data-ttu-id="91a17-196">Bu etkinlikler dönüş değerleri ve kesinlik temelli kod kullanarak kendi mantığını tanımlamak bağımsız değişkenler, olabilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-196">These activities can have arguments, return values, and define their logic using imperative code.</span></span> <span data-ttu-id="91a17-197">Bu tür etkinlikler oluşturma örnekler için bkz: [CodeActivity temel sınıf](../../../docs/framework/windows-workflow-foundation/workflow-activity-authoring-using-the-codeactivity-class.md) ve [oluşturma zaman uyumsuz etkinlikleri](../../../docs/framework/windows-workflow-foundation/creating-asynchronous-activities-in-wf.md).</span><span class="sxs-lookup"><span data-stu-id="91a17-197">For examples of creating these types of activities, see [CodeActivity Base Class](../../../docs/framework/windows-workflow-foundation/workflow-activity-authoring-using-the-codeactivity-class.md) and [Creating Asynchronous Activities](../../../docs/framework/windows-workflow-foundation/creating-asynchronous-activities-in-wf.md).</span></span>  
  
 <span data-ttu-id="91a17-198">Öğesinden türetilen etkinlikleri <xref:System.Activities.NativeActivity> kesinlik temelli kod kullanarak kendi mantığı tanımlayabilir ve mantığını tanımlayan alt etkinlikler de içerebilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-198">Activities that derive from <xref:System.Activities.NativeActivity> can define their logic using imperative code and they can also contain child activities that define the logic.</span></span> <span data-ttu-id="91a17-199">Ayrıca tam yer işaretleri oluşturma gibi çalışma zamanı özelliklerine erişimi.</span><span class="sxs-lookup"><span data-stu-id="91a17-199">They also have full access to the features of the runtime such as creating bookmarks.</span></span> <span data-ttu-id="91a17-200">Oluşturma örnekler bir <xref:System.Activities.NativeActivity>-etkinlik, temel bkz [NativeActivity temel sınıf](../../../docs/framework/windows-workflow-foundation/nativeactivity-base-class.md), [nasıl yapılır: bir etkinlik oluşturmak](../../../docs/framework/windows-workflow-foundation/how-to-create-an-activity.md)ve [özel kullanarak yerel etkinliğiniBileşik](../../../docs/framework/windows-workflow-foundation/samples/custom-composite-using-native-activity.md)örnek.</span><span class="sxs-lookup"><span data-stu-id="91a17-200">For examples of creating a <xref:System.Activities.NativeActivity>-based activity, see [NativeActivity Base Class](../../../docs/framework/windows-workflow-foundation/nativeactivity-base-class.md), [How to: Create an Activity](../../../docs/framework/windows-workflow-foundation/how-to-create-an-activity.md), and the [Custom Composite using Native Activity](../../../docs/framework/windows-workflow-foundation/samples/custom-composite-using-native-activity.md) sample.</span></span>  
  
 <span data-ttu-id="91a17-201">Öğesinden türetilen etkinlikleri <xref:System.Activities.Activity> yalnızca alt etkinlikleri ile bunların mantığı tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="91a17-201">Activities that derive from <xref:System.Activities.Activity> define their logic solely through the use of child activities.</span></span> <span data-ttu-id="91a17-202">Bu etkinlikler iş akışı Tasarımcısı kullanarak genellikle oluşturulur, ancak kod kullanılarak da tanımlanabilir.</span><span class="sxs-lookup"><span data-stu-id="91a17-202">These activities are typically created by using the workflow designer, but can also be defined by using code.</span></span> <span data-ttu-id="91a17-203">Aşağıdaki örnekte, bir `Square` etkinlik tanımlanmış türeyen `Activity<int>`.</span><span class="sxs-lookup"><span data-stu-id="91a17-203">In the following example, a `Square` activity is defined that derives from `Activity<int>`.</span></span> <span data-ttu-id="91a17-204">`Square` Etkinlik sahip tek bir <xref:System.Activities.InArgument%601> adlı `Value`ve belirterek, mantığını tanımlayan bir <xref:System.Activities.Statements.Sequence> kullanarak etkinliğini <xref:System.Activities.Activity.Implementation%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="91a17-204">The `Square` activity has a single <xref:System.Activities.InArgument%601> named `Value`, and defines its logic by specifying a <xref:System.Activities.Statements.Sequence> activity using the <xref:System.Activities.Activity.Implementation%2A> property.</span></span> <span data-ttu-id="91a17-205"><xref:System.Activities.Statements.Sequence> Etkinlik içeren bir <xref:System.Activities.Statements.WriteLine> etkinliği ve bir <xref:System.Activities.Statements.Assign%601> etkinlik.</span><span class="sxs-lookup"><span data-stu-id="91a17-205">The <xref:System.Activities.Statements.Sequence> activity contains a <xref:System.Activities.Statements.WriteLine> activity and an <xref:System.Activities.Statements.Assign%601> activity.</span></span> <span data-ttu-id="91a17-206">Birlikte, bu üç etkinlikler mantığını uygulamak `Square` etkinlik.</span><span class="sxs-lookup"><span data-stu-id="91a17-206">Together, these three activities implement the logic of the `Square` activity.</span></span>  
  
```csharp  
class Square : Activity<int>  
{  
    [RequiredArgument]  
    public InArgument<int> Value { get; set; }  
  
    public Square()  
    {  
        this.Implementation = () => new Sequence  
        {  
            Activities =  
            {  
                new WriteLine  
                {  
                    Text = new InArgument<string>((env) => "Squaring the value: " + this.Value.Get(env))  
                },  
                new Assign<int>  
                {  
                    To = new OutArgument<int>((env) => this.Result.Get(env)),  
                    Value = new InArgument<int>((env) => this.Value.Get(env) * this.Value.Get(env))  
                }  
            }  
        };  
    }  
}  
```  
  
 <span data-ttu-id="91a17-207">Aşağıdaki örnekte, bir tek oluşan bir iş akışı tanımı `Square` etkinliğini kullanarak çağrıldığında <xref:System.Activities.WorkflowInvoker>.</span><span class="sxs-lookup"><span data-stu-id="91a17-207">In the following example, a workflow definition consisting of a single `Square` activity is invoked using <xref:System.Activities.WorkflowInvoker>.</span></span>  
  
```csharp  
Dictionary<string, object> inputs = new Dictionary<string, object> {{ "Value", 5}};  
int result = WorkflowInvoker.Invoke(new Square(), inputs);  
Console.WriteLine("Result: {0}", result);  
```  
  
 <span data-ttu-id="91a17-208">İş akışı çağrıldığında, aşağıdaki çıktıyı konsola görüntülenir:</span><span class="sxs-lookup"><span data-stu-id="91a17-208">When the workflow is invoked, the following output is displayed to the console:</span></span>  
  
 <span data-ttu-id="91a17-209">**Değer karesini: 5**</span><span class="sxs-lookup"><span data-stu-id="91a17-209">**Squaring the value: 5**</span></span>  
<span data-ttu-id="91a17-210">**Sonuç: 25**</span><span class="sxs-lookup"><span data-stu-id="91a17-210">**Result: 25**</span></span>
