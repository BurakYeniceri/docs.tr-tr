---
title: "Gölge Kopyalama Derlemeleri"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-bcl
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- assemblies [.NET Framework], shadow copying
- application domains, shadow copying assemblies
- shadow copying assemblies
ms.assetid: de8b8759-fca7-4260-896b-5a4973157672
caps.latest.revision: "15"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 611af6226e28369c30b251a23e901c140433808a
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/22/2017
---
# <a name="shadow-copying-assemblies"></a><span data-ttu-id="d5d41-102">Gölge Kopyalama Derlemeleri</span><span class="sxs-lookup"><span data-stu-id="d5d41-102">Shadow Copying Assemblies</span></span>
<span data-ttu-id="d5d41-103">Uygulama etki alanı kaldırılması olmadan güncelleştirilmesi için bir uygulama etki alanında kullanılan etkinleştirir derlemeleri kopyalama gölge.</span><span class="sxs-lookup"><span data-stu-id="d5d41-103">Shadow copying enables assemblies that are used in an application domain to be updated without unloading the application domain.</span></span> <span data-ttu-id="d5d41-104">Bu, özellikle ASP.NET siteleri gibi sürekli olarak kullanılabilir olması gereken uygulamalar için yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="d5d41-104">This is particularly useful for applications that must be available continuously, such as ASP.NET sites.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="d5d41-105">Gölge kopyalama desteklenmez [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] uygulamalar.</span><span class="sxs-lookup"><span data-stu-id="d5d41-105">Shadow copying is not supported in [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] apps.</span></span>  
  
 <span data-ttu-id="d5d41-106">Ortak dil çalışma zamanı derlemesi bellekten kaldırılana kadar dosya güncelleştirilemiyor için derleme, yüklendiğinde bir derleme dosyası kilitler.</span><span class="sxs-lookup"><span data-stu-id="d5d41-106">The common language runtime locks an assembly file when the assembly is loaded, so the file cannot be updated until the assembly is unloaded.</span></span> <span data-ttu-id="d5d41-107">Uygulama etki alanı kaldırarak bütünleştirilmiş uygulama etki alanından kaldırmak için tek yolu olduğundan, kullanmakta olduğunuz tüm uygulama etki alanları kadar normal koşullar altında bir derleme diskte güncelleştirilemiyor şekilde onu kaldırıldı.</span><span class="sxs-lookup"><span data-stu-id="d5d41-107">The only way to unload an assembly from an application domain is by unloading the application domain, so under normal circumstances, an assembly cannot be updated on disk until all the application domains that are using it have been unloaded.</span></span>  
  
 <span data-ttu-id="d5d41-108">Uygulama etki alanı gölge kopyaları için yapılandırıldığında, uygulama yolu derlemelerden başka bir konuma kopyalanır ve o konumdan yüklendi.</span><span class="sxs-lookup"><span data-stu-id="d5d41-108">When an application domain is configured to shadow copy files, assemblies from the application path are copied to another location and loaded from that location.</span></span> <span data-ttu-id="d5d41-109">Kopya kilitli, ancak özgün derleme dosyası kilidinin açık olduğundan ve güncelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="d5d41-109">The copy is locked, but the original assembly file is unlocked and can be updated.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="d5d41-110">Bu uygulama dizini içinde depolanan veya tarafından belirtilen alt dizinlerinde gölge kopya olabilir yalnızca derlemeleri olan <xref:System.AppDomainSetup.ApplicationBase%2A> ve <xref:System.AppDomainSetup.PrivateBinPath%2A> uygulama etki alanı yapılandırıldığında özellikleri.</span><span class="sxs-lookup"><span data-stu-id="d5d41-110">The only assemblies that can be shadow copied are those stored in the application directory or its subdirectories, specified by the <xref:System.AppDomainSetup.ApplicationBase%2A> and <xref:System.AppDomainSetup.PrivateBinPath%2A> properties when the application domain is configured.</span></span> <span data-ttu-id="d5d41-111">Derlemeleri genel derleme önbelleğinde depolanan gölge kopya değildir.</span><span class="sxs-lookup"><span data-stu-id="d5d41-111">Assemblies stored in the global assembly cache are not shadow copied.</span></span>  
  
 <span data-ttu-id="d5d41-112">Bu makalede aşağıdaki bölümleri içerir:</span><span class="sxs-lookup"><span data-stu-id="d5d41-112">This article contains the following sections:</span></span>  
  
-   <span data-ttu-id="d5d41-113">[Etkinleştirme ve kullanma gölge kopyalama](#EnablingAndUsing) temel kullanım ve gölge kopyalama için kullanılabilir seçenekleri açıklar.</span><span class="sxs-lookup"><span data-stu-id="d5d41-113">[Enabling and Using Shadow Copying](#EnablingAndUsing) describes the basic use and the options that are available for shadow copying.</span></span>  
  
-   <span data-ttu-id="d5d41-114">[Başlangıç performans](#StartupPerformance) içinde kopyalama gölge yapılan değişiklikleri açıklar [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] başlangıç performansı ve önceki sürümleri davranışını dönmek nasıl artırmak için.</span><span class="sxs-lookup"><span data-stu-id="d5d41-114">[Startup Performance](#StartupPerformance) describes the changes that are made to shadow copying in the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] to improve startup performance, and how to revert to the behavior of earlier versions.</span></span>  
  
-   <span data-ttu-id="d5d41-115">[Yöntemleri geçersiz](#ObsoleteMethods) özellikleri ve yöntemleri için bu denetim gölge içinde kopyalama yapılan değişiklikleri açıklar [!INCLUDE[dnprdnlong](../../../includes/dnprdnlong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d5d41-115">[Obsolete Methods](#ObsoleteMethods) describes the changes that were made to the properties and methods that control shadow copying in the [!INCLUDE[dnprdnlong](../../../includes/dnprdnlong-md.md)].</span></span>  
  
<a name="EnablingAndUsing"></a>   
## <a name="enabling-and-using-shadow-copying"></a><span data-ttu-id="d5d41-116">Gölge Kopyalamayı Etkinleştirme ve Kullanma</span><span class="sxs-lookup"><span data-stu-id="d5d41-116">Enabling and Using Shadow Copying</span></span>  
 <span data-ttu-id="d5d41-117">Özelliklerini kullanabilirsiniz <xref:System.AppDomainSetup> sınıfı şu şekilde gölge kopyalama için uygulama etki alanını yapılandırmak için:</span><span class="sxs-lookup"><span data-stu-id="d5d41-117">You can use the properties of the <xref:System.AppDomainSetup> class as follows to configure an application domain for shadow copying:</span></span>  
  
-   <span data-ttu-id="d5d41-118">Ayarlayarak kopyalama etkinleştir gölge <xref:System.AppDomainSetup.ShadowCopyFiles%2A> dize değeri özelliğine `"true"`.</span><span class="sxs-lookup"><span data-stu-id="d5d41-118">Enable shadow copying by setting the <xref:System.AppDomainSetup.ShadowCopyFiles%2A> property to the string value `"true"`.</span></span>  
  
     <span data-ttu-id="d5d41-119">Varsayılan olarak, bu ayarı tüm derlemelerde yüklenmeden önce bir yükleme önbelleğine kopyalanacak uygulama yolu neden olur.</span><span class="sxs-lookup"><span data-stu-id="d5d41-119">By default, this setting causes all assemblies in the application path to be copied to a download cache before they are loaded.</span></span> <span data-ttu-id="d5d41-120">Bu diğer bilgisayarlardan indirilen dosyaları depolamak için ortak dil çalışma zamanı tarafından tutulan aynı önbellek ve artık gerekmediğinde ortak dil çalışma zamanı dosyaları otomatik olarak siler.</span><span class="sxs-lookup"><span data-stu-id="d5d41-120">This is the same cache maintained by the common language runtime to store files downloaded from other computers, and the common language runtime automatically deletes the files when they are no longer needed.</span></span>  
  
-   <span data-ttu-id="d5d41-121">İsteğe bağlı olarak kullanarak gölge kopya dosyaları için özel konum ayarlamak <xref:System.AppDomainSetup.CachePath%2A> özelliği ve <xref:System.AppDomainSetup.ApplicationName%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="d5d41-121">Optionally set a custom location for shadow copied files by using the <xref:System.AppDomainSetup.CachePath%2A> property and the <xref:System.AppDomainSetup.ApplicationName%2A> property.</span></span>  
  
     <span data-ttu-id="d5d41-122">Konumu için temel yolu birleştirerek biçimlendirildiğinden <xref:System.AppDomainSetup.ApplicationName%2A> özelliğine <xref:System.AppDomainSetup.CachePath%2A> özelliği olarak bir alt dizin.</span><span class="sxs-lookup"><span data-stu-id="d5d41-122">The base path for the location is formed by concatenating the <xref:System.AppDomainSetup.ApplicationName%2A> property to the <xref:System.AppDomainSetup.CachePath%2A> property as a subdirectory.</span></span> <span data-ttu-id="d5d41-123">Derlemeleri temel yolu için değil bu yolun alt dizinlere Gölge ' dir.</span><span class="sxs-lookup"><span data-stu-id="d5d41-123">Assemblies are shadow copied to subdirectories of this path, not to the base path itself.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="d5d41-124">Varsa <xref:System.AppDomainSetup.ApplicationName%2A> özelliği ayarlı değil, <xref:System.AppDomainSetup.CachePath%2A> özelliği gözardı edilir ve yükleme önbellek kullanılır.</span><span class="sxs-lookup"><span data-stu-id="d5d41-124">If the <xref:System.AppDomainSetup.ApplicationName%2A> property is not set, the <xref:System.AppDomainSetup.CachePath%2A> property is ignored and the download cache is used.</span></span> <span data-ttu-id="d5d41-125">Hiçbir özel durum oluşur.</span><span class="sxs-lookup"><span data-stu-id="d5d41-125">No exception is thrown.</span></span>  
  
     <span data-ttu-id="d5d41-126">Özel bir konuma belirtirseniz, dizinler temizleniyor sorumludur ve artık gerekmediğinde dosyalar kopyalanır.</span><span class="sxs-lookup"><span data-stu-id="d5d41-126">If you specify a custom location, you are responsible for cleaning up the directories and copied files when they are no longer needed.</span></span> <span data-ttu-id="d5d41-127">Otomatik olarak silinmez.</span><span class="sxs-lookup"><span data-stu-id="d5d41-127">They are not deleted automatically.</span></span>  
  
     <span data-ttu-id="d5d41-128">Neden gölge kopya dosyaları için özel konum ayarlamak isteyebilirsiniz birkaç nedeni vardır.</span><span class="sxs-lookup"><span data-stu-id="d5d41-128">There are a few reasons why you might want to set a custom location for shadow copied files.</span></span> <span data-ttu-id="d5d41-129">Uygulamanız çok sayıda kopya oluşturursa gölge kopya dosyaları için özel konum ayarlamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d5d41-129">You might want to set a custom location for shadow copied files if your application generates a large number of copies.</span></span> <span data-ttu-id="d5d41-130">Ortak dil çalışma zamanı hala kullanımda olan bir dosyayı silmek dener mümkün olması için yükleme önbellek ömrünü tarafından değil, boyuta göre sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="d5d41-130">The download cache is limited by size, not by lifetime, so it is possible that the common language runtime will attempt to delete a file that is still in use.</span></span> <span data-ttu-id="d5d41-131">Özel konum ayarlamak için başka bir nedeni, uygulamanızı çalıştıran kullanıcılar ortak dil çalışma zamanı yükleme önbelleğine kullanan dizin konuma yazma erişimi olmadığında olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="d5d41-131">Another reason to set a custom location is when users running your application do not have write access to the directory location the common language runtime uses for the download cache.</span></span>  
  
-   <span data-ttu-id="d5d41-132">İsteğe bağlı olarak kullanarak gölge kopyası derlemeleri sınırlamak <xref:System.AppDomainSetup.ShadowCopyDirectories%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="d5d41-132">Optionally limit the assemblies that are shadow copied by using the <xref:System.AppDomainSetup.ShadowCopyDirectories%2A> property.</span></span>  
  
     <span data-ttu-id="d5d41-133">Uygulama etki alanı için gölge kopyalama etkinleştirdiğinizde, varsayılan tüm derlemelerde uygulama yolu kopyalamaktır — diğer bir deyişle, dizinler belirtilen tarafından <xref:System.AppDomainSetup.ApplicationBase%2A> ve <xref:System.AppDomainSetup.PrivateBinPath%2A> özellikleri.</span><span class="sxs-lookup"><span data-stu-id="d5d41-133">When you enable shadow copying for an application domain, the default is to copy all assemblies in the application path — that is, in the directories specified by the <xref:System.AppDomainSetup.ApplicationBase%2A> and <xref:System.AppDomainSetup.PrivateBinPath%2A> properties.</span></span> <span data-ttu-id="d5d41-134">Yalnızca gölge kopyaya istediğiniz dizinleri içeren bir dize oluşturma ve dizeye atayarak seçili dizinleri kopyalama sınırlayabilirsiniz <xref:System.AppDomainSetup.ShadowCopyDirectories%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="d5d41-134">You can limit the copying to selected directories by creating a string that contains only those directories you want to shadow copy, and assigning the string to the <xref:System.AppDomainSetup.ShadowCopyDirectories%2A> property.</span></span> <span data-ttu-id="d5d41-135">Dizinleri noktalı virgülle ayırın.</span><span class="sxs-lookup"><span data-stu-id="d5d41-135">Separate the directories with semicolons.</span></span> <span data-ttu-id="d5d41-136">Gölge kopyası yalnızca derlemeleri seçili dizinlerde olanlardır.</span><span class="sxs-lookup"><span data-stu-id="d5d41-136">The only assemblies that are shadow copied are the ones in the selected directories.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="d5d41-137">Bir dizeyi atamazsanız <xref:System.AppDomainSetup.ShadowCopyDirectories%2A> özelliği veya bu özelliği ayarlamak `null`, tüm derlemelerde tarafından belirtilen dizin <xref:System.AppDomainSetup.ApplicationBase%2A> ve <xref:System.AppDomainSetup.PrivateBinPath%2A> özelliklerdir gölge kopya.</span><span class="sxs-lookup"><span data-stu-id="d5d41-137">If you don’t assign a string to the <xref:System.AppDomainSetup.ShadowCopyDirectories%2A> property, or if you set this property to `null`, all assemblies in the directories specified by the <xref:System.AppDomainSetup.ApplicationBase%2A> and <xref:System.AppDomainSetup.PrivateBinPath%2A> properties are shadow copied.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="d5d41-138">Noktalı virgül sınırlayıcı karakter olduğundan dizin yolu noktalı virgül, içermemelidir.</span><span class="sxs-lookup"><span data-stu-id="d5d41-138">Directory paths must not contain semicolons, because the semicolon is the delimiter character.</span></span> <span data-ttu-id="d5d41-139">Noktalı virgül hiçbir kaçış karakteri yoktur.</span><span class="sxs-lookup"><span data-stu-id="d5d41-139">There is no escape character for semicolons.</span></span>  
  
<a name="StartupPerformance"></a>   
## <a name="startup-performance"></a><span data-ttu-id="d5d41-140">Başlangıç Performansı</span><span class="sxs-lookup"><span data-stu-id="d5d41-140">Startup Performance</span></span>  
 <span data-ttu-id="d5d41-141">Gölge kopyalama kullanan bir uygulama etki alanı başladığında, bir gecikme olur uygulama dizinindeki derlemeler gölge kopya dizinine kopyalanır veya bunların zaten bu konumda olup olmadığını doğrulandı.</span><span class="sxs-lookup"><span data-stu-id="d5d41-141">When an application domain that uses shadow copying starts, there is a delay while assemblies in the application directory are copied to the shadow copy directory, or verified if they are already in that location.</span></span> <span data-ttu-id="d5d41-142">Önce [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], tüm derlemelerde geçici bir dizine kopyalandı.</span><span class="sxs-lookup"><span data-stu-id="d5d41-142">Before the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], all assemblies were copied to a temporary directory.</span></span> <span data-ttu-id="d5d41-143">Her derlemenin derleme adı doğrulamak için açıldı ve güçlü ad doğrulandı.</span><span class="sxs-lookup"><span data-stu-id="d5d41-143">Each assembly was opened to verify the assembly name, and the strong name was validated.</span></span> <span data-ttu-id="d5d41-144">Her derleme, bu daha yakın zamanda gölge kopya dizin kopyalama güncelleştirilmişse olup olmadığını görmek için işaretlenmedi.</span><span class="sxs-lookup"><span data-stu-id="d5d41-144">Each assembly was checked to see whether it had been updated more recently than the copy in the shadow copy directory.</span></span> <span data-ttu-id="d5d41-145">Bu durumda, gölge kopya dizinine kopyalandı.</span><span class="sxs-lookup"><span data-stu-id="d5d41-145">If so, it was copied to the shadow copy directory.</span></span> <span data-ttu-id="d5d41-146">Son olarak, geçici kopya atıldı.</span><span class="sxs-lookup"><span data-stu-id="d5d41-146">Finally, the temporary copies were discarded.</span></span>  
  
 <span data-ttu-id="d5d41-147">İle başlayarak [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], varsayılan başlangıç dosya tarihi ve her derleme dosyası tarihi ile uygulama dizinindeki süreleri ve gölge kopya dizininde kopyasının süresi doğrudan Karşılaştırılacak davranıştır.</span><span class="sxs-lookup"><span data-stu-id="d5d41-147">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the default startup behavior is to directly compare the file date and time of each assembly in the application directory with the file date and time of the copy in the shadow copy directory.</span></span> <span data-ttu-id="d5d41-148">Derleme güncelleştirilmişse, .NET Framework'ün önceki sürümlerinde olduğu gibi yordamın aynısını kullanarak kopyalanır; Aksi takdirde, gölge kopya dizin kopyalama yüklenir.</span><span class="sxs-lookup"><span data-stu-id="d5d41-148">If the assembly has been updated, it is copied by using the same procedure as in earlier versions of the .NET Framework; otherwise, the copy in the shadow copy directory is loaded.</span></span>  
  
 <span data-ttu-id="d5d41-149">Sonuçta elde edilen performans geliştirmesi derlemeleri sık değiştirmeyin ve genellikle derlemeleri küçük bir alt değişikliklerden uygulamalar için en büyük.</span><span class="sxs-lookup"><span data-stu-id="d5d41-149">The resulting performance improvement is largest for applications in which assemblies do not change frequently and changes usually occur in a small subset of assemblies.</span></span> <span data-ttu-id="d5d41-150">Bir uygulama değişikliği sık derlemelerde çoğunu, yeni varsayılan davranış performans regresyon neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="d5d41-150">If a majority of assemblies in an application change frequently, the new default behavior might cause a performance regression.</span></span> <span data-ttu-id="d5d41-151">.NET Framework'ün önceki sürümlerini başlangıç davranışını ekleyerek geri [ \<shadowCopyVerifyByTimestamp > öğesi](../../../docs/framework/configure-apps/file-schema/runtime/shadowcopyverifybytimestamp-element.md) yapılandırma dosyasına ile `enabled="false"`.</span><span class="sxs-lookup"><span data-stu-id="d5d41-151">You can restore the startup behavior of previous versions of the .NET Framework by adding the [\<shadowCopyVerifyByTimestamp> element](../../../docs/framework/configure-apps/file-schema/runtime/shadowcopyverifybytimestamp-element.md) to the configuration file, with `enabled="false"`.</span></span>  
  
<a name="ObsoleteMethods"></a>   
## <a name="obsolete-methods"></a><span data-ttu-id="d5d41-152">Eski Yöntemler</span><span class="sxs-lookup"><span data-stu-id="d5d41-152">Obsolete Methods</span></span>  
 <span data-ttu-id="d5d41-153"><xref:System.AppDomain> Sınıfına sahip çeşitli yöntemler gibi <xref:System.AppDomain.SetShadowCopyFiles%2A> ve <xref:System.AppDomain.ClearShadowCopyPath%2A>uygulama etki alanı üzerinde gölge kopyalama denetlemek için kullanılabilir ancak bunlar .NET Framework sürüm 2.0 geçersiz olarak işaretlendi.</span><span class="sxs-lookup"><span data-stu-id="d5d41-153">The <xref:System.AppDomain> class has several methods, such as <xref:System.AppDomain.SetShadowCopyFiles%2A> and <xref:System.AppDomain.ClearShadowCopyPath%2A>, that can be used to control shadow copying on an application domain, but these have been marked obsolete in the .NET Framework version 2.0.</span></span> <span data-ttu-id="d5d41-154">Gölge kopyalama özelliklerini kullanmak için uygulama etki alanını yapılandırmak için önerilen yöntem <xref:System.AppDomainSetup> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="d5d41-154">The recommended way to configure an application domain for shadow copying is to use the properties of the <xref:System.AppDomainSetup> class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d5d41-155">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="d5d41-155">See Also</span></span>  
 <xref:System.AppDomainSetup.ShadowCopyFiles%2A?displayProperty=nameWithType>  
 <xref:System.AppDomainSetup.CachePath%2A?displayProperty=nameWithType>  
 <xref:System.AppDomainSetup.ApplicationName%2A?displayProperty=nameWithType>  
 <xref:System.AppDomainSetup.ShadowCopyDirectories%2A?displayProperty=nameWithType>  
 [<span data-ttu-id="d5d41-156">\<shadowCopyVerifyByTimestamp > öğesi</span><span class="sxs-lookup"><span data-stu-id="d5d41-156">\<shadowCopyVerifyByTimestamp> Element</span></span>](../../../docs/framework/configure-apps/file-schema/runtime/shadowcopyverifybytimestamp-element.md)
