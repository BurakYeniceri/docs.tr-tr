---
title: Durum ve Docker uygulamalarda verileri
description: "Kapsayıcılı .NET uygulamaları için .NET mikro mimarisi | Durum ve Docker uygulamalarda verileri"
keywords: "Docker, mikro, ASP.NET, kapsayıcı, SQL, CosmosDB, Docker"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: ef11d89c39ee02d52dab29f949d1ac6be981d87f
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/23/2017
---
# <a name="state-and-data-in-docker-applications"></a><span data-ttu-id="955e3-104">Durum ve Docker uygulamalarda verileri</span><span class="sxs-lookup"><span data-stu-id="955e3-104">State and data in Docker applications</span></span>

<span data-ttu-id="955e3-105">Çoğu durumda, kapsayıcı bir işlem örneği olarak düşünebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="955e3-105">In most cases, you can think of a container as an instance of a process.</span></span> <span data-ttu-id="955e3-106">Bir işlem kalıcı durumunu tutmaz.</span><span class="sxs-lookup"><span data-stu-id="955e3-106">A process does not maintain persistent state.</span></span> <span data-ttu-id="955e3-107">Yerel depolama alanı için bir kapsayıcı yazabilirsiniz olsa da, bir örneği çevresinde süresiz olarak olacağını varsayılarak bellek tek bir konumda dayanıklı olmasını varsayılarak gibi olacaktır.</span><span class="sxs-lookup"><span data-stu-id="955e3-107">While a container can write to its local storage, assuming that an instance will be around indefinitely would be like assuming that a single location in memory will be durable.</span></span> <span data-ttu-id="955e3-108">İşlemleri gibi kapsayıcı görüntüleri kabul birden çok örneğe sahip veya bunlar sonunda sonlandırılacak; bir kapsayıcı orchestrator ile yönetilen varsa, bunlar bir düğüm veya VM diğerine taşınabilir olduğunu kabul edilmelidir.</span><span class="sxs-lookup"><span data-stu-id="955e3-108">Container images, like processes, should be assumed to have multiple instances or that they will eventually be killed; if they’re managed with a container orchestrator, it should be assumed that they might get moved from one node or VM to another.</span></span>

<span data-ttu-id="955e3-109">Docker adlı bir özellik sağlar *kaplama dosya sistemi*.</span><span class="sxs-lookup"><span data-stu-id="955e3-109">Docker provides a feature named the *overlay file system*.</span></span> <span data-ttu-id="955e3-110">Depoları kapsayıcı kök dosya sistemine bilgi güncelleştirilmiş bir yazarken kopyalama görevi uygular.</span><span class="sxs-lookup"><span data-stu-id="955e3-110">This implements a copy-on-write task that stores updated information to the root file system of the container.</span></span> <span data-ttu-id="955e3-111">Bu ayrıca kapsayıcı dayandığı özgün görüntüsüne bilgilerdir.</span><span class="sxs-lookup"><span data-stu-id="955e3-111">That information is in addition to the original image on which the container is based.</span></span> <span data-ttu-id="955e3-112">Kapsayıcı sistemden silinirse, bu değişiklikler kaybolur.</span><span class="sxs-lookup"><span data-stu-id="955e3-112">If the container is deleted from the system, those changes are lost.</span></span> <span data-ttu-id="955e3-113">Yerel depolama alanı içindeki bir kapsayıcı durumunu kaydetmek mümkün olsa da, bu nedenle, bu geçici bir sistem tasarlama, durum bilgisiz varsayılan kapsayıcı tasarım, şirket içi ile çakışabilir.</span><span class="sxs-lookup"><span data-stu-id="955e3-113">Therefore, while it is possible to save the state of a container within its local storage, designing a system around this would conflict with the premise of container design, which by default is stateless.</span></span>

<span data-ttu-id="955e3-114">Aşağıdaki çözümlerde, Docker uygulamaları kalıcı verileri yönetmek için kullanılır:</span><span class="sxs-lookup"><span data-stu-id="955e3-114">The following solutions are used to manage persistent data in Docker applications:</span></span>

-   <span data-ttu-id="955e3-115">[Veri birimleri](https://docs.docker.com/engine/tutorials/dockervolumes/) ana bilgisayara bağlayın.</span><span class="sxs-lookup"><span data-stu-id="955e3-115">[Data volumes](https://docs.docker.com/engine/tutorials/dockervolumes/) that mount to the host.</span></span>

-   <span data-ttu-id="955e3-116">[Veri birim kapsayıcıları](https://docs.docker.com/engine/tutorials/dockervolumes/#creating-and-mounting-a-data-volume-container) dış bir kapsayıcı kullanılarak kapsayıcıları arasında paylaşılan depolama birimi sağlayın.</span><span class="sxs-lookup"><span data-stu-id="955e3-116">[Data volume containers](https://docs.docker.com/engine/tutorials/dockervolumes/#creating-and-mounting-a-data-volume-container) that provide shared storage across containers using an external container.</span></span>

-   <span data-ttu-id="955e3-117">[Birim eklentileri](https://docs.docker.com/engine/tutorials/dockervolumes/) uzun vadeli Kalıcılık sağlayan uzak Hizmetleri birimlere bağlayın.</span><span class="sxs-lookup"><span data-stu-id="955e3-117">[Volume plugins](https://docs.docker.com/engine/tutorials/dockervolumes/) that mount volumes to remote services, providing long-term persistence.</span></span>

-   <span data-ttu-id="955e3-118">[Azure depolama](https://docs.microsoft.com/azure/storage/), coğrafi dağıtılabilir depolama kapsayıcıları için iyi bir uzun vadeli Kalıcılık çözüm sağlayarak, sağlar.</span><span class="sxs-lookup"><span data-stu-id="955e3-118">[Azure Storage](https://docs.microsoft.com/azure/storage/), which provides geo-distributable storage, providing a good long-term persistence solution for containers.</span></span>

-   <span data-ttu-id="955e3-119">Uzak ilişkisel veritabanları ister [Azure SQL veritabanı](https://azure.microsoft.com/services/sql-database/) veya NoSQL veritabanları [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction), veya önbellek gibi hizmetler [Redis](https://redis.io/).</span><span class="sxs-lookup"><span data-stu-id="955e3-119">Remote relational databases like [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) or NoSQL databases like [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction), or cache services like [Redis](https://redis.io/).</span></span>

<span data-ttu-id="955e3-120">Bu seçenekler hakkında daha fazla ayrıntı sağlar.</span><span class="sxs-lookup"><span data-stu-id="955e3-120">The following provides more detail about these options.</span></span>

<span data-ttu-id="955e3-121">**Veri birimleri** olan konak işletim sistemi kapsayıcıları dizinlerde eşlenmiş dizinleri.</span><span class="sxs-lookup"><span data-stu-id="955e3-121">**Data volumes** are directories mapped from the host OS to directories in containers.</span></span> <span data-ttu-id="955e3-122">Ne zaman kapsayıcı kodda erişim gerçekte konak işletim sistemi için bir dizin için dizin, erişimi vardır.</span><span class="sxs-lookup"><span data-stu-id="955e3-122">When code in the container has access to the directory, that access is actually to a directory on the host OS.</span></span> <span data-ttu-id="955e3-123">Bu dizin için Kapsayıcının kendisi, kullanım ömrü bağlı değildir ve doğrudan konak üzerinde işletim sistemi çalıştıran kodundan dizin erişilebilir veya başka bir kapsayıcı, aynı ana dizin kendisine eşler.</span><span class="sxs-lookup"><span data-stu-id="955e3-123">This directory is not tied to the lifetime of the container itself, and the directory can be accessed from code running directly on the host OS or by another container that maps the same host directory to itself.</span></span> <span data-ttu-id="955e3-124">Bu nedenle, veri birimleri, veri kapsayıcısı'nın ömrü bağımsız olarak devam ettirmek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="955e3-124">Thus, data volumes are designed to persist data independently of the life of the container.</span></span> <span data-ttu-id="955e3-125">Bir kapsayıcı silmek ya da veri Docker ana görüntüden kalıcı hale veri hacmi silinmez.</span><span class="sxs-lookup"><span data-stu-id="955e3-125">If you delete a container or an image from the Docker host, the data persisted in the data volume is not deleted.</span></span> <span data-ttu-id="955e3-126">Bir birimdeki veriler ana bilgisayardan işletim sistemi de erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="955e3-126">The data in a volume can be accessed from the host OS as well.</span></span>

<span data-ttu-id="955e3-127">**Veri birim kapsayıcıları** normal veri birimlerini bir evrimi olan.</span><span class="sxs-lookup"><span data-stu-id="955e3-127">**Data volume containers** are an evolution of regular data volumes.</span></span> <span data-ttu-id="955e3-128">Veri birim kapsayıcısı içindeki bir veya daha fazla veri birimlerini içeren basit bir kapsayıcıdır.</span><span class="sxs-lookup"><span data-stu-id="955e3-128">A data volume container is a simple container that has one or more data volumes within it.</span></span> <span data-ttu-id="955e3-129">Veri birim kapsayıcısı, bir merkezi bağlama noktası kapsayıcılara erişim sağlar.</span><span class="sxs-lookup"><span data-stu-id="955e3-129">The data volume container provides access to containers from a central mount point.</span></span> <span data-ttu-id="955e3-130">Bu yöntem veri erişimi, özgün verilerin konumu soyutlar olduğundan kullanışlıdır.</span><span class="sxs-lookup"><span data-stu-id="955e3-130">This method of data access is convenient because it abstracts the location of the original data.</span></span> <span data-ttu-id="955e3-131">Uygulamanın kapsayıcıları yaşam döngüsü bağımsız olarak ayrılmış bu kapsayıcıda kalıcı veriler için dışındaki davranışını normal veri biriminin benzer.</span><span class="sxs-lookup"><span data-stu-id="955e3-131">Other than that, its behavior is similar to that of a regular data volume, so data is persisted in this dedicated container independently of the lifecycle of the application’s containers.</span></span>

<span data-ttu-id="955e3-132">Şekil 4-5'te gösterildiği gibi normal Docker birim kapsayıcıları kendilerini dışında ancak VM veya konak sunucunun fiziksel sınırları içinde depolanabilir.</span><span class="sxs-lookup"><span data-stu-id="955e3-132">As shown in Figure 4-5, regular Docker volumes can be stored outside of the containers themselves but within the physical boundaries of the host server or VM.</span></span> <span data-ttu-id="955e3-133">Ancak, Docker kapsayıcıları bir birimi bir konak sunucusu veya VM diğerine erişemez.</span><span class="sxs-lookup"><span data-stu-id="955e3-133">However, Docker containers cannot access a volume from one host server or VM to another.</span></span> <span data-ttu-id="955e3-134">Diğer bir deyişle, bu birimler, farklı Docker ana bilgisayarda çalıştırılan kapsayıcıları arasında paylaşılan verileri yönetmek mümkün değil</span><span class="sxs-lookup"><span data-stu-id="955e3-134">In other words, with these volumes, it is not possible to manage data shared between containers that run on different Docker hosts</span></span>

![](./media/image5.png)

<span data-ttu-id="955e3-135">**Şekil 4-5**.</span><span class="sxs-lookup"><span data-stu-id="955e3-135">**Figure 4-5**.</span></span> <span data-ttu-id="955e3-136">Veri birimleri ve kapsayıcı tabanlı uygulamalar için dış veri kaynakları</span><span class="sxs-lookup"><span data-stu-id="955e3-136">Data volumes and external data sources for container-based applications</span></span>

<span data-ttu-id="955e3-137">Docker kapsayıcıları bir orchestrator tarafından yönetildiğinde ek olarak, kapsayıcıları "Küme tarafından gerçekleştirilen iyileştirmeler bağlı olarak ana bilgisayar arasında taşımak".</span><span class="sxs-lookup"><span data-stu-id="955e3-137">In addition, when Docker containers are managed by an orchestrator, containers might “move” between hosts, depending on the optimizations performed by the cluster.</span></span> <span data-ttu-id="955e3-138">Bu nedenle, iş verilerini veri birimlerini kullanmak önerilmez.</span><span class="sxs-lookup"><span data-stu-id="955e3-138">Therefore, it is not recommended that you use data volumes for business data.</span></span> <span data-ttu-id="955e3-139">Ancak izleme dosyaları, zamana bağlı dosyaları ile çalışmak için iyi bir mekanizma oldukları veya benzer, iş veri tutarlılığını etkilemez.</span><span class="sxs-lookup"><span data-stu-id="955e3-139">But they are a good mechanism to work with trace files, temporal files, or similar that will not impact business data consistency.</span></span>

<span data-ttu-id="955e3-140">**Birim eklentileri** gibi [Flocker](https://clusterhq.com/flocker/) bir kümedeki tüm ana bilgisayarlar arasında veri erişim sağlar.</span><span class="sxs-lookup"><span data-stu-id="955e3-140">**Volume plugins** like [Flocker](https://clusterhq.com/flocker/) provide data access across all hosts in a cluster.</span></span> <span data-ttu-id="955e3-141">Tüm birim eklentileri eşit olarak oluşturulur, birim eklentileri genellikle externalized kalıcı güvenilir depodan değişmez kapsayıcıları sağlar.</span><span class="sxs-lookup"><span data-stu-id="955e3-141">While not all volume plugins are created equally, volume plugins typically provide externalized persistent reliable storage from immutable containers.</span></span>

<span data-ttu-id="955e3-142">**Uzak Veri kaynaklarını ve önbellek** Azure SQL Database, Azure Cosmos DB veya Redis kullanılabilir gibi uzak bir önbellek gibi araçlar kapsayıcılı uygulamaları bunlar kullanılır kapsayıcıları geliştirirken aynı şekilde.</span><span class="sxs-lookup"><span data-stu-id="955e3-142">**Remote data sources and cache** tools like Azure SQL Database, Azure Cosmos DB, or a remote cache like Redis can be used in containerized applications the same way they are used when developing without containers.</span></span> <span data-ttu-id="955e3-143">Bu, iş uygulama verilerini depolamak için kanıtlanmış bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="955e3-143">This is a proven way to store business application data.</span></span>

<span data-ttu-id="955e3-144">**Azure depolama.**</span><span class="sxs-lookup"><span data-stu-id="955e3-144">**Azure Storage.**</span></span> <span data-ttu-id="955e3-145">İş verileri genellikle dış kaynaklara veya veritabanları, Azure depolama gibi yerleştirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="955e3-145">Business data usually will need to be placed in external resources or databases, like Azure Storage.</span></span> <span data-ttu-id="955e3-146">Azure depolama, somut, bulutta aşağıdaki hizmetleri sağlar:</span><span class="sxs-lookup"><span data-stu-id="955e3-146">Azure Storage, in concrete, provides the following services in the cloud:</span></span>

-   <span data-ttu-id="955e3-147">BLOB storage yapılandırılmamış nesne verilerini depolar.</span><span class="sxs-lookup"><span data-stu-id="955e3-147">Blob storage stores unstructured object data.</span></span> <span data-ttu-id="955e3-148">Bir blob herhangi bir belge veya medya dosyaları (görüntüleri, ses ve video dosyaları) gibi metin veya ikili veri türü olabilir.</span><span class="sxs-lookup"><span data-stu-id="955e3-148">A blob can be any type of text or binary data, such as document or media files (images, audio, and video files).</span></span> <span data-ttu-id="955e3-149">BLOB storage ayrıca nesne depolama olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="955e3-149">Blob storage is also referred to as Object storage.</span></span>

-   <span data-ttu-id="955e3-150">File storage standart SMB protokolünü kullanan eski uygulamalar için paylaşılan depolama alanı sağlar.</span><span class="sxs-lookup"><span data-stu-id="955e3-150">File storage offers shared storage for legacy applications using standard SMB protocol.</span></span> <span data-ttu-id="955e3-151">Azure virtual machines ve cloud services bağlı paylaşımlar üzerinden uygulama bileşenleri arasında dosya verileri paylaşabilir.</span><span class="sxs-lookup"><span data-stu-id="955e3-151">Azure virtual machines and cloud services can share file data across application components via mounted shares.</span></span> <span data-ttu-id="955e3-152">Şirket içi uygulamalar dosya hizmeti REST API'si üzerinden dosya verilerine erişebilir.</span><span class="sxs-lookup"><span data-stu-id="955e3-152">On-premises applications can access file data in a share via the File service REST API.</span></span>

-   <span data-ttu-id="955e3-153">Table storage yapılandırılmış veri kümelerini depolar.</span><span class="sxs-lookup"><span data-stu-id="955e3-153">Table storage stores structured datasets.</span></span> <span data-ttu-id="955e3-154">Tablo depolama hızlı geliştirme ve çok miktarda veri hızlı erişim sağlayan bir NoSQL anahtar özniteliği veri deposudur.</span><span class="sxs-lookup"><span data-stu-id="955e3-154">Table storage is a NoSQL key-attribute data store, which allows rapid development and fast access to large quantities of data.</span></span>

<span data-ttu-id="955e3-155">**İlişkisel veritabanları ve NoSQL veritabanı.**</span><span class="sxs-lookup"><span data-stu-id="955e3-155">**Relational databases and NoSQL databases.**</span></span> <span data-ttu-id="955e3-156">Azure Cosmos DB, MongoDB, vb. gibi SQL Server, PostgreSQL, Oracle veya NoSQL veritabanları gibi ilişkisel veritabanlarından dış veritabanları için birçok seçeneğiniz vardır. Bu veritabanları, tamamen farklı bir konu olduğundan bu kılavuz bir parçası olarak açıklanması yapmayacağınız.</span><span class="sxs-lookup"><span data-stu-id="955e3-156">There are many choices for external databases, from relational databases like SQL Server, PostgreSQL, Oracle, or NoSQL databases like Azure Cosmos DB, MongoDB, etc. These databases are not going to be explained as part of this guide since they are in a completely different subject.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="955e3-157">[Önceki] (containerize-tek yapılı-applications.md) [sonraki] (hizmet-yönelimli-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="955e3-157">[Previous] (containerize-monolithic-applications.md) [Next] (service-oriented-architecture.md)</span></span>
