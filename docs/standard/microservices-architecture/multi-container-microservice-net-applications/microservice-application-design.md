---
title: Mikro hizmet odaklı bir uygulama tasarlama
description: Kapsayıcılı .NET uygulamaları için .NET mikro hizmet mimarisi | Mikro hizmet odaklı bir uygulama tasarlama
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.openlocfilehash: 4adf7e759d4475d0bb9b3aa0abe8dbdc5e57edd3
ms.sourcegitcommit: c7f3e2e9d6ead6cc3acd0d66b10a251d0c66e59d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 09/08/2018
ms.locfileid: "44205094"
---
# <a name="designing-a-microservice-oriented-application"></a><span data-ttu-id="c05ae-103">Mikro hizmet odaklı bir uygulama tasarlama</span><span class="sxs-lookup"><span data-stu-id="c05ae-103">Designing a microservice-oriented application</span></span>

<span data-ttu-id="c05ae-104">Bu bölüm, bir kuramsal sunucu tarafı Kurumsal uygulama geliştirmeye odaklanır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-104">This section focuses on developing a hypothetical server-side enterprise application.</span></span>

## <a name="application-specifications"></a><span data-ttu-id="c05ae-105">Uygulama özellikleri</span><span class="sxs-lookup"><span data-stu-id="c05ae-105">Application specifications</span></span>

<span data-ttu-id="c05ae-106">Kuramsal bir uygulamanın iş mantığı yürütme veritabanlarına erişme ve ardından HTML, JSON veya XML yanıtlar döndüren isteklerini işler.</span><span class="sxs-lookup"><span data-stu-id="c05ae-106">The hypothetical application handles requests by executing business logic, accessing databases, and then returning HTML, JSON, or XML responses.</span></span> <span data-ttu-id="c05ae-107">Uygulama istemciler, tek sayfa uygulamaları (Spa'lar), geleneksel web uygulamaları, mobil web uygulamaları ve yerel mobil uygulamalar çalıştıran masaüstü tarayıcıları dahil olmak üzere çeşitli desteklemelidir dediğimiz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-107">We will say that the application must support a variety of clients, including desktop browsers running Single Page Applications (SPAs), traditional web apps, mobile web apps, and native mobile apps.</span></span> <span data-ttu-id="c05ae-108">Uygulama, üçüncü tarafların kullanmak için bir API de doğurabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-108">The application might also expose an API for third parties to consume.</span></span> <span data-ttu-id="c05ae-109">Böylece yaklaşım dayanıklılığı kısmi hatası durumunda mikro yardımcı olur, ayrıca, mikro hizmetler veya dış uygulama, zaman uyumsuz olarak tümleştirebilir olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-109">It should also be able to integrate its microservices or external applications asynchronously, so that approach will help resiliency of the microservices in the case of partial failures.</span></span>

<span data-ttu-id="c05ae-110">Uygulama bileşenlerinin bu tür oluşur:</span><span class="sxs-lookup"><span data-stu-id="c05ae-110">The application will consist of these types of components:</span></span>

-   <span data-ttu-id="c05ae-111">Sunu bileşenleri.</span><span class="sxs-lookup"><span data-stu-id="c05ae-111">Presentation components.</span></span> <span data-ttu-id="c05ae-112">Bu, UI işleme ve uzak Hizmetleri tüketen sorumludur.</span><span class="sxs-lookup"><span data-stu-id="c05ae-112">These are responsible for handling the UI and consuming remote services.</span></span>

-   <span data-ttu-id="c05ae-113">Etki alanı veya iş mantığı.</span><span class="sxs-lookup"><span data-stu-id="c05ae-113">Domain or business logic.</span></span> <span data-ttu-id="c05ae-114">Uygulama etki alanı mantığı budur.</span><span class="sxs-lookup"><span data-stu-id="c05ae-114">This is the application’s domain logic.</span></span>

-   <span data-ttu-id="c05ae-115">Veritabanı erişim mantığı.</span><span class="sxs-lookup"><span data-stu-id="c05ae-115">Database access logic.</span></span> <span data-ttu-id="c05ae-116">Bu, veri erişim bileşenleri (SQL veya NoSQL) veritabanları erişmekten sorumlu oluşur.</span><span class="sxs-lookup"><span data-stu-id="c05ae-116">This consists of data access components responsible for accessing databases (SQL or NoSQL).</span></span>

-   <span data-ttu-id="c05ae-117">Uygulama Tümleştirme mantığı.</span><span class="sxs-lookup"><span data-stu-id="c05ae-117">Application integration logic.</span></span> <span data-ttu-id="c05ae-118">Bu, çoğunlukla ileti aracıları üzerinde tabanlı bir Mesajlaşma kanalı içerir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-118">This includes a messaging channel, mainly based on message brokers.</span></span>

<span data-ttu-id="c05ae-119">Uygulamanın yüksek ölçeklenebilirlik, otonom olarak, ölçeği genişletme, dikey alt sistemlerin belirli alt sistemlerin diğerlerinden daha fazla ölçeklenebilirlik gerekir çünkü verirken gerektirir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-119">The application will require high scalability, while allowing its vertical subsystems to scale out autonomously, because certain subsystems will require more scalability than others.</span></span>

<span data-ttu-id="c05ae-120">Uygulama birden çok altyapı ortamlarda (birden çok genel bulutlarda ve şirket içi) dağıtılması gereken ve ideal olmalıdır platformlar arası ve Linux'taki Windows (veya tersi) bir kolayca geçiş yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-120">The application must be able to be deployed in multiple infrastructure environments (multiple public clouds and on-premises) and ideally should be cross-platform, able to move from Linux to Windows (or vice versa) easily.</span></span>

## <a name="development-team-context"></a><span data-ttu-id="c05ae-121">Geliştirme ekibi bağlamı</span><span class="sxs-lookup"><span data-stu-id="c05ae-121">Development team context</span></span>

<span data-ttu-id="c05ae-122">Ayrıca uygulama geliştirme süreci hakkında aşağıdakileri varsayılır:</span><span class="sxs-lookup"><span data-stu-id="c05ae-122">We also assume the following about the development process for the application:</span></span>

-   <span data-ttu-id="c05ae-123">Birden çok geliştirme ekipleri uygulamanın farklı işletme alanlarına odaklanan var.</span><span class="sxs-lookup"><span data-stu-id="c05ae-123">You have multiple dev teams focusing on different business areas of the application.</span></span>

-   <span data-ttu-id="c05ae-124">Yeni takım üyelerine hızlı şekilde üretken olmaya gerekir ve uygulama anlamak ve değiştirilmesi kolay olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-124">New team members must become productive quickly, and the application must be easy to understand and modify.</span></span>

-   <span data-ttu-id="c05ae-125">Uygulamanın, uzun vadeli gelişimi ve durmaksızın değişen iş kuralları gerekir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-125">The application will have a long-term evolution and ever-changing business rules.</span></span>

-   <span data-ttu-id="c05ae-126">Çeviklik, diğer alt sistemler üzerinde minimum etkiyle birden çok alt sistemin güncelleştiremezsiniz olmanın yanı sıra gelecekte yeni değişiklikler uygulanırken olması anlamına gelir iyi uzun süreli bakım ihtiyacınız vardır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-126">You need good long-term maintainability, which means having agility when implementing new changes in the future while being able to update multiple subsystems with minimum impact on the other subsystems.</span></span>

-   <span data-ttu-id="c05ae-127">Uygulama sürekli tümleştirme ve sürekli dağıtım uygulamanın istediğiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-127">You want to practice continuous integration and continuous deployment of the application.</span></span>

-   <span data-ttu-id="c05ae-128">Yeni çıkan teknolojiler (çerçeveleri, programlama dilleri, vb.) yararlanmak uygulama hızla gelişirken diğer yandan istediğiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-128">You want to take advantage of emerging technologies (frameworks, programming languages, etc.) while evolving the application.</span></span> <span data-ttu-id="c05ae-129">İçinde yüksek maliyetlere neden ve uygulamanın kararlılığını ve tahmin edilebilirliğini etkiler çünkü yeni teknolojileri için taşırken uygulamanın tam geçiş yapmak istiyor musunuz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-129">You do not want to make full migrations of the application when moving to new technologies, because that would result in high costs and impact the predictability and stability of the application.</span></span>

## <a name="choosing-an-architecture"></a><span data-ttu-id="c05ae-130">Bir mimari seçme</span><span class="sxs-lookup"><span data-stu-id="c05ae-130">Choosing an architecture</span></span>

<span data-ttu-id="c05ae-131">Hangi uygulama dağıtım mimarisi olması gerekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="c05ae-131">What should the application deployment architecture be?</span></span> <span data-ttu-id="c05ae-132">Geliştirme bağlam yanı sıra uygulama belirtimleri kesin, birlikte çalışan mikro hizmetler ve kapsayıcılar, biçiminde otonom alt sistemleri içine bir mikro hizmet burada parçalama tarafından uygulamanın mimari önerin bir kapsayıcıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-132">The specifications for the application, along with the development context, strongly suggest that you should architect the application by decomposing it into autonomous subsystems in the form of collaborating microservices and containers, where a microservice is a container.</span></span>

<span data-ttu-id="c05ae-133">Bu yaklaşımda, her bir hizmet (kapsayıcı) bağlı ve sayısı azalacağından ilgili işlevler bir dizi uygular.</span><span class="sxs-lookup"><span data-stu-id="c05ae-133">In this approach, each service (container) implements a set of cohesive and narrowly related functions.</span></span> <span data-ttu-id="c05ae-134">Örneğin, bir uygulama Kataloğu hizmeti sıralama hizmeti, sepet hizmeti, kullanıcı profili hizmeti, vb. gibi hizmetleri oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-134">For example, an application might consist of services such as the catalog service, ordering service, basket service, user profile service, etc.</span></span>

<span data-ttu-id="c05ae-135">Mikro hizmet iletişim protokolleri tür olarak HTTP (REST), ancak ayrıca zaman uyumsuz olarak kullanarak (örneğin, AMQP kullanarak) mümkün olduğunda, özellikle zaman yayma güncelleştirmeleri ile tümleştirme olayları.</span><span class="sxs-lookup"><span data-stu-id="c05ae-135">Microservices communicate using protocols such as HTTP (REST), but also asynchronously (for example, using AMQP) whenever possible, especially when propagating updates with integration events.</span></span>

<span data-ttu-id="c05ae-136">Mikro hizmetler geliştirilen ve birbirinden kapsayıcıları olarak dağıtılabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-136">Microservices are developed and deployed as containers independently of one another.</span></span> <span data-ttu-id="c05ae-137">Bu, bir geliştirme ekibi kullanılabilir geliştirmeye ve diğer alt sistemlerin etkilemeden belirli bir mikro hizmet dağıtımı, anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-137">This means that a development team can be developing and deploying a certain microservice without impacting other subsystems.</span></span>

<span data-ttu-id="c05ae-138">Her mikro hizmet, diğer mikro Hizmetleri tam olarak ölçeklendirilebilmeleri izin veren, kendi veritabanı vardır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-138">Each microservice has its own database, allowing it to be fully decoupled from other microservices.</span></span> <span data-ttu-id="c05ae-139">Gerektiğinde, veritabanlarından farklı mikro hizmetler arasında tutarlılık (aracılığıyla bir mantıksal olay veri yolu), uygulama düzeyinde tümleştirme olayları kullanılarak komut ve sorgu sorumluluğu ayrımı (CQRS) işlenmiş olarak sağlanır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-139">When necessary, consistency between databases from different microservices is achieved using application-level integration events (through a logical event bus), as handled in Command and Query Responsibility Segregation (CQRS).</span></span> <span data-ttu-id="c05ae-140">Bu nedenle iş kısıtlamalarını nihai tutarlılık arasında birden fazla mikro hizmetin yaklaşımını benimseyin gerekir ve ilgili veritabanları.</span><span class="sxs-lookup"><span data-stu-id="c05ae-140">Because of that, the business constraints must embrace eventual consistency between the multiple microservices and related databases.</span></span>

### <a name="eshoponcontainers-a-reference-application-for-net-core-and-microservices-deployed-using-containers"></a><span data-ttu-id="c05ae-141">Hizmetine: .NET Core ve kapsayıcılar kullanılarak dağıtılmış mikro hizmetler için bir başvuru uygulaması</span><span class="sxs-lookup"><span data-stu-id="c05ae-141">eShopOnContainers: A reference application for .NET Core and microservices deployed using containers</span></span>

<span data-ttu-id="c05ae-142">Böylece bilmiyor bir hypothetic iş etki alanı düşünmek yerine teknolojileri ve mimari odaklanabilirsiniz iyi bilinen iş etki alanı seçmiş olduğunuz — yani, bir katalog sunar bir Basitleştirilmiş e-ticaret (e-Atölye) uygulama ürünler, işle ilgili diğer işlevleri gerçekleştiren müşterilerden siparişleri alır ve envanter doğrular.</span><span class="sxs-lookup"><span data-stu-id="c05ae-142">So that you can focus on the architecture and technologies instead of thinking about a hypothetic business domain that you might not know, we have selected a well-known business domain—namely, a simplified e-commerce (e-shop) application that presents a catalog of products, takes orders from customers, verifies inventory, and performs other business functions.</span></span> <span data-ttu-id="c05ae-143">Bu kapsayıcı tabanlı uygulama kaynak kodunu kullanılabilir [hizmetine](https://aka.ms/MicroservicesArchitecture) GitHub deposu.</span><span class="sxs-lookup"><span data-stu-id="c05ae-143">This container-based application source code is available in the [eShopOnContainers](https://aka.ms/MicroservicesArchitecture) GitHub repo.</span></span>

<span data-ttu-id="c05ae-144">Uygulamayı birkaç depolama UI ön uçlar (bir Web uygulaması ve yerel bir mobil uygulama) yanı sıra arka uç mikro hizmetler ve kapsayıcılar için gerekli tüm sunucu tarafı işlemleri dahil olmak üzere birden çok alt sistemin oluşur.</span><span class="sxs-lookup"><span data-stu-id="c05ae-144">The application consists of multiple subsystems, including several store UI front ends (a Web application and a native mobile app), along with the back-end microservices and containers for all the required server-side operations.</span></span> <span data-ttu-id="c05ae-145">Şekil 8-1, başvuru uygulaması mimarisi gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-145">Figure 8-1 shows the architecture of the reference application.</span></span>

![](./media/image1.png)

<span data-ttu-id="c05ae-146">**Şekil 8-1**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-146">**Figure 8-1**.</span></span> <span data-ttu-id="c05ae-147">Bir doğrudan istemci-mikro hizmet iletişimi ve olay veri yolu gösteren uygulama hizmetine başvuru</span><span class="sxs-lookup"><span data-stu-id="c05ae-147">The eShopOnContainers reference application, showing a direct client-to-microservice communication and the event bus</span></span>

<span data-ttu-id="c05ae-148">**Barındırma ortamı**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-148">**Hosting environment**.</span></span> <span data-ttu-id="c05ae-149">Şekil 8-1'de, tek bir Docker konağı içinde dağıtılan birden fazla kapsayıcı görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-149">In Figure 8-1, you see several containers deployed within a single Docker host.</span></span> <span data-ttu-id="c05ae-150">Bu olacak durum docker ile tek bir Docker konağı için dağıtırken-compose komutu.</span><span class="sxs-lookup"><span data-stu-id="c05ae-150">That would be the case when deploying to a single Docker host with the docker-compose up command.</span></span> <span data-ttu-id="c05ae-151">Ancak, eğer kullanarak bir orchestrator veya kapsayıcı kümesi, her kapsayıcı farklı bir konağa (node) çalışıyor olabilir ve biz mimarisi bölümünde daha önce açıklandığı gibi herhangi bir düğümü kapsayıcılar, herhangi bir sayıda çalışıyor olabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-151">However, if you are using an orchestrator or container cluster, each container could be running in a different host (node), and any node could be running any number of containers, as we explained earlier in the architecture section.</span></span>

<span data-ttu-id="c05ae-152">**İletişim mimarisi**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-152">**Communication architecture**.</span></span> <span data-ttu-id="c05ae-153">Hizmetine uygulama (güncelleştirmeler ve işlemleri karşı sorgular) işlevsel eylem türünü bağlı olarak iki iletişim türlerini kullanır:</span><span class="sxs-lookup"><span data-stu-id="c05ae-153">The eShopOnContainers application uses two communication types, depending on the kind of the functional action (queries versus updates and transactions):</span></span>

-   <span data-ttu-id="c05ae-154">Doğrudan istemci-mikro hizmet iletişimi.</span><span class="sxs-lookup"><span data-stu-id="c05ae-154">Direct client-to-microservice communication.</span></span> <span data-ttu-id="c05ae-155">Bu sorguları ve güncelleştirme veya istemci uygulamalarından işlem komutları kabul ederken kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-155">This is used for queries and when accepting update or transactional commands from the client apps.</span></span>

-   <span data-ttu-id="c05ae-156">Zaman uyumsuz olay tabanlı iletişim.</span><span class="sxs-lookup"><span data-stu-id="c05ae-156">Asynchronous event-based communication.</span></span> <span data-ttu-id="c05ae-157">Mikro hizmetler güncelleştirmeler yayılması veya dış uygulamalarla tümleştirmek için bir olay veri yolu üzerinden gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-157">This occurs through an event bus to propagate updates across microservices or to integrate with external applications.</span></span> <span data-ttu-id="c05ae-158">Olay veri yolu, RabbitMQ veya Azure Service Bus, NServiceBus, MassTransit veya Brighter gibi daha üst düzey hizmet yolları kullanarak gibi herhangi bir Mesajlaşma Aracısı altyapı teknolojisi ile uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-158">The event bus can be implemented with any messaging-broker infrastructure technology like RabbitMQ, or using higher-level service buses like Azure Service Bus, NServiceBus, MassTransit, or Brighter.</span></span>

<span data-ttu-id="c05ae-159">Uygulama kapsayıcıları biçiminde mikro hizmetler kümesi olarak dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-159">The application is deployed as a set of microservices in the form of containers.</span></span> <span data-ttu-id="c05ae-160">İstemci uygulamaları bu kapsayıcılarla iletişim yapabilir mikro Hizmetler iletişim.</span><span class="sxs-lookup"><span data-stu-id="c05ae-160">Client apps can communicate with those containers as well as communicate between microservices.</span></span> <span data-ttu-id="c05ae-161">Belirtildiği gibi bu ilk mimari bir istemci uygulamanın istekleri her mikro Hizmetleri doğrudan yapabileceğini anlamına gelir. bir doğrudan istemci-mikro hizmet iletişimi mimarisi kullanır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-161">As mentioned, this initial architecture is using a direct client-to-microservice communication architecture, which means that a client application can make requests to each of the microservices directly.</span></span> <span data-ttu-id="c05ae-162">Her mikro hizmet gibi genel bir uç nokta sahip https://servicename.applicationname.companyname.</span><span class="sxs-lookup"><span data-stu-id="c05ae-162">Each microservice has a public endpoint like https://servicename.applicationname.companyname.</span></span> <span data-ttu-id="c05ae-163">Gerekirse, her bir mikro hizmetin farklı bir TCP bağlantı noktası kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-163">If required, each microservice can use a different TCP port.</span></span> <span data-ttu-id="c05ae-164">URL mikro Hizmetleri yük dengeleyici ile eşleyin üretim, hangi istekleri kullanılabilir mikro hizmet örnekleri arasında dağıtır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-164">In production, that URL would map to the microservices’ load balancer, which distributes requests across the available microservice instances.</span></span>

<span data-ttu-id="c05ae-165">**Önemli Not API ağ geçidi vs üzerinde. Doğrudan iletişim hizmetine.**</span><span class="sxs-lookup"><span data-stu-id="c05ae-165">**Important note on API Gateway vs. Direct Communication in eShopOnContainers.**</span></span> <span data-ttu-id="c05ae-166">Büyük ve karmaşık mikro hizmet tabanlı bir uygulama oluştururken bu kılavuzun mimarisi bölümünde açıklandığı gibi doğrudan istemci-mikro hizmet iletişimi mimarisi dezavantajları olabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-166">As explained in the architecture section of this guide, the direct client-to-microservice communication architecture can have drawbacks when you are building a large and complex microservice-based application.</span></span> <span data-ttu-id="c05ae-167">Ancak hizmetine uygulama olduğu hedef bir basit sağlamaya odaklanın, Docker kapsayıcı tabanlı uygulama çalışmaya ve tek tek parça API etkileyebilecek ağ geçidi oluşturmak istemedik gibi küçük bir uygulama için yeterince iyi olabilir mikro hizmetler geliştirme bağımsız çalışma sınırı.</span><span class="sxs-lookup"><span data-stu-id="c05ae-167">But it can be good enough for a small application, such as in the eShopOnContainers application, where the goal is to focus on a simpler getting started Docker container-based application and we didn’t want to create a single monolithic API Gateway that can impact the microservices’ development autonomy.</span></span>

<span data-ttu-id="c05ae-168">Ancak mikro hizmetler onlarca ile büyük bir mikro hizmet tabanlı uygulama tasarlamak için kullanacaksanız, biz mimarisi bölümünde açıklandığı gibi API ağ geçidi desenini düşünün öneririz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-168">But, if you are going to design a large microservice-based application with dozens of microservices, we strongly recommend that you consider the API Gateway pattern, as we explained in the architecture section.</span></span>
<span data-ttu-id="c05ae-169">Bu mimari kararı uzak istemciler için üretime hazır uygulamalar ve özel olarak yapılan cepheleri hakkında düşünmek sonra düzenlenmeye.</span><span class="sxs-lookup"><span data-stu-id="c05ae-169">This architectural decision could be refactored once thinking about production-ready applications and specially-made facades for remote clients.</span></span> <span data-ttu-id="c05ae-170">İstemci uygulamaları form faktörü bağlı olarak özel birden çok API ağ geçitleri olan istemci uygulaması başına farklı veri toplama in regard to avantajları sağlayabilir Ayrıca iç mikro hizmetler veya API'leri için istemci uygulamaları Gizle ve bu tek katmanda yetkilendirin.</span><span class="sxs-lookup"><span data-stu-id="c05ae-170">Having multiple custom API Gateways depending on the client apps' form-factor can provide benefits in regard to different data aggregation per client app plus you can hide internal microservices or APIs to the client apps and authorize in that single tier.</span></span> 

<span data-ttu-id="c05ae-171">Ancak ve bahsedildiği gibi büyük ve tek parça API, mikro hizmetler geliştirme otonomi KILL, ağ geçitleri karşı dikkatli olun.</span><span class="sxs-lookup"><span data-stu-id="c05ae-171">However, and as mentioned, beware against large and monolithic API Gateways that might kill your microservices' development autonomy.</span></span>

### <a name="data-sovereignty-per-microservice"></a><span data-ttu-id="c05ae-172">Mikro hizmet başına veri hakimiyeti</span><span class="sxs-lookup"><span data-stu-id="c05ae-172">Data sovereignty per microservice</span></span>

<span data-ttu-id="c05ae-173">Örnek uygulamada, her bir mikro hizmet kendi veritabanını veya veri kaynağı ve her veritabanı sahibi veya veri kaynağı başka bir kapsayıcı olarak dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-173">In the sample application, each microservice owns its own database or data source, and each database or data source is deployed as another container.</span></span> <span data-ttu-id="c05ae-174">Bu tasarım kararına, yalnızca bir geliştiricinin kodunu Github'dan alma, kopyalayın ve Visual Studio veya Visual Studio Code içinde açmak kolaylaştıran yapıldı.</span><span class="sxs-lookup"><span data-stu-id="c05ae-174">This design decision was made only to make it easy for a developer to get the code from GitHub, clone it, and open it in Visual Studio or Visual Studio Code.</span></span> <span data-ttu-id="c05ae-175">Veya alternatif olarak, .NET Core CLI ve Docker CLI'yı kullanarak özel Docker görüntülerini derleme ve dağıtma ve bunları bir Docker geliştirme ortamında çalıştırmak kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-175">Or alternatively, it makes it easy to compile the custom Docker images using .NET Core CLI and the Docker CLI, and then deploy and run them in a Docker development environment.</span></span> <span data-ttu-id="c05ae-176">Her iki durumda da geliştiriciler oluşturun ve harici bir veritabanına veya (Bulut veya şirket içi) altyapı sabit bağımlılıkları olan başka bir veri kaynağı sağlamak zorunda kalmadan birkaç dakika içinde dağıtma sağlar kapsayıcıları için verileri kullanarak kaynakları.</span><span class="sxs-lookup"><span data-stu-id="c05ae-176">Either way, using containers for data sources lets developers build and deploy in a matter of minutes without having to provision an external database or any other data source with hard dependencies on infrastructure (cloud or on-premises).</span></span>

<span data-ttu-id="c05ae-177">Gerçek bir üretim ortamında, ölçeklenebilirlik ve yüksek kullanılabilirlik için veritabanları veritabanı sunucularında bulutta veya şirket içi, ancak kapsayıcıları bağlı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-177">In a real production environment, for high availability and for scalability, the databases should be based on database servers in the cloud or on-premises, but not in containers.</span></span>

<span data-ttu-id="c05ae-178">Bu nedenle, mikro hizmetler için (ve bu uygulamada veritabanları için bile) dağıtım birimlerinin Docker kapsayıcıları ve mikro hizmetler ilkeleri benimsediğini çok kapsayıcılı bir uygulama başvuru uygulaması olduğundan.</span><span class="sxs-lookup"><span data-stu-id="c05ae-178">Therefore, the units of deployment for microservices (and even for databases in this application) are Docker containers, and the reference application is a multi-container application that embraces microservices principles.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="c05ae-179">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="c05ae-179">Additional resources</span></span>

-   <span data-ttu-id="c05ae-180">**GitHub deposunu hizmetine. Başvuru uygulaması için kaynak kodu**
    *https://aka.ms/eShopOnContainers/*</span><span class="sxs-lookup"><span data-stu-id="c05ae-180">**eShopOnContainers GitHub repo. Source code for the reference application**
*https://aka.ms/eShopOnContainers/*</span></span>

## <a name="benefits-of-a-microservice-based-solution"></a><span data-ttu-id="c05ae-181">Mikro hizmet tabanlı bir çözüm avantajları</span><span class="sxs-lookup"><span data-stu-id="c05ae-181">Benefits of a microservice-based solution</span></span>

<span data-ttu-id="c05ae-182">Bir mikro hizmet tabanlı çözümü bu gibi birçok avantaj vardır:</span><span class="sxs-lookup"><span data-stu-id="c05ae-182">A microservice based solution like this has many benefits:</span></span>

<span data-ttu-id="c05ae-183">**Her mikro hizmet göreceli olarak küçüktür — yönetmek ve geliştirmek kolay**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-183">**Each microservice is relatively small—easy to manage and evolve**.</span></span> <span data-ttu-id="c05ae-184">Özellikle:</span><span class="sxs-lookup"><span data-stu-id="c05ae-184">Specifically:</span></span>

-   <span data-ttu-id="c05ae-185">Anlama ve iyi üretkenliği hızlı bir şekilde kullanmaya başlamak bir geliştirici kolaydır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-185">It is easy for a developer to understand and get started quickly with good productivity.</span></span>

-   <span data-ttu-id="c05ae-186">Kapsayıcıları, geliştiricilerin daha üretken yapar Hızlı Başlat.</span><span class="sxs-lookup"><span data-stu-id="c05ae-186">Containers start fast, which makes developers more productive.</span></span>

-   <span data-ttu-id="c05ae-187">Visual Studio gibi bir IDE, geliştiricilerin daha üretken hale getirme hızlı, daha küçük projeleri yükleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-187">An IDE like Visual Studio can load smaller projects fast, making developers productive.</span></span>

-   <span data-ttu-id="c05ae-188">Her mikro hizmet, geliştirilen ve çeviklik, mikro hizmetler, yeni sürümler sık dağıtmak daha kolay olduğundan sağlayan diğer mikro hizmetler bağımsız olarak, dağıtılan tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-188">Each microservice can be designed, developed, and deployed independently of other microservices, which provides agility because it is easier to deploy new versions of microservices frequently.</span></span>

<span data-ttu-id="c05ae-189">**Bireysel alanları uygulamanın ölçeğini filtrelenebilir**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-189">**It is possible to scale out individual areas of the application**.</span></span> <span data-ttu-id="c05ae-190">Örneğin, katalog hizmeti veya sepet hizmeti, ancak sıralama sürecin ölçeği gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-190">For instance, the catalog service or the basket service might need to be scaled out, but not the ordering process.</span></span> <span data-ttu-id="c05ae-191">Bir mikro hizmet altyapısı dışarı monolitik bir mimari olandan ölçeklendirme kullanılan kaynakları ile ilgili çok daha verimli olacaktır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-191">A microservices infrastructure will be much more efficient with regard to the resources used when scaling out than a monolithic architecture would be.</span></span>

<span data-ttu-id="c05ae-192">**Birden çok ekipler arasında geliştirme iş bölebilirsiniz**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-192">**You can divide the development work between multiple teams**.</span></span> <span data-ttu-id="c05ae-193">Her hizmet tek bir geliştirme ekibi tarafından ait olabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-193">Each service can be owned by a single development team.</span></span> <span data-ttu-id="c05ae-194">Her takım yönetmek, geliştirin, dağıtın ve takımlar geri kalanı bağımsız olarak, hizmet ölçeklendirin.</span><span class="sxs-lookup"><span data-stu-id="c05ae-194">Each team can manage, develop, deploy, and scale their service independently of the rest of the teams.</span></span>

<span data-ttu-id="c05ae-195">**Sorunları daha yalıtılmış**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-195">**Issues are more isolated**.</span></span> <span data-ttu-id="c05ae-196">Bir hizmette bir sorun varsa, yalnızca bu hizmet, başlangıçta (yanlış tasarımı, mikro hizmetler arasında doğrudan bağımlılıklarla kullanılmadığı sürece) etkilenir ve diğer hizmetleri istekleri işlemeye devam edebilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-196">If there is an issue in one service, only that service is initially impacted (except when the wrong design is used, with direct dependencies between microservices), and other services can continue to handle requests.</span></span> <span data-ttu-id="c05ae-197">Buna karşılık, özellikle bir bellek sızıntısı gibi kaynakları gerektirdiğinde monolitik dağıtım mimarisi düzgün çalışmayan bir bileşeni tüm sistemin çökmesine getirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-197">In contrast, one malfunctioning component in a monolithic deployment architecture can bring down the entire system, especially when it involves resources, such as a memory leak.</span></span> <span data-ttu-id="c05ae-198">Ayrıca, bir mikro hizmet içinde bir sorun çözüldüğünde, yalnızca etkilenen mikro hizmet uygulama geri kalanı etkilemeden dağıtabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-198">Additionally, when an issue in a microservice is resolved, you can deploy just the affected microservice without impacting the rest of the application.</span></span>

<span data-ttu-id="c05ae-199">**En son teknolojileri kullanabilirsiniz**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-199">**You can use the latest technologies**.</span></span> <span data-ttu-id="c05ae-200">Hizmetler bağımsız olarak geliştirmeye başlayın ve yan yana (kapsayıcılar ve .NET Core sayesinde) çalıştırmak için en son teknolojileri ve çerçeveleri expediently daha eski bir yığın veya tüm framework takılması yerine kullanmaya başlayabilirsiniz uygulama.</span><span class="sxs-lookup"><span data-stu-id="c05ae-200">Because you can start developing services independently and run them side by side (thanks to containers and .NET Core), you can start using the latest technologies and frameworks expediently instead of being stuck on an older stack or framework for the whole application.</span></span>

## <a name="downsides-of-a-microservice-based-solution"></a><span data-ttu-id="c05ae-201">Bir mikro hizmet tabanlı çözümün downsides</span><span class="sxs-lookup"><span data-stu-id="c05ae-201">Downsides of a microservice-based solution</span></span>

<span data-ttu-id="c05ae-202">Böyle bir mikro hizmet tabanlı çözümü, ayrıca bazı dezavantajları vardır:</span><span class="sxs-lookup"><span data-stu-id="c05ae-202">A microservice based solution like this also has some drawbacks:</span></span>

<span data-ttu-id="c05ae-203">**Dağıtılmış bir uygulama**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-203">**Distributed application**.</span></span> <span data-ttu-id="c05ae-204">Tasarlama ve oluşturma hizmetleri uygulaması dağıtma geliştiriciler için karmaşıklık ekler.</span><span class="sxs-lookup"><span data-stu-id="c05ae-204">Distributing the application adds complexity for developers when they are designing and building the services.</span></span> <span data-ttu-id="c05ae-205">Örneğin, geliştiriciler, HTTP veya test etmek ve özel durum işleme için karmaşıklık ekleyen AMPQ gibi protokolleri kullanılarak hizmetin iletişim uygulamalıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-205">For example, developers must implement interservice communication using protocols like HTTP or AMPQ, which adds complexity for testing and exception handling.</span></span> <span data-ttu-id="c05ae-206">Ayrıca sisteme gecikme süresi ekler.</span><span class="sxs-lookup"><span data-stu-id="c05ae-206">It also adds latency to the system.</span></span>

<span data-ttu-id="c05ae-207">**Dağıtım karmaşıklığı**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-207">**Deployment complexity**.</span></span> <span data-ttu-id="c05ae-208">Mikro hizmetler türleri onlarca ve (Bu hizmet başına çok sayıda örnekleri oluşturmak ve bu hizmetlerin çok konak genelinde dengelemek gerekir), yüksek ölçeklenebilirlik gereken bir uygulama, BT operasyon ve yönetimi için yüksek derecede dağıtım karmaşıklık anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-208">An application that has dozens of microservices types and needs high scalability (it needs to be able to create many instances per service and balance those services across many hosts) means a high degree of deployment complexity for IT operations and management.</span></span> <span data-ttu-id="c05ae-209">Bir mikro hizmet odaklı altyapısı (orchestrator ve Zamanlayıcı gibi) kullanmıyorsanız, bu karmaşıklık iş uygulaması daha çok daha fazla geliştirme çalışmalarını gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-209">If you are not using a microservice-oriented infrastructure (like an orchestrator and scheduler), that additional complexity can require far more development efforts than the business application itself.</span></span>

<span data-ttu-id="c05ae-210">**Atomik işlemler**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-210">**Atomic transactions**.</span></span> <span data-ttu-id="c05ae-211">Atomik işlemler genellikle birden çok mikro hizmetler arasında mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-211">Atomic transactions between multiple microservices usually are not possible.</span></span> <span data-ttu-id="c05ae-212">İş gereksinimlerini birden fazla mikro hizmetler arasında nihai tutarlılık yaklaşımını benimseyin gerekir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-212">The business requirements have to embrace eventual consistency between multiple microservices.</span></span>

<span data-ttu-id="c05ae-213">**Genel kaynak gereksinimlerini artırılmış** (toplam bellek, sürücüler ve sunucular veya ana bilgisayar için ağ kaynaklarına).</span><span class="sxs-lookup"><span data-stu-id="c05ae-213">**Increased global resource needs** (total memory, drives, and network resources for all the servers or hosts).</span></span> <span data-ttu-id="c05ae-214">Bir mikro hizmetler yaklaşımı ile tek parça bir uygulamayı değiştirdiğinizde çoğu durumda, yeni mikro hizmet tabanlı uygulama için gerekli olan genel kaynaklar miktarını özgün tek parça uygulamanın Altyapı gereksinimlerini büyük olacaktır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-214">In many cases, when you replace a monolithic application with a microservices approach, the amount of global resources needed by the new microservice-based application will be larger than the infrastructure needs of the original monolithic application.</span></span> <span data-ttu-id="c05ae-215">Daha ileri düzeyde ayrıntı düzeyi ve dağıtılmış hizmetlerin daha genel kaynaklar gerektirdiğinden budur.</span><span class="sxs-lookup"><span data-stu-id="c05ae-215">This is because the higher degree of granularity and distributed services requires more global resources.</span></span> <span data-ttu-id="c05ae-216">Ancak, düşük maliyetli genel ve yalnızca belirli alanları tek parçalı uygulamalarla gelişen, uzun vadeli maliyet karşılaştırıldığında uygulamanın ölçeğini genişletmek işaretleyebilmesine avantajı kaynakları göz önünde bulundurulduğunda, artan kaynaklar için genellikle iyi bir denge kullanımıdır büyük uzun vadeli uygulamalar.</span><span class="sxs-lookup"><span data-stu-id="c05ae-216">However, given the low cost of resources in general and the benefit of being able to scale out just certain areas of the application compared to long-term costs when evolving monolithic applications, the increased use of resources is usually a good tradeoff for large, long-term applications.</span></span>

<span data-ttu-id="c05ae-217">**Doğrudan client‑to‑microservice iletişimle ilgili sorunlar**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-217">**Issues with direct client‑to‑microservice communication**.</span></span> <span data-ttu-id="c05ae-218">Uygulama, mikro hizmetler onlarca ile büyük olduğunda, zorlukları ve sınırlamalar vardır uygulama doğrudan istemci-mikro hizmet iletişimi gerekiyorsa.</span><span class="sxs-lookup"><span data-stu-id="c05ae-218">When the application is large, with dozens of microservices, there are challenges and limitations if the application requires direct client-to-microservice communications.</span></span> <span data-ttu-id="c05ae-219">İstemci gereksinimlerini ve her bir mikro hizmetler tarafından sunulan API'lerde arasında olası uyuşmazlık bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="c05ae-219">One problem is a potential mismatch between the needs of the client and the APIs exposed by each of the microservices.</span></span> <span data-ttu-id="c05ae-220">Bazı durumlarda, istemci uygulaması, birçok ayrı istekler Internet üzerinden verimsiz olabilir ve bir mobil ağ üzerinden pratik kullanıcı Arabirimi oluşturmak için yapmanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-220">In certain cases, the client application might need to make many separate requests to compose the UI, which can be inefficient over the Internet and would be impractical over a mobile network.</span></span> <span data-ttu-id="c05ae-221">Bu nedenle, istemci uygulaması arka uç sistemine gelen istekleri en aza.</span><span class="sxs-lookup"><span data-stu-id="c05ae-221">Therefore, requests from the client application to the back-end system should be minimized.</span></span>

<span data-ttu-id="c05ae-222">Doğrudan istemci-mikro hizmet iletişimi ile başka bir sorun, bazı mikro hizmetler Web dostu olmayan protokolleri kullanabilecek olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-222">Another problem with direct client-to-microservice communications is that some microservices might be using protocols that are not Web-friendly.</span></span> <span data-ttu-id="c05ae-223">AMQP ileti başka bir hizmet kullanırken bir hizmeti bir ikili protokolünü kullanıyor olabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-223">One service might use a binary protocol, while another service might use AMQP messaging.</span></span> <span data-ttu-id="c05ae-224">Bu protokoller firewall‑friendly değildir ve en iyi dahili olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-224">Those protocols are not firewall‑friendly and are best used internally.</span></span> <span data-ttu-id="c05ae-225">Genellikle, bir uygulama güvenlik duvarı dışında iletişim için HTTP ve WebSockets gibi protokoller kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-225">Usually, an application should use protocols such as HTTP and WebSockets for communication outside of the firewall.</span></span>

<span data-ttu-id="c05ae-226">Henüz bu doğrudan client‑to‑service yaklaşım ile başka bir dezavantajı, bu anlaşmalar Bu mikro hizmetlere yönelik yeniden düzenlenmesi zor yapmasıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-226">Yet another drawback with this direct client‑to‑service approach is that it makes it difficult to refactor the contracts for those microservices.</span></span> <span data-ttu-id="c05ae-227">Zaman içinde geliştiricilere, Sistem Hizmetleri içine nasıl bölümlenmiş değiştirmek isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-227">Over time developers might want to change how the system is partitioned into services.</span></span> <span data-ttu-id="c05ae-228">Örneğin, bunlar iki hizmet birleştirme veya bir hizmeti iki veya daha fazla hizmetlerine bölün.</span><span class="sxs-lookup"><span data-stu-id="c05ae-228">For example, they might merge two services or split a service into two or more services.</span></span> <span data-ttu-id="c05ae-229">İstemciler Hizmetleri ile doğrudan iletişim kurar, ancak bu tür yeniden düzenleme gerçekleştirme istemci uygulamaları ile uyumluluğu bozabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-229">However, if clients communicate directly with the services, performing this kind of refactoring can break compatibility with client apps.</span></span>

<span data-ttu-id="c05ae-230">Tasarlama ve üzerinde mikro hizmet tabanlı karmaşık bir uygulama oluştururken mimari bölümünde bahsedildiği gibi basit bir doğrudan client‑to‑microservice iletişim yaklaşım yerine ayrıntılı birden çok API ağ geçitleri kullanımını göz önünde bulundurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-230">As mentioned in the architecture section, when designing and building a complex application based on microservices, you might consider the use of multiple fine-grained API Gateways instead of the simpler direct client‑to‑microservice communication approach.</span></span>

<span data-ttu-id="c05ae-231">**Mikro hizmet bölümleme**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-231">**Partitioning the microservices**.</span></span> <span data-ttu-id="c05ae-232">Son olarak, göz önüne almanız, mikro hizmet mimarisi için hangi yaklaşımın ne olursa olsun, bir diğer zorluk nasıl ayıracağınız birden fazla mikro hizmetlerin uçtan uca uygulamaya karar vermektir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-232">Finally, no matter which approach you take for your microservice architecture, another challenge is deciding how to partition an end-to-end application into multiple microservices.</span></span> <span data-ttu-id="c05ae-233">Kılavuzu mimarisi bölümünde belirtildiği gibi çeşitli teknikler ve uygulayabileceğiniz bir yaklaşım vardır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-233">As noted in the architecture section of the guide, there are several techniques and approaches you can take.</span></span> <span data-ttu-id="c05ae-234">Temel olarak, uygulamanın diğer bölümler birbirinden ayrılmıştır ve sabit bağımlılıkları az sayıda olan alanları belirlemek gerekir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-234">Basically, you need to identify areas of the application that are decoupled from the other areas and that have a low number of hard dependencies.</span></span> <span data-ttu-id="c05ae-235">Çoğu durumda, bu hizmetleri bölümleme için kullanım örneği tarafından hizalanır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-235">In many cases, this is aligned to partitioning services by use case.</span></span> <span data-ttu-id="c05ae-236">Örneğin, e-Atölye uygulamamız sipariş işleme ilgili tüm iş mantığı sorumlu olan bir sıralama hizmeti sahibiz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-236">For example, in our e-shop application, we have an ordering service that is responsible for all the business logic related to the order process.</span></span> <span data-ttu-id="c05ae-237">Ayrıca katalog hizmeti ve diğer özellikleri uygulayan sepet hizmeti sahibiz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-237">We also have the catalog service and the basket service that implement other capabilities.</span></span> <span data-ttu-id="c05ae-238">İdeal olarak, her hizmetin sorumlulukları küçük bir dizi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-238">Ideally, each service should have only a small set of responsibilities.</span></span> <span data-ttu-id="c05ae-239">Bu, bir sınıf yalnızca değiştirmek için bir neden olması gerektiğini bildiren sınıfa uygulanan tek sorumluluk ilkeye (SRP) benzer.</span><span class="sxs-lookup"><span data-stu-id="c05ae-239">This is similar to the single responsibility principle (SRP) applied to classes, which states that a class should only have one reason to change.</span></span> <span data-ttu-id="c05ae-240">Ancak bu durumda, kapsamı tek bir sınıf büyük olacak şekilde mikro hizmetler hakkında değildir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-240">But in this case, it is about microservices, so the scope will be larger than a single class.</span></span> <span data-ttu-id="c05ae-241">En önemlisi, bir mikro hizmet tamamen otonom, uçtan uca sorumluluk kendi veri kaynakları için de dahil olmak üzere olmak zorundadır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-241">Most of all, a microservice has to be completely autonomous, end to end, including responsibility for its own data sources.</span></span>

## <a name="external-versus-internal-architecture-and-design-patterns"></a><span data-ttu-id="c05ae-242">Dış ve iç mimari ve tasarım desenleri</span><span class="sxs-lookup"><span data-stu-id="c05ae-242">External versus internal architecture and design patterns</span></span>

<span data-ttu-id="c05ae-243">Bu kılavuz mimarisi kısmında tanımlanan ilkeler uygulayarak birden çok hizmet tarafından oluşan mikro hizmet mimarisi dış mimaridir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-243">The external architecture is the microservice architecture composed by multiple services, following the principles described in the architecture section of this guide.</span></span> <span data-ttu-id="c05ae-244">Ancak, her mikro hizmet ve üst düzey bir mikro hizmet mimarisi seçtiğiniz bağımsız olarak yapısı, bağlı olarak ortak ve farklı iç mimarileri için bazen önerilir, her için farklı eğilimlere bağlı farklı mikro hizmetler.</span><span class="sxs-lookup"><span data-stu-id="c05ae-244">However, depending on the nature of each microservice, and independently of high-level microservice architecture you choose, it is common and sometimes advisable to have different internal architectures, each based on different patterns, for different microservices.</span></span> <span data-ttu-id="c05ae-245">Mikro hizmetler, hatta farklı teknolojiler ve programlama dilini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-245">The microservices can even use different technologies and programming languages.</span></span> <span data-ttu-id="c05ae-246">Şekil 8-2 Bu seviyelerine gösterilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-246">Figure 8-2 illustrates this diversity.</span></span>

![](./media/image2.png)

<span data-ttu-id="c05ae-247">**Şekil 8-2**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-247">**Figure 8-2**.</span></span> <span data-ttu-id="c05ae-248">Dış ve iç mimari ve tasarım</span><span class="sxs-lookup"><span data-stu-id="c05ae-248">External versus internal architecture and design</span></span>

<span data-ttu-id="c05ae-249">Örneğin, bizim *hizmetine* basit örnek, katalog, sepet ve kullanıcı profili mikro hizmetler (temel, alt sistemlerin CRUD).</span><span class="sxs-lookup"><span data-stu-id="c05ae-249">For instance, in our *eShopOnContainers* sample, the catalog, basket, and user profile microservices are simple (basically, CRUD subsystems).</span></span> <span data-ttu-id="c05ae-250">Bu nedenle, kendi iç mimari ve tasarım basit.</span><span class="sxs-lookup"><span data-stu-id="c05ae-250">Therefore, their internal architecture and design is straightforward.</span></span> <span data-ttu-id="c05ae-251">Ancak, diğer mikro hizmetler gibi daha karmaşıktır ve durmaksızın değişen iş kuralları ile etki alanı karmaşıklık yüksek derecede temsil eder. sıralama mikro olabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-251">However, you might have other microservices, such as the ordering microservice, which is more complex and represents ever-changing business rules with a high degree of domain complexity.</span></span> <span data-ttu-id="c05ae-252">Bu gibi durumlarda, biz yapıyor olarak etki alanı Odaklı Tasarım (DDD) yaklaşımı ile tanımlanmış olanlar gibi belirli bir mikro hizmet içinde daha gelişmiş desenler uygulamak isteyebilirsiniz *hizmetine* sıralama mikro hizmet.</span><span class="sxs-lookup"><span data-stu-id="c05ae-252">In cases like these, you might want to implement more advanced patterns within a particular microservice, like the ones defined with domain-driven design (DDD) approaches, as we are doing in the *eShopOnContainers* ordering microservice.</span></span> <span data-ttu-id="c05ae-253">(Şimdi bu DDD deseni uygulaması açıklayan bölümde daha sonra gözden *hizmetine* mikro hizmet sıralama.)</span><span class="sxs-lookup"><span data-stu-id="c05ae-253">(We will review these DDD patterns in the section later that explains the implementation of the *eShopOnContainers* ordering microservice.)</span></span>

<span data-ttu-id="c05ae-254">Mikro hizmet başına farklı bir teknoloji başka bir nedenle, her bir mikro hizmetin niteliği olabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-254">Another reason for a different technology per microservice might be the nature of each microservice.</span></span> <span data-ttu-id="c05ae-255">Örneğin, F gibi işlevsel bir programlama dili kullanmak daha iyi olabilir\#, hatta bir dil R gibi yapay ZEKA ve makine öğrenimi C gibi daha fazla nesne yönelimli programlama dili yerine etki alanları hedefliyorsanız\#.</span><span class="sxs-lookup"><span data-stu-id="c05ae-255">For example, it might be better to use a functional programming language like F\#, or even a language like R if you are targeting AI and machine learning domains, instead of a more object-oriented programming language like C\#.</span></span>

<span data-ttu-id="c05ae-256">Alt çizgi, her bir mikro hizmetin farklı tasarım düzenlerini esas alarak farklı bir iç mimari sahip olabilmeleridir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-256">The bottom line is that each microservice can have a different internal architecture based on different design patterns.</span></span> <span data-ttu-id="c05ae-257">Bunları aşırı mühendislik çünkü tüm mikro Hizmetleri, Gelişmiş DDD deseni kullanılarak uygulanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-257">Not all microservices should be implemented using advanced DDD patterns, because that would be over-engineering them.</span></span> <span data-ttu-id="c05ae-258">Benzer şekilde, karmaşık mikro hizmetler durmaksızın değişen iş mantığına sahip CRUD bileşenleri uygulanmamalıdır veya düşük kaliteli kodlar kalabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c05ae-258">Similarly, complex microservices with ever-changing business logic should not be implemented as CRUD components, or you can end up with low-quality code.</span></span>



## <a name="the-new-world-multiple-architectural-patterns-and-polyglot-microservices"></a><span data-ttu-id="c05ae-259">Yeni Dünya: birden çok mimari desenleri ve çok yönlü mikro hizmetler</span><span class="sxs-lookup"><span data-stu-id="c05ae-259">The new world: multiple architectural patterns and polyglot microservices</span></span>

<span data-ttu-id="c05ae-260">Yazılım mimarları ve geliştiricileri tarafından kullanılan birçok mimari desenleri vardır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-260">There are many architectural patterns used by software architects and developers.</span></span> <span data-ttu-id="c05ae-261">Birkaçı verilmiştir (Mimari stilleri ile mimarisi desenleri karıştırma):</span><span class="sxs-lookup"><span data-stu-id="c05ae-261">The following are a few (mixing architecture styles and architecture patterns):</span></span>

-   <span data-ttu-id="c05ae-262">Basit CRUD, tek katmanlı tek katmanlı.</span><span class="sxs-lookup"><span data-stu-id="c05ae-262">Simple CRUD, single-tier, single-layer.</span></span>

-   <span data-ttu-id="c05ae-263">[Geleneksel N katmanlı](https://msdn.microsoft.com/library/ee658109.aspx#Layers).</span><span class="sxs-lookup"><span data-stu-id="c05ae-263">[Traditional N-Layered](https://msdn.microsoft.com/library/ee658109.aspx#Layers).</span></span>

-   <span data-ttu-id="c05ae-264">[Etki alanı tasarım N katmanlı odaklı](https://blogs.msdn.microsoft.com/cesardelatorre/2011/07/03/published-first-alpha-version-of-domain-oriented-n-layered-architecture-v2-0/).</span><span class="sxs-lookup"><span data-stu-id="c05ae-264">[Domain-Driven Design N-layered](https://blogs.msdn.microsoft.com/cesardelatorre/2011/07/03/published-first-alpha-version-of-domain-oriented-n-layered-architecture-v2-0/).</span></span>

-   <span data-ttu-id="c05ae-265">[Mimari Temizleme](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html) (ile kullanılan [eShopOnWeb](https://aka.ms/WebAppArchitecture))</span><span class="sxs-lookup"><span data-stu-id="c05ae-265">[Clean Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html) (as used with [eShopOnWeb](https://aka.ms/WebAppArchitecture))</span></span>

-   <span data-ttu-id="c05ae-266">[Komut ve sorgu sorumluluğu ayrımı](https://martinfowler.com/bliki/CQRS.html) (CQRS).</span><span class="sxs-lookup"><span data-stu-id="c05ae-266">[Command and Query Responsibility Segregation](https://martinfowler.com/bliki/CQRS.html) (CQRS).</span></span>

-   <span data-ttu-id="c05ae-267">[Olay denetimli mimari](https://en.wikipedia.org/wiki/Event-driven_architecture) (EDA).</span><span class="sxs-lookup"><span data-stu-id="c05ae-267">[Event-Driven Architecture](https://en.wikipedia.org/wiki/Event-driven_architecture) (EDA).</span></span>

<span data-ttu-id="c05ae-268">Ayrıca, birçok teknolojiler ve ASP.NET Core Web API, NancyFx, ASP.NET Core SignalR (.NET Core 2 ile kullanılabilir), F gibi dilleri ile mikro hizmetler oluşturabilirsiniz\#, Node.js, Python, Java, C++, GoLang ve daha fazlası.</span><span class="sxs-lookup"><span data-stu-id="c05ae-268">You can also build microservices with many technologies and languages, such as ASP.NET Core Web APIs, NancyFx, ASP.NET Core SignalR (available with .NET Core 2), F\#, Node.js, Python, Java, C++, GoLang, and more.</span></span>

<span data-ttu-id="c05ae-269">Herhangi bir belirli mimari desen veya stil ya da belirli bir teknoloji tüm durumlar için doğru olduğunu önemli noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="c05ae-269">The important point is that no particular architecture pattern or style, nor any particular technology, is right for all situations.</span></span> <span data-ttu-id="c05ae-270">(Değil herhangi bir sırada belirli rağmen) Şekil 8-3 gösteren bazı yaklaşımları ve teknolojileri farklı mikro Hizmetleri kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-270">Figure 8-3 shows some approaches and technologies (although not in any particular order) that could be used in different microservices.</span></span>

![](./media/image3.png)

<span data-ttu-id="c05ae-271">**Şekil 8-3**.</span><span class="sxs-lookup"><span data-stu-id="c05ae-271">**Figure 8-3**.</span></span> <span data-ttu-id="c05ae-272">Birden çok mimari desenleri ve çok yönlü mikro hizmetler world</span><span class="sxs-lookup"><span data-stu-id="c05ae-272">Multi-architectural patterns and the polyglot microservices world</span></span>

<span data-ttu-id="c05ae-273">Gösterildiği gibi Şekil 8-3, uygulamaların birçok mikro hizmetler (sınırlanmış her bir mikro hizmetin farklı bir şekilde uygulayabilir kapsamları etki alanı Odaklı Tasarım terminolojisi ya da sadece "alt" otonom mikro hizmetler olarak) oluşur.</span><span class="sxs-lookup"><span data-stu-id="c05ae-273">As shown in Figure 8-3, in applications composed of many microservices (Bounded Contexts in domain-driven design terminology, or simply “subsystems” as autonomous microservices), you might implement each microservice in a different way.</span></span> <span data-ttu-id="c05ae-274">Her farklı mimari deseni sahip olabileceğiniz ve farklı dilleri ve veritabanlarını uygulama yapısı, iş gereksinimlerini ve öncelikler bağlı olarak kullanın.</span><span class="sxs-lookup"><span data-stu-id="c05ae-274">Each might have a different architecture pattern and use different languages and databases depending on the application’s nature, business requirements, and priorities.</span></span> <span data-ttu-id="c05ae-275">Bazı durumlarda, mikro hizmetler benzer olabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-275">In some cases, the microservices might be similar.</span></span> <span data-ttu-id="c05ae-276">Ancak, her alt sisteminin içerik sınırı ve gereksinimleri genellikle farklı olduğundan, genellikle, geçerli değildir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-276">But that is not usually the case, because each subsystem’s context boundary and requirements are usually different.</span></span>

<span data-ttu-id="c05ae-277">Örneğin, için basit bir CRUD bakım uygulama, bu tasarlamak ve DDD desenlerini uygulama için anlamlı olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-277">For instance, for a simple CRUD maintenance application, it might not make sense to design and implement DDD patterns.</span></span> <span data-ttu-id="c05ae-278">Ancak temel etki alanı veya çekirdek iş için durmaksızın değişen iş kuralları ile iş karmaşıklığını gidermek için daha gelişmiş desenleri uygulamak gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-278">But for your core domain or core business, you might need to apply more advanced patterns to tackle business complexity with ever-changing business rules.</span></span>

<span data-ttu-id="c05ae-279">Özellikle, birden çok alt sistemi tarafından oluşturulan büyük uygulamalar ile dağıttığınızda, bir tek mimari deseni temel alınarak tek bir üst düzey mimari geçerli.</span><span class="sxs-lookup"><span data-stu-id="c05ae-279">Especially when you deal with large applications composed by multiple sub-systems, you should not apply a single top-level architecture based on a single architecture pattern.</span></span> <span data-ttu-id="c05ae-280">Örneğin, CQRS tüm uygulama için üst düzey bir mimari olarak uygulanmamalıdır, ancak belirli bir hizmetler kümesi için yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-280">For instance, CQRS should not be applied as a top-level architecture for a whole application, but might be useful for a specific set of services.</span></span>

<span data-ttu-id="c05ae-281">Gümüş madde işareti yok veya verilen her durum için doğru mimari desen yoktur.</span><span class="sxs-lookup"><span data-stu-id="c05ae-281">There is no silver bullet or a right architecture pattern for every given case.</span></span> <span data-ttu-id="c05ae-282">"Hepsini yönetmek için bir mimari deseni." sahip olamaz</span><span class="sxs-lookup"><span data-stu-id="c05ae-282">You cannot have “one architecture pattern to rule them all.”</span></span> <span data-ttu-id="c05ae-283">Her mikro hizmet öncelikler bağlı olarak, farklı bir yaklaşım her biri için aşağıdaki bölümlerde açıklandığı gibi seçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="c05ae-283">Depending on the priorities of each microservice, you must choose a different approach for each, as explained in the following sections.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="c05ae-284">[Önceki](index.md)
[İleri](data-driven-crud-microservice.md)</span><span class="sxs-lookup"><span data-stu-id="c05ae-284">[Previous](index.md)
[Next](data-driven-crud-microservice.md)</span></span>
