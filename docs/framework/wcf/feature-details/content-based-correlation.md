---
title: "İçeriğe Dayalı Bağıntı"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f46a2b68-8d24-4122-bbee-9573fc3f9fb4
caps.latest.revision: "17"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 72c7233a1c667b7ee3a1f00cc2fdf3c78f58e789
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/22/2017
---
# <a name="content-based-correlation"></a><span data-ttu-id="e6d89-102">İçeriğe Dayalı Bağıntı</span><span class="sxs-lookup"><span data-stu-id="e6d89-102">Content Based Correlation</span></span>
<span data-ttu-id="e6d89-103">İş akışı Hizmetleri istemcileri ve diğer hizmetleri ile iletişim kurarken, genellikle var. benzersiz bir ileti belirli bir örneği ile ilişkilendirir bazı veri alışverişi iletilerindeki</span><span class="sxs-lookup"><span data-stu-id="e6d89-103">When workflow services communicate with clients and other services, often there is some data in the exchanged messages that uniquely relates a message to a particular instance.</span></span> <span data-ttu-id="e6d89-104">İçeriğe dayalı bağıntı iletide, müşteri numarası veya sipariş kimliği iletileri yönlendirmek için uygun iş akışı örneği gibi bu verileri kullanır.</span><span class="sxs-lookup"><span data-stu-id="e6d89-104">Content-based correlation uses this data in the message, such as a customer number or order ID, to route messages to the proper workflow instance.</span></span> <span data-ttu-id="e6d89-105">Bu konuda, iş akışlarında içerik tabanlı bağıntı kullanımı açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="e6d89-105">This topic explains how to use content-based correlation in workflows.</span></span>  
  
## <a name="using-content-based-correlation"></a><span data-ttu-id="e6d89-106">İçeriğe dayalı bağıntı kullanma</span><span class="sxs-lookup"><span data-stu-id="e6d89-106">Using Content-Based Correlation</span></span>  
 <span data-ttu-id="e6d89-107">İçeriğe dayalı bağıntı bir iş akışı hizmeti tek bir istemci tarafından erişilen birden çok yöntemi vardır ve veri alışverişi iletilerindeki parçası istenen örneğini tanımlar olmadığında kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e6d89-107">Content-based correlation is used when a workflow service has multiple methods that are accessed by a single client and a piece of data in the exchanged messages identifies the desired instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e6d89-108">İçeriğe dayalı bağıntı, bağlama için desteklenen içerik exchange bağlamaları birini olmadığından bağlam bağıntı kullanılamaz yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="e6d89-108">Content-based correlation is useful when context correlation cannot be used because the binding is not one of the supported context exchange bindings.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e6d89-109">bağlam bağıntı bkz [bağlam değişimi](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="e6d89-109"> context correlation, see [Context Exchange](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md).</span></span>  
  
 <span data-ttu-id="e6d89-110">Bu iletişimde kullanılan her Mesajlaşma etkinlik örneğini benzersiz şekilde tanımlar iletide verilerin konumu belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e6d89-110">Each messaging activity used in these communications must specify the location of the data in the message that uniquely identifies the instance.</span></span> <span data-ttu-id="e6d89-111">Bu sağlayarak gerçekleştirilir bir <xref:System.ServiceModel.MessageQuerySet>, kullanarak bir <xref:System.ServiceModel.Activities.QueryCorrelationInitializer> veya <xref:System.ServiceModel.Activities.Receive.CorrelatesOn%2A>, ileti parçanın veya örneğini benzersiz şekilde tanımlamak veri parçası için sorgular.</span><span class="sxs-lookup"><span data-stu-id="e6d89-111">This is done by providing a <xref:System.ServiceModel.MessageQuerySet>, using either a <xref:System.ServiceModel.Activities.QueryCorrelationInitializer> or <xref:System.ServiceModel.Activities.Receive.CorrelatesOn%2A>, that queries the message for the piece or pieces of data that uniquely identify the instance.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="e6d89-112">Örneği tanımlamak için kullanılan veri bir bağıntı anahtara karma haline getirilir.</span><span class="sxs-lookup"><span data-stu-id="e6d89-112">The data that is used to identify the instance is hashed into a correlation key.</span></span> <span data-ttu-id="e6d89-113">Bağıntı için kullanılan veri benzersizdir Aksi takdirde karma anahtarında çakışması ortaya ve iletileri misrouted neden olmak için dikkatli olunması gerekir.</span><span class="sxs-lookup"><span data-stu-id="e6d89-113">Care must be taken to ensure that the data used for correlation is unique or else collisions in the hashed key could occur and cause messages to be misrouted.</span></span> <span data-ttu-id="e6d89-114">Örneğin, aynı ada sahip birden çok müşteri olabileceğinden yalnızca müşteri adına göre bir bağıntı bir çakışma neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="e6d89-114">For example, a correlation based solely on a customer name may cause a collision because there may be multiple customers with the same name.</span></span> <span data-ttu-id="e6d89-115">İki nokta üst üste (`:`) ileti sorgunun anahtar ve değer daha sonra karma dizesi oluşturmak için sınırlandırmak için zaten kullanılmakta olduğundan ileti ilişkilendirmek için kullanılan verileri bir parçası olarak kullanılmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="e6d89-115">The colon (`:`) should not be used as part of the data used to correlate the message because it is already used to delimit the message query’s key and value to form the string that is subsequently hashed.</span></span>  
  
 <span data-ttu-id="e6d89-116">Aşağıdaki örnekte, ilk <xref:System.ServiceModel.Activities.Receive> / <xref:System.ServiceModel.Activities.SendReply> bir iş akışı hizmetinde döndürür bir `OrderId`, hangi ardından geçirilen istemci tarafından aşağıdaki çağrıda <xref:System.ServiceModel.Activities.Receive> iş akışı hizmeti etkinliğinde.</span><span class="sxs-lookup"><span data-stu-id="e6d89-116">In the following example, the initial <xref:System.ServiceModel.Activities.Receive>/<xref:System.ServiceModel.Activities.SendReply> in a workflow service returns an `OrderId`, which is then passed back by the client on the call to the following <xref:System.ServiceModel.Activities.Receive> activity in the workflow service.</span></span>  
  
 [!code-csharp[CFX_ContentCorrelation#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_contentcorrelation/cs/program.cs#1)]  
  
 <span data-ttu-id="e6d89-117">Önceki örnekte de görüldüğü tarafından başlatılan içerik tabanlı bir bağıntı <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="e6d89-117">The previous example shows a content-based correlation that is initialized by the <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="e6d89-118"><xref:System.ServiceModel.MessageQuerySet> Bu hizmete sonraki ileti tanımlamak için kullanılan veri olduğunu belirtir `OrderId`.</span><span class="sxs-lookup"><span data-stu-id="e6d89-118">The <xref:System.ServiceModel.MessageQuerySet> specifies that the data used to identify subsequent messages to this service is the `OrderId`.</span></span>  
  
 [!code-csharp[CFX_ContentCorrelation#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_contentcorrelation/cs/program.cs#2)]  
  
 <span data-ttu-id="e6d89-119"><xref:System.ServiceModel.Activities.Receive> İzleyen etkinliği <xref:System.ServiceModel.Activities.SendReply> tarafından başlatılmış bağıntı akışında izleyen <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="e6d89-119">The <xref:System.ServiceModel.Activities.Receive> activity that follows the <xref:System.ServiceModel.Activities.SendReply> in the workflow follows the correlation that was initialized by the <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="e6d89-120">Her iki etkinlikler aynı paylaşmak <xref:System.ServiceModel.Activities.CorrelationHandle>, ancak her biri kendi <xref:System.ServiceModel.MessageQuerySet> ve <xref:System.ServiceModel.XPathMessageQuery> tanımlayıcı verileri belirli iletideki nerede belirtir.</span><span class="sxs-lookup"><span data-stu-id="e6d89-120">Both activities share the same <xref:System.ServiceModel.Activities.CorrelationHandle>, but each one has its own <xref:System.ServiceModel.MessageQuerySet> and <xref:System.ServiceModel.XPathMessageQuery> that specifies where the identifying data is in that particular message.</span></span> <span data-ttu-id="e6d89-121">Bağıntı başlatır etkinlik bu <xref:System.ServiceModel.MessageQuerySet> belirtilen <xref:System.ServiceModel.Activities.Receive.CorrelationInitializers%2A> özelliği ve tüm aşağıdaki <xref:System.ServiceModel.Activities.Receive> etkinlikleri kullanılarak belirtilir <xref:System.ServiceModel.Activities.Receive.CorrelatesOn%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="e6d89-121">On the activity that initializes the correlation, this <xref:System.ServiceModel.MessageQuerySet> is specified in the <xref:System.ServiceModel.Activities.Receive.CorrelationInitializers%2A> property, and for any following <xref:System.ServiceModel.Activities.Receive> activities, it is specified using the <xref:System.ServiceModel.Activities.Receive.CorrelatesOn%2A> property.</span></span>  
  
 [!code-csharp[CFX_ContentCorrelation#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_contentcorrelation/cs/program.cs#3)]  
  
 <span data-ttu-id="e6d89-122">İçeriğe dayalı bağıntı herhangi bir ileti etkinliği tarafından başlatılabilir (<xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.Receive>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.ReceiveReply>) ne zaman veri akışları bir ileti bir parçası olarak.</span><span class="sxs-lookup"><span data-stu-id="e6d89-122">A content-based correlation can be initialized by any messaging activity (<xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.Receive>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.ReceiveReply>) when the data flows as part of a message.</span></span> <span data-ttu-id="e6d89-123">Belirli veri parçası bir ileti bir parçası olarak akış değil sonra kullanarak açıkça başlatılabilir <xref:System.ServiceModel.Activities.InitializeCorrelation> etkinlik.</span><span class="sxs-lookup"><span data-stu-id="e6d89-123">If the particular piece of data does not flow as part of a message, then it can be initialized explicitly by using the <xref:System.ServiceModel.Activities.InitializeCorrelation> activity.</span></span> <span data-ttu-id="e6d89-124">Birden çok veri parçalarını iletinin benzersiz şekilde tanımlamak için gereken sonra birden çok sorgu eklenebilir <xref:System.ServiceModel.MessageQuerySet>.</span><span class="sxs-lookup"><span data-stu-id="e6d89-124">If multiple pieces of data are required to uniquely identify the message, then multiple queries can be added to the <xref:System.ServiceModel.MessageQuerySet>.</span></span> <span data-ttu-id="e6d89-125">Bu örneklerde, bir <xref:System.ServiceModel.Activities.CorrelationHandle> açıkça her kullanarak etkinlikleri sağlanan `CorrelatesWith` veya `CorrelationHandle` olup olmadığını yalnızca bir bağıntı Bu örnekte olduğu gibi tüm iş akışı için gereken her şeyi burada karşılık gelen ancak özellikleri üzerinde `OrderId`, tarafından sağlanan örtük bağıntı tanıtıcısı Yönetimi <xref:System.ServiceModel.Activities.WorkflowServiceHost> yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="e6d89-125">In these examples, a <xref:System.ServiceModel.Activities.CorrelationHandle> was explicitly provided to each of the activities using the `CorrelatesWith` or `CorrelationHandle` properties, but if there is only one correlation required for the entire workflow, such as in this example where everything correlates on `OrderId`, the implicit correlation handle management provided by <xref:System.ServiceModel.Activities.WorkflowServiceHost> is sufficient.</span></span>  
  
## <a name="using-the-initializecorrelation-activity"></a><span data-ttu-id="e6d89-126">InitializeCorrelation etkinliğini kullanma</span><span class="sxs-lookup"><span data-stu-id="e6d89-126">Using the InitializeCorrelation Activity</span></span>  
 <span data-ttu-id="e6d89-127">Önceki örnekte, `OrderId` çağırana aktarılan <xref:System.ServiceModel.Activities.SendReply> etkinliği ve bu değer bağıntı burada başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="e6d89-127">In the previous example, the `OrderId` flowed to the caller through the <xref:System.ServiceModel.Activities.SendReply> activity and this is where the correlation was initialized.</span></span> <span data-ttu-id="e6d89-128">Aynı davranışı kullanarak gerçekleştirilebilir <xref:System.ServiceModel.Activities.InitializeCorrelation> etkinlik.</span><span class="sxs-lookup"><span data-stu-id="e6d89-128">The same behavior can be accomplished by using the <xref:System.ServiceModel.Activities.InitializeCorrelation> activity.</span></span> <span data-ttu-id="e6d89-129"><xref:System.ServiceModel.Activities.InitializeCorrelation> Etkinlik alır <xref:System.ServiceModel.Activities.CorrelationHandle> ve iletiyi doğru örneğini eşleştirmek için kullanılan verilerini temsil eden öğeleri sözlüğü.</span><span class="sxs-lookup"><span data-stu-id="e6d89-129">The <xref:System.ServiceModel.Activities.InitializeCorrelation> activity takes the <xref:System.ServiceModel.Activities.CorrelationHandle> and a dictionary of items that represent the data used to map the message to the correct instance.</span></span> <span data-ttu-id="e6d89-130">Kullanmak için <xref:System.ServiceModel.Activities.InitializeCorrelation> önceki örnekte, etkinlik kaldırmak <xref:System.ServiceModel.Activities.SendReply.CorrelationInitializers%2A> gelen <xref:System.ServiceModel.Activities.SendReply> etkinliği ve kullanarak bağıntı Initialize <xref:System.ServiceModel.Activities.InitializeCorrelation> etkinlik.</span><span class="sxs-lookup"><span data-stu-id="e6d89-130">To use the <xref:System.ServiceModel.Activities.InitializeCorrelation> activity in the preceding sample, remove the <xref:System.ServiceModel.Activities.SendReply.CorrelationInitializers%2A> from the <xref:System.ServiceModel.Activities.SendReply> activity and initialize the correlation using the <xref:System.ServiceModel.Activities.InitializeCorrelation> activity.</span></span>  
  
 [!code-csharp[CFX_ContentCorrelation#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_contentcorrelation/cs/program.cs#4)]  
  
 <span data-ttu-id="e6d89-131"><xref:System.ServiceModel.Activities.InitializeCorrelation> Etkinliği kullanılır iş akışı içinde veri önce doldurulur tutun değişkenleri sonra <xref:System.ServiceModel.Activities.Receive> başlatılmış ile karşılık gelen etkinlik <xref:System.ServiceModel.Activities.CorrelationHandle>.</span><span class="sxs-lookup"><span data-stu-id="e6d89-131">The <xref:System.ServiceModel.Activities.InitializeCorrelation> activity is then used in the workflow, after the variables that hold the data are populated but before the <xref:System.ServiceModel.Activities.Receive> activity that correlates with the initialized <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span>  
  
 [!code-csharp[CFX_ContentCorrelation#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_contentcorrelation/cs/program.cs#5)]  
  
## <a name="configuring-xpath-queries-using-the-workflow-designer"></a><span data-ttu-id="e6d89-132">XPath sorguları iş akışı Tasarımcısı'nı kullanarak yapılandırma</span><span class="sxs-lookup"><span data-stu-id="e6d89-132">Configuring XPath Queries Using the Workflow Designer</span></span>  
 <span data-ttu-id="e6d89-133">Önceki örneklerde, etkinlikler ve ileti sorgularda kullanılan XPath sorguları kodda belirtildi.</span><span class="sxs-lookup"><span data-stu-id="e6d89-133">In the previous examples, the activities and the XPath queries used in the message queries were specified in code.</span></span> <span data-ttu-id="e6d89-134">İş Akışı Tasarımcısı'nda [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] de XPaths gelen oluşturma yeteneği sağlar `DataContract` türleri için içerik tabanlı bağıntı.</span><span class="sxs-lookup"><span data-stu-id="e6d89-134">The workflow designer in [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] also provides the ability to generate XPaths from `DataContract` types for content-based correlation.</span></span> <span data-ttu-id="e6d89-135">Önceki örnekte yapılandırılmış ilk XPath için yapılandırılan <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="e6d89-135">The first XPath configured in the previous example was configured for the <xref:System.ServiceModel.Activities.SendReply>.</span></span>  
  
 [!code-csharp[CFX_ContentCorrelation#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_contentcorrelation/cs/program.cs#2)]  
  
 <span data-ttu-id="e6d89-136">İş Akışı Tasarımcısı'nda XPath Mesajlaşma etkinliği yapılandırmak için iş akışı Tasarımcısı'nda etkinliği seçin.</span><span class="sxs-lookup"><span data-stu-id="e6d89-136">To configure the XPath for a messaging activity in the workflow designer, select the activity in the workflow designer.</span></span> <span data-ttu-id="e6d89-137">Önceki örnekte olduğu gibi bağıntı etkinliğini başlatma için üç nokta düğmesini tıklatmak **CorrelationInitializers** özelliğinde **özellikleri** penceresi.</span><span class="sxs-lookup"><span data-stu-id="e6d89-137">If the activity is initializing the correlation, as in the previous example, click the ellipsis button for the **CorrelationInitializers** property in the **Properties** window.</span></span> <span data-ttu-id="e6d89-138">Bu görüntüler **eklemek bağıntı başlatıcıları** iletişim penceresi.</span><span class="sxs-lookup"><span data-stu-id="e6d89-138">This displays the **Add Correlation Initializers** dialog window.</span></span> <span data-ttu-id="e6d89-139">Bu iletişim kutusundan bağıntı türünü belirtin ve bağıntı için kullanılan içerik seçin.</span><span class="sxs-lookup"><span data-stu-id="e6d89-139">From this dialog you can specify the correlation type and select the content that is used for the correlation.</span></span> <span data-ttu-id="e6d89-140"><xref:System.ServiceModel.Activities.CorrelationHandle> Değişkeni belirtilen **Başlatıcısı ekleme** gelen kutusunda bağıntı türü ve bağıntı için kullanılan veri seçildiğinde **XPath sorguları** iletişim kutusunun bölümü.</span><span class="sxs-lookup"><span data-stu-id="e6d89-140">The <xref:System.ServiceModel.Activities.CorrelationHandle> variable is specified in the **Add initializer** box, and the correlation type and data used for the correlation is selected from the **XPath Queries** section of the dialog box.</span></span>  
  
 <span data-ttu-id="e6d89-141">![CorrelationInitializer iletişim](../../../../docs/framework/wcf/feature-details/media/correlationinitializerdlg.jpg "CorrelationInitializerDlg")</span><span class="sxs-lookup"><span data-stu-id="e6d89-141">![CorrelationInitializer Dialog](../../../../docs/framework/wcf/feature-details/media/correlationinitializerdlg.jpg "CorrelationInitializerDlg")</span></span>  
  
 <span data-ttu-id="e6d89-142">Önceki örnekte ikinci XPath sorgusu içinde yapılandırılan <xref:System.ServiceModel.Activities.Receive> etkinlik.</span><span class="sxs-lookup"><span data-stu-id="e6d89-142">The second XPath query in the previous example was configured in the <xref:System.ServiceModel.Activities.Receive> activity.</span></span>  
  
 [!code-csharp[CFX_ContentCorrelation#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_contentcorrelation/cs/program.cs#3)]  
  
 <span data-ttu-id="e6d89-143">Bağıntı Başlatmıyor Mesajlaşma bir etkinliği XPath sorgusunu yapılandırmak için iş akışı Tasarımcısı'nda etkinliği seçin ve ardından için üç nokta düğmesini tıklatın **CorrelatesOn** özelliğinde  **Özellikler** penceresi.</span><span class="sxs-lookup"><span data-stu-id="e6d89-143">To configure the XPath query for a messaging activity that does not initialize the correlation, select the activity in the workflow designer and then click the ellipsis button for the **CorrelatesOn** property in the **Properties** window.</span></span> <span data-ttu-id="e6d89-144">Bu görüntüler **CorrelatesOn tanımı** iletişim penceresi.</span><span class="sxs-lookup"><span data-stu-id="e6d89-144">This displays the **CorrelatesOn Definition** dialog window.</span></span>  
  
 <span data-ttu-id="e6d89-145">![CorrelatesOn tanımı](../../../../docs/framework/wcf/feature-details/media/correlatesondialog.jpg "CorrelatesOnDialog")</span><span class="sxs-lookup"><span data-stu-id="e6d89-145">![CorrelatesOn Definition](../../../../docs/framework/wcf/feature-details/media/correlatesondialog.jpg "CorrelatesOnDialog")</span></span>  
  
 <span data-ttu-id="e6d89-146">Bu iletişim kutusundan belirttiğiniz <xref:System.ServiceModel.Activities.CorrelationHandle> ve öğeleri seçin **XPath sorguları** XPath sorgusu oluşturmak için liste.</span><span class="sxs-lookup"><span data-stu-id="e6d89-146">From this dialog you specify the <xref:System.ServiceModel.Activities.CorrelationHandle> and choose items in the **XPath Queries** list to build the XPath query.</span></span>
