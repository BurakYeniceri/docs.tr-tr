---
title: "Devamlılık Görevlerini Kullanarak Görevleri Birbirine Bağlama"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: tasks, continuations
ms.assetid: 0b45e9a2-de28-46ce-8212-1817280ed42d
caps.latest.revision: "30"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: e528996ddbe56be009566a755adab2fd2d5413b4
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/23/2017
---
# <a name="chaining-tasks-by-using-continuation-tasks"></a><span data-ttu-id="7a46a-102">Devamlılık Görevlerini Kullanarak Görevleri Birbirine Bağlama</span><span class="sxs-lookup"><span data-stu-id="7a46a-102">Chaining Tasks by Using Continuation Tasks</span></span>
<span data-ttu-id="7a46a-103">Zaman uyumsuz programlama, ikinci bir işlem çağırma ve veri iletmektir tamamlandığında, bir zaman uyumsuz işlemi çok yaygın bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="7a46a-103">In asynchronous programming, it is very common for one asynchronous operation, on completion, to invoke a second operation and pass data to it.</span></span> <span data-ttu-id="7a46a-104">Geleneksel olarak, bu geri çağırma yöntemlerini kullanarak gerçekleştirilmedi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-104">Traditionally, this has been done by using callback methods.</span></span> <span data-ttu-id="7a46a-105">Görev paralel kitaplığı aynı işlevselliği tarafından sağlanan *devamlılık görevlerini*.</span><span class="sxs-lookup"><span data-stu-id="7a46a-105">In the Task Parallel Library, the same functionality is provided by *continuation tasks*.</span></span> <span data-ttu-id="7a46a-106">(Yalnızca devamlılığı olarak da bilinir) bir devamlılık görevi olarak bilinen başka bir görev tarafından çağrılan bir zaman uyumsuz bir görevdir *antecedent*, antecedent sona erdiğinde.</span><span class="sxs-lookup"><span data-stu-id="7a46a-106">A continuation task (also known just as a continuation) is an asynchronous task that is invoked by another task, which is known as the *antecedent*, when the antecedent finishes.</span></span>  
  
 <span data-ttu-id="7a46a-107">Devamlılıklar görece kolaydır, ancak yine de çok güçlü ve esnektir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-107">Continuations are relatively easy to use, but are nevertheless very powerful and flexible.</span></span> <span data-ttu-id="7a46a-108">Örneğin, şunları yapabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="7a46a-108">For example, you can:</span></span>  
  
-   <span data-ttu-id="7a46a-109">Verileri antecedent devamlılık geçirir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-109">Pass data from the antecedent to the continuation.</span></span>  
  
-   <span data-ttu-id="7a46a-110">Altında devamlılık çağrılan veya kaldırılacak çağrılamaz kesin koşulları belirtin.</span><span class="sxs-lookup"><span data-stu-id="7a46a-110">Specify the precise conditions under which the continuation will be invoked or not invoked.</span></span>  
  
-   <span data-ttu-id="7a46a-111">Başlamadan önce ya da işbirliği ile çalışır durumda bir devamlılık iptal edin.</span><span class="sxs-lookup"><span data-stu-id="7a46a-111">Cancel a continuation either before it starts or cooperatively as it is running.</span></span>  
  
-   <span data-ttu-id="7a46a-112">Devamlılık nasıl zamanlanmalıdır hakkında ipuçları sağlar.</span><span class="sxs-lookup"><span data-stu-id="7a46a-112">Provide hints about how the continuation should be scheduled.</span></span>  
  
-   <span data-ttu-id="7a46a-113">Aynı antecedent gelen birden çok devamlılıklar çağırır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-113">Invoke multiple continuations from the same antecedent.</span></span>  
  
-   <span data-ttu-id="7a46a-114">Tüm veya herhangi birini birden çok antecedents tamamladığınızda, bir devamlılık çağırır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-114">Invoke one continuation when all or any one of multiple antecedents complete.</span></span>  
  
-   <span data-ttu-id="7a46a-115">Devamlılıklar birbiri ardından herhangi bir rastgele uzunlukta zincir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-115">Chain continuations one after another to any arbitrary length.</span></span>  
  
-   <span data-ttu-id="7a46a-116">Antecedent tarafından oluşturulan özel durumları işlemek için bir devamlılık kullanır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-116">Use a continuation to handle exceptions thrown by the antecedent.</span></span>  
  
## <a name="about-continuations"></a><span data-ttu-id="7a46a-117">Devamlılıklar hakkında</span><span class="sxs-lookup"><span data-stu-id="7a46a-117">About continuations</span></span>  
 <span data-ttu-id="7a46a-118">Bir devamlılık oluşturulan bir görevdir <xref:System.Threading.Tasks.TaskStatus.WaitingForActivation> durumu.</span><span class="sxs-lookup"><span data-stu-id="7a46a-118">A continuation is a task that is created in the <xref:System.Threading.Tasks.TaskStatus.WaitingForActivation> state.</span></span> <span data-ttu-id="7a46a-119">Kendi öncül görevi veya görevleri tamamladıktan sonra otomatik olarak etkinleştirilir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-119">It is activated automatically when its antecedent task or tasks complete.</span></span> <span data-ttu-id="7a46a-120">Çağırma <xref:System.Threading.Tasks.Task.Start%2A?displayProperty=nameWithType> devamlılık kullanıcı kodu oluşturduğunda bir <xref:System.InvalidOperationException?displayProperty=nameWithType> özel durum.</span><span class="sxs-lookup"><span data-stu-id="7a46a-120">Calling <xref:System.Threading.Tasks.Task.Start%2A?displayProperty=nameWithType> on a continuation in user code throws an <xref:System.InvalidOperationException?displayProperty=nameWithType> exception.</span></span>  
  
 <span data-ttu-id="7a46a-121">Bir devamlılık kendisini olan bir <xref:System.Threading.Tasks.Task> ve üzerinde başlatıldığında iş parçacığı engellemez.</span><span class="sxs-lookup"><span data-stu-id="7a46a-121">A continuation is itself a <xref:System.Threading.Tasks.Task> and does not block the thread on which it is started.</span></span> <span data-ttu-id="7a46a-122">Çağrı <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> devamlılık görevi tamamlanana kadar engellemek için yöntem.</span><span class="sxs-lookup"><span data-stu-id="7a46a-122">Call the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method to block until the continuation task finishes.</span></span>  
  
## <a name="creating-a-continuation-for-a-single-antecedent"></a><span data-ttu-id="7a46a-123">Devamlılık tek antecedent için oluşturma</span><span class="sxs-lookup"><span data-stu-id="7a46a-123">Creating a continuation for a single antecedent</span></span>  
 <span data-ttu-id="7a46a-124">Kendi antecedent çağırarak tamamlandığında, yürüten bir devamlılık oluşturduğunuz <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-124">You create a continuation that executes when its antecedent has completed by calling the <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="7a46a-125">Aşağıdaki örnek, temel düzeni gösterir (daha anlaşılır olması için özel durum işleme atlanır).</span><span class="sxs-lookup"><span data-stu-id="7a46a-125">The following example shows the basic pattern, (for clarity, exception handling is omitted).</span></span> <span data-ttu-id="7a46a-126">Öncül bir görev yürütülmeden `taskA`, döndüren bir <xref:System.DayOfWeek> haftanın geçerli adını gösteren nesne.</span><span class="sxs-lookup"><span data-stu-id="7a46a-126">It executes an antecedent task, `taskA`, that returns a <xref:System.DayOfWeek> object that indicates the name of the current day of the week.</span></span> <span data-ttu-id="7a46a-127">Antecedent tamamlandığında devamlılık görevi `taskB`antecedent geçirilir ve sonucunu içeren bir dize görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7a46a-127">When the antecedent finishes, the continuation task, `taskB`, is passed the antecedent and displays a string that includes its result.</span></span>  
  
 [!code-csharp[TPL_Continuations#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/simple1.cs#1)]
 [!code-vb[TPL_Continuations#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/simple1.vb#1)]  
  
## <a name="creating-a-continuation-for-multiple-antecedents"></a><span data-ttu-id="7a46a-128">Devamlılık birden çok antecedents için oluşturma</span><span class="sxs-lookup"><span data-stu-id="7a46a-128">Creating a continuation for multiple antecedents</span></span>  
 <span data-ttu-id="7a46a-129">Herhangi bir grup görevlerin biri veya tümü tamamlandığında, çalışacak bir devamlılık de oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7a46a-129">You can also create a continuation that will run when any or all of a group of tasks has completed.</span></span> <span data-ttu-id="7a46a-130">Tüm öncül görevleri tamamladıktan sonra bir devamlılık yürütmek için statik çağrı (`Shared` Visual Basic'te) <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> yöntemi veya örnek <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-130">To execute a continuation when all antecedent tasks have completed, you call the static (`Shared` in Visual Basic) <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> method or the instance <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="7a46a-131">Öncül görevlerden herhangi birini tamamlandı zaman bir devamlılık yürütmek için statik çağrı (`Shared` Visual Basic'te) <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> yöntemi veya örnek <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A?displayProperty=nameWithType> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-131">To execute a continuation when any of the antecedent tasks has completed, you call the static (`Shared` in Visual Basic) <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> method or the instance <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="7a46a-132">Çağrılar Not <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> ve <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> aşırı çağıran iş parçacığı engelleme değil.</span><span class="sxs-lookup"><span data-stu-id="7a46a-132">Note that calls to the <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> overloads do not block the calling thread.</span></span>  <span data-ttu-id="7a46a-133">Ancak, genellikle arama dışındaki tüm <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> ve <xref:System.Threading.Tasks.Task.WhenAll%28System.Threading.Tasks.Task%5B%5D%29?displayProperty=nameWithType> döndürülen almak için yöntemleri <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> çağıran iş parçacığı engelleme özelliği.</span><span class="sxs-lookup"><span data-stu-id="7a46a-133">However, you typically call all but the <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> and  <xref:System.Threading.Tasks.Task.WhenAll%28System.Threading.Tasks.Task%5B%5D%29?displayProperty=nameWithType> methods to retrieve the returned  <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property, which does block the calling thread.</span></span>  
  
 <span data-ttu-id="7a46a-134">Aşağıdaki örnek çağrıları <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> on öncül görevlerinin sonuçlarını yansıtan bir devamlılık görevi oluşturmak için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-134">The following example calls the <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> method to create a continuation task that reflects the results of its ten antecedent tasks.</span></span> <span data-ttu-id="7a46a-135">Her öncül görev bir on ile aralıkları bir dizin değeri karesini alır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-135">Each antecedent task squares an index value that ranges from one to ten.</span></span> <span data-ttu-id="7a46a-136">Antecedents başarılı şekilde gerçekleştirirseniz (kendi <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> özelliği <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType>), <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> devamlılık özelliği olan bir dizi <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> her antecedent tarafından döndürülen değer.</span><span class="sxs-lookup"><span data-stu-id="7a46a-136">If the antecedents complete successfully (their <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> property is <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType>), the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the continuation is an array of the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> values returned by each antecedent.</span></span> <span data-ttu-id="7a46a-137">Örnek bir ile on arasındaki tüm numaraları için kareler toplamı işlem eklenmektedir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-137">The example adds them to compute the sum of squares for all numbers between one and ten.</span></span>  
  
 [!code-csharp[TPL_Continuations#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/whenall1.cs#5)]
 [!code-vb[TPL_Continuations#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/whenall1.vb#5)]  
  
## <a name="continuation-options"></a><span data-ttu-id="7a46a-138">Devamlılık seçenekleri</span><span class="sxs-lookup"><span data-stu-id="7a46a-138">Continuation options</span></span>  
 <span data-ttu-id="7a46a-139">Tek görev devamlılığı oluştururken kullanabileceğiniz bir <xref:System.Threading.Tasks.Task.ContinueWith%2A> alan aşırı bir <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> devamlılık başlatan koşulları belirtmek için numaralandırma değeri.</span><span class="sxs-lookup"><span data-stu-id="7a46a-139">When you create a single-task continuation, you can use a <xref:System.Threading.Tasks.Task.ContinueWith%2A> overload that takes a <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> enumeration value to specify the conditions under which the continuation starts.</span></span> <span data-ttu-id="7a46a-140">Örneğin, devamlılık yalnızca antecedent başarıyla tamamlarsa ya da yalnızca hatalı bir durumda tamamlarsa çalıştırmak üzere olduğunu belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7a46a-140">For example, you can specify that the continuation is to run only if the antecedent completes successfully, or only if it completes in a faulted state.</span></span> <span data-ttu-id="7a46a-141">Devamlılık antecedent devamlılık çağırmak hazır olduğunda koşul doğru değilse, doğrudan geçiş <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> belirtin ve sonra başlatılamıyor.</span><span class="sxs-lookup"><span data-stu-id="7a46a-141">If the condition is not true when the antecedent is ready to invoke the continuation, the continuation transitions directly to the <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> state and cannot be started after that.</span></span>  
  
 <span data-ttu-id="7a46a-142">Aşırı gibi birden çok görev devamlılığı yöntemleri sayısı <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> yöntemi de dahil bir <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> parametresi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-142">A number of multi-task continuation methods, such as overloads of the <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> method, also include a <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> parameter.</span></span> <span data-ttu-id="7a46a-143">Yalnızca bir alt tüm <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> numaralandırma üyeleri geçerlidir, ancak.</span><span class="sxs-lookup"><span data-stu-id="7a46a-143">Only a subset of all <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> enumeration members are valid, however.</span></span> <span data-ttu-id="7a46a-144">Belirleyebileceğiniz <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> ortaklarınıza sahip değerlerini <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=nameWithType> numaralandırma, gibi <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType>, <xref:System.Threading.Tasks.TaskContinuationOptions.LongRunning?displayProperty=nameWithType>, ve <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7a46a-144">You can specify <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> values that have counterparts in the <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=nameWithType> enumeration, such as <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType>, <xref:System.Threading.Tasks.TaskContinuationOptions.LongRunning?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness?displayProperty=nameWithType>.</span></span> <span data-ttu-id="7a46a-145">Herhangi bir belirtirseniz, `NotOn` veya `OnlyOn` çok görev devamlılığı seçeneklerle bir <xref:System.ArgumentOutOfRangeException> özel çalışma zamanında durum.</span><span class="sxs-lookup"><span data-stu-id="7a46a-145">If you specify any of the `NotOn` or `OnlyOn` options with a multi-task continuation, an <xref:System.ArgumentOutOfRangeException> exception will be thrown at run time.</span></span>  
  
 <span data-ttu-id="7a46a-146">Görev devamlılığı seçenekleri hakkında daha fazla bilgi için bkz: <xref:System.Threading.Tasks.TaskContinuationOptions> konu.</span><span class="sxs-lookup"><span data-stu-id="7a46a-146">For more information on task continuation options, see the <xref:System.Threading.Tasks.TaskContinuationOptions> topic.</span></span>  
  
## <a name="passing-data-to-a-continuation"></a><span data-ttu-id="7a46a-147">Bir devamlılık veri geçirme</span><span class="sxs-lookup"><span data-stu-id="7a46a-147">Passing Data to a Continuation</span></span>  
 <span data-ttu-id="7a46a-148"><xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> Yöntemi için bağımsız değişken olarak devamlılık kullanıcı temsilci antecedent başvuru geçirir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-148">The <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method passes a reference to the antecedent to the user delegate of the continuation as an argument.</span></span> <span data-ttu-id="7a46a-149">Antecedent ise bir <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> nesne ve görev çalıştırılmadan tamamlanıp tamamlanmadığını kadar devamlılık erişebilirsiniz sonra <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> görev özelliği.</span><span class="sxs-lookup"><span data-stu-id="7a46a-149">If the antecedent is a <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> object, and the task ran until it was completed, then the continuation can access the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the task.</span></span>  
  
 <span data-ttu-id="7a46a-150"><xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> Özelliği, görevin tamamlanmasını engeller.</span><span class="sxs-lookup"><span data-stu-id="7a46a-150">The <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property blocks until the task has completed.</span></span> <span data-ttu-id="7a46a-151">Görev iptal ya da hatalı, ancak erişmeye <xref:System.Threading.Tasks.Task%601.Result%2A> özelliği atar bir <xref:System.AggregateException> özel durum.</span><span class="sxs-lookup"><span data-stu-id="7a46a-151">However, if the task was canceled or faulted, attempting to access the <xref:System.Threading.Tasks.Task%601.Result%2A> property throws an <xref:System.AggregateException> exception.</span></span> <span data-ttu-id="7a46a-152">Kullanarak bu sorunu önlemek <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnRanToCompletion> , aşağıdaki örnekte gösterildiği gibi seçeneği.</span><span class="sxs-lookup"><span data-stu-id="7a46a-152">You can avoid this problem by using the <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnRanToCompletion> option, as shown in the following example.</span></span>  
  
 [!code-csharp[TPL_Continuations#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/result1.cs#2)]
 [!code-vb[TPL_Continuations#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/result1.vb#2)]  
  
 <span data-ttu-id="7a46a-153">Antecedent başarılı tamamlanıncaya kadar çalıştırmadıysanız bile çalışmaya devam istiyorsanız, özel durum karşı koruma gerekir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-153">If you want the continuation to run even if the antecedent did not run to successful completion, you must guard against the exception.</span></span> <span data-ttu-id="7a46a-154">Bir yaklaşım ise test etmek için <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> öncül ve yalnızca özelliği denemek erişmek <xref:System.Threading.Tasks.Task%601.Result%2A> durum değilse özelliği <xref:System.Threading.Tasks.TaskStatus.Faulted> veya <xref:System.Threading.Tasks.TaskStatus.Canceled>.</span><span class="sxs-lookup"><span data-stu-id="7a46a-154">One approach is to test the <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> property of the antecedent, and only attempt to access the <xref:System.Threading.Tasks.Task%601.Result%2A> property if the status is not <xref:System.Threading.Tasks.TaskStatus.Faulted> or <xref:System.Threading.Tasks.TaskStatus.Canceled>.</span></span> <span data-ttu-id="7a46a-155">Ayrıca inceleyebilirsiniz <xref:System.Threading.Tasks.Task.Exception%2A> nın özelliği.</span><span class="sxs-lookup"><span data-stu-id="7a46a-155">You can also examine the <xref:System.Threading.Tasks.Task.Exception%2A> property of the antecedent.</span></span> <span data-ttu-id="7a46a-156">Daha fazla bilgi için bkz: [özel durum işleme](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="7a46a-156">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span> <span data-ttu-id="7a46a-157">Aşağıdaki örnekte erişim antecedent'ın önceki örneği değiştiren <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> yalnızca durumunu ise özelliği <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7a46a-157">The following example modifies the previous example to access antecedent's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property only if its status is <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[TPL_Continuations#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/result2.cs#7)]
 [!code-vb[TPL_Continuations#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/result2.vb#7)]  
  
## <a name="canceling-a-continuation"></a><span data-ttu-id="7a46a-158">Bir devamlılık iptal etme</span><span class="sxs-lookup"><span data-stu-id="7a46a-158">Canceling a Continuation</span></span>  
 <span data-ttu-id="7a46a-159"><xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> Bir devamlılık özelliği ayarlanmış <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> aşağıdaki durumlarda:</span><span class="sxs-lookup"><span data-stu-id="7a46a-159">The <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> property of a continuation is set to <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> in the following situations:</span></span>  
  
-   <span data-ttu-id="7a46a-160">Bunu oluşturur bir <xref:System.OperationCanceledException> iptal isteğine yanıt olarak özel durum.</span><span class="sxs-lookup"><span data-stu-id="7a46a-160">It throws an <xref:System.OperationCanceledException> exception in response to a cancellation request.</span></span> <span data-ttu-id="7a46a-161">Özel durum devamlılık için geçirilen aynı belirteci içeriyorsa gibi herhangi bir görev ile işbirlikçi iptal onay işlem görür.</span><span class="sxs-lookup"><span data-stu-id="7a46a-161">Just as with any task, if the exception contains the same token that was passed to the continuation, it is treated as an acknowledgement of cooperative cancellation.</span></span>  
  
-   <span data-ttu-id="7a46a-162">Devamlılık geçirilen bir <xref:System.Threading.CancellationToken?displayProperty=nameWithType> , <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> özelliği `true`.</span><span class="sxs-lookup"><span data-stu-id="7a46a-162">The continuation is passed a <xref:System.Threading.CancellationToken?displayProperty=nameWithType> whose <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> property is `true`.</span></span> <span data-ttu-id="7a46a-163">Bu durumda, devamlılık başlatılmaz ve için geçiş <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> durumu.</span><span class="sxs-lookup"><span data-stu-id="7a46a-163">In this case, the continuation does not start, and it transitions to the <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> state.</span></span>  
  
-   <span data-ttu-id="7a46a-164">Tarafından belirlenen koşul nedeniyle devamlılık hiçbir zaman çalışır, <xref:System.Threading.Tasks.TaskContinuationOptions> bağımsız değişkeni karşılanmadı.</span><span class="sxs-lookup"><span data-stu-id="7a46a-164">The continuation never runs because the condition set by its <xref:System.Threading.Tasks.TaskContinuationOptions> argument was not met.</span></span> <span data-ttu-id="7a46a-165">Örneğin, bir antecedent girmeyeceğini bir <xref:System.Threading.Tasks.TaskStatus.Faulted?displayProperty=nameWithType> durumunda, geçirilen devamlılığını <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnFaulted?displayProperty=nameWithType> seçeneği çalışmaz ancak için geçirecektir <xref:System.Threading.Tasks.TaskStatus.Canceled> durumu.</span><span class="sxs-lookup"><span data-stu-id="7a46a-165">For example, if an antecedent goes into a <xref:System.Threading.Tasks.TaskStatus.Faulted?displayProperty=nameWithType> state, its continuation that was passed the <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnFaulted?displayProperty=nameWithType> option will not run but will transition to the <xref:System.Threading.Tasks.TaskStatus.Canceled> state.</span></span>  
  
 <span data-ttu-id="7a46a-166">Bir görevi ve devamlılığını aynı mantıksal işlemi iki bölümden temsil ediyorsa, hem görevler, aşağıdaki örnekte gösterildiği gibi aynı iptal belirtecini geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7a46a-166">If a task and its continuation represent two parts of the same logical operation, you can pass the same cancellation token to both tasks, as shown in the following example.</span></span> <span data-ttu-id="7a46a-167">Devamlılık geçirir 33 bölünebilir tamsayılar listesini oluşturan bir antecedent oluşur.</span><span class="sxs-lookup"><span data-stu-id="7a46a-167">It consists of an antecedent that generates a list of integers that are divisible by 33, which it passes to the continuation.</span></span> <span data-ttu-id="7a46a-168">Devamlılık sırayla listesini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7a46a-168">The continuation in turn displays the list.</span></span> <span data-ttu-id="7a46a-169">Düzenli olarak antecedent ve devamlılık için rastgele aralıkları duraklatın.</span><span class="sxs-lookup"><span data-stu-id="7a46a-169">Both the antecedent and the continuation pause regularly for random intervals.</span></span> <span data-ttu-id="7a46a-170">Ayrıca, bir <xref:System.Threading.Timer?displayProperty=nameWithType> yürütmek için kullanılan nesne `Elapsed` beş saniyelik zaman aşımı aralığından sonra yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-170">In addition, a <xref:System.Threading.Timer?displayProperty=nameWithType> object is used to execute the `Elapsed` method after a five-second timeout interval.</span></span> <span data-ttu-id="7a46a-171">Bu çağrı <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> çağırmak şu anda yürütülen görev neden yöntemi <xref:System.Threading.CancellationToken.ThrowIfCancellationRequested%2A?displayProperty=nameWithType> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-171">This calls the <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> method, which causes the currently executing task to call the <xref:System.Threading.CancellationToken.ThrowIfCancellationRequested%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="7a46a-172">Olup olmadığını <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> antecedent veya devamlılığını yürütülürken zaman yöntemi çağrıldığında rastgele oluşturulmuş duraklatma süresi üzerinde bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-172">Whether the <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> method is called when the antecedent or its continuation is executing depends on the duration of the randomly generated pauses.</span></span> <span data-ttu-id="7a46a-173">Antecedent iptal ederseniz, devamlılık başlatılmaz.</span><span class="sxs-lookup"><span data-stu-id="7a46a-173">If the antecedent is canceled, the continuation will not start.</span></span> <span data-ttu-id="7a46a-174">Antecedent iptal değil, belirteç hala devamlılık iptal etmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-174">If the antecedent is not canceled, the token can still be used to cancel the continuation.</span></span>  
  
 [!code-csharp[TPL_Continuations#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/cancellation1.cs#3)]
 [!code-vb[TPL_Continuations#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/cancellation1.vb#3)]  
  
 <span data-ttu-id="7a46a-175">Belirterek bir iptal belirteci devamlılık girmeden kendi antecedent iptal edilirse yürütme gelen bir devamlılık engelleyebilir <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnCanceled?displayProperty=nameWithType> seçeneği devamlılık oluşturduğunuzda.</span><span class="sxs-lookup"><span data-stu-id="7a46a-175">You can also prevent a continuation from executing if its antecedent is canceled without supplying the continuation a cancellation token by specifying the <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnCanceled?displayProperty=nameWithType> option when you create the continuation.</span></span> <span data-ttu-id="7a46a-176">Basit bir örnek verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-176">The following is a simple example.</span></span>  
  
 [!code-csharp[TPL_Continuations#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/cancellation2.cs#8)]
 [!code-vb[TPL_Continuations#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/cancellation2.vb#8)]  
  
 <span data-ttu-id="7a46a-177">İçine bir devamlılık göründükten sonra <xref:System.Threading.Tasks.TaskStatus.Canceled> durumunda, izleyin, bağlı olarak devamlılıklar etkileyebilir <xref:System.Threading.Tasks.TaskContinuationOptions> bu devamlılıklar için belirtildi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-177">After a continuation goes into the <xref:System.Threading.Tasks.TaskStatus.Canceled> state, it may affect continuations that follow, depending on the <xref:System.Threading.Tasks.TaskContinuationOptions> that were specified for those continuations.</span></span>  
  
 <span data-ttu-id="7a46a-178">Elden devamlılıklar başlatılmaz.</span><span class="sxs-lookup"><span data-stu-id="7a46a-178">Continuations that are disposed will not start.</span></span>  
  
## <a name="continuations-and-child-tasks"></a><span data-ttu-id="7a46a-179">Devamlılıklar ve alt görevler</span><span class="sxs-lookup"><span data-stu-id="7a46a-179">Continuations and Child Tasks</span></span>  
 <span data-ttu-id="7a46a-180">Bir devamlılık antecedent kadar çalışmaz ve tüm bağlı alt görevleri tamamladınız.</span><span class="sxs-lookup"><span data-stu-id="7a46a-180">A continuation does not run until the antecedent and all of its attached child tasks have completed.</span></span> <span data-ttu-id="7a46a-181">Devamlılık ayrılmış alt görevin bitmesini beklemez.</span><span class="sxs-lookup"><span data-stu-id="7a46a-181">The continuation does not wait for detached child tasks to finish.</span></span> <span data-ttu-id="7a46a-182">Aşağıdaki iki örnek bağlı ve ayrılmış bir devamlılık oluşturan bir antecedent alt görevler gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-182">The following two examples illustrate child tasks that are attached to and detached from an antecedent that creates a continuation.</span></span> <span data-ttu-id="7a46a-183">Aşağıdaki örnekte, yalnızca tüm alt görevleri tamamladıktan ve aynı her çıktı örneği birden çok kez üretir çalıştırmadan sonra devamlılık çalışır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-183">In the following example, the continuation runs only after all child tasks have completed, and running the example multiple times produces identical output each time.</span></span> <span data-ttu-id="7a46a-184">Örnek çağırarak antecedent başlatır Not <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> yöntemi, bu yana varsayılan <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> yöntemi oluşturur, varsayılan görev oluşturma seçeneği üst göreve <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7a46a-184">Note that the example launches the antecedent by calling the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method, since by default the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> method creates a parent task whose default task creation option is <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[TPL_Continuations#9](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/attached1.cs#9)]
 [!code-vb[TPL_Continuations#9](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/attached1.vb#9)]  
  
 <span data-ttu-id="7a46a-185">Ancak, alt görevler antecedent ayrılmış, devamlılık antecedent sonlandırıldı, alt görevler durumuna bakılmaksızın hemen sonra çalışır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-185">If child tasks are detached from the antecedent, however, the continuation runs as soon as the antecedent has terminated, regardless of the state of the child tasks.</span></span> <span data-ttu-id="7a46a-186">Sonuç olarak, aşağıdaki örnekte birden çok çalıştırılan Görev Zamanlayıcısı'nı her alt görevin nasıl işleneceğini bağlıdır değişken çıkışı oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-186">As a result, multiple runs of the following example can produce variable output that depends on how the task scheduler handled each child task.</span></span>  
  
 [!code-csharp[TPL_Continuations#10](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/detached1.cs#10)]
 [!code-vb[TPL_Continuations#10](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/detached1.vb#10)]  
  
 <span data-ttu-id="7a46a-187">Son durum öncül görevin tüm ekli alt görevler son durumlarına göre bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-187">The final status of the antecedent task depends on the final status of any attached child tasks.</span></span> <span data-ttu-id="7a46a-188">Ayrılan alt görevler durumunu üst etkilemez.</span><span class="sxs-lookup"><span data-stu-id="7a46a-188">The status of detached child tasks does not affect the parent.</span></span> <span data-ttu-id="7a46a-189">Daha fazla bilgi için bkz: [eklenen ve ayrılan alt görevler](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="7a46a-189">For more information, see [Attached and Detached Child Tasks](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span></span>  
  
## <a name="associating-state-with-continuations"></a><span data-ttu-id="7a46a-190">Durum devamlılıklar ile ilişkilendirme</span><span class="sxs-lookup"><span data-stu-id="7a46a-190">Associating State with Continuations</span></span>  
 <span data-ttu-id="7a46a-191">Rastgele durumu görev devamlılığı ile ilişkilendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7a46a-191">You can associate arbitrary state with a task continuation.</span></span> <span data-ttu-id="7a46a-192"><xref:System.Threading.Tasks.Task.ContinueWith%2A> Yöntemi sağlar aşırı yüklenmiş sürümleri, her Al bir <xref:System.Object> devamlılık durumunu gösteren bir değer.</span><span class="sxs-lookup"><span data-stu-id="7a46a-192">The <xref:System.Threading.Tasks.Task.ContinueWith%2A> method provides overloaded versions that each take an <xref:System.Object> value that represents the state of the continuation.</span></span> <span data-ttu-id="7a46a-193">Bu durum nesnesi kullanarak daha sonra erişebileceğiniz <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> özelliği.</span><span class="sxs-lookup"><span data-stu-id="7a46a-193">You can later access this state object by using the <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="7a46a-194">Bu durum nesne `null` bir değer belirtmezseniz.</span><span class="sxs-lookup"><span data-stu-id="7a46a-194">This state object is `null` if you do not provide a value.</span></span>  
  
 <span data-ttu-id="7a46a-195">Devamlılık durumunda yararlı kullanan var olan kodu dönüştürürken [zaman uyumsuz programlama modeli (APM)](../../../docs/standard/asynchronous-programming-patterns/asynchronous-programming-model-apm.md) TPL kullanılacak.</span><span class="sxs-lookup"><span data-stu-id="7a46a-195">Continuation state is useful when you convert existing code that uses the [Asynchronous Programming Model (APM)](../../../docs/standard/asynchronous-programming-patterns/asynchronous-programming-model-apm.md) to use the TPL.</span></span> <span data-ttu-id="7a46a-196">APM, genellikle nesne durumda sağladığınız **başlamak***yöntemi* yöntemi ve kullanarak durum sonraki erişim <xref:System.IAsyncResult.AsyncState%2A?displayProperty=nameWithType> özelliği.</span><span class="sxs-lookup"><span data-stu-id="7a46a-196">In the APM, you typically provide object state in the **Begin***Method* method and later access that state by using the <xref:System.IAsyncResult.AsyncState%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="7a46a-197">Kullanarak <xref:System.Threading.Tasks.Task.ContinueWith%2A> yöntemi, korumak bu durum TPL kullanmak için APM kullanan kodu dönüştürürken.</span><span class="sxs-lookup"><span data-stu-id="7a46a-197">By using the <xref:System.Threading.Tasks.Task.ContinueWith%2A> method, you can preserve this state when you convert code that uses the APM to use the TPL.</span></span>  
  
 <span data-ttu-id="7a46a-198">Devamlılık durumu da yararlı olabilir ile çalışırken <xref:System.Threading.Tasks.Task> nesnelerini [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)] hata ayıklayıcı.</span><span class="sxs-lookup"><span data-stu-id="7a46a-198">Continuation state can also be useful when you work with <xref:System.Threading.Tasks.Task> objects in the [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)] debugger.</span></span> <span data-ttu-id="7a46a-199">Örneğin, **Paralel Görevler** penceresinde **görev** sütunu her görev için durum nesnenin dize gösterimini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7a46a-199">For example, in the **Parallel Tasks** window, the **Task** column displays the string representation of the state object for each task.</span></span> <span data-ttu-id="7a46a-200">Hakkında daha fazla bilgi için **Paralel Görevler** penceresinde bkz [görevleri penceresini kullanma](/visualstudio/debugger/using-the-tasks-window).</span><span class="sxs-lookup"><span data-stu-id="7a46a-200">For more information about the **Parallel Tasks** window, see [Using the Tasks Window](/visualstudio/debugger/using-the-tasks-window).</span></span>  
  
 <span data-ttu-id="7a46a-201">Aşağıdaki örnek devamlılık durumu kullanmayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-201">The following example shows how to use continuation state.</span></span> <span data-ttu-id="7a46a-202">Devamlılık görevlerini zinciri oluşturur.</span><span class="sxs-lookup"><span data-stu-id="7a46a-202">It creates a chain of continuation tasks.</span></span> <span data-ttu-id="7a46a-203">Her görev geçerli zaman tanır bir <xref:System.DateTime> nesnesi için `state` parametresinin <xref:System.Threading.Tasks.Task.ContinueWith%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-203">Each task provides the current time, a <xref:System.DateTime> object, for the `state` parameter of the <xref:System.Threading.Tasks.Task.ContinueWith%2A> method.</span></span> <span data-ttu-id="7a46a-204">Her <xref:System.DateTime> nesnesi devamlılık görevi oluşturulur süreyi temsil eder.</span><span class="sxs-lookup"><span data-stu-id="7a46a-204">Each <xref:System.DateTime> object represents the time at which the continuation task is created.</span></span> <span data-ttu-id="7a46a-205">İkinci bir sonuç olarak her görev üreten <xref:System.DateTime> görev tamamlandıktan zamanı temsil eden nesne.</span><span class="sxs-lookup"><span data-stu-id="7a46a-205">Each task produces as its result a second <xref:System.DateTime> object that represents the time at which the task finishes.</span></span> <span data-ttu-id="7a46a-206">Tüm görevleri tamamladıktan sonra bu örnek oluşturma saat ve her hangi bir devamlılık görev tamamlandığında saati görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7a46a-206">After all tasks finish, this example displays the creation time and the time at which each continuation task finishes.</span></span>  
  
 [!code-csharp[TPL_ContinuationState#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuationstate/cs/continuationstate.cs#1)]
 [!code-vb[TPL_ContinuationState#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuationstate/vb/continuationstate.vb#1)]  
  
## <a name="handling-exceptions-thrown-from-continuations"></a><span data-ttu-id="7a46a-207">Devamlılıklar oluşturulan özel durumları işleme</span><span class="sxs-lookup"><span data-stu-id="7a46a-207">Handling Exceptions Thrown from Continuations</span></span>  
 <span data-ttu-id="7a46a-208">Antecedent devamlılık ilişki üst-alt ilişkisinde değil.</span><span class="sxs-lookup"><span data-stu-id="7a46a-208">An antecedent-continuation relationship is not a parent-child relationship.</span></span> <span data-ttu-id="7a46a-209">Devamlılıklar tarafından oluşturulan özel durumları antecedent yayılmaz.</span><span class="sxs-lookup"><span data-stu-id="7a46a-209">Exceptions thrown by continuations are not propagated to the antecedent.</span></span> <span data-ttu-id="7a46a-210">Bu nedenle, bunları başka herhangi bir görev, aşağıdaki gibi gerçekleştirilir gibi devamlılıklar tarafından oluşturulan özel durumları işler:</span><span class="sxs-lookup"><span data-stu-id="7a46a-210">Therefore, handle exceptions thrown by continuations as you would handle them in any other task, as follows:</span></span>  
  
-   <span data-ttu-id="7a46a-211">Kullanabileceğiniz <xref:System.Threading.Tasks.Task.Wait%2A>, <xref:System.Threading.Tasks.Task.WaitAll%2A>, veya <xref:System.Threading.Tasks.Task.WaitAny%2A> yöntemi veya üzerinde devamlılık beklenecek genel karşılığı,.</span><span class="sxs-lookup"><span data-stu-id="7a46a-211">You can use the <xref:System.Threading.Tasks.Task.Wait%2A>, <xref:System.Threading.Tasks.Task.WaitAll%2A>, or <xref:System.Threading.Tasks.Task.WaitAny%2A> method, or its generic counterpart, to wait on the continuation.</span></span> <span data-ttu-id="7a46a-212">Bir antecedent ve kendi devamlılıklar aynı bekleyebilirsiniz `try` aşağıdaki örnekte gösterildiği gibi deyimi.</span><span class="sxs-lookup"><span data-stu-id="7a46a-212">You can wait for an antecedent and its continuations in the same `try` statement, as shown in the following example.</span></span>  
  
     [!code-csharp[TPL_Continuations#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/exception1.cs#6)]
     [!code-vb[TPL_Continuations#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/exception1.vb#6)]  
  
-   <span data-ttu-id="7a46a-213">İkinci bir devamlılık izlemek için kullanabileceğiniz <xref:System.Threading.Tasks.Task.Exception%2A> ilk devamlılık özelliği.</span><span class="sxs-lookup"><span data-stu-id="7a46a-213">You can use a second continuation to observe the <xref:System.Threading.Tasks.Task.Exception%2A> property of the first continuation.</span></span> <span data-ttu-id="7a46a-214">Aşağıdaki örnekte, bir görev bir mevcut olmayan dosyasını okumaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-214">In the following example, a task attempts to read from a non-existent file.</span></span> <span data-ttu-id="7a46a-215">Devamlılık sonra öncül görev özel durum bilgilerini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7a46a-215">The continuation then displays information about the exception in the antecedent task.</span></span>  
  
     [!code-csharp[TPL_Continuations#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/exception2.cs#4)]
     [!code-vb[TPL_Continuations#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/exception2.vb#4)]  
  
     <span data-ttu-id="7a46a-216">İle çalıştırıldığından <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnFaulted?displayProperty=nameWithType> seçeneğini devamlılık yürütür yalnızca antecedent içinde bir özel durum oluşur ve bu nedenle bu, kabul edilebilir antecedent's <xref:System.Threading.Tasks.Task.Exception%2A> özelliği `null`.</span><span class="sxs-lookup"><span data-stu-id="7a46a-216">Because it was run with the <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnFaulted?displayProperty=nameWithType> option, the continuation executes only if an exception occurs in the antecedent, and therefore it can assume that the antecedent's <xref:System.Threading.Tasks.Task.Exception%2A> property is not `null`.</span></span> <span data-ttu-id="7a46a-217">Antecedent içinde bir özel durum olup olmadığına bakılmaksızın devamlılık yürütülürse denetlemek olurdu olup olmadığını antecedent's <xref:System.Threading.Tasks.Task.Exception%2A> özelliği `null` özel durumu işlemek üzere çalışmadan önce aşağıdaki kod parçası gösterir.</span><span class="sxs-lookup"><span data-stu-id="7a46a-217">If the continuation executes whether or not an exception is thrown in the antecedent, it would have to check whether the antecedent's <xref:System.Threading.Tasks.Task.Exception%2A> property is not `null` before attempting to handle the exception, as the following code fragment shows.</span></span>  
  
     [!code-csharp[TPL_Continuations#11](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/exception2.cs#11)]
     [!code-vb[TPL_Continuations#11](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/exception2.vb#11)]  
  
     <span data-ttu-id="7a46a-218">Daha fazla bilgi için bkz: [özel durum işleme](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md) ve [NIB: nasıl yapılır: görevler tarafından özel durum işleme](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d).</span><span class="sxs-lookup"><span data-stu-id="7a46a-218">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md) and [NIB: How to: Handle Exceptions Thrown by Tasks](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d).</span></span>  
  
-   <span data-ttu-id="7a46a-219">Devamlılık kullanılarak oluşturulmuş bir ekli alt görev olup olmadığını <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType> seçeneği, üst çağıran iş parçacığı tarafından eklenen herhangi bir alt durumda olduğu gibi özel durumlar yayılır.</span><span class="sxs-lookup"><span data-stu-id="7a46a-219">If the continuation is an attached child task that was created by using the <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType> option, its exceptions will be propagated by the parent back to the calling thread, as is the case in any other attached child.</span></span> <span data-ttu-id="7a46a-220">Daha fazla bilgi için bkz: [eklenen ve ayrılan alt görevler](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="7a46a-220">For more information, see [Attached and Detached Child Tasks](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7a46a-221">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="7a46a-221">See Also</span></span>  
 [<span data-ttu-id="7a46a-222">Görev Paralel Kitaplığı (TPL)</span><span class="sxs-lookup"><span data-stu-id="7a46a-222">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)
