---
title: "İş Akışı Hizmeti Konak Genişletilebilirliği"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c0e8f7bb-cb13-49ec-852f-b85d7c23972f
caps.latest.revision: "14"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 36ecde17986425436e17e6b7a4043fc74a6e583e
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/21/2017
---
# <a name="workflow-service-host-extensibility"></a><span data-ttu-id="ad86e-102">İş Akışı Hizmeti Konak Genişletilebilirliği</span><span class="sxs-lookup"><span data-stu-id="ad86e-102">Workflow Service Host Extensibility</span></span>
[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]<span data-ttu-id="ad86e-103">sağlar <xref:System.ServiceModel.Activities.WorkflowServiceHost> iş akışı hizmetlerini barındırma için sınıf.</span><span class="sxs-lookup"><span data-stu-id="ad86e-103"> provides the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class for hosting workflow services.</span></span> <span data-ttu-id="ad86e-104">Bu sınıf, kendi kendine yönetilen bir uygulamada bir iş akışı hizmeti veya bir Windows hizmeti barındırıyorsanız kullanılır.</span><span class="sxs-lookup"><span data-stu-id="ad86e-104">This class is used when you are self-hosting a workflow service in a managed application or a Windows service.</span></span> <span data-ttu-id="ad86e-105">Bu sınıf ayrıca Internet Information Services (IIS) veya Windows İşlem Etkinleştirme Hizmeti (WAS) ile bir iş akışı hizmeti barındırma kullanılır.</span><span class="sxs-lookup"><span data-stu-id="ad86e-105">This class is also used when hosting a workflow service with Internet Information Services (IIS) or Windows Process Activation Service (WAS).</span></span> <span data-ttu-id="ad86e-106"><xref:System.ServiceModel.Activities.WorkflowServiceHost> Sınıfı, özel uzantılar eklemenize izin uzantı noktaları boşta davranışı değiştirmek ve ana bilgisayar hizmet olmayan iş akışları (Mesajlaşma etkinlikleri kullanmayın iş akışları) sağlar.</span><span class="sxs-lookup"><span data-stu-id="ad86e-106">The <xref:System.ServiceModel.Activities.WorkflowServiceHost> class provides extension points that allow you to add custom extensions, change the idle behavior, and host non-service workflows (workflows that do not use messaging activities).</span></span>  
  
## <a name="workflow-service-host-extensions"></a><span data-ttu-id="ad86e-107">İş akışı hizmeti ana bilgisayar uzantıları</span><span class="sxs-lookup"><span data-stu-id="ad86e-107">Workflow Service Host Extensions</span></span>  
 <span data-ttu-id="ad86e-108"><xref:System.ServiceModel.Activities.WorkflowServiceHost> İçeren bir <xref:System.ServiceModel.Activities.WorkflowServiceHost.WorkflowExtensions%2A> türündeki özelliği <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager> uzantısı eklemek için yöntemler sağlar <xref:System.ServiceModel.Activities.WorkflowServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="ad86e-108">The <xref:System.ServiceModel.Activities.WorkflowServiceHost> contains a <xref:System.ServiceModel.Activities.WorkflowServiceHost.WorkflowExtensions%2A> property of type <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager> that provides methods to add extensions to the <xref:System.ServiceModel.Activities.WorkflowServiceHost>.</span></span> <span data-ttu-id="ad86e-109">Kullanım <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager.Add%2A> her iş akışı hizmeti örneği için bir uzantı ekleme yöntemi.</span><span class="sxs-lookup"><span data-stu-id="ad86e-109">Use the <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager.Add%2A> method to add an extension for each workflow service instance.</span></span> <span data-ttu-id="ad86e-110">Bir iş akışı hizmeti örneği oluşturulduğunda veya sürdürme deposundan yüklenen yeni uzantısı oluşturmak için belirtilen temsilci çağrılır.</span><span class="sxs-lookup"><span data-stu-id="ad86e-110">The delegate specified is called to create a new extension when a workflow service instance is created or loaded from a persistence store.</span></span> <span data-ttu-id="ad86e-111">Kullanım <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager.Add%2A> her iş akışı hizmeti konağı için bir uzantı ekleme yöntemi bir uzantı örneği, tüm iş akışı hizmeti örnekleri için paylaşılır.</span><span class="sxs-lookup"><span data-stu-id="ad86e-111">Use the <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager.Add%2A> method to add an extension for each workflow service host, one instance of the extension is shared for all workflow service instances.</span></span>  
  
## <a name="react-to-unhandled-exceptions"></a><span data-ttu-id="ad86e-112">İşlenmeyen özel durumlar için tepki</span><span class="sxs-lookup"><span data-stu-id="ad86e-112">React to Unhandled Exceptions</span></span>  
 <span data-ttu-id="ad86e-113"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> Bir iş akışı hizmeti içinde işlenmeyen bir özel durum oluşursa, gerçekleştirilecek eylemi belirtmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="ad86e-113">The <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> enables you to specify the action to take if an unhandled exception occurs within a workflow service.</span></span> <span data-ttu-id="ad86e-114"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior.Action%2A> Özelliği birini belirtir <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction> değerler:</span><span class="sxs-lookup"><span data-stu-id="ad86e-114">The <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior.Action%2A> property specifies one of the <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction> values:</span></span>  
  
-   <span data-ttu-id="ad86e-115"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Abandon>– İş akışı hizmeti örneği durdurur.</span><span class="sxs-lookup"><span data-stu-id="ad86e-115"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Abandon> – Aborts the workflow service instance.</span></span>  
  
-   <span data-ttu-id="ad86e-116"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.AbandonAndSuspend>– Geri son kalıcı durum yapar ve iş akışı hizmeti örneği askıya alır.</span><span class="sxs-lookup"><span data-stu-id="ad86e-116"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.AbandonAndSuspend> – Rolls back to the last persisted state and suspends the workflow service instance.</span></span> <span data-ttu-id="ad86e-117">Bu yalnızca, iş akışı zaten en az bir kez kalıcı yapılmadı oluşur.</span><span class="sxs-lookup"><span data-stu-id="ad86e-117">This only occurs if the workflow has already been persisted at least once.</span></span> <span data-ttu-id="ad86e-118">Aksi durumda iş akışı örneği durduruldu.</span><span class="sxs-lookup"><span data-stu-id="ad86e-118">If not the workflow instance is aborted.</span></span>  
  
-   <span data-ttu-id="ad86e-119"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel>– Örneği iptal eder.</span><span class="sxs-lookup"><span data-stu-id="ad86e-119"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel> – Cancels the instance.</span></span>  
  
-   <span data-ttu-id="ad86e-120"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Terminate>– Örneği sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="ad86e-120"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Terminate> – Terminates the instance.</span></span>  
  
 <span data-ttu-id="ad86e-121">Bu davranış, aşağıdaki örnekte gösterildiği gibi kodda yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="ad86e-121">This behavior can be configured in code as shown in the following example.</span></span>  
  
```csharp  
host.Description.Behaviors.Add(new WorkflowUnhandledExceptionBehavior { Action = WorkflowUnhandledExceptionAction.Abandon });  
```  
  
 <span data-ttu-id="ad86e-122">Bunu ayrıca bir yapılandırma dosyasında aşağıdaki örnekte gösterildiği gibi yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="ad86e-122">It can also be configured in a configuration file as shown in the following example.</span></span>  
  
```xml
<behaviors>  
      <serviceBehaviors>  
        <behavior>  
          <serviceMetadata httpGetEnabled="True"/>  
          <serviceDebug includeExceptionDetailInFaults="False" />  
          <workflowUnhandledExceptionBehavior action="Abandon" />        
        </behavior>  
      </serviceBehaviors>  
```  
  
## <a name="hosting-non-service-workflows"></a><span data-ttu-id="ad86e-123">Barındırma hizmet olmayan iş akışları</span><span class="sxs-lookup"><span data-stu-id="ad86e-123">Hosting Non-Service Workflows</span></span>  
 <span data-ttu-id="ad86e-124"><xref:System.ServiceModel.Activities.WorkflowServiceHost>Hizmet olmayan iş akışları veya ya da ile başlamayan iş akışlarını barındırmak için kullanılan bir <xref:System.ServiceModel.Activities.Receive> etkinlik veya Mesajlaşma etkinlikleri kullanmayın iş akışları.</span><span class="sxs-lookup"><span data-stu-id="ad86e-124"><xref:System.ServiceModel.Activities.WorkflowServiceHost> can be used to host non-service workflows, or workflows that either do not begin with a <xref:System.ServiceModel.Activities.Receive> activity or workflows that do not use the messaging activities.</span></span> <span data-ttu-id="ad86e-125">İş akışı Hizmetleri ile normalde başlar bir <xref:System.ServiceModel.Activities.Receive> etkinlik.</span><span class="sxs-lookup"><span data-stu-id="ad86e-125">Workflow services normally begin with a <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="ad86e-126">Zaman <xref:System.ServiceModel.Activities.WorkflowServiceHost> bir iş akışı hizmeti için bir ileti alır, zaten çalışmıyor (veya kalıcı değilse) yeni bir iş akışı hizmeti örneği oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="ad86e-126">When the <xref:System.ServiceModel.Activities.WorkflowServiceHost> receives a message for a workflow service, if it is not already running (or persisted) a new workflow service instance is created.</span></span> <span data-ttu-id="ad86e-127">Bir iş akışı Al etkinliği ile başlamıyorsa, ileti almak için hiçbir etkinlik olduğundan ileti gönderme başlatılamıyor.</span><span class="sxs-lookup"><span data-stu-id="ad86e-127">If a workflow does not begin with a Receive activity, it cannot be started by sending a message because there is no activity to receive the message.</span></span> <span data-ttu-id="ad86e-128">Bir hizmet olmayan iş akışı barındırmak için öğesinden bir sınıf türetin <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint> ve geçersiz kılma <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetInstanceId%2A>, <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetCreationContext%2A>, ve <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnResolveBookmark%2A>.</span><span class="sxs-lookup"><span data-stu-id="ad86e-128">To host a non-service workflow, derive a class from <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint> and override <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetInstanceId%2A>, <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetCreationContext%2A>, and <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnResolveBookmark%2A>.</span></span> <span data-ttu-id="ad86e-129">Geçersiz kılma <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetInstanceId%2A> tercih edilen örneği bir kimlik sağlamak istiyorsanız</span><span class="sxs-lookup"><span data-stu-id="ad86e-129">Override <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetInstanceId%2A> if you want to provide a preferred instance ID.</span></span> <span data-ttu-id="ad86e-130">Geçersiz kılma <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetCreationContext%2A> özel iş akışı bağlamı oluşturma oluşturmak veya var olan bir örneğini doldurmak için <xref:System.ServiceModel.Activities.WorkflowCreationContext>.</span><span class="sxs-lookup"><span data-stu-id="ad86e-130">Override <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetCreationContext%2A> to create a custom workflow creation context or populate an instance of the existing <xref:System.ServiceModel.Activities.WorkflowCreationContext>.</span></span> <span data-ttu-id="ad86e-131">Geçersiz kılma <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnResolveBookmark%2A> el ile gelen iletiden yer işareti ayıklamak için.</span><span class="sxs-lookup"><span data-stu-id="ad86e-131">Override <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnResolveBookmark%2A> to manually extract the bookmark from the incoming message.</span></span> <span data-ttu-id="ad86e-132">Bu yöntemi geçersiz kılarsanız çağırmanız gerekir <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> WorkflowHostingEndpoint gönderilen ileti yanıtlamak amacıyla kendi gövdesindeki.</span><span class="sxs-lookup"><span data-stu-id="ad86e-132">If you override this method, you must invoke <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> in its body so as to respond to the message sent to the WorkflowHostingEndpoint.</span></span> <span data-ttu-id="ad86e-133">Bunu yapmak, bir <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentCalls%2A> sınırı sonunda aştı.</span><span class="sxs-lookup"><span data-stu-id="ad86e-133">If you do not do so, a <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentCalls%2A> limit may be eventually exceeded.</span></span> <span data-ttu-id="ad86e-134">İki yönlü sözleşmelerinde çağırmak için hata algılayabilir olabilir <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> yanıt almak için istemcinin hatadan dolayı.</span><span class="sxs-lookup"><span data-stu-id="ad86e-134">In two-way contracts, you may be able to detect your   failure to invoke <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> because of the client’s failure to receive a response.</span></span> <span data-ttu-id="ad86e-135">Tek yönlü sözleşmelerinde çağırma başarısız, hata anlamayabilir <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> sonra çok geç kadar <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentCalls%2A> kısıtlama sınırı aşıldı.</span><span class="sxs-lookup"><span data-stu-id="ad86e-135">In one-way contracts, you may not recognize the mistake of failing to call <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> until it’s too late, after the <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentCalls%2A> throttle limit is exceeded.</span></span> <span data-ttu-id="ad86e-136">Daha fazla bilgi için lütfen bkz [WorkflowHostingEndpoint Sürdür yer işareti](../../../../docs/framework/windows-workflow-foundation/samples/workflowhostingendpoint-resume-bookmark.md)hizmet olmayan iş akışı yeni bir örneğini oluşturmak için yeni bir örnek oluşturur bir işlem tanımlayan bir hizmet sözleşmesini bildirin.</span><span class="sxs-lookup"><span data-stu-id="ad86e-136">For more information, please see the [WorkflowHostingEndpoint Resume Bookmark](../../../../docs/framework/windows-workflow-foundation/samples/workflowhostingendpoint-resume-bookmark.md)To create a new instance of a non-service workflow, declare a service contract that defines an operation that creates a new instance.</span></span> <span data-ttu-id="ad86e-137">Oluşturma işlemi bir IDictionary gerçekleştirmesi gereken\<dize, Nesne > herhangi geçmek için iş akışı parametreleri gerekli.</span><span class="sxs-lookup"><span data-stu-id="ad86e-137">The creation operation should take an IDictionary\<string, object> to pass any required workflow parameters.</span></span> <span data-ttu-id="ad86e-138">Bu sözleşme örtük olarak tarafından uygulanan <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint>-türetilmiş sınıf.</span><span class="sxs-lookup"><span data-stu-id="ad86e-138">This contract is implicitly implemented by the <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint>-derived class.</span></span> <span data-ttu-id="ad86e-139">İş akışı barındırma, bir örnek ekler <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint>-çağırarak konağa türetilmiş sınıf <xref:System.ServiceModel.Activities.WorkflowServiceHost.AddServiceEndpoint%2A> ve arama <!--zz xref:System.ServiceModel.Activities.WorkflowServiceHost.Open%2A--> `System.ServiceModel.Activities.WorkflowServiceHost.Open`.</span><span class="sxs-lookup"><span data-stu-id="ad86e-139">When hosting the workflow, add an instance of the <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint>-derived class to the host by calling <xref:System.ServiceModel.Activities.WorkflowServiceHost.AddServiceEndpoint%2A> and call <!--zz xref:System.ServiceModel.Activities.WorkflowServiceHost.Open%2A--> `System.ServiceModel.Activities.WorkflowServiceHost.Open`.</span></span> <span data-ttu-id="ad86e-140">İş akışı örneği oluşturmak için Oluştur bir <xref:System.ServiceModel.ChannelFactory%601> hizmet sözleşmesi türü ve çağrı <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A>.</span><span class="sxs-lookup"><span data-stu-id="ad86e-140">To create an instance of the workflow, create a <xref:System.ServiceModel.ChannelFactory%601> of your service contract type and call <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A>.</span></span> <span data-ttu-id="ad86e-141">Ardından, hizmet sözleşmesini tanımlanan oluşturma işlemi çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ad86e-141">You can then call the create operation defined in your service contract.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ad86e-142">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="ad86e-142">See Also</span></span>  
 [<span data-ttu-id="ad86e-143">İş akışı Hizmetleri</span><span class="sxs-lookup"><span data-stu-id="ad86e-143">Workflow Services</span></span>](../../../../docs/framework/wcf/feature-details/workflow-services.md)  
 [<span data-ttu-id="ad86e-144">Mesajlaşma etkinlikleri</span><span class="sxs-lookup"><span data-stu-id="ad86e-144">Messaging Activities</span></span>](../../../../docs/framework/wcf/feature-details/messaging-activities.md)
