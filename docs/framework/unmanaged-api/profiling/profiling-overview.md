---
title: "Profil Oluşturmaya Genel Bakış"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: reference
helpviewer_keywords:
- managed code, profiling API support
- unmanaged code, combining with managed code in profiling
- notification threads [.NET Framework profiling]
- unmanaged code, profiling
- profiling API [.NET Framework], and COM
- profiling API [.NET Framework], unmanaged code profiling
- profilers, writing
- profiling API [.NET Framework], call stacks
- code profilers, writing
- profiling API [.NET Framework], security considerations
- profiling API [.NET Framework], managed code support
- common language runtime, profiling
- profiling API [.NET Framework], notification threads
- call stacks [.NET Framework profiling]
- profiling API [.NET Framework], stack depth
- common language runtime, writing a profiler
- profiling API [.NET Framework], information retrieval interfaces
- shadow stacks [.NET Framework profiling]
- COM, using in the profiling API
- stack snapshots [.NET Framework profiling]
- profiling API [.NET Framework], supported features
- profiling API [.NET Framework], overview
- security, profiling API considerations
- stack depth [.NET Framework profiling]
ms.assetid: 864c2344-71dc-46f9-96b2-ed59fb6427a8
caps.latest.revision: "27"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.openlocfilehash: 6d7918a369b5a5656fa2e059bdaaf6c211bd022c
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/18/2017
---
# <a name="profiling-overview"></a><span data-ttu-id="71166-102">Profil Oluşturmaya Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="71166-102">Profiling Overview</span></span>
<a name="top"></a><span data-ttu-id="71166-103">Bir profil oluşturucu başka bir uygulamanın yürütülmesini izleyen bir araçtır.</span><span class="sxs-lookup"><span data-stu-id="71166-103">A profiler is a tool that monitors the execution of another application.</span></span> <span data-ttu-id="71166-104">Ortak dil çalışma zamanı (CLR) profil oluşturucu ileti almak ve profil oluşturma API kullanarak için CLR iletileri göndermek işlevler oluşan bir dinamik bağlantı kitaplığı (DLL) olur.</span><span class="sxs-lookup"><span data-stu-id="71166-104">A common language runtime (CLR) profiler is a dynamic link library (DLL) that consists of functions that receive messages from, and send messages to, the CLR by using the profiling API.</span></span> <span data-ttu-id="71166-105">Profil Oluşturucu DLL çalışma zamanında CLR tarafından yüklenir.</span><span class="sxs-lookup"><span data-stu-id="71166-105">The profiler DLL is loaded by the CLR at run time.</span></span>  
  
 <span data-ttu-id="71166-106">Geleneksel profil oluşturma araçları, uygulamanın yürütülmesini ölçmeye odaklanın.</span><span class="sxs-lookup"><span data-stu-id="71166-106">Traditional profiling tools focus on measuring the execution of the application.</span></span> <span data-ttu-id="71166-107">Diğer bir deyişle, her işlev veya uygulama zamanla bellek kullanımını harcanan süreyi ölçer.</span><span class="sxs-lookup"><span data-stu-id="71166-107">That is, they measure the time that is spent in each function or the memory usage of the application over time.</span></span> <span data-ttu-id="71166-108">Profil oluşturma API kod kapsamı yardımcı programları gibi tanılama araçları daha geniş bir sınıfı hedefler ve hatta yardımları hata ayıklama Gelişmiş.</span><span class="sxs-lookup"><span data-stu-id="71166-108">The profiling API targets a broader class of diagnostic tools such as code-coverage utilities and even advanced debugging aids.</span></span> <span data-ttu-id="71166-109">Bu kullanımları doğası gereği tüm tanılama.</span><span class="sxs-lookup"><span data-stu-id="71166-109">These uses are all diagnostic in nature.</span></span> <span data-ttu-id="71166-110">Profil oluşturma API yalnızca ölçer ancak bir uygulamanın yürütmesini de izler.</span><span class="sxs-lookup"><span data-stu-id="71166-110">The profiling API not only measures but also monitors the execution of an application.</span></span> <span data-ttu-id="71166-111">Bu nedenle, profil oluşturma API hiçbir zaman uygulama tarafından kullanılmamalıdır ve uygulamanın yürütme üzerinde bağımlı olmamalıdır (veya tarafından etkilenen) profil oluşturucu.</span><span class="sxs-lookup"><span data-stu-id="71166-111">For this reason, the profiling API should never be used by the application itself, and the application’s execution should not depend on (or be affected by) the profiler.</span></span>  
  
 <span data-ttu-id="71166-112">Bir CLR uygulaması profil işleme, genel profil makine kodu derlenmiş olandan daha fazla destek gerektirir.</span><span class="sxs-lookup"><span data-stu-id="71166-112">Profiling a CLR application requires more support than profiling conventionally compiled machine code.</span></span> <span data-ttu-id="71166-113">Uygulama etki alanları, atık toplama, özel durum işleme yönetilen gibi CLR kavramları tanıtır. Bunun nedeni tam zamanında (JIT) derleme (Microsoft Ara dili veya MSIL, yerel makine kod koda dönüştürme), kod ve benzer Özellikler.</span><span class="sxs-lookup"><span data-stu-id="71166-113">This is because the CLR introduces concepts such as application domains, garbage collection, managed exception handling, just-in-time (JIT) compilation of code (converting Microsoft intermediate language, or MSIL, code into native machine code), and similar features.</span></span> <span data-ttu-id="71166-114">Geleneksel profil mekanizmaları tanımlamak veya bu özellikler hakkında yararlı bilgiler sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-114">Conventional profiling mechanisms cannot identify or provide useful information about these features.</span></span> <span data-ttu-id="71166-115">Profil oluşturma API bu bilgileri eksik CLR ve profili uygulama performansına etkisi en düşük düzeydedir ile verimli bir şekilde sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-115">The profiling API provides this missing information efficiently, with minimal effect on the performance of the CLR and the profiled application.</span></span>  
  
 <span data-ttu-id="71166-116">JIT derleme zamanında profil oluşturma için iyi fırsatı sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-116">JIT compilation at run time provides good opportunities for profiling.</span></span> <span data-ttu-id="71166-117">Profil oluşturma API'si JIT derlenmiş önce bir yordam için bellek içi MSIL kod akış değiştirmek profil oluşturucu sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-117">The profiling API enables a profiler to change the in-memory MSIL code stream for a routine before it is JIT-compiled.</span></span> <span data-ttu-id="71166-118">Bu şekilde, profil oluşturucu izleme kodu daha kapsamlı bir araştırma gereken belirli yordamları dinamik olarak ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71166-118">In this manner, the profiler can dynamically add instrumentation code to particular routines that need deeper investigation.</span></span> <span data-ttu-id="71166-119">Bu yaklaşım geleneksel senaryolarda mümkün olsa da, CLR için profil oluşturma API kullanarak uygulama çok daha kolaydır.</span><span class="sxs-lookup"><span data-stu-id="71166-119">Although this approach is possible in conventional scenarios, it is much easier to implement for the CLR by using the profiling API.</span></span>  
  
 <span data-ttu-id="71166-120">Bu genel bakışta, aşağıdaki bölümlerden oluşur:</span><span class="sxs-lookup"><span data-stu-id="71166-120">This overview consists of the following sections:</span></span>  
  
-   [<span data-ttu-id="71166-121">Profil oluşturma API'si</span><span class="sxs-lookup"><span data-stu-id="71166-121">The Profiling API</span></span>](#profiling_api)  
  
-   [<span data-ttu-id="71166-122">Desteklenen özellikler</span><span class="sxs-lookup"><span data-stu-id="71166-122">Supported Features</span></span>](#support)  
  
-   [<span data-ttu-id="71166-123">Bildirim iş parçacıkları</span><span class="sxs-lookup"><span data-stu-id="71166-123">Notification Threads</span></span>](#notification_threads)  
  
-   [<span data-ttu-id="71166-124">Güvenlik</span><span class="sxs-lookup"><span data-stu-id="71166-124">Security</span></span>](#security)  
  
-   [<span data-ttu-id="71166-125">Yönetilen ve yönetilmeyen kod profil oluşturucu kodu birleştirme</span><span class="sxs-lookup"><span data-stu-id="71166-125">Combining Managed and Unmanaged Code in a Code Profiler</span></span>](#combining_managed_unmanaged)  
  
-   [<span data-ttu-id="71166-126">Yönetilmeyen kod profili oluşturma</span><span class="sxs-lookup"><span data-stu-id="71166-126">Profiling Unmanaged Code</span></span>](#unmanaged)  
  
-   [<span data-ttu-id="71166-127">COM kullanma</span><span class="sxs-lookup"><span data-stu-id="71166-127">Using COM</span></span>](#com)  
  
-   [<span data-ttu-id="71166-128">Çağrı yığınları</span><span class="sxs-lookup"><span data-stu-id="71166-128">Call stacks</span></span>](#call_stacks)  
  
-   [<span data-ttu-id="71166-129">Geri aramalar ve yığın derinliği</span><span class="sxs-lookup"><span data-stu-id="71166-129">Callbacks and Stack Depth</span></span>](#callbacks)  
  
-   [<span data-ttu-id="71166-130">İlgili Konular</span><span class="sxs-lookup"><span data-stu-id="71166-130">Related Topics</span></span>](#related_topics)  
  
<a name="profiling_api"></a>   
## <a name="the-profiling-api"></a><span data-ttu-id="71166-131">Profil oluşturma API'si</span><span class="sxs-lookup"><span data-stu-id="71166-131">The Profiling API</span></span>  
 <span data-ttu-id="71166-132">Genellikle, profil oluşturma API yazmak için kullanılan bir *profil oluşturucu kodu*, hangi yönetilen bir uygulamanın yürütülmesini izleyen bir programdır.</span><span class="sxs-lookup"><span data-stu-id="71166-132">Typically, the profiling API is used to write a *code profiler*, which is a program that monitors the execution of a managed application.</span></span>  
  
 <span data-ttu-id="71166-133">Profil oluşturma API profil oluşturucu profili oluşturuluyor uygulama aynı süreci yüklenen DLL tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="71166-133">The profiling API is used by a profiler DLL, which is loaded into the same process as the application that is being profiled.</span></span> <span data-ttu-id="71166-134">Profil Oluşturucu DLL bir geri çağırma arabirimi uygulayan ([Icorprofilercallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) .NET Framework sürüm 1.0 ve 1.1, [Icorprofilercallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) sürüm 2.0 ve üzeri).</span><span class="sxs-lookup"><span data-stu-id="71166-134">The profiler DLL implements a callback interface ([ICorProfilerCallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) in the .NET Framework version 1.0 and 1.1, [ICorProfilerCallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) in version 2.0 and later).</span></span> <span data-ttu-id="71166-135">CLR Profil Oluşturucu profili işlemindeki olayların bildirmek için bu arabiriminde yöntemleri çağırır.</span><span class="sxs-lookup"><span data-stu-id="71166-135">The CLR calls the methods in that interface to notify the profiler of events in the profiled process.</span></span> <span data-ttu-id="71166-136">Profil Oluşturucu geri çalışma zamanı tarafından yöntemleri kullanma çağırabilirsiniz [Icorprofilerınfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) ve [Icorprofilerınfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md) profili uygulamasının durumu hakkında bilgi edinmek için arabirim.</span><span class="sxs-lookup"><span data-stu-id="71166-136">The profiler can call back into the runtime by using the methods in the [ICorProfilerInfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) and [ICorProfilerInfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md) interfaces to obtain information about the state of the profiled application.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="71166-137">Profil Oluşturucu çözümü, yalnızca veri toplama bölümünü profili uygulama olarak aynı işlemde çalıştırıyor olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="71166-137">Only the data-gathering part of the profiler solution should be running in the same process as the profiled application.</span></span> <span data-ttu-id="71166-138">Tüm kullanıcı arabirimi ve veri analizi ayrı bir işlemde gerçekleştirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="71166-138">All user interface and data analysis should be performed in a separate process.</span></span>  
  
 <span data-ttu-id="71166-139">Aşağıdaki resimde, profil oluşturucu DLL profili oluşturuluyor uygulama ve CLR ile nasıl etkileşim kurduğu gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="71166-139">The following illustration shows how the profiler DLL interacts with the application that is being profiled and the CLR.</span></span>  
  
 <span data-ttu-id="71166-140">![Profil Mimarisi](../../../../docs/framework/unmanaged-api/profiling/media/profilingarch.png "ProfilingArch")</span><span class="sxs-lookup"><span data-stu-id="71166-140">![Profiling Architecture](../../../../docs/framework/unmanaged-api/profiling/media/profilingarch.png "ProfilingArch")</span></span>  
<span data-ttu-id="71166-141">Profil oluşturma mimarisi</span><span class="sxs-lookup"><span data-stu-id="71166-141">Profiling architecture</span></span>  
  
### <a name="the-notification-interfaces"></a><span data-ttu-id="71166-142">Bildirim arabirimleri</span><span class="sxs-lookup"><span data-stu-id="71166-142">The Notification Interfaces</span></span>  
 <span data-ttu-id="71166-143">[Icorprofilercallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) ve [Icorprofilercallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) bildirimi arabirimleri kabul edilebilir.</span><span class="sxs-lookup"><span data-stu-id="71166-143">[ICorProfilerCallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) and [ICorProfilerCallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) can be considered notification interfaces.</span></span> <span data-ttu-id="71166-144">Bu arabirim yöntemleri gibi oluşur [ClassLoadStarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-classloadstarted-method.md), [ClassLoadFinished](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-classloadfinished-method.md), ve [Jıtcompilationstarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationstarted-method.md).</span><span class="sxs-lookup"><span data-stu-id="71166-144">These interfaces consist of methods such as [ClassLoadStarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-classloadstarted-method.md), [ClassLoadFinished](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-classloadfinished-method.md), and [JITCompilationStarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationstarted-method.md).</span></span> <span data-ttu-id="71166-145">CLR yükler veya bir sınıf kaldırılırken her zaman bir işlev derler ve vb. karşılık gelen yöntemini Profil Oluşturucusu'nda 's çağırır `ICorProfilerCallback` veya `ICorProfilerCallback2` arabirimi.</span><span class="sxs-lookup"><span data-stu-id="71166-145">Each time the CLR loads or unloads a class, compiles a function, and so on, it calls the corresponding method in the profiler's `ICorProfilerCallback` or `ICorProfilerCallback2` interface.</span></span>  
  
 <span data-ttu-id="71166-146">Örneğin, bir profil oluşturucu kod performansı iki bildirim işlevler aracılığıyla ölçü: [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md) ve [FunctionLeave2](../../../../docs/framework/unmanaged-api/profiling/functionleave2-function.md).</span><span class="sxs-lookup"><span data-stu-id="71166-146">For example, a profiler could measure code performance through two notification functions: [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md) and [FunctionLeave2](../../../../docs/framework/unmanaged-api/profiling/functionleave2-function.md).</span></span> <span data-ttu-id="71166-147">Zaman damgaları her bir bildirim sonuçları toplanır ve hangi işlevleri gösteren bir liste çıkarır yalnızca, en fazla CPU veya duvar saati süresi uygulama yürütülmesi sırasında tüketilen.</span><span class="sxs-lookup"><span data-stu-id="71166-147">It just time-stamps each notification, accumulates results, and outputs a list that indicates which functions consumed the most CPU or wall-clock time during the execution of the application.</span></span>  
  
### <a name="the-information-retrieval-interfaces"></a><span data-ttu-id="71166-148">Bilgi alma arabirimleri</span><span class="sxs-lookup"><span data-stu-id="71166-148">The Information Retrieval Interfaces</span></span>  
 <span data-ttu-id="71166-149">Diğer ana profil söz konusu arabirimlerdir [Icorprofilerınfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) ve [Icorprofilerınfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md).</span><span class="sxs-lookup"><span data-stu-id="71166-149">The other main interfaces involved in profiling are [ICorProfilerInfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) and [ICorProfilerInfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md).</span></span> <span data-ttu-id="71166-150">Profil Oluşturucu bu arabirimleri kendi çözümlemesine yardımcı olmak üzere daha fazla bilgi edinmek için gerekli olarak çağırır.</span><span class="sxs-lookup"><span data-stu-id="71166-150">The profiler calls these interfaces as required to obtain more information to help its analysis.</span></span> <span data-ttu-id="71166-151">Örneğin, her CLR çağırır [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md) işlevi, bir işlev tanımlayıcı sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-151">For example, whenever the CLR calls the [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md) function, it supplies a function identifier.</span></span> <span data-ttu-id="71166-152">Profil Oluşturucu çağırarak bu işlevi hakkında daha fazla bilgi edinebilirsiniz [Icorprofilerınfo2::getfunctionınfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-getfunctioninfo2-method.md) işlevin üst sınıfı ', adı ve benzeri bulma yöntemi.</span><span class="sxs-lookup"><span data-stu-id="71166-152">The profiler can get more information about that function by calling the [ICorProfilerInfo2::GetFunctionInfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-getfunctioninfo2-method.md) method to discover the function's parent class, its name, and so on.</span></span>  
  
 [<span data-ttu-id="71166-153">Başa dön</span><span class="sxs-lookup"><span data-stu-id="71166-153">Back to top</span></span>](#top)  
  
<a name="support"></a>   
## <a name="supported-features"></a><span data-ttu-id="71166-154">Desteklenen Özellikler</span><span class="sxs-lookup"><span data-stu-id="71166-154">Supported Features</span></span>  
 <span data-ttu-id="71166-155">Profil oluşturma API'si, çeşitli olayları ve ortak dil çalışma zamanı'nda gerçekleşen eylemler hakkında bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-155">The profiling API provides information about a variety of events and actions that occur in the common language runtime.</span></span> <span data-ttu-id="71166-156">Çalışmalar işlemleri izlemek ve .NET Framework uygulamanızın performansını çözümlemek için bu bilgileri kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71166-156">You can use this information to monitor the inner workings of processes and to analyze the performance of your .NET Framework application.</span></span>  
  
 <span data-ttu-id="71166-157">Profil oluşturma API'si aşağıdaki eylemler ve CLR oluşan olaylar hakkında bilgi alır:</span><span class="sxs-lookup"><span data-stu-id="71166-157">The profiling API retrieves information about the following actions and events that occur in the CLR:</span></span>  
  
-   <span data-ttu-id="71166-158">CLR başlatma ve kapatma olayları.</span><span class="sxs-lookup"><span data-stu-id="71166-158">CLR startup and shutdown events.</span></span>  
  
-   <span data-ttu-id="71166-159">Uygulama etki alanı oluşturma ve kapatma olayları.</span><span class="sxs-lookup"><span data-stu-id="71166-159">Application domain creation and shutdown events.</span></span>  
  
-   <span data-ttu-id="71166-160">Yükleme ve yüklemeyi kaldırma olaylarını derleme.</span><span class="sxs-lookup"><span data-stu-id="71166-160">Assembly loading and unloading events.</span></span>  
  
-   <span data-ttu-id="71166-161">Yükleme ve yüklemeyi kaldırma olaylarını modül.</span><span class="sxs-lookup"><span data-stu-id="71166-161">Module loading and unloading events.</span></span>  
  
-   <span data-ttu-id="71166-162">COM vtable olaylar oluşturma ve yok etme.</span><span class="sxs-lookup"><span data-stu-id="71166-162">COM vtable creation and destruction events.</span></span>  
  
-   <span data-ttu-id="71166-163">Tam zamanında (JIT) derleme ve kod pitching olaylar.</span><span class="sxs-lookup"><span data-stu-id="71166-163">Just-in-time (JIT) compilation and code-pitching events.</span></span>  
  
-   <span data-ttu-id="71166-164">Yükleme ve kaldırma olaylarını sınıfı.</span><span class="sxs-lookup"><span data-stu-id="71166-164">Class loading and unloading events.</span></span>  
  
-   <span data-ttu-id="71166-165">İş parçacığı oluşturma ve yok etme olayları.</span><span class="sxs-lookup"><span data-stu-id="71166-165">Thread creation and destruction events.</span></span>  
  
-   <span data-ttu-id="71166-166">İşlev giriş ve çıkış olaylar.</span><span class="sxs-lookup"><span data-stu-id="71166-166">Function entry and exit events.</span></span>  
  
-   <span data-ttu-id="71166-167">Özel durumlar.</span><span class="sxs-lookup"><span data-stu-id="71166-167">Exceptions.</span></span>  
  
-   <span data-ttu-id="71166-168">Yönetilen ve yönetilmeyen kod yürütmeyi arasında geçişler.</span><span class="sxs-lookup"><span data-stu-id="71166-168">Transitions between managed and unmanaged code execution.</span></span>  
  
-   <span data-ttu-id="71166-169">Farklı çalışma zamanı bağlamları arasında geçişler.</span><span class="sxs-lookup"><span data-stu-id="71166-169">Transitions between different runtime contexts.</span></span>  
  
-   <span data-ttu-id="71166-170">Çalışma zamanı suspensions hakkında bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-170">Information about runtime suspensions.</span></span>  
  
-   <span data-ttu-id="71166-171">Çalışma zamanı bellek öbek ve atık toplama etkinliği hakkında bilgi.</span><span class="sxs-lookup"><span data-stu-id="71166-171">Information about the runtime memory heap and garbage collection activity.</span></span>  
  
 <span data-ttu-id="71166-172">Profil oluşturma API herhangi (yönetilmeyen) COM uyumlu bir dilden çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-172">The profiling API can be called from any (non-managed) COM-compatible language.</span></span>  
  
 <span data-ttu-id="71166-173">API, CPU ve bellek tüketimi açısından verimlidir.</span><span class="sxs-lookup"><span data-stu-id="71166-173">The API is efficient with regard to CPU and memory consumption.</span></span> <span data-ttu-id="71166-174">Profil oluşturma yanıltıcı sonuçlara neden önemli değişiklikler profili uygulamaya gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="71166-174">Profiling does not involve changes to the profiled application that are significant enough to cause misleading results.</span></span>  
  
 <span data-ttu-id="71166-175">Profil oluşturma API örnekleme ve örnekleme olmayan profil oluşturucuları için yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="71166-175">The profiling API is useful to both sampling and non-sampling profilers.</span></span> <span data-ttu-id="71166-176">A *profil oluşturucu örnekleme* normal saat vuruşlarını profilde söyleyin, birbirinden 5 milisaniye inceler.</span><span class="sxs-lookup"><span data-stu-id="71166-176">A *sampling profiler* inspects the profile at regular clock ticks, say, at 5 milliseconds apart.</span></span> <span data-ttu-id="71166-177">A *profil oluşturucu örnekleme olmayan* bir olayın zaman uyumlu olarak olaya neden iş parçacığı ile bilgilendirilir.</span><span class="sxs-lookup"><span data-stu-id="71166-177">A *non-sampling profiler* is informed of an event synchronously with the thread that causes the event.</span></span>  
  
### <a name="unsupported-functionality"></a><span data-ttu-id="71166-178">Desteklenmeyen işlevi</span><span class="sxs-lookup"><span data-stu-id="71166-178">Unsupported Functionality</span></span>  
 <span data-ttu-id="71166-179">Profil oluşturma API'si aşağıdaki işlevselliği desteklemez:</span><span class="sxs-lookup"><span data-stu-id="71166-179">The profiling API does not support the following functionality:</span></span>  
  
-   <span data-ttu-id="71166-180">Yönetilmeyen kod, geleneksel Win32 yöntemleri kullanarak profili gerekir.</span><span class="sxs-lookup"><span data-stu-id="71166-180">Unmanaged code, which must be profiled using conventional Win32 methods.</span></span> <span data-ttu-id="71166-181">Ancak, CLR Profil Oluşturucu yönetilen ve yönetilmeyen kodu arasındaki sınırların belirlemek için geçiş olaylarını içerir.</span><span class="sxs-lookup"><span data-stu-id="71166-181">However, the CLR profiler includes transition events to determine the boundaries between managed and unmanaged code.</span></span>  
  
-   <span data-ttu-id="71166-182">En boy odaklı programlama gibi amaçlarla kendi kodlarını değiştirme uygulamaları otomatik olarak değiştiriliyor.</span><span class="sxs-lookup"><span data-stu-id="71166-182">Self-modifying applications that modify their own code for purposes such as aspect-oriented programming.</span></span>  
  
-   <span data-ttu-id="71166-183">Profil oluşturma API bu bilgileri sağlanmadığı için denetimi sınırları.</span><span class="sxs-lookup"><span data-stu-id="71166-183">Bounds checking, because the profiling API does not provide this information.</span></span> <span data-ttu-id="71166-184">CLR iç destek sınırları tüm yönetilen kodu denetimi sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-184">The CLR provides intrinsic support for bounds checking of all managed code.</span></span>  
  
-   <span data-ttu-id="71166-185">Aşağıdaki nedenlerden dolayı desteklenmeyen profil, uzaktan:</span><span class="sxs-lookup"><span data-stu-id="71166-185">Remote profiling, which is not supported for the following reasons:</span></span>  
  
    -   <span data-ttu-id="71166-186">Uzaktan profil oluşturmayı yürütme süresini uzatır.</span><span class="sxs-lookup"><span data-stu-id="71166-186">Remote profiling extends execution time.</span></span> <span data-ttu-id="71166-187">Profil oluşturma arabirimleri kullandığınızda, böylece sonuçları profil unduly etkilenmeyecek yürütme süresini en aza gerekir.</span><span class="sxs-lookup"><span data-stu-id="71166-187">When you use the profiling interfaces, you must minimize execution time so that profiling results will not be unduly affected.</span></span> <span data-ttu-id="71166-188">Yürütme performans izlenmekte olan durumlarda özellikle geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="71166-188">This is especially true when execution performance is being monitored.</span></span> <span data-ttu-id="71166-189">Profil oluşturma arabirimleri bellek kullanımı izlemek veya yığın çerçeveleri, nesneleri ve benzeri ilişkin çalışma zamanı bilgi almak için kullanıldığında, ancak uzaktan profil oluşturmayı bir sınırlama değil.</span><span class="sxs-lookup"><span data-stu-id="71166-189">However, remote profiling is not a limitation when the profiling interfaces are used to monitor memory usage or to obtain run-time information about stack frames, objects, and so on.</span></span>  
  
    -   <span data-ttu-id="71166-190">CLR kod profil oluşturucu çalışma zamanı profili uygulamanın çalıştığı yerel bilgisayardaki bir veya daha fazla geri çağırma arabirimleri kaydetmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="71166-190">The CLR code profiler must register one or more callback interfaces with the runtime on the local computer on which the profiled application is running.</span></span> <span data-ttu-id="71166-191">Bu, bir uzaktan kod profil oluşturucu oluşturma olanağı sınırlar.</span><span class="sxs-lookup"><span data-stu-id="71166-191">This limits the ability to create a remote code profiler.</span></span>  
  
-   <span data-ttu-id="71166-192">Üretim ortamlarında yüksek oranda kullanılabilirlik gereksinimleri olan profil oluşturma.</span><span class="sxs-lookup"><span data-stu-id="71166-192">Profiling in production environments with high-availability requirements.</span></span> <span data-ttu-id="71166-193">Profil oluşturma API geliştirme zamanı tanılama desteklemek için oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="71166-193">The profiling API was created to support development-time diagnostics.</span></span> <span data-ttu-id="71166-194">Üretim ortamlarında desteklemek için gereken ciddi testler geçmemiştir.</span><span class="sxs-lookup"><span data-stu-id="71166-194">It has not undergone the rigorous testing required to support production environments.</span></span>  
  
 [<span data-ttu-id="71166-195">Başa dön</span><span class="sxs-lookup"><span data-stu-id="71166-195">Back to top</span></span>](#top)  
  
<a name="notification_threads"></a>   
## <a name="notification-threads"></a><span data-ttu-id="71166-196">Bildirim iş parçacıkları</span><span class="sxs-lookup"><span data-stu-id="71166-196">Notification Threads</span></span>  
 <span data-ttu-id="71166-197">Çoğu durumda, bir olay oluşturur iş parçacığı bildirimleri de yürütür.</span><span class="sxs-lookup"><span data-stu-id="71166-197">In most cases, the thread that generates an event also executes notifications.</span></span> <span data-ttu-id="71166-198">Bu tür bildirimleri (örneğin, [FunctionEnter](../../../../docs/framework/unmanaged-api/profiling/functionenter-function.md) ve [FunctionLeave](../../../../docs/framework/unmanaged-api/profiling/functionleave-function.md)) açık sağlamanız gerekmez `ThreadID`.</span><span class="sxs-lookup"><span data-stu-id="71166-198">Such notifications (for example, [FunctionEnter](../../../../docs/framework/unmanaged-api/profiling/functionenter-function.md) and [FunctionLeave](../../../../docs/framework/unmanaged-api/profiling/functionleave-function.md)) do not need to supply the explicit `ThreadID`.</span></span> <span data-ttu-id="71166-199">Ayrıca, profil oluşturucu depolamak ve genel depolama, temel analiz bloklarında dizin oluşturma yerine kendi analiz blokları güncelleştirmek için iş parçacığı yerel depolama kullanmaya karar verebilir `ThreadID` etkilenen iş parçacığının.</span><span class="sxs-lookup"><span data-stu-id="71166-199">Also, the profiler might decide to use thread-local storage to store and update its analysis blocks instead of indexing the analysis blocks in global storage, based on the `ThreadID` of the affected thread.</span></span>  
  
 <span data-ttu-id="71166-200">Bu geri aramalar sıralanmamış unutmayın.</span><span class="sxs-lookup"><span data-stu-id="71166-200">Note that these callbacks are not serialized.</span></span> <span data-ttu-id="71166-201">Kullanıcılar kendi kod parçacığı veri yapıları oluşturma ve birden çok iş parçacığından paralel erişimi engellemek gerekli olması durumunda profil oluşturucu kodu kilitleme korumanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="71166-201">Users must protect their code by creating thread-safe data structures and by locking the profiler code where necessary to prevent parallel access from multiple threads.</span></span> <span data-ttu-id="71166-202">Bu nedenle, bazı durumlarda geri aramalar olağan dışı bir dizi alabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-202">Therefore, in certain cases you can receive an unusual sequence of callbacks.</span></span> <span data-ttu-id="71166-203">Örneğin, yönetilen bir uygulamaya aynı kodu yürütme iki iş parçacığı oluşturma olduğunu varsayın.</span><span class="sxs-lookup"><span data-stu-id="71166-203">For example, assume that a managed application is spawning two threads that are executing identical code.</span></span> <span data-ttu-id="71166-204">Bu durumda, almak olası bir [Icorprofilercallback::jıtcompilationstarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationstarted-method.md) bir iş parçacığından diğerine bazı işlevi için olay ve `FunctionEnter` geri alma önce başka bir iş parçacığı aramasından [ Icorprofilercallback::jıtcompilationfinished](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationfinished-method.md) geri çağırma.</span><span class="sxs-lookup"><span data-stu-id="71166-204">In this case, it is possible to receive a [ICorProfilerCallback::JITCompilationStarted](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationstarted-method.md) event for some function from one thread and a `FunctionEnter` callback from the other thread before receiving the [ICorProfilerCallback::JITCompilationFinished](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-jitcompilationfinished-method.md) callback.</span></span> <span data-ttu-id="71166-205">Bu durumda, kullanıcı alacak bir `FunctionEnter` tam olarak yalnızca henüz derlenmiş zamanında (JIT) olmayabilen bir işlev için geri çağırma.</span><span class="sxs-lookup"><span data-stu-id="71166-205">In this case, the user will receive a `FunctionEnter` callback for a function that may not have been fully just-in-time (JIT) compiled yet.</span></span>  
  
 [<span data-ttu-id="71166-206">Başa dön</span><span class="sxs-lookup"><span data-stu-id="71166-206">Back to top</span></span>](#top)  
  
<a name="security"></a>   
## <a name="security"></a><span data-ttu-id="71166-207">Güvenlik</span><span class="sxs-lookup"><span data-stu-id="71166-207">Security</span></span>  
 <span data-ttu-id="71166-208">Bir profil oluşturucu ortak dil çalışma zamanı yürütme altyapısı bir parçası olarak çalışan bir yönetilmeyen DLL DLL'dir.</span><span class="sxs-lookup"><span data-stu-id="71166-208">A profiler DLL is an unmanaged DLL that runs as part of the common language runtime execution engine.</span></span> <span data-ttu-id="71166-209">Sonuç olarak, DLL kısıtlamalarını tabi değil profil oluşturucu kodda kod erişim güvenliği yönetilen.</span><span class="sxs-lookup"><span data-stu-id="71166-209">As a result, the code in the profiler DLL is not subject to the restrictions of managed code access security.</span></span> <span data-ttu-id="71166-210">Profil Oluşturucu yalnızca sınırlamalar DLL bilgilerdir işletim sistemi profili uygulama çalıştıran kullanıcı tarafından uygulanmaz.</span><span class="sxs-lookup"><span data-stu-id="71166-210">The only limitations on the profiler DLL are those imposed by the operating system on the user who is running the profiled application.</span></span>  
  
 <span data-ttu-id="71166-211">Profil Oluşturucu yazarlar güvenlikle ilgili sorunları önlemek için uygun önlemleri almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="71166-211">Profiler authors should take appropriate precautions to avoid security-related issues.</span></span> <span data-ttu-id="71166-212">Kötü niyetli bir kullanıcı onu değiştiremezsiniz, örneğin, yükleme sırasında bir erişim denetim listesi (ACL) profil oluşturucu DLL eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="71166-212">For example, during installation, a profiler DLL should be added to an access control list (ACL) so that a malicious user cannot modify it.</span></span>  
  
 [<span data-ttu-id="71166-213">Başa dön</span><span class="sxs-lookup"><span data-stu-id="71166-213">Back to top</span></span>](#top)  
  
<a name="combining_managed_unmanaged"></a>   
## <a name="combining-managed-and-unmanaged-code-in-a-code-profiler"></a><span data-ttu-id="71166-214">Yönetilen ve yönetilmeyen kod profil oluşturucu kodu birleştirme</span><span class="sxs-lookup"><span data-stu-id="71166-214">Combining Managed and Unmanaged Code in a Code Profiler</span></span>  
 <span data-ttu-id="71166-215">Yanlış yazılmış bir profil oluşturucu kendisi, döngüsel başvurulara kaynaklanan beklenmeyen davranışlara neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-215">An incorrectly written profiler can cause circular references to itself, resulting in unpredictable behavior.</span></span>  
  
 <span data-ttu-id="71166-216">Profil oluşturma API'si CLR gözden birbirine COM birlikte çalışma ya da dolaylı çağrılarına yönetilen ve yönetilmeyen bileşenlerini içeren bir profil oluşturucu yazma izlenim oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-216">A review of the CLR profiling API may create the impression that you can write a profiler that contains managed and unmanaged components that call each other through COM interop or indirect calls.</span></span>  
  
 <span data-ttu-id="71166-217">Bu tasarım açısından mümkün olsa da, profil oluşturma API yönetilen bileşenleri desteklemez.</span><span class="sxs-lookup"><span data-stu-id="71166-217">Although this is possible from a design perspective, the profiling API does not support managed components.</span></span> <span data-ttu-id="71166-218">CLR Profil Oluşturucu tamamen yönetilmeyen olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="71166-218">A CLR profiler must be completely unmanaged.</span></span> <span data-ttu-id="71166-219">CLR Profil Oluşturucu yönetilen ve yönetilmeyen kodunda birleştirmek için deneme erişim ihlalleri, program hatası veya kilitlenmeleri neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-219">Attempts to combine managed and unmanaged code in a CLR profiler may cause access violations, program failure, or deadlocks.</span></span> <span data-ttu-id="71166-220">Profil Oluşturucu yönetilen bileşenleri, yönetilen bileşenleri içinde döngüsel başvurulara kaynaklanan yeniden sonradan çağırırdı geri yönetilmeyen bileşenleri, olayları ateşlenir.</span><span class="sxs-lookup"><span data-stu-id="71166-220">The managed components of the profiler will fire events back to their unmanaged components, which would subsequently call the managed components again, resulting in circular references.</span></span>  
  
 <span data-ttu-id="71166-221">Burada bir CLR Profil Oluşturucu yönetilen kod güvenle çağırabilirsiniz tek bir yöntemin Microsoft Ara dili (MSIL) gövdesi konumdur.</span><span class="sxs-lookup"><span data-stu-id="71166-221">The only location where a CLR profiler can call managed code safely is in the Microsoft intermediate language (MSIL) body of a method.</span></span> <span data-ttu-id="71166-222">MSIL gövde değiştirmek için önerilen uygulama JIT derleme yöntemlere kullanmaktır [Icorprofilercallback4](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-interface.md) arabirimi.</span><span class="sxs-lookup"><span data-stu-id="71166-222">The recommended practice for modifying the MSIL body is to use the  JIT recompilation methods in the [ICorProfilerCallback4](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-interface.md) interface.</span></span>  
  
 <span data-ttu-id="71166-223">MSIL değiştirmek için eski izleme yöntemleri kullanmak da mümkündür.</span><span class="sxs-lookup"><span data-stu-id="71166-223">It is also possible to use the older instrumentation methods to modify MSIL.</span></span> <span data-ttu-id="71166-224">Bir işlevin tam zamanında (JIT) derleme tamamlanmadan önce Profil Oluşturucu yöntemi ve ardından JIT derleme MSIL gövdesinde yönetilen çağrılar ekleyebilirsiniz, (bkz [Icorprofilerınfo::getılfunctionbody](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-getilfunctionbody-method.md) yöntemi).</span><span class="sxs-lookup"><span data-stu-id="71166-224">Before the just-in-time (JIT) compilation of a function is completed, the profiler can insert managed calls in the MSIL body of a method and then JIT-compile it (see the [ICorProfilerInfo::GetILFunctionBody](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-getilfunctionbody-method.md) method).</span></span> <span data-ttu-id="71166-225">Bu teknik başarıyla seçmeli araçları yönetilen kodun ya da JIT hakkında istatistikler ve performans verilerini toplamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-225">This technique can successfully be used for selective instrumentation of managed code, or to gather statistics and performance data about the JIT.</span></span>  
  
 <span data-ttu-id="71166-226">Alternatif olarak, bir kod profil oluşturucu yerel kancaları yönetilmeyen koda çağıran her Yönetilen işlev MSIL gövdesi ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71166-226">Alternatively, a code profiler can insert native hooks in the MSIL body of every managed function that calls into unmanaged code.</span></span> <span data-ttu-id="71166-227">Bu yöntem, araçları ve kapsamı için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-227">This technique can be used for instrumentation and coverage.</span></span> <span data-ttu-id="71166-228">Örneğin, kod profil oluşturucu izleme kancaları blok yürütüldüğü emin olmak için her MSIL bloğundan sonra ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71166-228">For example, a code profiler could insert instrumentation hooks after every MSIL block to ensure that the block has been executed.</span></span> <span data-ttu-id="71166-229">Bir yöntemin MSIL gövdesi değiştirilmesini çok delicate bir işlemdir ve dikkate alınması gereken birçok Faktörden vardır.</span><span class="sxs-lookup"><span data-stu-id="71166-229">The modification of the MSIL body of a method is a very delicate operation, and there are many factors that should be taken into consideration.</span></span>  
  
 [<span data-ttu-id="71166-230">Başa dön</span><span class="sxs-lookup"><span data-stu-id="71166-230">Back to top</span></span>](#top)  
  
<a name="unmanaged"></a>   
## <a name="profiling-unmanaged-code"></a><span data-ttu-id="71166-231">Yönetilmeyen kod profili oluşturma</span><span class="sxs-lookup"><span data-stu-id="71166-231">Profiling Unmanaged Code</span></span>  
 <span data-ttu-id="71166-232">Profil oluşturma API'si ortak dil çalışma zamanı (CLR), yönetilmeyen kod profili oluşturma için en az destek sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-232">The common language runtime (CLR) profiling API provides minimal support for profiling unmanaged code.</span></span> <span data-ttu-id="71166-233">Aşağıdaki işlevsellik sağlanır:</span><span class="sxs-lookup"><span data-stu-id="71166-233">The following functionality is provided:</span></span>  
  
-   <span data-ttu-id="71166-234">Yığın zincirleri numaralandırması.</span><span class="sxs-lookup"><span data-stu-id="71166-234">Enumeration of stack chains.</span></span> <span data-ttu-id="71166-235">Bu özellik, yönetilmeyen kod ile yönetilen kod arasındaki sınır belirlemek Kod Oluşturucu sağlar.</span><span class="sxs-lookup"><span data-stu-id="71166-235">This feature enables a code profiler to determine the boundary between managed code and unmanaged code.</span></span>  
  
-   <span data-ttu-id="71166-236">Belirleme yönetilen kod veya yerel kod olup olmadığını karşılık gelen bir yığın zinciri.</span><span class="sxs-lookup"><span data-stu-id="71166-236">Determination whether a stack chain corresponds to managed code or native code.</span></span>  
  
 <span data-ttu-id="71166-237">.NET Framework sürüm 1.0 ve 1.1, bu yöntemleri hata ayıklama API'si CLR işlemdeki alt kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-237">In the .NET Framework versions 1.0 and 1.1, these methods are available through the in-process subset of the CLR debugging API.</span></span> <span data-ttu-id="71166-238">Bunlar CorDebug.idl dosyasında tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="71166-238">They are defined in the CorDebug.idl file.</span></span>  
  
 <span data-ttu-id="71166-239">.NET Framework 2.0 ve daha sonra kullanabileceğiniz [Icorprofilerınfo2::dostacksnapshot](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-dostacksnapshot-method.md) bu işlev için yöntem.</span><span class="sxs-lookup"><span data-stu-id="71166-239">In the .NET Framework 2.0 and later, you can use the [ICorProfilerInfo2::DoStackSnapshot](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-dostacksnapshot-method.md) method for this functionality.</span></span>  
  
 [<span data-ttu-id="71166-240">Başa dön</span><span class="sxs-lookup"><span data-stu-id="71166-240">Back to top</span></span>](#top)  
  
<a name="com"></a>   
## <a name="using-com"></a><span data-ttu-id="71166-241">COM kullanma</span><span class="sxs-lookup"><span data-stu-id="71166-241">Using COM</span></span>  
 <span data-ttu-id="71166-242">Profil oluşturma arabirimleri COM arabirimleri tanımlanmasına rağmen ortak dil çalışma zamanı (CLR) bu arabirimleri kullanılacak COM gerçekte Başlatmıyor.</span><span class="sxs-lookup"><span data-stu-id="71166-242">Although the profiling interfaces are defined as COM interfaces, the common language runtime (CLR) does not actually initialize COM to use these interfaces.</span></span> <span data-ttu-id="71166-243">Bir iş parçacığı modelini kullanarak ayarlama yapmak zorunda kalmamak için nedeni [CoInitialize](http://msdn.microsoft.com/library/windows/desktop/ms678543\(v=vs.85\).aspx) yönetilen uygulama, istenen iş parçacığı modelini belirtmek için bir fırsat dolmadığı önce işlev.</span><span class="sxs-lookup"><span data-stu-id="71166-243">The reason is to avoid having to set the threading model by using the [CoInitialize](http://msdn.microsoft.com/library/windows/desktop/ms678543\(v=vs.85\).aspx) function before the managed application has had a chance to specify its desired threading model.</span></span> <span data-ttu-id="71166-244">Benzer şekilde, profil oluşturucu kendisini değil çağırmalıdır `CoInitialize`, çünkü profili oluşturuluyor uygulama ile uyumlu olmayan bir iş parçacığı modelini çekme ve uygulamanın başarısız olmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-244">Similarly, the profiler itself should not call `CoInitialize`, because it may pick a threading model that is incompatible with the application being profiled and may cause the application to fail.</span></span>  
  
 [<span data-ttu-id="71166-245">Başa dön</span><span class="sxs-lookup"><span data-stu-id="71166-245">Back to top</span></span>](#top)  
  
<a name="call_stacks"></a>   
## <a name="call-stacks"></a><span data-ttu-id="71166-246">Çağrı yığınları</span><span class="sxs-lookup"><span data-stu-id="71166-246">Call Stacks</span></span>  
 <span data-ttu-id="71166-247">Profil oluşturma API'si çağrı yığınları elde etmek için iki yöntem sunar: çağrı yığınları, seyrek toplamayı etkinleştirir, yığın anlık görüntü yöntemi ve her anlık çağrı yığını izler gölge yığını yöntemi.</span><span class="sxs-lookup"><span data-stu-id="71166-247">The profiling API provides two ways to obtain call stacks: a stack snapshot method, which enables sparse gathering of call stacks, and a shadow stack method, which tracks the call stack at every instant.</span></span>  
  
### <a name="stack-snapshot"></a><span data-ttu-id="71166-248">Yığın anlık görüntü</span><span class="sxs-lookup"><span data-stu-id="71166-248">Stack Snapshot</span></span>  
 <span data-ttu-id="71166-249">Yığın anlık bir iş parçacığı yığın izlemesi zamanında anlık görüntüsüdür.</span><span class="sxs-lookup"><span data-stu-id="71166-249">A stack snapshot is a trace of the stack of a thread at an instant in time.</span></span> <span data-ttu-id="71166-250">Profil oluşturma API yığında yönetilen işlevler izlenmesini destekler ancak için Profil Oluşturucu'nın kendi yığını walker yönetilmeyen işlevleri izleme durumda bırakır.</span><span class="sxs-lookup"><span data-stu-id="71166-250">The profiling API supports the tracing of managed functions on the stack, but it leaves the tracing of unmanaged functions to the profiler's own stack walker.</span></span>  
  
 <span data-ttu-id="71166-251">Yönetilen yığın yürütmek için profil oluşturucu programı hakkında daha fazla bilgi için bkz [Icorprofilerınfo2::dostacksnapshot](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-dostacksnapshot-method.md) bu belge kümesindeki yöntemi ve [profil oluşturucu yığınının taramasını, .NET Framework 2.0: Temel kavramları ve ötesine](http://go.microsoft.com/fwlink/?LinkId=73638).</span><span class="sxs-lookup"><span data-stu-id="71166-251">For more information about how to program the profiler to walk managed stacks, see the [ICorProfilerInfo2::DoStackSnapshot](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-dostacksnapshot-method.md) method in this documentation set, and [Profiler Stack Walking in the .NET Framework 2.0: Basics and Beyond](http://go.microsoft.com/fwlink/?LinkId=73638).</span></span>
  
### <a name="shadow-stack"></a><span data-ttu-id="71166-252">Gölge yığını</span><span class="sxs-lookup"><span data-stu-id="71166-252">Shadow Stack</span></span>  
 <span data-ttu-id="71166-253">Anlık görüntü yöntemi çok sık kullanarak hızlı bir performans sorunu oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71166-253">Using the snapshot method too frequently can quickly create a performance issue.</span></span> <span data-ttu-id="71166-254">Yığın izlemeleri sık almak istiyorsanız, oluşturucunuz bunun yerine bir gölge yığını kullanarak oluşturup [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md), [FunctionLeave2](../../../../docs/framework/unmanaged-api/profiling/functionleave2-function.md), [FunctionTailcall2](../../../../docs/framework/unmanaged-api/profiling/functiontailcall2-function.md), ve [Icorprofilercallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) özel durum geri aramalar.</span><span class="sxs-lookup"><span data-stu-id="71166-254">If you want to take stack traces frequently, your profiler should instead build a shadow stack by using the [FunctionEnter2](../../../../docs/framework/unmanaged-api/profiling/functionenter2-function.md), [FunctionLeave2](../../../../docs/framework/unmanaged-api/profiling/functionleave2-function.md), [FunctionTailcall2](../../../../docs/framework/unmanaged-api/profiling/functiontailcall2-function.md), and [ICorProfilerCallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) exception callbacks.</span></span> <span data-ttu-id="71166-255">Gölge yığın her zaman güncel olduğundan ve depolama birimine, yığın anlık görüntü gerektiğinde hızlı bir şekilde kopyalanabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-255">The shadow stack is always current and can quickly be copied to storage whenever a stack snapshot is needed.</span></span>  
  
 <span data-ttu-id="71166-256">Gölge yığını işlev bağımsız değişkenleri, dönüş değerleri ve genel örneklemesi hakkında bilgi edinebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71166-256">A shadow stack may obtain function arguments, return values, and information about generic instantiations.</span></span> <span data-ttu-id="71166-257">Bu bilgiler yalnızca gölge yığınından kullanılabilir ve denetim için bir işlev karmalayan zaman elde edilebilir.</span><span class="sxs-lookup"><span data-stu-id="71166-257">This information is available only through the shadow stack and may be obtained when control is handed to a function.</span></span> <span data-ttu-id="71166-258">Ancak, bu bilgiler daha sonra işlevi çalışması sırasında kullanılamayabilir.</span><span class="sxs-lookup"><span data-stu-id="71166-258">However, this information may not be available later during the run of the function.</span></span>  
  
 [<span data-ttu-id="71166-259">Başa dön</span><span class="sxs-lookup"><span data-stu-id="71166-259">Back to top</span></span>](#top)  
  
<a name="callbacks"></a>   
## <a name="callbacks-and-stack-depth"></a><span data-ttu-id="71166-260">Geri aramalar ve yığın derinliği</span><span class="sxs-lookup"><span data-stu-id="71166-260">Callbacks and Stack Depth</span></span>  
 <span data-ttu-id="71166-261">Profil Oluşturucu geri aramalar çok yığını kısıtlı durumlarda verilebilir ve hemen işlem çıkmak için profil oluşturucu geri çağırma bir yığın taşması götürür.</span><span class="sxs-lookup"><span data-stu-id="71166-261">Profiler callbacks may be issued in very stack-constrained circumstances, and a stack overflow in a profiler callback will lead to an immediate process exit.</span></span> <span data-ttu-id="71166-262">Bir profil oluşturucu yanıt geri aramalar için mümkün olduğunca az yığın olarak kullandığınızdan emin olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="71166-262">A profiler should make sure to use as little stack as possible in response to callbacks.</span></span> <span data-ttu-id="71166-263">Profil Oluşturucu yığın taşması karşı güçlü işlemler karşı kullanıma yöneliktir, profil oluşturucu kendisi de yığın taşması tetikleme kaçınmalısınız.</span><span class="sxs-lookup"><span data-stu-id="71166-263">If the profiler is intended for use against processes that are robust against stack overflow, the profiler itself should also avoid triggering stack overflow.</span></span>  
  
 [<span data-ttu-id="71166-264">Başa dön</span><span class="sxs-lookup"><span data-stu-id="71166-264">Back to top</span></span>](#top)  
  
<a name="related_topics"></a>   
## <a name="related-topics"></a><span data-ttu-id="71166-265">İlgili Konular</span><span class="sxs-lookup"><span data-stu-id="71166-265">Related Topics</span></span>  
  
|<span data-ttu-id="71166-266">Başlık</span><span class="sxs-lookup"><span data-stu-id="71166-266">Title</span></span>|<span data-ttu-id="71166-267">Açıklama</span><span class="sxs-lookup"><span data-stu-id="71166-267">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="71166-268">Profil oluşturma ortamını ayarlama</span><span class="sxs-lookup"><span data-stu-id="71166-268">Setting Up a Profiling Environment</span></span>](../../../../docs/framework/unmanaged-api/profiling/setting-up-a-profiling-environment.md)|<span data-ttu-id="71166-269">Bir profil oluşturucu başlatmak, olay bildirimlerini ayarlamak ve bir Windows hizmeti profil açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="71166-269">Explains how to initialize a profiler, set event notifications, and profile a Windows Service.</span></span>|  
|[<span data-ttu-id="71166-270">Profil oluşturma arabirimleri</span><span class="sxs-lookup"><span data-stu-id="71166-270">Profiling Interfaces</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-interfaces.md)|<span data-ttu-id="71166-271">Profil oluşturma API'si kullanan yönetilmeyen arabirimler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="71166-271">Describes the unmanaged interfaces that the profiling API uses.</span></span>|  
|[<span data-ttu-id="71166-272">Profil oluşturma genel statik işlevleri</span><span class="sxs-lookup"><span data-stu-id="71166-272">Profiling Global Static Functions</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-global-static-functions.md)|<span data-ttu-id="71166-273">Profil oluşturma API'si kullanan yönetilmeyen genel statik işlevleri açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="71166-273">Describes the unmanaged global static functions that the profiling API uses.</span></span>|  
|[<span data-ttu-id="71166-274">Profil oluşturma numaralandırmaları</span><span class="sxs-lookup"><span data-stu-id="71166-274">Profiling Enumerations</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-enumerations.md)|<span data-ttu-id="71166-275">Profil oluşturma API'si kullanan yönetilmeyen numaralandırmalar açıklar.</span><span class="sxs-lookup"><span data-stu-id="71166-275">Describes the unmanaged enumerations that the profiling API uses.</span></span>|  
|[<span data-ttu-id="71166-276">Profil oluşturma yapıları</span><span class="sxs-lookup"><span data-stu-id="71166-276">Profiling Structures</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-structures.md)|<span data-ttu-id="71166-277">Profil oluşturma API'si kullanan yönetilmeyen yapılar açıklar.</span><span class="sxs-lookup"><span data-stu-id="71166-277">Describes the unmanaged structures that the profiling API uses.</span></span>|
