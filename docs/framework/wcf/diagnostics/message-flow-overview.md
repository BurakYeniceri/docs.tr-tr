---
title: İleti Akışı Genel Bakış
ms.date: 03/30/2017
ms.assetid: fb0899e1-84cc-4d90-b45b-dc5a50063943
ms.openlocfilehash: aea0ca4c5a8574f6039cd055561ce7da0099841b
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/07/2018
---
# <a name="message-flow-overview"></a><span data-ttu-id="cd4d9-102">İleti Akışı Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="cd4d9-102">Message Flow Overview</span></span>
<span data-ttu-id="cd4d9-103">Birbirine bağlı hizmetleri içeren dağıtılmış bir sistemde hizmetleri arasında nedensel ilişkilerini belirlemek gereklidir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-103">In a distributed system containing interconnected services, it is necessary to determine causal relationships between the services.</span></span> <span data-ttu-id="cd4d9-104">Kök neden analizi ve izleme, sorun giderme sistem durumu gibi kritik senaryoları desteklemek için bir istek akışının bir parçası olan çeşitli bileşenleri anlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-104">It is important to understand the various components that were part of a request flow to support critical scenarios such as health monitoring, troubleshooting, and root cause analysis.</span></span> <span data-ttu-id="cd4d9-105">Aşağıdaki özellikler sayesinde destek eklediğimiz izlemeleri bağıntı .NET Framework 4'te çeşitli hizmetler arasında etkinleştirmek için:</span><span class="sxs-lookup"><span data-stu-id="cd4d9-105">To enable the correlation of traces between various services, in the .NET Framework 4 we added support through the following features:</span></span>  
  
-   <span data-ttu-id="cd4d9-106">Çözümleme izleme: yüksek performans ve olay izleme için Windows (ETW) kullanarak düşük ayrıntı izleme özelliği.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-106">Analytic tracing: A high performance and low verbosity tracing feature using Event Tracing for Windows (ETW).</span></span>  
  
-   <span data-ttu-id="cd4d9-107">WCF/WF Hizmetleri için uçtan uca etkinlik modeli: tarafından oluşturulan izlemeleri bağıntı bu özelliği destekleyen <xref:System.ServiceModel> ve <xref:System.Workflow.ComponentModel> ad alanları.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-107">End-to-end activity model for WCF/WF services: This feature supports correlation of traces generated by the <xref:System.ServiceModel> and <xref:System.Workflow.ComponentModel> namespaces.</span></span>  
  
-   <span data-ttu-id="cd4d9-108">WF izleme ETW: Bu özellik iş akışının geçerli durumuna ve ilerleme görünürlük sağlamak için WF Hizmetleri tarafından oluşturulan izleme kayıtları kullanır.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-108">ETW tracking for WF: This feature uses tracking records generated by WF services to provide visibility into the workflow’s current state and progress.</span></span>  
  
 <span data-ttu-id="cd4d9-109">Bir izleme veya kayıt izleme günlüğe hataları, kod hataları veya hatalı oluşturulmuş iletileri bulmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-109">Errors logged in a tracking or tracing record can be used to find code defects or incorrectly formed messages.</span></span> <span data-ttu-id="cd4d9-110">Olayın ileti üstbilgisinde bağıntı düğümün ActivityID özelliği hataya neden olan etkinliğini belirlemek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-110">The ActivityId property of the Correlation node in the event’s message header can be used to determine the faulting activity.</span></span> <span data-ttu-id="cd4d9-111">Etkinlik Kimliği tarafından ileti akışı izlemeyi etkinleştirmek için bkz: [ileti akışı izlemeyi yapılandırma](../../../../docs/framework/wcf/diagnostics/etw/configuring-message-flow-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="cd4d9-111">To enable message flow tracing by activity ID, see [Configuring Message Flow Tracing](../../../../docs/framework/wcf/diagnostics/etw/configuring-message-flow-tracing.md).</span></span> <span data-ttu-id="cd4d9-112">Bu konu, Başlarken öğreticisinde oluşturulan projesinde ileti akışı izlemeyi etkinleştirmek gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-112">This topic demonstrates how to enable message flow tracing in the project created in the Getting Started tutorial.</span></span>  
  
### <a name="to-enable-message-flow-tracing-in-the-getting-started-tutorial"></a><span data-ttu-id="cd4d9-113">Başlarken Öğreticisi ileti akışı izlemeyi etkinleştirmek için</span><span class="sxs-lookup"><span data-stu-id="cd4d9-113">To enable message flow tracing in the Getting Started tutorial</span></span>  
  
1.  <span data-ttu-id="cd4d9-114">Olay Görüntüleyicisi'ni tıklatarak açın **Başlat**, **çalıştırmak**ve girerek `eventvwr.exe`.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-114">Open Event Viewer by clicking **Start**, **Run**, and entering `eventvwr.exe`.</span></span>  
  
2.  <span data-ttu-id="cd4d9-115">Çözümleme izleme etkinleştirmediyseniz genişletin **uygulama ve hizmet günlükleri**, **Microsoft**, **Windows**, **uygulama sunucusu-uygulamalar** .</span><span class="sxs-lookup"><span data-stu-id="cd4d9-115">If you haven’t enabled analytic tracing, expand **Applications and Services Logs**, **Microsoft**, **Windows**, **Application Server-Applications**.</span></span> <span data-ttu-id="cd4d9-116">Seçin **Görünüm**, **Göster Analitik ve hata ayıklama günlüklerini**.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-116">Select **View**, **Show Analytic and Debug Logs**.</span></span> <span data-ttu-id="cd4d9-117">Sağ **analitik** seçip **günlüğü etkinleştir**.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-117">Right-click **Analytic** and select **Enable Log**.</span></span> <span data-ttu-id="cd4d9-118">Böylece izlemeleri görüntülenebilmesi için Olay Görüntüleyicisi'ni kapatmayın.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-118">Leave Event Viewer open so that traces can be viewed.</span></span>  
  
3.  <span data-ttu-id="cd4d9-119">Oluşturulan örnek açmak [başlangıç Öğreticisi](../../../../docs/framework/wcf/getting-started-tutorial.md) içinde [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="cd4d9-119">Open the sample created in the [Getting Started Tutorial](../../../../docs/framework/wcf/getting-started-tutorial.md) in [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)].</span></span> <span data-ttu-id="cd4d9-120">Çalıştırmalısınız Not [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] yönetici olarak böylece hizmet oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-120">Note that you must run [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] as an administrator so that the service can be created.</span></span> <span data-ttu-id="cd4d9-121">Yüklü WCF örnekleri varsa açabilirsiniz [Başlarken](../../../../docs/framework/wcf/samples/getting-started-sample.md), öğreticide oluşturulan projeyi içerir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-121">If you have the WCF samples installed, you can open the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md), which contains the completed project created in the tutorial.</span></span>  
  
4.  <span data-ttu-id="cd4d9-122">Sağ **hizmet** proje ve seçin **Ekle**, **yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-122">Right-click the **Service** project and select **Add**, **New Item**.</span></span> <span data-ttu-id="cd4d9-123">Seçin **uygulama yapılandırma dosyası** tıklatıp **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-123">Select **Application Configuration File** and click **OK**.</span></span>  
  
5.  <span data-ttu-id="cd4d9-124">Önceki adımda oluşturulan App.Config dosyasına aşağıdaki kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-124">Add the following code to the App.Config file created in the previous step.</span></span>  
  
    ```xml  
    <system.serviceModel>  
      <diagnostics>  
        <endToEndTracing propagateActivity="true" messageFlowTracing="true"/>  
      </diagnostics>  
    </system.serviceModel>  
    ```  
  
6.  <span data-ttu-id="cd4d9-125">Sunucu uygulaması, CTRL + F5'e basarak hata ayıklama olmadan yürütün.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-125">Execute the server application without debugging by pressing CTRL+F5.</span></span> <span data-ttu-id="cd4d9-126">İstemci projesine sağ tıklayarak yürütme **istemci** proje ve seçerek **hata ayıklama**, **Başlat yeni örnek**.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-126">Execute the client project by right-clicking the **Client** project and selecting **Debug**, **Start New Instance**.</span></span>  
  
7.  <span data-ttu-id="cd4d9-127">İstemciden sunucuya olayları izlemek için aşağıdaki istemci projesine uygulama yapılandırma dosyasında ekleyin.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-127">To trace the events from the client to the server, add the following to the application configuration file in the Client project.</span></span>  
  
    ```xml  
    <diagnostics>  
      <endToEndTracing propagateActivity="true" messageFlowTracing="true"/>  
    </diagnostics>  
    ```  
  
8.  <span data-ttu-id="cd4d9-128">İstemcisindeki program.cs içinde aşağıdaki Using deyimini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-128">In Program.cs in the client, add the following Using statement.</span></span>  
  
    ```  
    using System.Diagnostics;  
    ```  
  
9. <span data-ttu-id="cd4d9-129">İstemci projesindeki program.cs dosyasını ana yönteminde olay günlüğü'nde dağıtılmasını izleme GUID'i ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-129">In the Main method in the program.cs file in the client project, set the Trace GUID to be propagated in the event log.</span></span>  
  
    ```  
    Guid guid = Guid.NewGuid();  
    Trace.CorrelationManager.ActivityId = guid;  
    ```  
  
10. <span data-ttu-id="cd4d9-130">Yenileyin ve incelemek **analitik** günlük.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-130">Refresh and examine the **Analytic**  log.</span></span>  <span data-ttu-id="cd4d9-131">Olay Kimliği 220 sahip bir olay arayın.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-131">Look for an event with Event ID 220.</span></span>  <span data-ttu-id="cd4d9-132">Olay seçin ve tıklayın **ayrıntıları** önizleme bölmesinde sekmesi.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-132">Select the event, and click the **Details** tab in the preview pane.</span></span> <span data-ttu-id="cd4d9-133">Bu olay çağırma etkinliğinin bağıntı kimliği içerir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-133">This event will contain the correlation ID for the calling activity.</span></span>  
  
    ```xml  
    <Correlation ActivityID="{A066CCF1-8AB3-459B-B62F-F79F957A5036}" />  
    ```  
  
    > [!NOTE]
    >  <span data-ttu-id="cd4d9-134">Tüm olayları ActivityID içinde aynı GUID'ye sahip bir istekle ilişkili.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-134">All events with the same GUID in the ActivityID are related to one request.</span></span> <span data-ttu-id="cd4d9-135">Bu, belirli bir hizmeti belirli bir istemciden gelen iletileri ilişkilendirmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-135">This can be used to correlate messages from a specific client to a specific service.</span></span> <span data-ttu-id="cd4d9-136">İstemci başka bir hizmet olarak adlandırılan, aynı istemci tarafından ActivityID tanımlanamadı.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-136">If the client called another service, then the same client could be identified by ActivityID.</span></span>  
  
11. <span data-ttu-id="cd4d9-137">Bazı durumlarda, ActivityID adresinden özgün GUID yeni ActivityID olarak değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-137">In some cases, the ActivityID can change from the original GUID to a new ActivityID.</span></span> <span data-ttu-id="cd4d9-138">Bu durumda, bir aktarım olayını yayınlanır.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-138">In that case, a transfer event is emitted.</span></span> <span data-ttu-id="cd4d9-139">Bu olay kimliği 499 olduğu ve olay üstbilgisinde aşağıdaki veri içerir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-139">This event ID is 499, and the event will contain the following data in the header.</span></span>  
  
    ```xml  
    <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">  
        <System>  
            <Provider Name="Microsoft-Windows-Application Server-Applications" Guid="{c651f5f6-1c0d-492e-8ae1-b4efd7c9d503}" />   
            <EventID>499</EventID>   
            ...  
            <Correlation ActivityID="{A066CCF1-8AB3-459B-B62F-F79F957A5036}" RelatedActivityID="{85FC0930-9C49-42DA-804B-A7368104BD1B}" />   
            ...  
       </System>  
    </Event>  
    ```  
  
    > [!NOTE]
    >  <span data-ttu-id="cd4d9-140">Aktarım olayını ActivityID GUID RelatedActivityID belirtilen olarak belirtilen Guid'den etkin ActivityID değişiklik kaydeder.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-140">The transfer event records the change of the active ActivityID from the GUID specified as the ActivityID to the GUID specified as RelatedActivityID.</span></span> <span data-ttu-id="cd4d9-141">Aktarım olayını yayılan sonra tüm olayları yeni bir GUID ActivityID içerir.</span><span class="sxs-lookup"><span data-stu-id="cd4d9-141">After the transfer event is emitted, all events will contain the new GUID as the ActivityID.</span></span>
