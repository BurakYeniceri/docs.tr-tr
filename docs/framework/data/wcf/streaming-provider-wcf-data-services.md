---
title: Akış sağlayıcısı (WCF Veri Hizmetleri)
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, providers
- WCF Data Services, binary data
- streaming data provider [WCF Data Services]
- WCF Data Services, streams
ms.assetid: f0978fe4-5f9f-42aa-a5c2-df395d7c9495
caps.latest.revision: 8
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: bc66d4154f60e46e53de8ca72596e133dc84eb97
ms.sourcegitcommit: 86adcc06e35390f13c1e372c36d2e044f1fc31ef
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/26/2018
---
# <a name="streaming-provider-wcf-data-services"></a><span data-ttu-id="bfb50-102">Akış sağlayıcısı (WCF Veri Hizmetleri)</span><span class="sxs-lookup"><span data-stu-id="bfb50-102">Streaming Provider (WCF Data Services)</span></span>
<span data-ttu-id="bfb50-103">Veri Hizmeti ikili büyük nesne veri getirebilir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-103">A data service can expose large object binary data.</span></span> <span data-ttu-id="bfb50-104">Bu ikili verileri, video ve ses akışları, görüntüler, belge dosyaları veya diğer ikili medya türleri temsil edebilir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-104">This binary data might represent video and audio streams, images, document files, or other types of binary media.</span></span> <span data-ttu-id="bfb50-105">Bir veya daha fazla ikili özelliklerinin bir varlık veri modeli içerir, bu ikili veri akışı yanıt girişi içinde base-64 olarak kodlanmış veri hizmeti döndürür.</span><span class="sxs-lookup"><span data-stu-id="bfb50-105">When an entity in the data model includes one or more binary properties, the data service returns this binary data encoded as base-64 inside the entry in the response feed.</span></span> <span data-ttu-id="bfb50-106">Yükleme ve bu şekilde büyük ikili verileri seri hale getirme performansını etkileyebilir çünkü [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] ait olduğu varlık bağımsız ikili veri almak için bir mekanizma tanımlar.</span><span class="sxs-lookup"><span data-stu-id="bfb50-106">Because loading and serializing large binary data in this manner can affect performance, the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] defines a mechanism for retrieving binary data independent of the entity to which it belongs.</span></span> <span data-ttu-id="bfb50-107">Bu, bir veya daha fazla veri akışlara varlıktan ikili veri ayırarak gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-107">This is accomplished by separating the binary data from the entity into one or more data streams.</span></span>  
  
-   <span data-ttu-id="bfb50-108">Medya kaynağı - video, ses, görüntü veya diğer medya kaynak akışı türü gibi bir varlığa ait ikili veriler.</span><span class="sxs-lookup"><span data-stu-id="bfb50-108">Media resource - binary data that belongs to an entity, such as a video, audio, image or other type of media resource stream.</span></span>  
  
-   <span data-ttu-id="bfb50-109">Medya girdisi - ilgili medya kaynak akışı başvuruyor bir varlık bağlantısı.</span><span class="sxs-lookup"><span data-stu-id="bfb50-109">Media link entry - an entity that has a reference to a related media resource stream.</span></span>  
  
 <span data-ttu-id="bfb50-110">İle [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], bir akış veri sağlayıcısı uygulayarak bir ikili kaynak akışı tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="bfb50-110">With [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], you define a binary resource stream by implementing a streaming data provider.</span></span> <span data-ttu-id="bfb50-111">Akış sağlayıcısı uygulaması belirli bir varlık olarak ilişkili medya kaynak akışı ile veri hizmeti sağlayan bir <xref:System.IO.Stream> nesnesi.</span><span class="sxs-lookup"><span data-stu-id="bfb50-111">The streaming provider implementation supplies the data service with the media resource stream associated with a specific entity as an <xref:System.IO.Stream> object.</span></span> <span data-ttu-id="bfb50-112">Bu uygulama kabul edin ve ortam kaynakları HTTP üzerinden belirtilen MIME türünün ikili veri akışları olarak döndürmek veri hizmeti sağlar.</span><span class="sxs-lookup"><span data-stu-id="bfb50-112">This implementation enables the data service to accept and return media resources over HTTP as binary data streams of a specified MIME type.</span></span>  
  
 <span data-ttu-id="bfb50-113">İkili verileri akış desteklemek için veri hizmeti yapılandırma aşağıdakileri gerektirir:</span><span class="sxs-lookup"><span data-stu-id="bfb50-113">Configuring a data service to support the streaming of binary data requires the following steps:</span></span>  
  
1.  <span data-ttu-id="bfb50-114">Bir medya bağlantısı gibi giriş veri modelindeki bir veya daha fazla varlık özniteliği.</span><span class="sxs-lookup"><span data-stu-id="bfb50-114">Attribute one or more entities in the data model as a media link entry.</span></span> <span data-ttu-id="bfb50-115">Bu varlıklar akışını ikili veri içermemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-115">These entities should not include the binary data to be streamed.</span></span> <span data-ttu-id="bfb50-116">İkili özelliklerinin bir varlık hiçbirini her zaman girişi base-64 kodlu ikili döndürülür.</span><span class="sxs-lookup"><span data-stu-id="bfb50-116">Any binary properties of an entity are always returned in the entry as base-64 encoded binary.</span></span>  
  
2.  <span data-ttu-id="bfb50-117">T:System.Data.Services.Providers.IDataServiceStreamProvider arabirimini uygular.</span><span class="sxs-lookup"><span data-stu-id="bfb50-117">Implement the T:System.Data.Services.Providers.IDataServiceStreamProvider interface.</span></span>  
  
3.  <span data-ttu-id="bfb50-118">Arabirimini uygulayan bir veri hizmeti tanımlamak <xref:System.IServiceProvider> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="bfb50-118">Define a data service that implements the <xref:System.IServiceProvider> interface.</span></span> <span data-ttu-id="bfb50-119">Veri hizmeti kullanan <xref:System.IServiceProvider.GetService%2A> akış veri sağlayıcı uygulaması erişmek için uygulama.</span><span class="sxs-lookup"><span data-stu-id="bfb50-119">The data service uses the <xref:System.IServiceProvider.GetService%2A> implementation to access the streaming data provider implementation.</span></span> <span data-ttu-id="bfb50-120">Bu yöntem, uygun akış sağlayıcı uygulaması döndürür.</span><span class="sxs-lookup"><span data-stu-id="bfb50-120">This method returns the appropriate streaming provider implementation.</span></span>  
  
4.  <span data-ttu-id="bfb50-121">Web uygulama yapılandırmasında büyük ileti akışları etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="bfb50-121">Enable large message streams in the Web application configuration.</span></span>  
  
5.  <span data-ttu-id="bfb50-122">Sunucuda veya bir veri kaynağında ikili kaynaklarına erişimi etkinleştirme.</span><span class="sxs-lookup"><span data-stu-id="bfb50-122">Enable access to binary resources on the server or in a data source.</span></span>  
  
 <span data-ttu-id="bfb50-123">Bu konudaki örnekler ayrıntılı post olarak ele alınmıştır fotoğraf hizmet akış bir örneği temel alarak [Veri Hizmetleri Akış sağlayıcısı serisi: bir akış sağlayıcı (Kısım 1) uygulama](http://go.microsoft.com/fwlink/?LinkID=198989).</span><span class="sxs-lookup"><span data-stu-id="bfb50-123">The examples in this topic are based on a sample streaming photo service, which is discussed in depth in the post [Data Services Streaming Provider Series: Implementing a Streaming Provider (Part 1)](http://go.microsoft.com/fwlink/?LinkID=198989).</span></span> <span data-ttu-id="bfb50-124">Bu örnek hizmeti için kaynak kodunu kullanılabilir [akış fotoğraf veri hizmeti örnek sayfası](http://go.microsoft.com/fwlink/?LinkID=198988) MSDN kod Galerisi'nden üzerinde.</span><span class="sxs-lookup"><span data-stu-id="bfb50-124">The source code for this sample service is available on the [Streaming Photo Data Service Sample page](http://go.microsoft.com/fwlink/?LinkID=198988) on MSDN Code Gallery.</span></span>  
  
## <a name="defining-a-media-link-entry-in-the-data-model"></a><span data-ttu-id="bfb50-125">Veri modelinde Media Link Entry tanımlama</span><span class="sxs-lookup"><span data-stu-id="bfb50-125">Defining a Media Link Entry in the Data Model</span></span>  
 <span data-ttu-id="bfb50-126">Veri kaynağı sağlayıcısı bir varlık veri modeli medya bağlantısı girdi olarak tanımlanır şeklini belirler.</span><span class="sxs-lookup"><span data-stu-id="bfb50-126">The data source provider determines the way that an entity is defined as a media link entry in the data model.</span></span>  
  
 <span data-ttu-id="bfb50-127">**Entity Framework Sağlayıcısı**</span><span class="sxs-lookup"><span data-stu-id="bfb50-127">**Entity Framework Provider**</span></span>  
 <span data-ttu-id="bfb50-128">Bir varlık bir medya bağlantısı girişinin olduğunu belirtmek için ekleme `HasStream` özniteliği aşağıdaki örnekte olduğu gibi kavramsal modelde varlık türü tanımı:</span><span class="sxs-lookup"><span data-stu-id="bfb50-128">To indicate that an entity is a media link entry, add the `HasStream` attribute to the entity type definition in the conceptual model, as in the following example:</span></span>  
  
 [!code-xml[Astoria Photo Streaming Service#HasStream](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria photo streaming service/xml/photodata.edmx#hasstream)]  
  
 <span data-ttu-id="bfb50-129">Ad alanı da eklemelisiniz `xmlns:m=http://schemas.microsoft.com/ado/2007/08/dataservices/metadata` varlık veya veri modeli tanımlayan .edmx veya .csdl dosyası kök.</span><span class="sxs-lookup"><span data-stu-id="bfb50-129">You must also add the namespace `xmlns:m=http://schemas.microsoft.com/ado/2007/08/dataservices/metadata` either to the entity or to the root of the .edmx or .csdl file that defines the data model.</span></span>  
  
 <span data-ttu-id="bfb50-130">Bir örnek kullanan bir veri hizmeti için [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] sağlayıcısı ve bir medya kaynağı gösterir gönderiye bakın [Veri Hizmetleri Akış sağlayıcısı serisi: bir akış sağlayıcı (Kısım 1) uygulama](http://go.microsoft.com/fwlink/?LinkID=198989).</span><span class="sxs-lookup"><span data-stu-id="bfb50-130">For an example of a data service that uses the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] provider and exposes a media resource, see the post [Data Services Streaming Provider Series: Implementing a Streaming Provider (Part 1)](http://go.microsoft.com/fwlink/?LinkID=198989).</span></span>  
  
 <span data-ttu-id="bfb50-131">**Yansıma Sağlayıcısı**</span><span class="sxs-lookup"><span data-stu-id="bfb50-131">**Reflection Provider**</span></span>  
 <span data-ttu-id="bfb50-132">Bir varlığa bir medya bağlantısı girişinin olduğunu belirtmek için ekleme <xref:System.Data.Services.Common.HasStreamAttribute> sınıfına yansıma sağlayıcısında varlık türünü tanımlar.</span><span class="sxs-lookup"><span data-stu-id="bfb50-132">To indicate that an entity is a media link entry, add the <xref:System.Data.Services.Common.HasStreamAttribute> to the class that defines the entity type in the reflection provider.</span></span>  
  
 <span data-ttu-id="bfb50-133">**Özel veri hizmet sağlayıcısı**</span><span class="sxs-lookup"><span data-stu-id="bfb50-133">**Custom Data Service Provider**</span></span>  
 <span data-ttu-id="bfb50-134">Özel hizmet sağlayıcıları kullanırken, uygulamanız <xref:System.Data.Services.Providers.IDataServiceMetadataProvider> veri hizmetiniz için meta verileri tanımlamak için arabirim.</span><span class="sxs-lookup"><span data-stu-id="bfb50-134">When using custom service providers, you implement the <xref:System.Data.Services.Providers.IDataServiceMetadataProvider> interface to define the metadata for your data service.</span></span> <span data-ttu-id="bfb50-135">Daha fazla bilgi için bkz: [özel veri hizmeti sağlayıcıları](../../../../docs/framework/data/wcf/custom-data-service-providers-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bfb50-135">For more information, see [Custom Data Service Providers](../../../../docs/framework/data/wcf/custom-data-service-providers-wcf-data-services.md).</span></span> <span data-ttu-id="bfb50-136">Bir ikili kaynak akışı ait olduğunu belirten bir <xref:System.Data.Services.Providers.ResourceType> ayarlayarak <xref:System.Data.Services.Providers.ResourceType.IsMediaLinkEntry%2A> özelliğine `true` üzerinde <xref:System.Data.Services.Providers.ResourceType> temsil eden bir medya bağlantısı girişi varlık türü.</span><span class="sxs-lookup"><span data-stu-id="bfb50-136">You indicate that a binary resource stream belongs to a <xref:System.Data.Services.Providers.ResourceType> by setting the <xref:System.Data.Services.Providers.ResourceType.IsMediaLinkEntry%2A> property to `true` on the <xref:System.Data.Services.Providers.ResourceType> that represents the entity type, which is a media link entry.</span></span>  
  
## <a name="implementing-the-idataservicestreamprovider-interface"></a><span data-ttu-id="bfb50-137">IDataServiceStreamProvider arabirimi uygulama</span><span class="sxs-lookup"><span data-stu-id="bfb50-137">Implementing the IDataServiceStreamProvider Interface</span></span>  
 <span data-ttu-id="bfb50-138">İkili veri akışlarını destekleyen bir veri hizmeti oluşturmak için uygulamanız gereken <xref:System.Data.Services.Providers.IDataServiceStreamProvider> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="bfb50-138">To create a data service that supports binary data streams, you must implement the <xref:System.Data.Services.Providers.IDataServiceStreamProvider> interface.</span></span> <span data-ttu-id="bfb50-139">Bu uygulama ikili veri akışı olarak istemciye Döndür ve istemciden gönderilen bir akış olarak ikili verileri kullanmak veri hizmeti sağlar.</span><span class="sxs-lookup"><span data-stu-id="bfb50-139">This implementation enables the data service to return binary data as a stream to the client and consume binary data as a stream sent from the client.</span></span> <span data-ttu-id="bfb50-140">İkili veri akışı olarak erişmesi gereken her veri hizmeti bu arabiriminin bir örneğini oluşturur.</span><span class="sxs-lookup"><span data-stu-id="bfb50-140">The data service creates an instance of this interface whenever it needs to access binary data as a stream.</span></span> <span data-ttu-id="bfb50-141"><xref:System.Data.Services.Providers.IDataServiceStreamProvider> Arabirimi aşağıdaki üyeleri belirtir:</span><span class="sxs-lookup"><span data-stu-id="bfb50-141">The <xref:System.Data.Services.Providers.IDataServiceStreamProvider> interface specifies the following members:</span></span>  
  
|<span data-ttu-id="bfb50-142">Üye adı</span><span class="sxs-lookup"><span data-stu-id="bfb50-142">Member name</span></span>|<span data-ttu-id="bfb50-143">Açıklama</span><span class="sxs-lookup"><span data-stu-id="bfb50-143">Description</span></span>|  
|-----------------|-----------------|  
|<xref:System.Data.Services.Providers.IDataServiceStreamProvider.DeleteStream%2A>|<span data-ttu-id="bfb50-144">Bu yöntem, medya bağlantısı girdisini silindiğinde karşılık gelen medya kaynağı silmek için veri hizmeti tarafından çağrılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-144">This method is invoked by the data service to delete the corresponding media resource when its media link entry is deleted.</span></span> <span data-ttu-id="bfb50-145">Ne zaman uygulamanız <xref:System.Data.Services.Providers.IDataServiceStreamProvider>, bu yöntem sağlanan medya bağlantısı girişle ilişkili medya kaynağı siler kodunu içerir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-145">When you implement <xref:System.Data.Services.Providers.IDataServiceStreamProvider>, this method contains the code that deletes the media resource associated with the supplied media link entry.</span></span>|  
|<xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStream%2A>|<span data-ttu-id="bfb50-146">Bu yöntem, bir medya kaynağı bir akış olarak döndürmek için veri hizmeti tarafından çağrılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-146">This method is invoked by the data service to return a media resource as a stream.</span></span> <span data-ttu-id="bfb50-147">Ne zaman uygulamanız <xref:System.Data.Services.Providers.IDataServiceStreamProvider>, bu yöntem, sağlanan media link entry ile ilişkili dönüş medya kaynağı için veri hizmeti tarafından kullanılan bir akış sunar kodunu içerir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-147">When you implement <xref:System.Data.Services.Providers.IDataServiceStreamProvider>, this method contains the code that provides a stream that is used by the data service to the return media resource that is associated with the provided media link entry.</span></span>|  
|<xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStreamUri%2A>|<span data-ttu-id="bfb50-148">Bu yöntem, media link entry medya kaynağı istemek için kullanılan URI döndürmek için veri hizmeti tarafından çağrılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-148">This method is invoked by the data service to return the URI that is used to request the media resource for the media link entry.</span></span> <span data-ttu-id="bfb50-149">Bu değer oluşturmak için kullanılan `src` özniteliği media link entry ve içerik öğesindeki veri akışı istemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-149">This value is used to create the `src` attribute in the content element of the media link entry and that is used to request the data stream.</span></span> <span data-ttu-id="bfb50-150">Bu yöntem döndürdüğünde `null`, veri hizmeti otomatik olarak URI belirler.</span><span class="sxs-lookup"><span data-stu-id="bfb50-150">When this method returns `null`, the data service automatically determines the URI.</span></span> <span data-ttu-id="bfb50-151">Akış sağlayıcısı kullanmadan istemcileri ikili veriler doğrudan erişim sağlamak istediğinizde bu yöntemi kullanın.</span><span class="sxs-lookup"><span data-stu-id="bfb50-151">Use this method when you need to provide clients with direct access to binary data without using the steam provider.</span></span>|  
|<xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamContentType%2A>|<span data-ttu-id="bfb50-152">Bu yöntem, belirtilen media link entry ile ilişkili medya kaynağı Content-Type değerini döndürmek için veri hizmeti tarafından çağrılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-152">This method is invoked by the data service to return the Content-Type value of the media resource that is associated with the specified media link entry.</span></span>|  
|<xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetStreamETag%2A>|<span data-ttu-id="bfb50-153">Bu yöntem, belirtilen varlık ile ilişkili veri akışının eTag döndürmek için veri hizmeti tarafından çağrılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-153">This method is invoked by the data service to return the eTag of the data stream that is associated with the specified entity.</span></span> <span data-ttu-id="bfb50-154">İkili veriler için eşzamanlılık yönetirken bu yöntem kullanılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-154">This method is used when you manage concurrency for the binary data.</span></span> <span data-ttu-id="bfb50-155">Bu yöntem null değeri döndürür, veri hizmeti eşzamanlılık izlemez.</span><span class="sxs-lookup"><span data-stu-id="bfb50-155">When this method returns null, the data service does not track concurrency.</span></span>|  
|<xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A>|<span data-ttu-id="bfb50-156">Bu yöntem, akış alma istemciden gönderildiğinde, kullanılan akış almak için veri hizmeti tarafından çağrılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-156">This method is invoked by the data service to obtain the stream that is used when receiving the stream sent from the client.</span></span> <span data-ttu-id="bfb50-157">Ne zaman uygulamanız <xref:System.Data.Services.Providers.IDataServiceStreamProvider>, veri hizmeti alınan yazma veri akışı yazılabilir bir akış döndürmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-157">When you implement <xref:System.Data.Services.Providers.IDataServiceStreamProvider>, you must return a writable stream to which the data service writes received stream data.</span></span>|  
|<xref:System.Data.Services.Providers.IDataServiceStreamProvider.ResolveType%2A>|<span data-ttu-id="bfb50-158">Veri Hizmeti çalışma zamanı eklenmekte medya kaynağı için veri akışı ile ilişkilendirilmiş media link entry oluşturmalıdır türünü temsil eden bir ad alanı nitelenmiş tür adını döndürür.</span><span class="sxs-lookup"><span data-stu-id="bfb50-158">Returns a namespace-qualified type name that represents the type that the data service runtime must create for the media link entry that is associated with the data stream for the media resource that is being inserted.</span></span>|  
  
## <a name="creating-the-streaming-data-service"></a><span data-ttu-id="bfb50-159">Akış veri hizmeti oluşturma</span><span class="sxs-lookup"><span data-stu-id="bfb50-159">Creating the Streaming Data Service</span></span>  
 <span data-ttu-id="bfb50-160">Sağlamak için [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] çalışma zamanı erişimi <xref:System.Data.Services.Providers.IDataServiceStreamProvider> gerekir oluşturduğunuz veri hizmeti uygulaması, ayrıca uygulama <xref:System.IServiceProvider> arabirimi.</span><span class="sxs-lookup"><span data-stu-id="bfb50-160">To provide the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] runtime with access to the <xref:System.Data.Services.Providers.IDataServiceStreamProvider> implementation, the data service that you create must also implement the <xref:System.IServiceProvider> interface.</span></span> <span data-ttu-id="bfb50-161">Aşağıdaki örnekte nasıl uygulanacağını gösterir <xref:System.IServiceProvider.GetService%2A> örneği döndürülecek yöntemi `PhotoServiceStreamProvider` uygulayan sınıf <xref:System.Data.Services.Providers.IDataServiceStreamProvider>.</span><span class="sxs-lookup"><span data-stu-id="bfb50-161">The following example shows how to implement the <xref:System.IServiceProvider.GetService%2A> method to return an instance of the `PhotoServiceStreamProvider` class that implements <xref:System.Data.Services.Providers.IDataServiceStreamProvider>.</span></span>  
  
 [!code-csharp[Astoria Photo Streaming Service#PhotoServiceStreamingProvider](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming service/cs/photodata.svc.cs#photoservicestreamingprovider)]
 [!code-vb[Astoria Photo Streaming Service#PhotoServiceStreamingProvider](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming service/vb/photodata.svc.vb#photoservicestreamingprovider)]  
  
 <span data-ttu-id="bfb50-162">Veri hizmeti oluşturma hakkında genel bilgi için bkz: [veri hizmeti yapılandırma](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bfb50-162">For general information about how to create a data service, see [Configuring the Data Service](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span></span>  
  
## <a name="enabling-large-binary-streams-in-the-hosting-environment"></a><span data-ttu-id="bfb50-163">Barındırma ortamında büyük ikili akışlar etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="bfb50-163">Enabling Large Binary Streams in the Hosting Environment</span></span>  
 <span data-ttu-id="bfb50-164">Bir veri hizmeti oluşturduğunuzda bir [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web uygulaması, [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] HTTP protokolü uygulamasını sağlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-164">When you create a data service in an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web application, [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] is used to provide the HTTP protocol implementation.</span></span> <span data-ttu-id="bfb50-165">Varsayılan olarak, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] HTTP iletileri yalnızca 65 K bayt boyutu sınırlar.</span><span class="sxs-lookup"><span data-stu-id="bfb50-165">By default, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] limits the size of HTTP messages to only 65K bytes.</span></span> <span data-ttu-id="bfb50-166">Büyük ikili veri akışı için ve veri hizmeti kullanabilmek için Web uygulaması büyük ikili dosyaları etkinleştirmek ve akışlar aktarımı için kullanmak için yapılandırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-166">To be able to stream large binary data to and from the data service, you must also configure the Web application to enable large binary files and to use streams for transfer.</span></span> <span data-ttu-id="bfb50-167">Bunu yapmak için aşağıdakileri ekleyin `<configuration />` uygulamanın Web.config dosyasının öğesi:</span><span class="sxs-lookup"><span data-stu-id="bfb50-167">To do this, add the following in the `<configuration />` element of the application's Web.config file:</span></span>  
  
  
  
> [!NOTE]
>  <span data-ttu-id="bfb50-168">Kullanmalısınız bir <xref:System.ServiceModel.TransferMode.Streamed?displayProperty=nameWithType> istek ve yanıt iletilerinde ikili veri akışı ve tarafından arabelleğe değil emin olmak için aktarım modu [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bfb50-168">You must use a <xref:System.ServiceModel.TransferMode.Streamed?displayProperty=nameWithType> transfer mode to ensure that the binary data in both the request and response messages are streamed and not buffered by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
 <span data-ttu-id="bfb50-169">Daha fazla bilgi için bkz: [ileti aktarma akışı](../../../../docs/framework/wcf/feature-details/streaming-message-transfer.md) ve [taşıma kotaları](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span><span class="sxs-lookup"><span data-stu-id="bfb50-169">For more information, see [Streaming Message Transfer](../../../../docs/framework/wcf/feature-details/streaming-message-transfer.md) and [Transport Quotas](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span></span>  
  
 <span data-ttu-id="bfb50-170">Varsayılan olarak, Internet Information Services (IIS) 4 MB isteklerine boyutunu de sınırlar.</span><span class="sxs-lookup"><span data-stu-id="bfb50-170">By default, Internet Information Services (IIS) also limits the size of requests to 4MB.</span></span> <span data-ttu-id="bfb50-171">IIS üzerinde çalışan akışları 4 MB'den daha büyük almak, veri hizmeti etkinleştirmek için de ayarlamalısınız `maxRequestLength` özniteliği [httpRuntime öğesi (ASP.NET Ayarlar Şeması)](http://msdn.microsoft.com/library/e9b81350-8aaf-47cc-9843-5f7d0c59f369) içinde `<system.web />` yapılandırma bölümü olarak Aşağıdaki örnekte gösterilen:</span><span class="sxs-lookup"><span data-stu-id="bfb50-171">To enable your data service to receive streams larger than 4MB when running on IIS, you must also set the `maxRequestLength` attribute of the [httpRuntime Element (ASP.NET Settings Schema)](http://msdn.microsoft.com/library/e9b81350-8aaf-47cc-9843-5f7d0c59f369) in the `<system.web />` configuration section, as shown in the following example:</span></span>  
  
  
  
## <a name="using-data-streams-in-a-client-application"></a><span data-ttu-id="bfb50-172">Bir istemci uygulamasında veri akışlarını kullanma</span><span class="sxs-lookup"><span data-stu-id="bfb50-172">Using Data Streams in a Client Application</span></span>  
 <span data-ttu-id="bfb50-173">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] İstemci Kitaplığı hem almak ve ikili akışlar istemcide olarak sunulan bu kaynakları güncelleştirmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="bfb50-173">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to both retrieve and update these exposed resources as binary streams on the client.</span></span> <span data-ttu-id="bfb50-174">Daha fazla bilgi için bkz: [ikili verileri ile çalışma](../../../../docs/framework/data/wcf/working-with-binary-data-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bfb50-174">For more information, see [Working with Binary Data](../../../../docs/framework/data/wcf/working-with-binary-data-wcf-data-services.md).</span></span>  
  
## <a name="considerations-for-working-with-a-streaming-provider"></a><span data-ttu-id="bfb50-175">Bir akış sağlayıcı ile çalışma konuları</span><span class="sxs-lookup"><span data-stu-id="bfb50-175">Considerations for Working with a Streaming Provider</span></span>  
 <span data-ttu-id="bfb50-176">Akış sağlayıcısı ne zaman uygulamak ve veri hizmetinden veri medya kaynaklarına eriştiğinizde göz önünde bulundurmanız gerekenler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="bfb50-176">The following are things to consider when you implement a streaming provider and when you access media resources from a data service.</span></span>  
  
-   <span data-ttu-id="bfb50-177">MERGE isteklerini medya kaynaklar için desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="bfb50-177">MERGE requests are not supported for media resources.</span></span> <span data-ttu-id="bfb50-178">Var olan bir varlığın medya kaynağı değiştirmek için bir PUT İsteği kullanın.</span><span class="sxs-lookup"><span data-stu-id="bfb50-178">Use a PUT request to change the media resource of an existing entity.</span></span>  
  
-   <span data-ttu-id="bfb50-179">Bir POST isteği bağlantı girişi yeni bir ortam oluşturmak için kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="bfb50-179">A POST request cannot be used to create a new media link entry.</span></span> <span data-ttu-id="bfb50-180">Bunun yerine, yeni bir medya kaynağı oluşturmak için bir POST isteği yayımlamanız gerekir ve veri hizmeti yeni bir ortam bağlantı girdisini varsayılan değerlerle oluşturur.</span><span class="sxs-lookup"><span data-stu-id="bfb50-180">Instead, you must issue a POST request to create a new media resource, and the data service creates a new media link entry with default values.</span></span> <span data-ttu-id="bfb50-181">Bu yeni bir varlık, bir sonraki birleştirme veya PUT isteği tarafından güncelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-181">This new entity can be updated by a subsequent MERGE or PUT request.</span></span> <span data-ttu-id="bfb50-182">Ayrıca, varlık önbelleğe alma göz önünde bulundurun ve özellik değeri için POST isteğinde başlık üstbilgisi değerini ayarlama gibi disposer, güncelleştirmelerinin olması.</span><span class="sxs-lookup"><span data-stu-id="bfb50-182">You may also consider caching the entity and make updates in the disposer, such as setting the property value to the value of the Slug header in the POST request.</span></span>  
  
-   <span data-ttu-id="bfb50-183">Bir POST isteği alındığında, veri çağrıları hizmeti <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> önceki medya kaynağı oluşturmak için çağırdığı <xref:System.Data.Services.IUpdatable.SaveChanges%2A> bağlantı girdisini medyayı oluşturmak için.</span><span class="sxs-lookup"><span data-stu-id="bfb50-183">When a POST request is received, the data service calls <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> to create the media resource before it calls <xref:System.Data.Services.IUpdatable.SaveChanges%2A> to create the media link entry.</span></span>  
  
-   <span data-ttu-id="bfb50-184">Uygulaması <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> değil döndürmelidir bir <xref:System.IO.MemoryStream> nesnesi.</span><span class="sxs-lookup"><span data-stu-id="bfb50-184">An implementation of <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> should not return a <xref:System.IO.MemoryStream> object.</span></span> <span data-ttu-id="bfb50-185">Bu tür bir akış kullandığınızda, hizmeti çok büyük veri akışlarını aldığında bellek kaynağı sorunları ortaya çıkar.</span><span class="sxs-lookup"><span data-stu-id="bfb50-185">When you use this kind of stream, memory resource issues will occur when the service receives very large data streams.</span></span>  
  
-   <span data-ttu-id="bfb50-186">Ortam kaynakları bir veritabanında saklarken göz önünde bulundurmanız gerekenler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="bfb50-186">The following are things to consider when storing media resources in a database:</span></span>  
  
    -   <span data-ttu-id="bfb50-187">Bir medya kaynağı olan bir ikili özellik veri modelinde eklenmemelidir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-187">A binary property that is a media resource should not be included in the data model.</span></span> <span data-ttu-id="bfb50-188">Bir veri modeli kullanıma sunulan tüm özellikler akış yanıt girdisinde döndürülür.</span><span class="sxs-lookup"><span data-stu-id="bfb50-188">All properties exposed in a data model are returned in the entry in a response feed.</span></span>  
  
    -   <span data-ttu-id="bfb50-189">Büyük bir ikili akış performansınızı artırmak için ikili veri veritabanında depolamak için bir özel akış sınıf oluşturmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="bfb50-189">To improve performance with a large binary stream, we recommend that you create a custom stream class to store binary data in the database.</span></span> <span data-ttu-id="bfb50-190">Bu sınıf tarafından döndürülen, <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> uygulama ve ikili veri öbekleri veritabanına gönderir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-190">This class is returned by your <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> implementation and sends the binary data to the database in chunks.</span></span> <span data-ttu-id="bfb50-191">SQL Server veritabanı için ikili veriler 1 MB'den büyük olduğunda bir FILESTREAM veri akışı için veritabanına kullanmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="bfb50-191">For a SQL Server database, we recommend that you use a FILESTREAM to stream data into the database when the binary data is larger than 1MB.</span></span>  
  
    -   <span data-ttu-id="bfb50-192">Veritabanınız, veri hizmeti tarafından alınabilmesi için ikili büyük akış depolamak için tasarlanmıştır emin olun.</span><span class="sxs-lookup"><span data-stu-id="bfb50-192">Ensure that your database is designed to store the binary large streams that are to be received by your data service.</span></span>  
  
    -   <span data-ttu-id="bfb50-193">Bir istemci tek bir istekte bir medya kaynağı ile media bağlantı girdisini eklemek için bir POST isteği gönderdiğinde <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> veri hizmeti veritabanına yeni bir varlık ekler önce akış elde etmek için çağrılır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-193">When a client sends a POST request to insert a media link entry with a media resource in a single request, <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> is called to obtain the stream before the data service inserts the new entity into the database.</span></span> <span data-ttu-id="bfb50-194">Bir akış sağlayıcı uygulaması bu verileri hizmet davranışı kaldırabilir olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="bfb50-194">A streaming provider implementation must be able to handle this data service behavior.</span></span> <span data-ttu-id="bfb50-195">İkili veriler veya varlık sonra kadar dosyasındaki veri akışı veritabanına eklenen deposunda depolamak için ayrı veri tablosu kullanmayı düşünün.</span><span class="sxs-lookup"><span data-stu-id="bfb50-195">Consider using a separate data table to store the binary data or store the data stream in a file until after the entity has been inserted into the database.</span></span>  
  
-   <span data-ttu-id="bfb50-196">Ne zaman uygulamanız <xref:System.Data.Services.Providers.IDataServiceStreamProvider.DeleteStream%2A>, <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStream%2A>, veya <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> yöntemlerini kullanmanız gerekir eTag ve sağlanan Content-Type değerleri yöntem parametreleri.</span><span class="sxs-lookup"><span data-stu-id="bfb50-196">When you implement the <xref:System.Data.Services.Providers.IDataServiceStreamProvider.DeleteStream%2A>, <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetReadStream%2A>, or <xref:System.Data.Services.Providers.IDataServiceStreamProvider.GetWriteStream%2A> methods, you must use the eTag and Content-Type values that are supplied as method parameters.</span></span> <span data-ttu-id="bfb50-197">ETag veya Content-Type üst bilgilerinde ayarlı değil, <xref:System.Data.Services.Providers.IDataServiceStreamProvider> sağlayıcısı uygulaması.</span><span class="sxs-lookup"><span data-stu-id="bfb50-197">Do not set eTag or Content-Type headers in your <xref:System.Data.Services.Providers.IDataServiceStreamProvider> provider implementation.</span></span>  
  
-   <span data-ttu-id="bfb50-198">Varsayılan olarak, istemci bir öbekli HTTP Transfer-Encoding kullanarak büyük ikili akışlar gönderir.</span><span class="sxs-lookup"><span data-stu-id="bfb50-198">By default, the client sends large binary streams by using a chunked HTTP Transfer-Encoding.</span></span> <span data-ttu-id="bfb50-199">Çünkü [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] büyük ikili akışlar kabul etmelisiniz akış bir veri hizmeti barındırmak için bu Web sunucusu kullanamazsınız, geliştirme sunucusu, bu tür kodlama desteklemiyor.</span><span class="sxs-lookup"><span data-stu-id="bfb50-199">Because the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Development Server does not support this kind of encoding, you cannot use this Web server to host a streaming data service that must accept large binary streams.</span></span> <span data-ttu-id="bfb50-200">Daha fazla bilgi için [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] geliştirme sunucusu bkz [ASP.NET Web projeleri için Visual Studio'da Web sunucuları](http://msdn.microsoft.com/library/31d4f588-df59-4b7e-b9ea-e1f2dd204328).</span><span class="sxs-lookup"><span data-stu-id="bfb50-200">For more information on [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Development Server, see [Web Servers in Visual Studio for ASP.NET Web Projects](http://msdn.microsoft.com/library/31d4f588-df59-4b7e-b9ea-e1f2dd204328).</span></span>  
  
<a name="versioning"></a>   
## <a name="versioning-requirements"></a><span data-ttu-id="bfb50-201">Sürüm oluşturma gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="bfb50-201">Versioning Requirements</span></span>  
 <span data-ttu-id="bfb50-202">Aşağıdaki Akış sağlayıcısı sahip [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] iletişim kuralı sürüm gereksinimleri:</span><span class="sxs-lookup"><span data-stu-id="bfb50-202">The streaming provider has the following [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol versioning requirements:</span></span>  
  
-   <span data-ttu-id="bfb50-203">Akış sağlayıcısı, veri hizmeti sürüm 2.0 desteği gerektirir [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protokolü ve sonraki sürümler.</span><span class="sxs-lookup"><span data-stu-id="bfb50-203">The streaming provider requires that the data service support version 2.0 of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol and later versions.</span></span>  
  
 <span data-ttu-id="bfb50-204">Daha fazla bilgi için bkz: [veri hizmeti sürüm](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bfb50-204">For more information, see [Data Service Versioning](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bfb50-205">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="bfb50-205">See Also</span></span>  
 [<span data-ttu-id="bfb50-206">Veri Hizmetleri Sağlayıcıları</span><span class="sxs-lookup"><span data-stu-id="bfb50-206">Data Services Providers</span></span>](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md)  
 [<span data-ttu-id="bfb50-207">Özel Veri Hizmeti Sağlayıcıları</span><span class="sxs-lookup"><span data-stu-id="bfb50-207">Custom Data Service Providers</span></span>](../../../../docs/framework/data/wcf/custom-data-service-providers-wcf-data-services.md)  
 [<span data-ttu-id="bfb50-208">İkili Verilerle Çalışma</span><span class="sxs-lookup"><span data-stu-id="bfb50-208">Working with Binary Data</span></span>](../../../../docs/framework/data/wcf/working-with-binary-data-wcf-data-services.md)
