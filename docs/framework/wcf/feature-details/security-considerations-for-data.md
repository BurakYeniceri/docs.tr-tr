---
title: "Veriler için Güvenlik Konuları"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
ms.assetid: a7eb98da-4a93-4692-8b59-9d670c79ffb2
caps.latest.revision: "23"
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.workload: dotnet
ms.openlocfilehash: bb7a40bc38a3fdf3f7be2b31e30e768e26be2d15
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/22/2017
---
# <a name="security-considerations-for-data"></a><span data-ttu-id="c0f5e-102">Veriler için Güvenlik Konuları</span><span class="sxs-lookup"><span data-stu-id="c0f5e-102">Security Considerations for Data</span></span>
<span data-ttu-id="c0f5e-103">Verilerle ilgilenirken [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], tehdit kategori sayısı dikkate almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-103">When dealing with data in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], you must consider a number of threat categories.</span></span> <span data-ttu-id="c0f5e-104">Aşağıdaki tabloda veri işleme ile ilgili en önemli tehdit sınıflar listelenir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-104">The following table lists the most important threat classes that relate to data processing.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="c0f5e-105">Bu tehditleri azaltmak için araçlar sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-105"> provides tools to mitigate these threats.</span></span>  
  
 <span data-ttu-id="c0f5e-106">Hizmet reddi</span><span class="sxs-lookup"><span data-stu-id="c0f5e-106">Denial of service</span></span>  
 <span data-ttu-id="c0f5e-107">Güvenilmeyen veri alırken, verileri uzun hesaplamalar neden olarak orantısız miktarda bellek, iş parçacıkları, kullanılabilir bağlantıları veya işlemci döngülerinin gibi çeşitli kaynak erişmek alma tarafı neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-107">When receiving untrusted data, the data may cause the receiving side to access a disproportionate amount of various resources, such as memory, threads, available connections, or processor cycles by causing lengthy computations.</span></span> <span data-ttu-id="c0f5e-108">Bir sunucuya karşı bir hizmet reddi saldırısı kilitlenmesine ve diğer, yasal istemcilerinden gelen iletileri işleyemiyor neden.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-108">A denial-of-service attack against a server may cause it to crash and be unable to process messages from other, legitimate clients.</span></span>  
  
 <span data-ttu-id="c0f5e-109">Kötü amaçlı kod yürütme</span><span class="sxs-lookup"><span data-stu-id="c0f5e-109">Malicious code execution</span></span>  
 <span data-ttu-id="c0f5e-110">Gelen güvenilmeyen veri onu istemediğiniz kodu çalıştırmak alma tarafı neden olur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-110">Incoming untrusted data causes the receiving side to run code it did not intend to.</span></span>  
  
 <span data-ttu-id="c0f5e-111">Bilgilerin açığa çıkmasına</span><span class="sxs-lookup"><span data-stu-id="c0f5e-111">Information disclosure</span></span>  
 <span data-ttu-id="c0f5e-112">Uzak saldırgan için oranla daha fazla bilgi ifşa şekilde kendi isteklerini yanıtlamak için alıcı taraf zorlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-112">The remote attacker forces the receiving party to respond to its requests in such a way as to disclose more information than it intends to.</span></span>  
  
## <a name="user-provided-code-and-code-access-security"></a><span data-ttu-id="c0f5e-113">Kullanıcı tarafından sağlanan kod ve kod erişimi güvenliği</span><span class="sxs-lookup"><span data-stu-id="c0f5e-113">User-Provided Code and Code Access Security</span></span>  
 <span data-ttu-id="c0f5e-114">İçinde basamak sayısını [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] altyapı kullanıcı tarafından sağlanan kodu çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-114">A number of places in the [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] infrastructure run code that is provided by the user.</span></span> <span data-ttu-id="c0f5e-115">Örneğin, <xref:System.Runtime.Serialization.DataContractSerializer> serileştirme motoruna kullanıcı tarafından sağlanan özellik çağrısı `set` erişimciler ve `get` erişimciler.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-115">For example, the <xref:System.Runtime.Serialization.DataContractSerializer> serialization engine may call user-provided property `set` accessors and `get` accessors.</span></span> <span data-ttu-id="c0f5e-116">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Kanal altyapısının çağırıp kullanıcı tarafından sağlanan türetilmiş sınıfları <xref:System.ServiceModel.Channels.Message> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-116">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] channel infrastructure may also call into user-provided derived classes of the <xref:System.ServiceModel.Channels.Message> class.</span></span>  
  
 <span data-ttu-id="c0f5e-117">Hiçbir güvenlik açıkları var olduğundan emin olmak için kod yazar sorumluluğundadır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-117">It is the responsibility of the code author to ensure that no security vulnerabilities exist.</span></span> <span data-ttu-id="c0f5e-118">Örneğin, oluşturursanız, bir veri sözleşmesi türü Tamsayı türünde ve içinde veri üyesi özelliğiyle `set` erişimci uygulama tahsis özellik değerine dayalı bir dizi, bir hizmet reddi saldırısı olasılığı bir kötü amaçlı olmadığını kullanıma ileti, bu veri üyesi için son derece büyük bir değer içeriyor.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-118">For example, if you create a data contract type with a data member property of type integer, and in the `set` accessor implementation allocate an array based on the property value, you expose the possibility of a denial-of-service attack if a malicious message contains an extremely large value for this data member.</span></span> <span data-ttu-id="c0f5e-119">Genel olarak, tüm ayırmaları gelen veri göre veya uzun (özellikle uzun işleme küçük gelen veri miktarına göre kaynaklanabilir varsa) kullanıcı tarafından sağlanan kodda işleme kaçının.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-119">In general, avoid any allocations based on incoming data or lengthy processing in user-provided code (especially if lengthy processing can be caused by a small amount of incoming data).</span></span> <span data-ttu-id="c0f5e-120">Kullanıcı tarafından sağlanan kod güvenlik analizi gerçekleştirirken, tüm hata durumları (burada özel durumlar diğer bir deyişle, tüm kod dalları) de göz önüne almanız gereken emin olun.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-120">When performing security analysis of user-provided code, make sure to also consider all failure cases (that is, all code branches where exceptions are thrown).</span></span>  
  
 <span data-ttu-id="c0f5e-121">Son kullanıcı tarafından sağlanan kod, hizmet uygulamanızı her bir işlemin içinde kod örneğidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-121">The ultimate example of user-provided code is the code inside your service implementation for each operation.</span></span> <span data-ttu-id="c0f5e-122">Hizmet uygulamanızın güvenlik bilgilerinizi sorumluluğundadır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-122">The security of your service implementation is your responsibility.</span></span> <span data-ttu-id="c0f5e-123">Yanlışlıkla güvenlik açıkları hizmet reddine neden güvensiz işlemi uygulamaları oluşturmak kolaydır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-123">It is easy to inadvertently create insecure operation implementations that may result in denial-of-service vulnerabilities.</span></span> <span data-ttu-id="c0f5e-124">Örneğin, o dizeyi bir dize alır ve müşterilerin listesini veritabanından adını döndürür. bir işlem başlatır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-124">For example, an operation that takes a string and returns the list of customers from a database whose name starts with that string.</span></span> <span data-ttu-id="c0f5e-125">Büyük bir veritabanı ile çalışıyorsanız ve geçirilen dize yalnızca tek bir harf ise, kodunuzu bir ileti tüm hizmetinin başarısız olmasına neden olan tüm kullanılabilir belleği daha büyük oluşturma girişiminde bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-125">If you are working with a large database and the string being passed is just a single letter, your code may attempt to create a message larger than all available memory, causing the entire service to fail.</span></span> <span data-ttu-id="c0f5e-126">(Bir <xref:System.OutOfMemoryException> içinde kurtarılamaz [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] ve her zaman, uygulamanızın sonlandırılmasıyla sonuçlanır.)</span><span class="sxs-lookup"><span data-stu-id="c0f5e-126">(An <xref:System.OutOfMemoryException> is not recoverable in the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] and always results in the termination of your application.)</span></span>  
  
 <span data-ttu-id="c0f5e-127">Kötü amaçlı kod çeşitli genişletilebilirlik noktaları prize takılı olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-127">You should ensure that no malicious code is plugged in to the various extensibility points.</span></span> <span data-ttu-id="c0f5e-128">Kısmen güvenilen derlemelerden türleriyle ilgilenme veya kısmen güvenilen kod tarafından kullanılabilir bileşenler oluşturma kısmi güven altında çalışırken özellikle ilgili budur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-128">This is especially relevant when running under partial trust, dealing with types from partially-trusted assemblies, or creating components usable by partially-trusted code.</span></span> <span data-ttu-id="c0f5e-129">Daha fazla bilgi için "Kısmi güven tehditleri" sonraki bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-129">For more information, see "Partial Trust Threats" in a later section.</span></span>  
  
 <span data-ttu-id="c0f5e-130">Kısmi güvende çalıştırırken veri sözleşmesi seri hale getirme altyapısı ve veri modelinin sözleşme programlama - Örneğin, özel veri üyeleri için sınırlı bir alt destekler veya kullanarak türleri unutmayın <xref:System.SerializableAttribute> öznitelik desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-130">Note that when running in partial trust, the data contract serialization infrastructure supports only a limited subset of the data contract programming model - for example, private data members or types using the <xref:System.SerializableAttribute> attribute are not supported.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="c0f5e-131">[Kısmi güven](../../../../docs/framework/wcf/feature-details/partial-trust.md).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-131"> [Partial Trust](../../../../docs/framework/wcf/feature-details/partial-trust.md).</span></span>  
  
## <a name="avoiding-unintentional-information-disclosure"></a><span data-ttu-id="c0f5e-132">Yanlışlıkla bilgilerin açığa çıkmasına önleme</span><span class="sxs-lookup"><span data-stu-id="c0f5e-132">Avoiding Unintentional Information Disclosure</span></span>  
 <span data-ttu-id="c0f5e-133">Seri hale getirilebilir türler göz önünde bulundurularak ile tasarlarken, bilgi açıklama olası bir konudur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-133">When designing serializable types with security in mind, information disclosure is a possible concern.</span></span>  
  
 <span data-ttu-id="c0f5e-134">Aşağıdaki noktaları göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-134">Consider the following points:</span></span>  
  
-   <span data-ttu-id="c0f5e-135"><xref:System.Runtime.Serialization.DataContractSerializer> Programlama modeli, tür veya derleme seri hale getirme sırasında dışında özel ve iç veri riskini olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-135">The <xref:System.Runtime.Serialization.DataContractSerializer> programming model allows the exposure of private and internal data outside of the type or assembly during serialization.</span></span> <span data-ttu-id="c0f5e-136">Ayrıca, bir türü şeklini şema dışa aktarma sırasında gösterilebilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-136">Additionally, the shape of a type can be exposed during schema export.</span></span> <span data-ttu-id="c0f5e-137">Tür serileştirme projeksiyon anladığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-137">Be sure to understand your type's serialization projection.</span></span> <span data-ttu-id="c0f5e-138">Kullanıma sunulan herhangi bir şey istemiyorsanız, seri hale getirme devre dışı bırakın (örneğin, uygulayarak değil <xref:System.Runtime.Serialization.DataMemberAttribute> özniteliği bir veri sözleşmesi söz konusu olduğunda).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-138">If you do not want anything exposed, disable serializing it (for example, by not applying the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute in the case of a data contract).</span></span>  
  
-   <span data-ttu-id="c0f5e-139">Aynı türde kullanımda seri hale getirici bağlı olarak birden fazla seri hale getirme tahminleri olabilir unutmayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-139">Be aware that the same type may have multiple serialization projections, depending on the serializer in use.</span></span> <span data-ttu-id="c0f5e-140">Aynı türde bir kullanıldığında veri kümesi getirebilir <xref:System.Runtime.Serialization.DataContractSerializer> ve başka bir kullanıldığında veri kümesini <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-140">The same type may expose one set of data when used with the <xref:System.Runtime.Serialization.DataContractSerializer> and another set of data when used with the <xref:System.Xml.Serialization.XmlSerializer>.</span></span> <span data-ttu-id="c0f5e-141">Yanlışlıkla yanlış seri hale getirici kullanarak bilgi açığa çıkmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-141">Accidentally using the wrong serializer may lead to information disclosure.</span></span>  
  
-   <span data-ttu-id="c0f5e-142">Kullanarak <xref:System.Xml.Serialization.XmlSerializer> (RPC) eski uzak yordam çağrısı / kodlanmış modu, alma tarafı için Gönderen tarafında nesne grafiğinin şekli kasıtsız olarak kullanıma.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-142">Using the <xref:System.Xml.Serialization.XmlSerializer> in legacy remote procedure call (RPC)/encoded mode may unintentionally expose the shape of the object graph on the sending side to the receiving side.</span></span>  
  
## <a name="preventing-denial-of-service-attacks"></a><span data-ttu-id="c0f5e-143">Hizmet reddi saldırılarını önleme</span><span class="sxs-lookup"><span data-stu-id="c0f5e-143">Preventing Denial-of-Service Attacks</span></span>  
  
### <a name="quotas"></a><span data-ttu-id="c0f5e-144">Kotalar</span><span class="sxs-lookup"><span data-stu-id="c0f5e-144">Quotas</span></span>  
 <span data-ttu-id="c0f5e-145">Olası bir hizmet reddi saldırısı önemli miktarda bellek ayırmak alma tarafı neden olur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-145">Causing the receiving side to allocate a significant amount of memory is a potential denial-of-service attack.</span></span> <span data-ttu-id="c0f5e-146">Bu bölümde büyük iletilerden doğan bellek tüketimi sorunları yoğunlaşır olsa da, diğer saldırılara ortaya çıkabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-146">While this section concentrates on memory consumption issues arising from large messages, other attacks may occur.</span></span> <span data-ttu-id="c0f5e-147">Örneğin, iletileri işleme süresi orantısız miktarda kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-147">For example, messages may use a disproportionate amount of processing time.</span></span>  
  
 <span data-ttu-id="c0f5e-148">Hizmet reddi saldırılarını genellikle kotaları kullanan azalır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-148">Denial-of-service attacks are usually mitigated using quotas.</span></span> <span data-ttu-id="c0f5e-149">Bir kota aşıldığında bir <xref:System.ServiceModel.QuotaExceededException> özel normal durum.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-149">When a quota is exceeded, a <xref:System.ServiceModel.QuotaExceededException> exception is normally thrown.</span></span> <span data-ttu-id="c0f5e-150">Kota kötü amaçlı bir ileti erişilebilmesi tüm kullanılabilir bellek sonuçta neden olabilir bir <xref:System.OutOfMemoryException> özel durum ya da erişilebilmesi için tüm kullanılabilir yığınları, sonuçta ortaya çıkan bir <xref:System.StackOverflowException>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-150">Without the quota, a malicious message may cause all available memory to be accessed, resulting in an <xref:System.OutOfMemoryException> exception, or all available stacks to be accessed, resulting in a <xref:System.StackOverflowException>.</span></span>  
  
 <span data-ttu-id="c0f5e-151">Kurtarılabilir kotası aşıldı senaryodur; çalışan bir hizmette, aldıysanız, işlenmekte olan iletisi göz ardı edilir ve hizmet çalıştıran tutar ve başka ileti işler.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-151">The quota exceeded scenario is recoverable; if encountered in a running service, the message currently being processed is discarded and the service keeps running and processes further messages.</span></span> <span data-ttu-id="c0f5e-152">Bellek yetersiz ve yığın taşması senaryoları, ancak herhangi bir yerinde kurtarılabilir olmayan [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]; bu tür özel durumlar karşılaşırsa hizmeti sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-152">The out-of-memory and stack overflow scenarios, however, are not recoverable anywhere in the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]; the service terminates if it encounters such exceptions.</span></span>  
  
 <span data-ttu-id="c0f5e-153">Kotalarda [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] tüm ön ayırma içermeyen.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-153">Quotas in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] do not involve any pre-allocation.</span></span> <span data-ttu-id="c0f5e-154">Örneğin, varsa <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A> kota (çeşitli sınıflarında bulunur) 128 KB olarak ayarlanır, 128 KB otomatik olarak her ileti için ayrılan gelmez.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-154">For example, if the <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A> quota (found on various classes) is set to 128 KB, it does not mean that 128 KB is automatically allocated for each message.</span></span> <span data-ttu-id="c0f5e-155">Ayrılmış gerçek gerçek gelen ileti boyutuna bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-155">The actual amount allocated depends on the actual incoming message size.</span></span>  
  
 <span data-ttu-id="c0f5e-156">Birçok kotalarını aktarım katmanında kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-156">Many quotas are available at the transport layer.</span></span> <span data-ttu-id="c0f5e-157">Kota kullanımı (HTTP, TCP vb.) belirli aktarım kanalda tarafından uygulanmıyor bunlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-157">These are quotas enforced by the specific transport channel in use (HTTP, TCP, and so on).</span></span> <span data-ttu-id="c0f5e-158">Bu konuda bu kotalar bazıları açıklanmaktadır, ancak bu kotalar ayrıntılı olarak açıklanmıştır [taşıma kotaları](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-158">While this topic discusses some of these quotas, these quotas are described in detail in [Transport Quotas](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span></span>  
  
### <a name="hashtable-vulnerability"></a><span data-ttu-id="c0f5e-159">Hashtable güvenlik açığı</span><span class="sxs-lookup"><span data-stu-id="c0f5e-159">Hashtable Vulnerability</span></span>  
 <span data-ttu-id="c0f5e-160">Veri sözleşmeleri hashtable'da veya koleksiyonları içeren bir güvenlik açığı bulunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-160">A vulnerability exists when data contracts contain hashtables or collections.</span></span> <span data-ttu-id="c0f5e-161">Çok sayıda değerleri bir karma tablosunda eklediyseniz, bu değerleri çok sayıda aynı karma değeri üretmek sorun oluşur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-161">The problem occurs if a large number of values are inserted into a hashtable where a large number of those values generate the same hash value.</span></span> <span data-ttu-id="c0f5e-162">Bu bir DOS saldırısı kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-162">This can be used as a DOS attack.</span></span>  <span data-ttu-id="c0f5e-163">Bu güvenlik açığından MaxRecievedMessageSize bağlama kota ayarlayarak azaltılabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-163">This vulnerability can be mitigated by setting the MaxRecievedMessageSize binding quota.</span></span> <span data-ttu-id="c0f5e-164">Bu tür saldırıları önlemek için bu kota ayarlarken dikkatli olunması gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-164">Care must be taken while setting this quota in order to prevent such attacks.</span></span> <span data-ttu-id="c0f5e-165">Bu kota WCF ileti boyutu üst sınırını koyar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-165">This quota puts an upper limit on the size of WCF message.</span></span> <span data-ttu-id="c0f5e-166">Ayrıca, hashtable'da veya koleksiyonlar veri sözleşmelerinizi kullanmaktan kaçının.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-166">Additionally, avoid using hashtables or collections in your data contracts.</span></span>  
  
## <a name="limiting-memory-consumption-without-streaming"></a><span data-ttu-id="c0f5e-167">Akış olmadan sınırlama bellek tüketimi</span><span class="sxs-lookup"><span data-stu-id="c0f5e-167">Limiting Memory Consumption Without Streaming</span></span>  
 <span data-ttu-id="c0f5e-168">Güvenlik modeli büyük iletileri çevresinde akış kullanımda olmasına bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-168">The security model around large messages depends on whether streaming is in use.</span></span> <span data-ttu-id="c0f5e-169">Temel, akışı olmayan durumda iletileri belleğe arabelleğe alınmamış.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-169">In the basic, non-streamed case, messages are buffered into memory.</span></span> <span data-ttu-id="c0f5e-170">Bu durumda, kullanarak <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A> kota <xref:System.ServiceModel.Channels.TransportBindingElement> veya erişmek için maksimum ileti boyutu sınırlayarak büyük iletileri karşı korumak için sistem tarafından sağlanan bağlamalar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-170">In this case, use the <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A> quota on the <xref:System.ServiceModel.Channels.TransportBindingElement> or on the system-provided bindings to protect against large messages by limiting the maximum message size to access.</span></span> <span data-ttu-id="c0f5e-171">Bir hizmet birden çok ileti aynı anda işliyor olabilir, bu durumda tüm bellekte olduklarını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-171">Note that a service may be processing multiple messages at the same time, in which case they are all in memory.</span></span> <span data-ttu-id="c0f5e-172">Bu tehdidi azaltmak için azaltma özelliğini kullanın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-172">Use the throttling feature to mitigate this threat.</span></span>  
  
 <span data-ttu-id="c0f5e-173">Ayrıca `MaxReceivedMessageSize` bir üst sınır ileti başına bellek tüketimi üzerinde yerleştirmez, ancak kendisine içinde sabit bir faktör sınırlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-173">Also note that `MaxReceivedMessageSize` does not place an upper bound on per-message memory consumption, but limits it to within a constant factor.</span></span> <span data-ttu-id="c0f5e-174">Örneğin, varsa `MaxReceivedMessageSize` 1 MB'tır ve 1 MB ileti aldı ve ardından seri durumdan çıkarılmış, ek bellek toplam bellek tüketimi iyi üzerinde 1 MB kaynaklanan seri durumdan çıkarılmış Nesne grafiği içeren için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-174">For example, if the `MaxReceivedMessageSize` is 1 MB and a 1-MB message is received and then deserialized, additional memory is required to contain the deserialized object graph, resulting in total memory consumption well over 1 MB.</span></span> <span data-ttu-id="c0f5e-175">Bu nedenle, gelen kadar veri olmadan önemli bellek kullanımına neden olabilir seri hale getirilebilir türler oluşturmamaya özen gösterin.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-175">For this reason, avoid creating serializable types that could result in significant memory consumption without much incoming data.</span></span> <span data-ttu-id="c0f5e-176">Örneğin, 50 isteğe bağlı verileri üye ve bir ek 100 özel alanları ile "MyContract" ile XML yapım örneği bir veri sözleşmesi "\<MyContract / >".</span><span class="sxs-lookup"><span data-stu-id="c0f5e-176">For example, a data contract "MyContract" with 50 optional data member fields and an additional 100 private fields could be instantiated with the XML construction "\<MyContract/>".</span></span> <span data-ttu-id="c0f5e-177">Bu XML 150 alanlar için erişilen bellek sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-177">This XML results in memory being accessed for 150 fields.</span></span> <span data-ttu-id="c0f5e-178">Veri üyeleri varsayılan olarak isteğe bağlı olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-178">Note that data members are optional by default.</span></span> <span data-ttu-id="c0f5e-179">Bu tür bir türü bir dizi parçası olduğunda sorun araya geldiğinde.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-179">The problem is compounded when such a type is part of an array.</span></span>  
  
 <span data-ttu-id="c0f5e-180">`MaxReceivedMessageSize`tek başına tüm hizmet reddi saldırılarını önlemek yeterli değil.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-180">`MaxReceivedMessageSize` alone is not enough to prevent all denial-of-service attacks.</span></span> <span data-ttu-id="c0f5e-181">Örneğin, seri durumdan çıkarıcının (henüz başka bir vb. içeren başka bir nesne içeren bir nesne) bir iç içe nesne grafiğinin seri durumdan çıkarılacak gelen ileti tarafından zorlanabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-181">For example, the deserializer may be forced to deserialize a deeply-nested object graph (an object that contains another object that contains yet another one, and so on) by an incoming message.</span></span> <span data-ttu-id="c0f5e-182">Hem <xref:System.Runtime.Serialization.DataContractSerializer> ve <xref:System.Xml.Serialization.XmlSerializer> iç içe geçmiş bir şekilde böyle grafikleri seri durumdan yöntemlerini çağırın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-182">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> call methods in a nested way to deserialize such graphs.</span></span> <span data-ttu-id="c0f5e-183">Yöntem çağrıları derin iç içe geçmiş bir kurtarılamaz neden <xref:System.StackOverflowException>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-183">Deep nesting of method calls may result in an unrecoverable <xref:System.StackOverflowException>.</span></span> <span data-ttu-id="c0f5e-184">Bu tehdit ayarlayarak azaltıldığından <xref:System.ServiceModel.Configuration.XmlDictionaryReaderQuotasElement.MaxDepth%2A> konunun devamındaki "Güvenle XML kullanarak" bölümünde açıklandığı gibi XML iç içe geçme düzeyi sınırlamak için kota.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-184">This threat is mitigated by setting the <xref:System.ServiceModel.Configuration.XmlDictionaryReaderQuotasElement.MaxDepth%2A> quota to limit the level of XML nesting, as discussed in the "Using XML Safely" section later in the topic.</span></span>  
  
 <span data-ttu-id="c0f5e-185">Ek kotalar ayarını `MaxReceivedMessageSize` ikili XML kodlama kullanılarak, özellikle önemlidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-185">Setting additional quotas to `MaxReceivedMessageSize` is especially important when using binary XML encoding.</span></span> <span data-ttu-id="c0f5e-186">İkili kodlama kullanılarak eşdeğerdir sıkıştırma biraz: gelen ileti baytlarının miktarını küçük bir grup çok miktarda veri temsil edebilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-186">Using binary encoding is somewhat equivalent to compression: a small group of bytes in the incoming message may represent a lot of data.</span></span> <span data-ttu-id="c0f5e-187">Bu nedenle, bir ileti içine sığdırma bile `MaxReceivedMessageSize` sınırı sürebilir çok daha fazla bellek tam olarak genişletilmiş biçiminde.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-187">Thus, even a message fitting into the `MaxReceivedMessageSize` limit may take up much more memory in fully expanded form.</span></span> <span data-ttu-id="c0f5e-188">Bu tür XML özgü tehditleri azaltmak için tüm XML okuyucusu kotalar bu konunun devamındaki "Güvenle XML kullanarak" bölümünde açıklandığı gibi doğru şekilde ayarlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-188">To mitigate such XML-specific threats, all of the XML reader quotas must be set correctly, as discussed in the "Using XML Safely" section later in this topic.</span></span>  
  
## <a name="limiting-memory-consumption-with-streaming"></a><span data-ttu-id="c0f5e-189">Akış ile sınırlama bellek tüketimi</span><span class="sxs-lookup"><span data-stu-id="c0f5e-189">Limiting Memory Consumption with Streaming</span></span>  
 <span data-ttu-id="c0f5e-190">Akış, küçük bir kullanabilir `MaxReceivedMessageSize` hizmet reddi saldırılarına karşı korumak için ayarı.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-190">When streaming, you may use a small `MaxReceivedMessageSize` setting to protect against denial-of-service attacks.</span></span> <span data-ttu-id="c0f5e-191">Ancak, daha karmaşık senaryolarda akış ile mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-191">However, more complicated scenarios are possible with streaming.</span></span> <span data-ttu-id="c0f5e-192">Örneğin, bir dosya karşıya yükleme hizmeti, tüm kullanılabilir bellekten daha büyük dosyaları kabul eder.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-192">For example, a file upload service accepts files larger than all available memory.</span></span> <span data-ttu-id="c0f5e-193">Bu durumda, ayarlamak `MaxReceivedMessageSize` son derece büyük bir değere doğrudan diske akışları neredeyse hiç veri bellek ve iletiyi arabelleğe alınıp bekleniyor.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-193">In this case, set the `MaxReceivedMessageSize` to an extremely large value, expecting that almost no data is buffered in memory and the message streams directly to disk.</span></span> <span data-ttu-id="c0f5e-194">Kötü amaçlı bir ileti şekilde zorlayabilirsiniz varsa [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] bu durumda, akış yerine arabellek verilere `MaxReceivedMessageSize` artık tüm kullanılabilir bellek erişme iletiye karşı korur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-194">If a malicious message can somehow force [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] to buffer data instead of streaming it in this case, `MaxReceivedMessageSize` no longer protects against the message accessing all available memory.</span></span>  
  
 <span data-ttu-id="c0f5e-195">Bu tehdidi azaltmak için belirli kota ayarları çeşitli mevcut [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] arabelleğe alma sınırı veri işleme bileşenleri.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-195">To mitigate this threat, specific quota settings exist on various [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] data-processing components that limit buffering.</span></span> <span data-ttu-id="c0f5e-196">Bunlardan en önemli `MaxBufferSize` çeşitli aktarım bağlama öğeleriyle ve standart bağlamaları özelliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-196">The most important of these is the `MaxBufferSize` property on various transport binding elements and standard bindings.</span></span> <span data-ttu-id="c0f5e-197">Akış, bu kota en fazla ileti başına ayrılacak istekli bellek miktarı dikkate alarak ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-197">When streaming, this quota should be set taking into account the maximum amount of memory you are willing to allocate per message.</span></span> <span data-ttu-id="c0f5e-198">İle `MaxReceivedMessageSize`, ayar mutlak bir en yüksek bellek tüketimine ilişkin koymaz ancak yalnızca kendisine içinde sabit bir faktör sınırlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-198">As with `MaxReceivedMessageSize`, the setting does not put an absolute maximum on memory consumption but only limits it to within a constant factor.</span></span> <span data-ttu-id="c0f5e-199">Ayrıca, olarak ile `MaxReceivedMessageSize`, aynı anda işlenmekte olan birden fazla ileti olasılığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-199">Also, as with `MaxReceivedMessageSize`, be aware of the possibility of multiple messages being processed simultaneously.</span></span>  
  
### <a name="maxbuffersize-details"></a><span data-ttu-id="c0f5e-200">MaxBufferSize ayrıntıları</span><span class="sxs-lookup"><span data-stu-id="c0f5e-200">MaxBufferSize Details</span></span>  
 <span data-ttu-id="c0f5e-201">`MaxBufferSize` Özelliği sınırlar herhangi toplu arabelleğe alma [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] yapar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-201">The `MaxBufferSize` property limits any bulk buffering [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does.</span></span> <span data-ttu-id="c0f5e-202">Örneğin, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] her zaman bir ileti iletim en iyi duruma getirme mekanizmasını (MTOM) iletisi doğal okuma sırada olmaması için bulunan tüm MIME bölümler yanı sıra SOAP üstbilgileri ve SOAP hataları arabelleğe alır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-202">For example, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] always buffers SOAP headers and SOAP faults, as well as any MIME parts found to be not in the natural reading order in an Message Transmission Optimization Mechanism (MTOM) message.</span></span> <span data-ttu-id="c0f5e-203">Bu ayar, tüm bu durumlarda arabelleğe alma miktarını sınırlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-203">This setting limits the amount of buffering in all these cases.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="c0f5e-204">Bunu geçirerek gerçekleştirir `MaxBufferSize` arabellek çeşitli bileşenler için değer.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-204"> accomplishes this by passing the `MaxBufferSize` value to the various components that may buffer.</span></span> <span data-ttu-id="c0f5e-205">Örneğin, bazı <xref:System.ServiceModel.Channels.Message.CreateMessage%2A> , overloads <xref:System.ServiceModel.Channels.Message> sınıfı Al bir `maxSizeOfHeaders` parametresi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-205">For example, some <xref:System.ServiceModel.Channels.Message.CreateMessage%2A> overloads of the <xref:System.ServiceModel.Channels.Message> class take a `maxSizeOfHeaders` parameter.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="c0f5e-206">geçirir `MaxBufferSize` SOAP üstbilgi arabelleğe alma miktarını sınırlamak için bu parametre için değer.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-206"> passes the `MaxBufferSize` value to this parameter to limit the amount of SOAP header buffering.</span></span> <span data-ttu-id="c0f5e-207">Kullanırken bu parametreyi ayarlayın önemlidir <xref:System.ServiceModel.Channels.Message> doğrudan sınıfı.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-207">It is important to set this parameter when using the <xref:System.ServiceModel.Channels.Message> class directly.</span></span> <span data-ttu-id="c0f5e-208">Bir bileşenin kullanırken genel olarak, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kota parametreleri alan bu parametreleri güvenlik etkilerini anlamak ve doğru bir şekilde ayarlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-208">In general, when using a component in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] that takes quota parameters, it is important to understand the security implications of these parameters and set them correctly.</span></span>  
  
 <span data-ttu-id="c0f5e-209">MTOM ileti Kodlayıcı de sahip bir `MaxBufferSize` ayarı.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-209">The MTOM message encoder also has a `MaxBufferSize` setting.</span></span> <span data-ttu-id="c0f5e-210">Standart bağlamaları kullanırken, bu aktarım düzeyi için otomatik olarak ayarlanır `MaxBufferSize` değeri.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-210">When using standard bindings, this is set automatically to the transport-level `MaxBufferSize` value.</span></span> <span data-ttu-id="c0f5e-211">Ancak, özel bağlama oluşturmak için MTOM ileti Kodlayıcı bağlama öğesi kullanırken ayarlamak önemli olduğunu `MaxBufferSize` özelliği akış olduğunda güvenli bir değeri için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-211">However, when using the MTOM message encoder binding element to construct a custom binding, it is important to set the `MaxBufferSize` property to a safe value when streaming is used.</span></span>  
  
## <a name="xml-based-streaming-attacks"></a><span data-ttu-id="c0f5e-212">XML tabanlı akış saldırıları</span><span class="sxs-lookup"><span data-stu-id="c0f5e-212">XML-Based Streaming Attacks</span></span>  
 <span data-ttu-id="c0f5e-213">`MaxBufferSize`tek başına emin olmak yeterli değil [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] akış beklendiğinde arabelleğe alma içine zorlanamaz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-213">`MaxBufferSize` alone is not enough to ensure that [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] cannot be forced into buffering when streaming is expected.</span></span> <span data-ttu-id="c0f5e-214">Örneğin, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] XML okuyucular yeni bir öğe okumak başlatırken tüm XML öğenin başlangıç etiketinde her zaman arabellek.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-214">For example, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] XML readers always buffer the entire XML element start tag when starting to read a new element.</span></span> <span data-ttu-id="c0f5e-215">Ad alanları ve öznitelikleri düzgün bir şekilde işlenir böylece bu yapılır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-215">This is done so that namespaces and attributes are properly processed.</span></span> <span data-ttu-id="c0f5e-216">Varsa `MaxReceivedMessageSize` yapılandırılmış (senaryo akış doğrudan disk büyük bir dosya etkinleştirmek için örneğin,) büyük olması için kötü amaçlı bir ileti burada tüm ileti gövdesi büyük bir XML öğenin başlangıç etiketinde yapılandırılmıştır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-216">If `MaxReceivedMessageSize` is configured to be large (for example, to enable a direct-to-disk large file streaming scenario), a malicious message may be constructed where the entire message body is a large XML element start tag.</span></span> <span data-ttu-id="c0f5e-217">Dosyayı okuma girişimi sonuçlanan bir <xref:System.OutOfMemoryException>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-217">An attempt to read it results in an <xref:System.OutOfMemoryException>.</span></span> <span data-ttu-id="c0f5e-218">Bu, tüm XML okuyucusu kotaları, bu konunun devamındaki "Güvenle XML kullanarak" bölümünde açıklanan kullanılarak azaltılabilir birçok olası XML tabanlı hizmet reddi saldırıları biridir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-218">This is one of many possible XML-based denial-of-service attacks that can all be mitigated using XML reader quotas, discussed in the "Using XML Safely" section later in this topic.</span></span> <span data-ttu-id="c0f5e-219">Akış, tüm bu kotalar ayarlamak özellikle önemlidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-219">When streaming, it is especially important to set all of these quotas.</span></span>  
  
### <a name="mixing-streaming-and-buffering-programming-models"></a><span data-ttu-id="c0f5e-220">Akış ve programlama modelleri arabelleğe alma karıştırma</span><span class="sxs-lookup"><span data-stu-id="c0f5e-220">Mixing Streaming and Buffering Programming Models</span></span>  
 <span data-ttu-id="c0f5e-221">Olası saldırıların çoğu, akış ve akış dışı programlama modelleri aynı hizmet karıştırma kaynaklanır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-221">Many possible attacks arise from mixing streaming and non-streaming programming models in the same service.</span></span> <span data-ttu-id="c0f5e-222">Bir hizmet sözleşmesini iki işlem ile olduğunu varsayın: alır bir <xref:System.IO.Stream> ve başka bazı özel türünün dizisini alır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-222">Suppose there is a service contract with two operations: one takes a <xref:System.IO.Stream> and another takes an array of some custom type.</span></span> <span data-ttu-id="c0f5e-223">Ayrıca varsayın `MaxReceivedMessageSize` geniş akışlar işleme ilk işlemini etkinleştirmek için büyük bir değere ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-223">Suppose also that `MaxReceivedMessageSize` is set to a large value to enable the first operation to process large streams.</span></span> <span data-ttu-id="c0f5e-224">Ne yazık ki, bu işlemi çağrılmadan önce büyük iletileri artık ikinci bir işlem de ve seri durumdan çıkarıcının arabellekleri verilere bellekte bir dizi olarak gönderilip gönderilmediğini anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-224">Unfortunately, this means that large messages can now be sent to the second operation as well, and the deserializer buffers data in memory as an array before the operation is called.</span></span> <span data-ttu-id="c0f5e-225">Olası bir hizmet reddi saldırısı budur: `MaxBufferSize` kota ileti gövdesi boyutunu sınırlamaz olduğu seri durumdan çıkarıcının ile çalışır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-225">This is a potential denial-of-service attack: the `MaxBufferSize` quota does not limit the size of the message body, which is what the deserializer works with.</span></span>  
  
 <span data-ttu-id="c0f5e-226">Bu nedenle, aynı sözleşme akış tabanlı ve akışı olmayan işlemlerinde karıştırma kaçının.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-226">For this reason, avoid mixing stream-based and non-streamed operations in the same contract.</span></span> <span data-ttu-id="c0f5e-227">İki programlama modeli kesinlikle karışık gerekir, aşağıdaki önlemleri kullanın:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-227">If you absolutely must mix the two programming models, use the following precautions:</span></span>  
  
-   <span data-ttu-id="c0f5e-228">Kapatma <xref:System.Runtime.Serialization.IExtensibleDataObject> ayarlayarak özelliği <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> özelliği <xref:System.ServiceModel.ServiceBehaviorAttribute> için `true`.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-228">Turn off the <xref:System.Runtime.Serialization.IExtensibleDataObject> feature by setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property of the <xref:System.ServiceModel.ServiceBehaviorAttribute> to `true`.</span></span> <span data-ttu-id="c0f5e-229">Bu sözleşmenin parçası olan üyeleri seri sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-229">This ensures that only members that are a part of the contract are deserialized.</span></span>  
  
-   <span data-ttu-id="c0f5e-230">Ayarlama <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> özelliği <xref:System.Runtime.Serialization.DataContractSerializer> güvenli bir değer.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-230">Set the <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> property of the <xref:System.Runtime.Serialization.DataContractSerializer> to a safe value.</span></span> <span data-ttu-id="c0f5e-231">Bu kota de kullanılabilir <xref:System.ServiceModel.ServiceBehaviorAttribute> özniteliği veya yapılandırma yoluyla.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-231">This quota is also available on the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute or through configuration.</span></span> <span data-ttu-id="c0f5e-232">Bu kota bir seri durumdan çıkarma bölüm serisi nesne sayısını sınırlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-232">This quota limits the number of objects that are deserialized in one deserialization episode.</span></span> <span data-ttu-id="c0f5e-233">Normalde, her işlem parametresi ya da ileti gövdesi bölümünde bir ileti sözleşmesi içinde bir bölüm serisi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-233">Normally, each operation parameter or message body part in a message contract is deserialized in one episode.</span></span> <span data-ttu-id="c0f5e-234">Diziler çıkarılırken her dizi girişi ayrı bir nesne sayılır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-234">When deserializing arrays, each array entry is counted as a separate object.</span></span>  
  
-   <span data-ttu-id="c0f5e-235">Tüm XML okuyucusu kotalar güvenli değerlere ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-235">Set all of the XML reader quotas to safe values.</span></span> <span data-ttu-id="c0f5e-236">Dikkat <xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A>, <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>, ve <xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A> ve akış dışı işlemleri dizelerde kaçının.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-236">Pay attention to <xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A>, <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>, and <xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A> and avoid strings in non-streaming operations.</span></span>  
  
-   <span data-ttu-id="c0f5e-237">Bilinen türler, bunları herhangi biri herhangi bir zamanda oluşturulabilir aklınızda tutma listesini gözden geçirin (Bu konunun devamındaki "Önleme istenmeyen türleri gelen yükleniyor" bölümüne bakın).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-237">Review the list of known types, keeping in mind that any one of them can be instantiated at any time (see the "Preventing Unintended Types from Being Loaded" section later in this topic).</span></span>  
  
-   <span data-ttu-id="c0f5e-238">Uygulama türleri kullanmayın <xref:System.Xml.Serialization.IXmlSerializable> çok miktarda veri arabellek arabirimi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-238">Do not use any types that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface that buffer a lot of data.</span></span> <span data-ttu-id="c0f5e-239">Bu tür türleri bilinen türleri listesine eklemeyin.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-239">Do not add such types to the list of known types.</span></span>  
  
-   <span data-ttu-id="c0f5e-240">Kullanmayın <xref:System.Xml.XmlElement>, <xref:System.Xml.XmlNode> diziler <xref:System.Byte> diziler veya türleri uygulayan <xref:System.Runtime.Serialization.ISerializable> sözleşmesindeki.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-240">Do not use the <xref:System.Xml.XmlElement>, <xref:System.Xml.XmlNode> arrays, <xref:System.Byte> arrays, or types that implement <xref:System.Runtime.Serialization.ISerializable> in a contract.</span></span>  
  
-   <span data-ttu-id="c0f5e-241">Kullanmayın <xref:System.Xml.XmlElement>, <xref:System.Xml.XmlNode> diziler <xref:System.Byte> diziler veya türleri uygulayan <xref:System.Runtime.Serialization.ISerializable> bilinen türleri listesinde.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-241">Do not use the <xref:System.Xml.XmlElement>, <xref:System.Xml.XmlNode> arrays, <xref:System.Byte> arrays, or types that implement <xref:System.Runtime.Serialization.ISerializable> in the list of known types.</span></span>  
  
 <span data-ttu-id="c0f5e-242">Akış dışı işlemi kullandığında önceki önlemler uygulamak <xref:System.Runtime.Serialization.DataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-242">The preceding precautions apply when the non-streamed operation uses the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> <span data-ttu-id="c0f5e-243">Hiçbir zaman akış karıştırmak ve akış dışı programlama modelleri aynı hizmette kullanıyorsanız <xref:System.Xml.Serialization.XmlSerializer>, korumasını olmadığından <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.MaxItemsInObjectGraph%2A> kota.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-243">Never mix streaming and non-streaming programming models on the same service if you are using the <xref:System.Xml.Serialization.XmlSerializer>, because it does not have the protection of the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.MaxItemsInObjectGraph%2A> quota.</span></span>  
  
### <a name="slow-stream-attacks"></a><span data-ttu-id="c0f5e-244">Yavaş akış saldırıları</span><span class="sxs-lookup"><span data-stu-id="c0f5e-244">Slow Stream Attacks</span></span>  
 <span data-ttu-id="c0f5e-245">Akış hizmet reddi saldırılarını sınıfının bellek tüketimi gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-245">A class of streaming denial-of-service attacks does not involve memory consumption.</span></span> <span data-ttu-id="c0f5e-246">Bunun yerine, saldırı bir yavaş veya vericinin veri içerir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-246">Instead, the attack involves a slow sender or receiver of data.</span></span> <span data-ttu-id="c0f5e-247">Gönderilen veya alınan verilerin beklerken, iş parçacıkları ve kullanılabilir bağlantıları gibi kaynakları tükendi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-247">While waiting for the data to be sent or received, resources such as threads and available connections are exhausted.</span></span> <span data-ttu-id="c0f5e-248">Bu durum kötü amaçlı saldırı sonucunda ya da yasal bir gönderici/alıcı bir yavaş ağ bağlantısı üzerinde meydana gelebilecek.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-248">This situation could arise either as a result of a malicious attack or from a legitimate sender/receiver on a slow network connection.</span></span>  
  
 <span data-ttu-id="c0f5e-249">Bu saldırıları azaltmak için Aktarım zaman aşımlarını doğru olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-249">To mitigate these attacks, set the transport time-outs correctly.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="c0f5e-250">[Taşıma kotaları](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-250"> [Transport Quotas](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span></span> <span data-ttu-id="c0f5e-251">İkincisi, hiçbir zaman zaman uyumlu kullanmak `Read` veya `Write` akış ile çalışırken işlemleri [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c0f5e-251">Secondly, never use synchronous `Read` or `Write` operations when working with streams in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
## <a name="using-xml-safely"></a><span data-ttu-id="c0f5e-252">XML kullanarak güvenli bir şekilde</span><span class="sxs-lookup"><span data-stu-id="c0f5e-252">Using XML Safely</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c0f5e-253">Bu bölümde XML hakkında olsa da, bilgi JavaScript nesne gösterimi (JSON) belgeleri için de geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-253">Although this section is about XML, the information also applies to JavaScript Object Notation (JSON) documents.</span></span> <span data-ttu-id="c0f5e-254">Kullanarak kotaları benzer şekilde, iş [arasında eşleme JSON ve XML](../../../../docs/framework/wcf/feature-details/mapping-between-json-and-xml.md).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-254">The quotas work similarly, using [Mapping Between JSON and XML](../../../../docs/framework/wcf/feature-details/mapping-between-json-and-xml.md).</span></span>  
  
### <a name="secure-xml-readers"></a><span data-ttu-id="c0f5e-255">XML okuyucular güvenli</span><span class="sxs-lookup"><span data-stu-id="c0f5e-255">Secure XML Readers</span></span>  
 <span data-ttu-id="c0f5e-256">XML bilgi tüm ileti işlenirken temelini [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c0f5e-256">The XML Infoset forms the basis of all message processing in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="c0f5e-257">XML verilerini azaltılması gereken olasılıklar mevcut hizmet reddi saldırısı sayısı güvenilmeyen bir kaynaktan kabul ederken.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-257">When accepting XML data from an untrusted source, a number of denial-of-service attack possibilities exist that must be mitigated.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="c0f5e-258">özel, güvenli XML okuyucu sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-258"> provides special, secure XML readers.</span></span> <span data-ttu-id="c0f5e-259">Bu okuyucular standart kodlamaları birini kullanırken otomatik olarak oluşturulan [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] (metin, ikili veya MTOM).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-259">These readers are created automatically when using one of the standard encodings in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] (text, binary, or MTOM).</span></span>  
  
 <span data-ttu-id="c0f5e-260">Bazı güvenlik özelliklerini bu okuyucular her zaman etkindir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-260">Some of the security features on these readers are always active.</span></span> <span data-ttu-id="c0f5e-261">Örneğin, okuyucular hiçbir zaman olası bir hizmet reddi saldırılarını kaynağı olan ve hiçbir zaman yasal SOAP iletilerinde görünmesi gereken belge tür tanımları (DTD) işler.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-261">For example, the readers never process document type definitions (DTDs), which are a potential source of denial-of-service attacks and should never appear in legitimate SOAP messages.</span></span> <span data-ttu-id="c0f5e-262">Diğer güvenlik özellikleri yapılandırılmalıdır, okuyucu kotalar sonraki bölümde açıklanan içerir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-262">Other security features include reader quotas that must be configured, which are described in the following section.</span></span>  
  
 <span data-ttu-id="c0f5e-263">Doğrudan XML okuyucularıyla çalışırken (gibi kendi özel Kodlayıcı yazarken veya doğrudan ile çalışırken <xref:System.ServiceModel.Channels.Message> sınıfı), her zaman kullanmak [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] güvenilmeyen verilerle çalışma şansı olduğunda okuyucular güvenli.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-263">When working directly with XML readers (such as when writing your own custom encoder or when working directly with the <xref:System.ServiceModel.Channels.Message> class), always use the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] secure readers when there is a chance of working with untrusted data.</span></span> <span data-ttu-id="c0f5e-264">Güvenli okuyucular statik Fabrika arama biri tarafından yöntemi aşırı oluşturma <xref:System.Xml.XmlDictionaryReader.CreateTextReader%2A>, <xref:System.Xml.XmlDictionaryReader.CreateBinaryReader%2A>, veya <xref:System.Xml.XmlDictionaryReader.CreateMtomReader%2A> üzerinde <xref:System.Xml.XmlDictionaryReader> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-264">Create the secure readers by calling one of the static factory method overloads of <xref:System.Xml.XmlDictionaryReader.CreateTextReader%2A>, <xref:System.Xml.XmlDictionaryReader.CreateBinaryReader%2A>, or <xref:System.Xml.XmlDictionaryReader.CreateMtomReader%2A> on the <xref:System.Xml.XmlDictionaryReader> class.</span></span> <span data-ttu-id="c0f5e-265">Bir okuyucusu oluşturulurken güvenli kota değerlerini geçirin.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-265">When creating a reader, pass in secure quota values.</span></span> <span data-ttu-id="c0f5e-266">Çağırmayın `Create` yöntemi aşırı.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-266">Do not call the `Create` method overloads.</span></span> <span data-ttu-id="c0f5e-267">Bunlar oluşturmayın bir [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] okuyucu.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-267">These do not create a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] reader.</span></span> <span data-ttu-id="c0f5e-268">Bunun yerine, bu bölümde açıklanan güvenlik özellikleri tarafından korunmayan bir okuyucu oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-268">Instead, a reader is created that is not protected by the security features described in this section.</span></span>  
  
### <a name="reader-quotas"></a><span data-ttu-id="c0f5e-269">Okuyucu kotaları</span><span class="sxs-lookup"><span data-stu-id="c0f5e-269">Reader Quotas</span></span>  
 <span data-ttu-id="c0f5e-270">Güvenli XML okuyucular beş yapılandırılabilir kotalar vardır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-270">The secure XML readers have five configurable quotas.</span></span> <span data-ttu-id="c0f5e-271">Bunlar normalde kullanılarak yapılandırılmış olan `ReaderQuotas` özelliğini kodlama bağlama öğeleri veya standart bağlamaları veya kullanarak bir <xref:System.Xml.XmlDictionaryReaderQuotas> bir okuyucusu oluşturulurken nesnesi geçirildi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-271">These are normally configured using the `ReaderQuotas` property on the encoding binding elements or standard bindings, or by using an <xref:System.Xml.XmlDictionaryReaderQuotas> object passed when creating a reader.</span></span>  
  
#### <a name="maxbytesperread"></a><span data-ttu-id="c0f5e-272">MaxBytesPerRead</span><span class="sxs-lookup"><span data-stu-id="c0f5e-272">MaxBytesPerRead</span></span>  
 <span data-ttu-id="c0f5e-273">Bu kota tek bir okunan bayt sayısını sınırlar `Read` etiketini ve onun özniteliklerini öğesi okunurken işlemi başlatın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-273">This quota limits the number of bytes that are read in a single `Read` operation when reading the element start tag and its attributes.</span></span> <span data-ttu-id="c0f5e-274">(Akışı dışı durumlarda, öğe adını kota karşı sayılmaz.) <xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A> aşağıdaki nedenlerle önemlidir:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-274">(In non-streamed cases, the element name itself is not counted against the quota.) <xref:System.Xml.XmlDictionaryReaderQuotas.MaxBytesPerRead%2A> is important for the following reasons:</span></span>  
  
-   <span data-ttu-id="c0f5e-275">Okunmakta zaman öğe adı ve öznitelikleri her zaman bellekte arabelleğe alınmış.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-275">The element name and its attributes are always buffered in memory when they are being read.</span></span> <span data-ttu-id="c0f5e-276">Bu nedenle, bu kota doğru akış beklendiğinde aşırı arabelleğe almayı önlemek için modu akış ayarlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-276">Therefore, it is important to set this quota correctly in streaming mode to prevent excessive buffering when streaming is expected.</span></span> <span data-ttu-id="c0f5e-277">Bkz: `MaxDepth` gerçekleşir kota bölüm gerçek miktarını arabelleğe alma hakkında bilgi için.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-277">See the `MaxDepth` quota section for information about the actual amount of buffering that takes place.</span></span>  
  
-   <span data-ttu-id="c0f5e-278">Öznitelik adları için benzersizlik denetlenecek olduğundan çok fazla XML özniteliklere sahip orantısız işleme zamanı kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-278">Having too many XML attributes may use up disproportionate processing time because attribute names have to be checked for uniqueness.</span></span> <span data-ttu-id="c0f5e-279">`MaxBytesPerRead`Bu tehdidi azaltır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-279">`MaxBytesPerRead` mitigates this threat.</span></span>  
  
#### <a name="maxdepth"></a><span data-ttu-id="c0f5e-280">MaxDepth</span><span class="sxs-lookup"><span data-stu-id="c0f5e-280">MaxDepth</span></span>  
 <span data-ttu-id="c0f5e-281">Bu kota en fazla iç içe geçirme derinliği XML öğelerinin sınırlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-281">This quota limits the maximum nesting depth of XML elements.</span></span> <span data-ttu-id="c0f5e-282">Örneğin, belge "\<A >\<B >\<C / >\</B >\</A >" üç iç içe geçirme derinliği sahiptir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-282">For example, the document "\<A>\<B>\<C/>\</B>\</A>" has a nesting depth of three.</span></span> <span data-ttu-id="c0f5e-283"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A>Aşağıdaki nedenlerle önemlidir:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-283"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxDepth%2A> is important for the following reasons:</span></span>  
  
-   <span data-ttu-id="c0f5e-284">`MaxDepth`ile etkileşime giren `MaxBytesPerRead`: okuyucu en fazla bellek tüketimi bu iki ayar ürününe orantılı şekilde okuyucu her zaman veri geçerli öğe ve tüm alt öğelerinden bellekte saklar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-284">`MaxDepth` interacts with `MaxBytesPerRead`: the reader always keeps data in memory for the current element and all of its ancestors, so the maximum memory consumption of the reader is proportional to the product of these two settings.</span></span>  
  
-   <span data-ttu-id="c0f5e-285">İç içe nesne grafiğinin seri durumdan çıkarılırken, seri durumdan çıkarıcının tüm yığın erişmek ve kurtarılamaz bir throw zorlanır <xref:System.StackOverflowException>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-285">When deserializing a deeply-nested object graph, the deserializer is forced to access the entire stack and throw an unrecoverable <xref:System.StackOverflowException>.</span></span> <span data-ttu-id="c0f5e-286">XML iç içe geçme ve nesne iç içe geçme her ikisi arasında doğrudan bir ilişki var. <xref:System.Runtime.Serialization.DataContractSerializer> ve <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-286">A direct correlation exists between XML nesting and object nesting for both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer>.</span></span> <span data-ttu-id="c0f5e-287">Kullanım `MaxDepth` bu tehdidi azaltmak için.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-287">Use `MaxDepth` to mitigate this threat.</span></span>  
  
#### <a name="maxnametablecharcount"></a><span data-ttu-id="c0f5e-288">MaxNameTableCharCount</span><span class="sxs-lookup"><span data-stu-id="c0f5e-288">MaxNameTableCharCount</span></span>  
 <span data-ttu-id="c0f5e-289">Bu kota okuyucunun boyutunu sınırlar *ad tablosu*.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-289">This quota limits the size of the reader’s *nametable*.</span></span> <span data-ttu-id="c0f5e-290">Ad tablosu bir XML belgesi işleme sırasında karşılaşılan belirli dizeleri (örneğin, ad alanlarını ve önekleri) içerir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-290">The nametable contains certain strings (such as namespaces and prefixes) that are encountered when processing an XML document.</span></span> <span data-ttu-id="c0f5e-291">Bu dizeler bellekte arabelleğe gibi akış beklendiğinde aşırı arabelleğe almayı önlemek için bu kotayı ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-291">As these strings are buffered in memory, set this quota to prevent excessive buffering when streaming is expected.</span></span>  
  
#### <a name="maxstringcontentlength"></a><span data-ttu-id="c0f5e-292">MaxStringContentLength</span><span class="sxs-lookup"><span data-stu-id="c0f5e-292">MaxStringContentLength</span></span>  
 <span data-ttu-id="c0f5e-293">Bu kota XML okuyucusu döndürür en çok dize boyutu sınırlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-293">This quota limits the maximum string size that the XML reader returns.</span></span> <span data-ttu-id="c0f5e-294">Bu kota XML okuyucusu bellek tüketimini sınırlamaz ancak okuyucu kullanarak bileşeni.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-294">This quota does not limit memory consumption in the XML reader itself, but in the component that is using the reader.</span></span> <span data-ttu-id="c0f5e-295">Örneğin, <xref:System.Runtime.Serialization.DataContractSerializer> ile güvenli bir okuyucu kullanan <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>, dizeleri Bu kota büyük serisi yok.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-295">For example, when the <xref:System.Runtime.Serialization.DataContractSerializer> uses a reader secured with <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>, it does not deserialize strings larger than this quota.</span></span> <span data-ttu-id="c0f5e-296">Kullanırken <xref:System.Xml.XmlDictionaryReader> doğrudan bu kota, ancak yalnızca dizeleri gibi okumak için özellikle tasarlanmış yöntemlerini tüm yöntemleri saygı sınıfı <xref:System.Xml.XmlDictionaryReader.ReadContentAsString%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-296">When using the <xref:System.Xml.XmlDictionaryReader> class directly, not all methods respect this quota, but only the methods that are specifically designed to read strings, such as the <xref:System.Xml.XmlDictionaryReader.ReadContentAsString%2A> method.</span></span> <span data-ttu-id="c0f5e-297"><xref:System.Xml.XmlReader.Value%2A> Okuyucu özelliği bu kota tarafından etkilenmez ve bu kota sağlar koruma gerekli olduğunda, bu nedenle kullanılmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-297">The <xref:System.Xml.XmlReader.Value%2A> property on the reader is not affected by this quota, and thus should not be used when the protection this quota provides is necessary.</span></span>  
  
#### <a name="maxarraylength"></a><span data-ttu-id="c0f5e-298">MaxArrayLength</span><span class="sxs-lookup"><span data-stu-id="c0f5e-298">MaxArrayLength</span></span>  
 <span data-ttu-id="c0f5e-299">Bu kota bir temel bayt dizileri de dahil olmak üzere XML okuyucuyu döndürür elemanlar dizisinde en büyük boyutu sınırlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-299">This quota limits the maximum size of an array of primitives that the XML reader returns, including byte arrays.</span></span> <span data-ttu-id="c0f5e-300">Bu kota XML okuyucusu bellek tüketimini sınırlamaz ancak okuyucu kullanarak hangi bileşeni.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-300">This quota does not limit memory consumption in the XML reader itself, but in whatever component that is using the reader.</span></span> <span data-ttu-id="c0f5e-301">Örneğin, <xref:System.Runtime.Serialization.DataContractSerializer> ile güvenli bir okuyucu kullanan <xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A>, bayt dizileri Bu kota büyük serisi yok.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-301">For example, when the <xref:System.Runtime.Serialization.DataContractSerializer> uses a reader secured with <xref:System.Xml.XmlDictionaryReaderQuotas.MaxArrayLength%2A>, it does not deserialize byte arrays larger than this quota.</span></span> <span data-ttu-id="c0f5e-302">Bu kota tek bir sözleşmede akış ve arabelleğe alınan programlama modelleri karışık çalışılırken ayarlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-302">It is important to set this quota when attempting to mix streaming and buffered programming models in a single contract.</span></span> <span data-ttu-id="c0f5e-303">Aklınızda kullanırken <xref:System.Xml.XmlDictionaryReader> doğrudan, yalnızca belirli ilkel türler, rasgele boyutunu dizileri gibi okumak için özellikle tasarlanmış yöntemlerini sınıf <xref:System.Xml.XmlDictionaryReader.ReadInt32Array%2A>, bu kota saygılı olun.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-303">Keep in mind that when using the <xref:System.Xml.XmlDictionaryReader> class directly, only the methods that are specifically designed to read arrays of arbitrary size of certain primitive types, such as <xref:System.Xml.XmlDictionaryReader.ReadInt32Array%2A>, respect this quota.</span></span>  
  
## <a name="threats-specific-to-the-binary-encoding"></a><span data-ttu-id="c0f5e-304">İkili kodlama için tehditleri özel</span><span class="sxs-lookup"><span data-stu-id="c0f5e-304">Threats Specific to the Binary Encoding</span></span>  
 <span data-ttu-id="c0f5e-305">İkili kodlama XML [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] destekler içeren bir *sözlük dizeleri* özelliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-305">The binary XML encoding [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports includes a *dictionary strings* feature.</span></span> <span data-ttu-id="c0f5e-306">Büyük bir dize, yalnızca birkaç bayt kullanılarak kodlanmış.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-306">A large string may be encoded using only a few bytes.</span></span> <span data-ttu-id="c0f5e-307">Bu, önemli ölçüde performans artışı sağlar, ancak azaltılması gereken yeni hizmet reddi tehditleri tanıtır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-307">This enables significant performance gains, but introduces new denial-of-service threats that must be mitigated.</span></span>  
  
 <span data-ttu-id="c0f5e-308">Sözlük iki tür vardır: *statik* ve *dinamik*.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-308">There are two kinds of dictionaries: *static* and *dynamic*.</span></span> <span data-ttu-id="c0f5e-309">Statik sözlük ikili kodlama kısa bir kod kullanılarak temsil edilebilir uzun dizeleri yerleşik bir listesidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-309">The static dictionary is a built-in list of long strings that may be represented using a short code in the binary encoding.</span></span> <span data-ttu-id="c0f5e-310">Bu dize listesi okuyucu oluşturulduğunda ve değiştirilemez düzeltilmiştir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-310">This list of strings is fixed when the reader is created and cannot be modified.</span></span> <span data-ttu-id="c0f5e-311">Statik sözlük dizelerde hiçbiri, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] bir sözlük genişletme saldırısında hala kullanılabilir olsa da varsayılan olarak kullandığı önemli bir hizmet reddi tehdit teşkil yeterli büyüklükte.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-311">None of the strings in the static dictionary that [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses by default are sufficiently large to pose a serious denial-of-service threat, although they may still be used in a dictionary expansion attack.</span></span> <span data-ttu-id="c0f5e-312">Kendi statik sözlük Burada sağladığınız Gelişmiş senaryolarda büyük sözlük dizeleri giriş dikkatli olun.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-312">In advanced scenarios where you supply your own static dictionary, be careful when introducing large dictionary strings.</span></span>  
  
 <span data-ttu-id="c0f5e-313">Dinamik sözlük özelliği, kendi dizeleri tanımlayın ve bunları kısa kodlarıyla ilişkilendirmek iletilerine izin verir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-313">The dynamic dictionaries feature allows messages to define their own strings and associate them with short codes.</span></span> <span data-ttu-id="c0f5e-314">Bu dize kod eşlemeleri sonraki iletiler dizeleri yeniden başlatmanız gerekmez ve önceden tanımlanmış kodları kullanabilir, bellekte tüm iletişimin oturumu sırasında tutulur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-314">These string-to-code mappings are kept in memory during the entire communication session, such that subsequent messages do not have to resend the strings and can utilize codes that are already defined.</span></span> <span data-ttu-id="c0f5e-315">Bu dizeler rastgele uzunlukta olması ve bu nedenle statik sözlükte olandan daha ciddi bir tehdit teşkil olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-315">These strings may be of arbitrary length and thus pose a more serious threat than those in the static dictionary.</span></span>  
  
 <span data-ttu-id="c0f5e-316">Azaltılması gereken ilk çok büyük boyutlu hale dinamik sözlük (dize kod eşlemesinin tablo) olasılığını tehlike.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-316">The first threat that must be mitigated is the possibility of the dynamic dictionary (the string-to-code mapping table) becoming too large.</span></span> <span data-ttu-id="c0f5e-317">Bu sözlük birkaç iletileri süresince genişletilmiş ve bu nedenle `MaxReceivedMessageSize` kota yalnızca her ileti için ayrı ayrı uygulandığından koruma sunar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-317">This dictionary may be expanded over the course of several messages, and so the `MaxReceivedMessageSize` quota offers no protection because it applies only to each message separately.</span></span> <span data-ttu-id="c0f5e-318">Bu nedenle, ayrı <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.MaxSessionSize%2A> özelliği var. <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement> sözlük boyutu sınırlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-318">Therefore, a separate <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.MaxSessionSize%2A> property exists on the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement> that limits the size of the dictionary.</span></span>  
  
 <span data-ttu-id="c0f5e-319">Diğer çoğu kotaları, bu kota iletileri yazılırken uygulanır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-319">Unlike most other quotas, this quota also applies when writing messages.</span></span> <span data-ttu-id="c0f5e-320">Bir ileti okunurken aşılırsa `QuotaExceededException` her zamanki gibi oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-320">If it is exceeded when reading a message, the `QuotaExceededException` is thrown as usual.</span></span> <span data-ttu-id="c0f5e-321">Bir ileti yazarken aşılırsa kotanın aşılmasına neden herhangi bir dizesi olarak yazılan-, dinamik sözlük özelliği olmadan kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-321">If it is exceeded when writing a message, any strings that cause the quota to be exceeded are written as-is, without using the dynamic dictionaries feature.</span></span>  
  
### <a name="dictionary-expansion-threats"></a><span data-ttu-id="c0f5e-322">Sözlük genişletme tehditleri</span><span class="sxs-lookup"><span data-stu-id="c0f5e-322">Dictionary Expansion Threats</span></span>  
 <span data-ttu-id="c0f5e-323">İkili özgü saldırı önemli sınıfı sözlük genişletme ortaya çıkar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-323">A significant class of binary-specific attacks arises from dictionary expansion.</span></span> <span data-ttu-id="c0f5e-324">Dize sözlükler özellik kapsamlı kullanımını yaparsa ikili biçimde küçük bir ileti tam olarak genişletilmiş metin biçiminde çok büyük bir iletiye kapatabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-324">A small message in binary form may turn into a very large message in fully expanded textual form if it makes extensive use of the string dictionaries feature.</span></span> <span data-ttu-id="c0f5e-325">Dinamik sözlük dizeleri için genişletme faktörü sınırlıdır <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.MaxSessionSize%2A> kota, hiç dinamik sözlük dizesi tüm sözlük en büyük boyutunu aştığından.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-325">The expansion factor for dynamic dictionary strings is limited by the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.MaxSessionSize%2A> quota, because no dynamic dictionary string exceeds the maximum size of the entire dictionary.</span></span>  
  
 <span data-ttu-id="c0f5e-326"><xref:System.Xml.XmlDictionaryReaderQuotas.MaxNameTableCharCount%2A>, `MaxStringContentLength`, Ve `MaxArrayLength` özellikleri yalnızca bellek tüketimini sınırlamak.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-326">The <xref:System.Xml.XmlDictionaryReaderQuotas.MaxNameTableCharCount%2A>, `MaxStringContentLength`, and `MaxArrayLength` properties only limit memory consumption.</span></span> <span data-ttu-id="c0f5e-327">Bunlar bellek kullanımı zaten tarafından sınırlı olduğundan akışı olmayan kullanımı tüm tehditlerin azaltılmasına gerekmez normalde `MaxReceivedMessageSize`.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-327">They are normally not required to mitigate any threats in the non-streamed usage because memory usage is already limited by `MaxReceivedMessageSize`.</span></span> <span data-ttu-id="c0f5e-328">Ancak, `MaxReceivedMessageSize` öncesi genişletme bayt sayısı.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-328">However, `MaxReceivedMessageSize` counts pre-expansion bytes.</span></span> <span data-ttu-id="c0f5e-329">İkili kodlama kullanımda olduğunda, bellek tüketimi olası sunmamızı `MaxReceivedMessageSize`, yalnızca faktörüyle sınırlı <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.MaxSessionSize%2A>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-329">When binary encoding is in use, memory consumption could potentially go beyond `MaxReceivedMessageSize`, limited only by a factor of <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.MaxSessionSize%2A>.</span></span> <span data-ttu-id="c0f5e-330">Bu nedenle, her zaman tüm okuyucu kotalar ayarlamak önemlidir (özellikle <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>) ikili kodlama kullanırken.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-330">For this reason, it is important to always set all of the reader quotas (especially <xref:System.Xml.XmlDictionaryReaderQuotas.MaxStringContentLength%2A>) when using the binary encoding.</span></span>  
  
 <span data-ttu-id="c0f5e-331">İle birlikte ikili kodlama kullanırken <xref:System.Runtime.Serialization.DataContractSerializer>, `IExtensibleDataObject` arabirimi kötüye sözlük genişletme saldırısı.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-331">When using binary encoding together with the <xref:System.Runtime.Serialization.DataContractSerializer>, the `IExtensibleDataObject` interface can be misused to mount a dictionary expansion attack.</span></span> <span data-ttu-id="c0f5e-332">Bu arabirim, sınırsız depolama sözleşmenin parçası olmayan rastgele veriler için temelde sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-332">This interface essentially provides unlimited storage for arbitrary data that is not a part of the contract.</span></span> <span data-ttu-id="c0f5e-333">Kotalar yeterince düşük ayarlanamaz, şekilde `MaxSessionSize` çarpılmasıyla `MaxReceivedMessageSize` yok bir sorun teşkil, devre dışı `IExtensibleDataObject` ikili kodlama kullanırken özelliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-333">If quotas cannot be set low enough such that `MaxSessionSize` multiplied by `MaxReceivedMessageSize` does not pose a problem, disable the `IExtensibleDataObject` feature when using the binary encoding.</span></span> <span data-ttu-id="c0f5e-334">Ayarlama `IgnoreExtensionDataObject` özelliğine `true` üzerinde `ServiceBehaviorAttribute` özniteliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-334">Set the `IgnoreExtensionDataObject` property to `true` on the `ServiceBehaviorAttribute` attribute.</span></span> <span data-ttu-id="c0f5e-335">Alternatif olarak, uygulamayan `IExtensibleDataObject` arabirimi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-335">Alternatively, do not implement the `IExtensibleDataObject` interface.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="c0f5e-336">[İleri uyumlu veri sözleşmeleri](../../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-336"> [Forward-Compatible Data Contracts](../../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span>  
  
### <a name="quotas-summary"></a><span data-ttu-id="c0f5e-337">Kotalar özeti</span><span class="sxs-lookup"><span data-stu-id="c0f5e-337">Quotas Summary</span></span>  
 <span data-ttu-id="c0f5e-338">Kotalar ilgili yönergeleri aşağıdaki tabloda özetlenmiştir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-338">The following table summarizes the guidance about quotas.</span></span>  
  
|<span data-ttu-id="c0f5e-339">Koşul</span><span class="sxs-lookup"><span data-stu-id="c0f5e-339">Condition</span></span>|<span data-ttu-id="c0f5e-340">Önemli kotalar ayarlamak için</span><span class="sxs-lookup"><span data-stu-id="c0f5e-340">Important quotas to set</span></span>|  
|---------------|-----------------------------|  
|<span data-ttu-id="c0f5e-341">Akış veya küçük iletileri, metin ya da MTOM kodlama akış</span><span class="sxs-lookup"><span data-stu-id="c0f5e-341">No streaming or streaming small messages, text, or MTOM encoding</span></span>|<span data-ttu-id="c0f5e-342">`MaxReceivedMessageSize`, `MaxBytesPerRead`, ve`MaxDepth`</span><span class="sxs-lookup"><span data-stu-id="c0f5e-342">`MaxReceivedMessageSize`, `MaxBytesPerRead`, and `MaxDepth`</span></span>|  
|<span data-ttu-id="c0f5e-343">Akış veya küçük iletileri, ikili akış kodlama</span><span class="sxs-lookup"><span data-stu-id="c0f5e-343">No streaming or streaming small messages, binary encoding</span></span>|<span data-ttu-id="c0f5e-344">`MaxReceivedMessageSize`, `MaxSessionSize`ve tüm`ReaderQuotas`</span><span class="sxs-lookup"><span data-stu-id="c0f5e-344">`MaxReceivedMessageSize`, `MaxSessionSize`, and all `ReaderQuotas`</span></span>|  
|<span data-ttu-id="c0f5e-345">Akış büyük iletiler, metin ya da MTOM kodlama</span><span class="sxs-lookup"><span data-stu-id="c0f5e-345">Streaming large messages, text, or MTOM encoding</span></span>|<span data-ttu-id="c0f5e-346">`MaxBufferSize`ve tüm`ReaderQuotas`</span><span class="sxs-lookup"><span data-stu-id="c0f5e-346">`MaxBufferSize` and all `ReaderQuotas`</span></span>|  
|<span data-ttu-id="c0f5e-347">Akış büyük iletiler, ikili kodlama</span><span class="sxs-lookup"><span data-stu-id="c0f5e-347">Streaming large messages, binary encoding</span></span>|<span data-ttu-id="c0f5e-348">`MaxBufferSize`, `MaxSessionSize`ve tüm`ReaderQuotas`</span><span class="sxs-lookup"><span data-stu-id="c0f5e-348">`MaxBufferSize`, `MaxSessionSize`, and all `ReaderQuotas`</span></span>|  
  
-   <span data-ttu-id="c0f5e-349">Aktarım düzeyinde zaman aşımlarını her zaman ayarlamanız gerekir ve akış olup büyük veya küçük iletileri akış bağımsız olarak kullanımda olduğunda eşzamanlı okuma/yazma hiçbir zaman kullanın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-349">Transport-level time-outs must always be set and never use synchronous reads/writes when streaming is in use, regardless of whether you are streaming large or small messages.</span></span>  
  
-   <span data-ttu-id="c0f5e-350">Zaman şüpheli bir kota hakkında güvenli bir değer yerine açık bırakarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-350">When in doubt about a quota, set it to a safe value rather than leaving it open.</span></span>  
  
## <a name="preventing-malicious-code-execution"></a><span data-ttu-id="c0f5e-351">Kötü amaçlı kod yürütmeyi engelleme</span><span class="sxs-lookup"><span data-stu-id="c0f5e-351">Preventing Malicious Code Execution</span></span>  
 <span data-ttu-id="c0f5e-352">Aşağıdaki genel sınıfları tehditleri kod yürütmek ve sahip istenmeyen etkiler:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-352">The following general classes of threats can execute code and have unintended effects:</span></span>  
  
-   <span data-ttu-id="c0f5e-353">Kötü amaçlı, güvenli olmayan veya güvenlik açısından duyarlı türü seri durumdan çıkarıcının yükler.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-353">The deserializer loads a malicious, unsafe, or security-sensitive type.</span></span>  
  
-   <span data-ttu-id="c0f5e-354">Gelen ileti gibi normal olarak güvenli bir türünün bir örneği oluşturmak seri durumdan çıkarıcının neden olan bir şekilde istenmeyen sonuçları.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-354">An incoming message causes the deserializer to construct an instance of a normally safe type in such a way that it has unintended consequences.</span></span>  
  
 <span data-ttu-id="c0f5e-355">Aşağıdaki bölümlerde bu sınıfların tehditleri daha ayrıntılı ele alınmıştır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-355">The following sections discuss these classes of threats further.</span></span>  
  
## <a name="datacontractserializer"></a><span data-ttu-id="c0f5e-356">DataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="c0f5e-356">DataContractSerializer</span></span>  
 <span data-ttu-id="c0f5e-357">(Güvenlik bilgileri için <xref:System.Xml.Serialization.XmlSerializer>, ilgili belgelerine bakın.) İçin güvenlik modeli <xref:System.Xml.Serialization.XmlSerializer> olarak benzer <xref:System.Runtime.Serialization.DataContractSerializer>ve çoğunlukla ayrıntıları farklıdır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-357">(For security information on the <xref:System.Xml.Serialization.XmlSerializer>, see the relevant documentation.) The security model for the <xref:System.Xml.Serialization.XmlSerializer> is similar to that of the <xref:System.Runtime.Serialization.DataContractSerializer>, and differs mostly in details.</span></span> <span data-ttu-id="c0f5e-358">Örneğin, <xref:System.Xml.Serialization.XmlIncludeAttribute> yerine türü eklemek için kullanılan öznitelik <xref:System.Runtime.Serialization.KnownTypeAttribute> özniteliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-358">For example, the <xref:System.Xml.Serialization.XmlIncludeAttribute> attribute is used for type inclusion instead of the <xref:System.Runtime.Serialization.KnownTypeAttribute> attribute.</span></span> <span data-ttu-id="c0f5e-359">Ancak, bazı tehditler için benzersiz <xref:System.Xml.Serialization.XmlSerializer> bu konunun ilerleyen bölümlerinde ele alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-359">However, some threats unique to the <xref:System.Xml.Serialization.XmlSerializer> are discussed later in this topic.</span></span>  
  
### <a name="preventing-unintended-types-from-being-loaded"></a><span data-ttu-id="c0f5e-360">İstenmeyen türleri yüklenmesini engelleme</span><span class="sxs-lookup"><span data-stu-id="c0f5e-360">Preventing Unintended Types from Being Loaded</span></span>  
 <span data-ttu-id="c0f5e-361">Tür kötü amaçlı veya yalnızca güvenlik açısından duyarlı yan etkileri sahip olup olmadığını istenmeyen türleri yüklenirken önemli sonuçları olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-361">Loading unintended types may have significant consequences, whether the type is malicious or just has security-sensitive side effects.</span></span> <span data-ttu-id="c0f5e-362">Bir tür yararlanma güvenlik açığı içeren, kendi oluşturucunun ya da sınıf oluşturucu güvenlik açısından duyarlı eylemler gerçekleştirmek, hizmet reddi saldırılarını kolaylaştıran veya kurtarılamaz bir özel durum atabilir büyük bellek parmak izine sahip.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-362">A type may contain exploitable security vulnerability, perform security-sensitive actions in its constructor or class constructor, have a large memory footprint that facilitates denial-of-service attacks, or may throw non-recoverable exceptions.</span></span> <span data-ttu-id="c0f5e-363">Türleri türü yüklendikten hemen sonra ve hiç örneği oluşturulmadan önce çalıştıran sınıf oluşturucular olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-363">Types may have class constructors that run as soon as the type is loaded and before any instances are created.</span></span> <span data-ttu-id="c0f5e-364">Bu nedenlerle, seri durumdan çıkarıcının yükleyebilir türleri kümesini denetlemek önemlidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-364">For these reasons, it is important to control the set of types that the deserializer may load.</span></span>  
  
 <span data-ttu-id="c0f5e-365"><xref:System.Runtime.Serialization.DataContractSerializer> Geniş bağlı şekilde seri durumdan çıkarır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-365">The <xref:System.Runtime.Serialization.DataContractSerializer> deserializes in a loosely coupled way.</span></span> <span data-ttu-id="c0f5e-366">Bu asla ortak dil çalışma zamanı (CLR) türü ve derleme adları gelen verileri okur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-366">It never reads common language runtime (CLR) type and assembly names from the incoming data.</span></span> <span data-ttu-id="c0f5e-367">Bu davranışı için benzer <xref:System.Xml.Serialization.XmlSerializer>, ancak davranışından farklıdır <xref:System.Runtime.Serialization.NetDataContractSerializer>, <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter>ve <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-367">This is similar to the behavior of the <xref:System.Xml.Serialization.XmlSerializer>, but differs from the behavior of the <xref:System.Runtime.Serialization.NetDataContractSerializer>, <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter>, and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>.</span></span> <span data-ttu-id="c0f5e-368">Uzak bir saldırgana yalnızca bu tür iletisi adlandırılmasıyla yüklemek için rasgele bir tür belirttiğinden gevşek bağlantı güvenliği, derecesini tanıtır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-368">Loose coupling introduces a degree of safety, because the remote attacker cannot indicate an arbitrary type to load just by naming that type in the message.</span></span>  
  
 <span data-ttu-id="c0f5e-369"><xref:System.Runtime.Serialization.DataContractSerializer> Göre sözleşmesi şu anda beklenen bir türü yüklemek için her zaman izin verilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-369">The <xref:System.Runtime.Serialization.DataContractSerializer> is always allowed to load a type that is currently expected according to the contract.</span></span> <span data-ttu-id="c0f5e-370">Örneğin, bir veri sözleşmesi türünün veri üyesi varsa `Customer`, <xref:System.Runtime.Serialization.DataContractSerializer> yüklemesine izin `Customer` bu veri üyesi çıkarır zaman yazın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-370">For example, if a data contract has a data member of type `Customer`, the <xref:System.Runtime.Serialization.DataContractSerializer> is allowed to load the `Customer` type when it deserializes this data member.</span></span>  
  
 <span data-ttu-id="c0f5e-371">Ayrıca, <xref:System.Runtime.Serialization.DataContractSerializer> çok biçimlilik destekler.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-371">Additionally, the <xref:System.Runtime.Serialization.DataContractSerializer> supports polymorphism.</span></span> <span data-ttu-id="c0f5e-372">Bir veri üyesi olarak bildirilmelidir <xref:System.Object>, ancak gelen veri içerebilir bir `Customer` örneği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-372">A data member may be declared as <xref:System.Object>, but the incoming data may contain a `Customer` instance.</span></span> <span data-ttu-id="c0f5e-373">Bu mümkündür yalnızca `Customer` türü yapılmadı "bilinen" kaldırıcı bu mekanizmalardan biri yoluyla:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-373">This is possible only if the `Customer` type has been made "known" to the deserializer through one of these mechanisms:</span></span>  
  
-   <span data-ttu-id="c0f5e-374"><xref:System.Runtime.Serialization.KnownTypeAttribute>bir türe uygulanan öznitelik.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-374"><xref:System.Runtime.Serialization.KnownTypeAttribute> attribute applied to a type.</span></span>  
  
-   <span data-ttu-id="c0f5e-375">`KnownTypeAttribute`türlerinin bir listesini döndüren bir yöntem belirten özniteliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-375">`KnownTypeAttribute` attribute specifying a method that returns a list of types.</span></span>  
  
-   <span data-ttu-id="c0f5e-376">`ServiceKnownTypeAttribute`özniteliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-376">`ServiceKnownTypeAttribute` attribute.</span></span>  
  
-   <span data-ttu-id="c0f5e-377">`KnownTypes` Yapılandırma bölümü.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-377">The `KnownTypes` configuration section.</span></span>  
  
-   <span data-ttu-id="c0f5e-378">Geçirilecek açıkça bilinen türlerinin bir listesini <xref:System.Runtime.Serialization.DataContractSerializer> seri hale getirici doğrudan kullanıyorsanız, oluşturma sırasında.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-378">A list of known types explicitly passed to the <xref:System.Runtime.Serialization.DataContractSerializer> during construction, if using the serializer directly.</span></span>  
  
 <span data-ttu-id="c0f5e-379">Bu mekanizmaların her biri, yüzey alanını seri durumdan çıkarıcının yükleyebilir ve daha fazla türleri sunarak artırır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-379">Each of these mechanisms increases the surface area by introducing more types that the deserializer can load.</span></span> <span data-ttu-id="c0f5e-380">Kötü amaçlı veya istenmeyen türü yok bilinen türleri listesine eklendiğinden emin olmak için Bu mekanizmaların her biri kontrol eder.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-380">Control each of these mechanisms to ensure no malicious or unintended types are added to the known types list.</span></span>  
  
 <span data-ttu-id="c0f5e-381">Bilinen bir türe kapsamda eklendiğinde, dilediğiniz zaman yüklenebilir ve gerçekte kullanarak sözleşme engelliyor olsa bile türdeki örneklerin oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-381">Once a known type is in scope, it can be loaded at any time, and instances of the type can be created, even if the contract forbids actually using it.</span></span> <span data-ttu-id="c0f5e-382">Örneğin, "MyDangerousType" Yukarıdaki mekanizmalardan biri kullanılarak bilinen türleri listesine eklenir türü varsayalım.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-382">For example, suppose the type "MyDangerousType" is added to the known types list using one of the mechanisms above.</span></span> <span data-ttu-id="c0f5e-383">Bunun anlamı:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-383">This means that:</span></span>  
  
-   <span data-ttu-id="c0f5e-384">`MyDangerousType`yüklenir ve kendi sınıf oluşturucu döngülerinden.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-384">`MyDangerousType` is loaded and its class constructor runs.</span></span>  
  
-   <span data-ttu-id="c0f5e-385">Bile bir dize veri üyesi olan bir veri sözleşmesi seri durumdan çıkarılırken, kötü amaçlı bir ileti örneği hala neden olabilir `MyDangerousType` oluşturmak için.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-385">Even when deserializing a data contract with a string data member, a malicious message may still cause an instance of `MyDangerousType` to create.</span></span> <span data-ttu-id="c0f5e-386">Kod `MyDangerousType`, özellik ayarlayıcıları gibi çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-386">Code in `MyDangerousType`, such as property setters, may run.</span></span> <span data-ttu-id="c0f5e-387">Bu yapıldıktan sonra bu örneğin dize veri üyesini atamak ve bir özel durumla başarısız seri durumdan çıkarıcının çalışır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-387">After this is done, the deserializer tries to assign this instance to the string data member and fail with an exception.</span></span>  
  
 <span data-ttu-id="c0f5e-388">Bilinen türlerinin bir listesini döndüren bir yöntem yazarken veya bir liste doğrudan geçirilirken <xref:System.Runtime.Serialization.DataContractSerializer> oluşturucusu, listenin hazırlar kod güvenli ve güvenilir veriler üzerinde çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-388">When writing a method that returns a list of known types, or when passing a list directly to the <xref:System.Runtime.Serialization.DataContractSerializer> constructor, ensure that the code that prepares the list is secure and operates only on trusted data.</span></span>  
  
 <span data-ttu-id="c0f5e-389">Bilinen türler yapılandırmasında belirtiliyorsa, yapılandırma dosyasını güvenli olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-389">If specifying known types in configuration, ensure that the configuration file is secure.</span></span> <span data-ttu-id="c0f5e-390">Tanımlayıcı adlar (tür bulunduğu imzalı derleme ortak anahtarını belirterek) yapılandırmada her zaman kullanın, ancak yük türü sürümü belirtmeyin.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-390">Always use strong names in configuration (by specifying the public key of the signed assembly where the type resides), but do not specify the version of the type to load.</span></span> <span data-ttu-id="c0f5e-391">Türü yükleyicisi en son sürümünü mümkünse otomatik olarak seçer.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-391">The type loader automatically picks the latest version, if possible.</span></span> <span data-ttu-id="c0f5e-392">Belirli bir sürüm yapılandırmasında belirtirseniz, aşağıdaki riski: sonraki bir sürümde sabit bir güvenlik açığı bir türe sahip olabilir, ancak yapılandırmasında açıkça belirtildiğinden savunmasız sürüm hala yükler.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-392">If you specify a particular version in configuration, you run the following risk: A type may have a security vulnerability that may be fixed in a future version, but the vulnerable version still loads because it is explicitly specified in configuration.</span></span>  
  
 <span data-ttu-id="c0f5e-393">Çok fazla bilinen türlerine sahip olan başka bir sonucu: <xref:System.Runtime.Serialization.DataContractSerializer> serileştirme ve seri durumdan gerekir her tür için bir girdi ile uygulama etki alanındaki bir önbellek serileştirme/seri durumdan çıkarma kod oluşturur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-393">Having too many known types has another consequence: The <xref:System.Runtime.Serialization.DataContractSerializer> creates a cache of serialization/deserialization code in the application domain, with an entry for each type it must serialize and deserialize.</span></span> <span data-ttu-id="c0f5e-394">Bu önbellek, uygulama etki alanı çalıştığı sürece hiçbir zaman temizlenir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-394">This cache is never cleared as long as the application domain is running.</span></span> <span data-ttu-id="c0f5e-395">Bu nedenle, uygulama birçok bilinen türler kullanan farkındadır bir saldırgan önbellek orantısız büyük miktarda bellek tüketmesine neden olan tüm bu tür, seri durumdan çıkarma neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-395">Therefore, an attacker who is aware that an application uses many known types can cause the deserialization of all these types, causing the cache to consume a disproportionately large amount of memory.</span></span>  
  
### <a name="preventing-types-from-being-in-an-unintended-state"></a><span data-ttu-id="c0f5e-396">İstenmeyen bir durumda olmasını türleri önleyen</span><span class="sxs-lookup"><span data-stu-id="c0f5e-396">Preventing Types from Being in an Unintended State</span></span>  
 <span data-ttu-id="c0f5e-397">Bir tür zorlanmış olmalıdır iç tutarlılık sınırlamaları olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-397">A type may have internal consistency constraints that must be enforced.</span></span> <span data-ttu-id="c0f5e-398">Seri durumdan çıkarma sırasında bu kısıtlamaların çiğnemekten kaçınmak için dikkatli olunması gerekir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-398">Care must be taken to avoid breaking these constraints during deserialization.</span></span>  
  
 <span data-ttu-id="c0f5e-399">Aşağıdaki örnekte bir türde bir spacecraft üzerinde bir hava kilidi durumunu temsil eder ve hem iç hem de dış kapı aynı anda açık olamayacağını kısıtlamayı zorlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-399">The following example of a type represents the state of an airlock on a spacecraft, and enforces the constraint that both the inner and the outer doors cannot be open at the same time.</span></span>  
  
 [!code-csharp[DataContractAttribute#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/datacontractattribute/cs/overview.cs#3)]
 [!code-vb[DataContractAttribute#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/datacontractattribute/vb/overview.vb#3)]  
  
 <span data-ttu-id="c0f5e-400">Bir saldırgan kısıtlamaları alma ve olabilir geçersiz bir durum nesnesi alma gibi bu, kötü amaçlı bir ileti gönderebilir istenmeyen ve beklenmeyen sonuçlara.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-400">An attacker may send a malicious message like this, getting around the constraints and getting the object into an invalid state, which may have unintended and unpredictable consequences.</span></span>  
  
```xml  
<SpaceStationAirlock>  
    <innerDoorOpen>true</innerDoorOpen>  
    <outerDoorOpen>true</outerDoorOpen>  
</SpaceStationAirlock>  
```  
  
 <span data-ttu-id="c0f5e-401">Bu durum, aşağıdaki noktaları farkına tarafından önlenebilir:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-401">This situation can be avoided by being aware of the following points:</span></span>  
  
-   <span data-ttu-id="c0f5e-402">Zaman <xref:System.Runtime.Serialization.DataContractSerializer> çoğu sınıf, çalışmıyor oluşturucular seri durumdan çıkarır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-402">When the <xref:System.Runtime.Serialization.DataContractSerializer> deserializes most classes, constructors do not run.</span></span> <span data-ttu-id="c0f5e-403">Bu nedenle, oluşturucuda yapılan herhangi bir durum Yönetim güvenmeyin.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-403">Therefore, do not rely on any state management done in the constructor.</span></span>  
  
-   <span data-ttu-id="c0f5e-404">Geri aramalar nesne geçerli bir durumda olduğundan emin olmak için kullanın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-404">Use callbacks to ensure that the object is in a valid state.</span></span> <span data-ttu-id="c0f5e-405">Geri çağırma işaretlenmiş <xref:System.Runtime.Serialization.OnDeserializedAttribute> özniteliği olduğundan özellikle yararlı seri durumdan çıkarma işlemi tamamlandıktan ve inceleyin ve genel durumu düzeltmek için bir fırsat sonra çalışır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-405">The callback marked with the <xref:System.Runtime.Serialization.OnDeserializedAttribute> attribute is especially useful because it runs after deserialization is complete and has a chance to examine and correct the overall state.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="c0f5e-406">[Sürüm toleranslı seri hale getirme geri çağrıları](../../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-406"> [Version-Tolerant Serialization Callbacks](../../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
-   <span data-ttu-id="c0f5e-407">Hangi özelliği ayarlayıcılar çağrılmalıdır belirli bir sıraya üzerinde yararlanmayı veri sözleşmesi tasarım türleri değil.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-407">Do not design data contract types to rely on any particular order in which property setters must be called.</span></span>  
  
-   <span data-ttu-id="c0f5e-408">Eski türler ile işaretlenen kullanarak ilgilenebilmek <xref:System.SerializableAttribute> özniteliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-408">Take care using legacy types marked with the <xref:System.SerializableAttribute> attribute.</span></span> <span data-ttu-id="c0f5e-409">Bunların çoğu, çalışmak için tasarlanmış [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] uzaktan iletişim yalnızca güvenilir veri ile kullanmak için.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-409">Many of them were designed to work with [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] remoting for use with trusted data only.</span></span> <span data-ttu-id="c0f5e-410">Bu özniteliği ile işaretlenmiş mevcut türleri durumu güvenliği göz ile tasarlanmış değil.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-410">Existing types marked with this attribute may not have been designed with state safety in mind.</span></span>  
  
-   <span data-ttu-id="c0f5e-411">Güvenmeyin <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> özelliği `DataMemberAttribute` durum güvenlik açısından oldukça veri güvence altına almak için öznitelik.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-411">Do not rely on the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property of the `DataMemberAttribute` attribute to guarantee presence of data as far as state safety is concerned.</span></span> <span data-ttu-id="c0f5e-412">Verileri her zaman olabilir `null`, `zero`, veya `invalid`.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-412">Data could always be `null`, `zero`, or `invalid`.</span></span>  
  
-   <span data-ttu-id="c0f5e-413">Hiçbir zaman ilk önce doğrulamadan güvenilmeyen veri kaynağından bir nesne grafiğinin seri durumdan güven.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-413">Never trust an object graph deserialized from an untrusted data source without validating it first.</span></span> <span data-ttu-id="c0f5e-414">Tek tek her nesne bir bütün olmayabilir tutarlı bir duruma, ancak nesne grafiğinin olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-414">Each individual object may be in a consistent state, but the object graph as a whole may not be.</span></span> <span data-ttu-id="c0f5e-415">Ayrıca, Nesne grafiği koruma modu devre dışı bırakılırsa, seri durumdan çıkarılmış grafik aynı nesne birden çok başvuran sahip olabilir veya döngüsel başvuru.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-415">Furthermore, even if the object graph preservation mode is disabled, the deserialized graph may have multiple references to the same object or have circular references.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="c0f5e-416">[Seri hale getirme ve seri durumdan çıkarma](../../../../docs/framework/wcf/feature-details/serialization-and-deserialization.md).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-416"> [Serialization and Deserialization](../../../../docs/framework/wcf/feature-details/serialization-and-deserialization.md).</span></span>  
  
### <a name="using-the-netdatacontractserializer-securely"></a><span data-ttu-id="c0f5e-417">NetDataContractSerializer güvenli bir şekilde kullanma</span><span class="sxs-lookup"><span data-stu-id="c0f5e-417">Using the NetDataContractSerializer Securely</span></span>  
 <span data-ttu-id="c0f5e-418"><xref:System.Runtime.Serialization.NetDataContractSerializer> Sıkı bağlantı türlerini kullanan bir seri hale getirme altyapısıdır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-418">The <xref:System.Runtime.Serialization.NetDataContractSerializer> is a serialization engine that uses tight coupling to types.</span></span> <span data-ttu-id="c0f5e-419">Bu benzer <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> ve <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-419">This is similar to the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>.</span></span> <span data-ttu-id="c0f5e-420">Diğer bir deyişle, okuyarak örneği oluşturmak için tür belirler [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] gelen veri derleme ve tür adı.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-420">That is, it determines which type to instantiate by reading the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] assembly and type name from the incoming data.</span></span> <span data-ttu-id="c0f5e-421">Bir parçası olmasına rağmen [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], bu serileştirme motoruna takma sağlanan bir yolu yoktur; özel kod yazılabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-421">Although it is a part of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], there is no supplied way of plugging in this serialization engine; custom code must be written.</span></span> <span data-ttu-id="c0f5e-422">`NetDataContractSerializer` Öncelikle geçişini kolaylaştırmak için sağlanan [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] remoting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c0f5e-422">The `NetDataContractSerializer` is provided primarily to ease migration from [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] remoting to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="c0f5e-423">ilgili bölümünde [seri hale getirme ve seri durumdan çıkarma](../../../../docs/framework/wcf/feature-details/serialization-and-deserialization.md).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-423"> the relevant section in [Serialization and Deserialization](../../../../docs/framework/wcf/feature-details/serialization-and-deserialization.md).</span></span>  
  
 <span data-ttu-id="c0f5e-424">Herhangi bir tür yüklenebilir, ileti gösteriyor olabilir çünkü <xref:System.Runtime.Serialization.NetDataContractSerializer> mekanizması doğası gereği güvenli değil ve yalnızca güvenilen verilerle kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-424">Because the message itself may indicate any type can be loaded, the <xref:System.Runtime.Serialization.NetDataContractSerializer> mechanism is inherently insecure and should be used only with trusted data.</span></span> <span data-ttu-id="c0f5e-425">Yüklemek yalnızca güvenli türler sağlayan bir güvenli, türü sınırlama türü bağlayıcı yazarak Güvenli yapmak mümkündür (kullanarak <xref:System.Runtime.Serialization.NetDataContractSerializer.Binder%2A> özelliği).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-425">It is possible to make it secure by writing a secure, type-limiting type binder that allows only safe types to load (using the <xref:System.Runtime.Serialization.NetDataContractSerializer.Binder%2A> property).</span></span>  
  
 <span data-ttu-id="c0f5e-426">İle güvenilir veri bile kullanıldığında, gelen veri yeterince türü yüklemek için özellikle de belirtebilir <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> özelliği ayarlanmış <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-426">Even when used with trusted data, the incoming data may insufficiently specify the type to load, especially if the <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> property is set to <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple>.</span></span> <span data-ttu-id="c0f5e-427">Uygulamanın dizine veya genel derleme önbelleği erişimi olan herkes, yüklemek için gereken bir yerine kötü amaçlı bir türü yerine kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-427">Anyone with access to the application’s directory or to the global assembly cache can substitute a malicious type in place of the one that is supposed to load.</span></span> <span data-ttu-id="c0f5e-428">Her zaman güvenlik uygulamanızın dizinine ve Genel Derleme Önbelleği doğru izinleri ayarlayarak emin olun.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-428">Always ensure the security of your application’s directory and of the global assembly cache by correctly setting permissions.</span></span>  
  
 <span data-ttu-id="c0f5e-429">Kısmen güvenilen kod erişime izin verirseniz genel olarak, `NetDataContractSerializer` örneği veya aksi halde yedek Seçici denetim (<xref:System.Runtime.Serialization.ISurrogateSelector>) veya seri hale getirme Bağlayıcısı (<xref:System.Runtime.Serialization.SerializationBinder>), kodu denetimi için büyük bir bölümünü üzerinden deneyen Serileştirme/seri durumdan çıkarma işlemi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-429">In general, if you allow partially trusted code access to your `NetDataContractSerializer` instance or otherwise control the surrogate selector (<xref:System.Runtime.Serialization.ISurrogateSelector>) or the serialization binder (<xref:System.Runtime.Serialization.SerializationBinder>), the code may exercise a great deal of control over the serialization/deserialization process.</span></span> <span data-ttu-id="c0f5e-430">Örneğin, rastgele türler ekleme, bilginin açığa çıkmasına neden, sonuçta elde edilen Nesne grafiği veya serileştirilmiş verilerle değiştirmesine veya edebilir sonuç serileştirilmiş akış taşması.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-430">For example, it may inject arbitrary types, lead to information disclosure, tamper with the resulting object graph or serialized data, or overflow the resultant serialized stream.</span></span>  
  
 <span data-ttu-id="c0f5e-431">İle ilgili başka bir güvenlik sorunu `NetDataContractSerializer` hizmeti, kötü amaçlı kod yürütme tehdit reddi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-431">Another security concern with the `NetDataContractSerializer` is a denial of service, not a malicious code execution threat.</span></span> <span data-ttu-id="c0f5e-432">Kullanırken `NetDataContractSerializer`her zaman ayarlayın <xref:System.Runtime.Serialization.NetDataContractSerializer.MaxItemsInObjectGraph%2A> kota güvenli bir değer.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-432">When using the `NetDataContractSerializer`, always set the <xref:System.Runtime.Serialization.NetDataContractSerializer.MaxItemsInObjectGraph%2A> quota to a safe value.</span></span> <span data-ttu-id="c0f5e-433">Yalnızca bu kota tarafından büyüklüğü sınırlı nesnelerinin bir dizisi ayırır küçük bir kötü amaçlı iletisini oluşturmak kolaydır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-433">It is easy to construct a small malicious message that allocates an array of objects whose size is limited only by this quota.</span></span>  
  
### <a name="xmlserializer-specific-threats"></a><span data-ttu-id="c0f5e-434">XmlSerializer özgü tehditleri</span><span class="sxs-lookup"><span data-stu-id="c0f5e-434">XmlSerializer-Specific Threats</span></span>  
 <span data-ttu-id="c0f5e-435"><xref:System.Xml.Serialization.XmlSerializer> Güvenlik modeli benzer olarak <xref:System.Runtime.Serialization.DataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-435">The <xref:System.Xml.Serialization.XmlSerializer> security model is similar to that of the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> <span data-ttu-id="c0f5e-436">Birkaç tehditler, ancak özgü <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-436">A few threats, however, are unique to the <xref:System.Xml.Serialization.XmlSerializer>.</span></span>  
  
 <span data-ttu-id="c0f5e-437"><xref:System.Xml.Serialization.XmlSerializer> Oluşturur *serileştirme derlemelerini* gerçekte serileştirir ve seri durumdan çıkarır; kodu içeren çalışma zamanında bir geçici dosyalar dizininde bu derlemeler oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-437">The <xref:System.Xml.Serialization.XmlSerializer> generates *serialization assemblies* at runtime that contain code that actually serializes and deserializes; these assemblies are created in a temporary files directory.</span></span> <span data-ttu-id="c0f5e-438">Başka bir işlem veya kullanıcı bu dizin için erişim haklarını varsa, bunlar rasgele koduyla serileştirme/seri durumdan çıkarma kod üzerine yazabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-438">If some other process or user has access rights to that directory, they may overwrite the serialization/deserialization code with arbitrary code.</span></span> <span data-ttu-id="c0f5e-439"><xref:System.Xml.Serialization.XmlSerializer> Serileştirme/seri durumdan çıkarma kod yerine kendi güvenlik bağlamı kullanarak bu kodu çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-439">The <xref:System.Xml.Serialization.XmlSerializer> then runs this code using its security context, instead of the serialization/deserialization code.</span></span> <span data-ttu-id="c0f5e-440">İzinler, bunun olmaması için geçici dosyalar dizini üzerinde doğru şekilde ayarlandığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-440">Make sure the permissions are set correctly on the temporary files directory to prevent this from happening.</span></span>  
  
 <span data-ttu-id="c0f5e-441"><xref:System.Xml.Serialization.XmlSerializer> Da içinde kullandığı önceden oluşturulmuş serileştirme derlemelerini çalışma zamanında oluşturmak yerine bir moda sahiptir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-441">The <xref:System.Xml.Serialization.XmlSerializer> also has a mode in which it uses pre-generated serialization assemblies instead of generating them at runtime.</span></span> <span data-ttu-id="c0f5e-442">Bu mod tetiklenir her <xref:System.Xml.Serialization.XmlSerializer> uygun serileştirme derlemesini bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-442">This mode is triggered whenever the <xref:System.Xml.Serialization.XmlSerializer> can find a suitable serialization assembly.</span></span> <span data-ttu-id="c0f5e-443"><xref:System.Xml.Serialization.XmlSerializer> Olsun veya olmasın seri hale getirme derlemesi imzalı serileştirilen türleri içeren bütünleştirilmiş kodun imzalamak için kullanılan aynı anahtar ile denetler.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-443">The <xref:System.Xml.Serialization.XmlSerializer> checks whether or not the serialization assembly was signed by the same key that was used to sign the assembly that contains the types being serialized.</span></span> <span data-ttu-id="c0f5e-444">Bu kötü amaçlı derlemelerden serileştirme derlemelerini gösterebilecek koruma sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-444">This offers protection from malicious assemblies being disguised as serialization assemblies.</span></span> <span data-ttu-id="c0f5e-445">Seri hale getirilebilir türler içeren derlemenin değilse, ancak, imzalı <xref:System.Xml.Serialization.XmlSerializer> doğru ada sahip bir derleme kullanır ve bu denetimi gerçekleştiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-445">However, if the assembly that contains your serializable types is not signed, the <xref:System.Xml.Serialization.XmlSerializer> cannot perform this check and uses any assembly with the correct name.</span></span> <span data-ttu-id="c0f5e-446">Kötü amaçlı kod çalıştıran bu mümkün kılar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-446">This makes running malicious code possible.</span></span> <span data-ttu-id="c0f5e-447">Seri hale getirilebilir türler içeren derlemeler her zaman imzala veya sıkı bir şekilde uygulamanızın dizinine ve kötü amaçlı derlemeleri giriş önlemek için Genel Derleme Önbelleği erişimi denetleme.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-447">Always sign the assemblies that contain your serializable types, or tightly control access to your application’s directory and the global assembly cache to prevent the introduction of malicious assemblies.</span></span>  
  
 <span data-ttu-id="c0f5e-448"><xref:System.Xml.Serialization.XmlSerializer> Bir hizmet reddi saldırısına tabi olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-448">The <xref:System.Xml.Serialization.XmlSerializer> can be subject to a denial of service attack.</span></span> <span data-ttu-id="c0f5e-449"><xref:System.Xml.Serialization.XmlSerializer> Sahip olmayan bir `MaxItemsInObjectGraph` kota (kullanılabilir olduğu <xref:System.Runtime.Serialization.DataContractSerializer>).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-449">The <xref:System.Xml.Serialization.XmlSerializer> does not have a `MaxItemsInObjectGraph` quota (as is available on the <xref:System.Runtime.Serialization.DataContractSerializer>).</span></span> <span data-ttu-id="c0f5e-450">Bu nedenle, yalnızca ileti boyutuyla sınırlı nesnelerin rasgele bir tutar çıkarır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-450">Thus, it deserializes an arbitrary amount of objects, limited only by the message size.</span></span>  
  
### <a name="partial-trust-threats"></a><span data-ttu-id="c0f5e-451">Kısmi güven tehditleri</span><span class="sxs-lookup"><span data-stu-id="c0f5e-451">Partial Trust Threats</span></span>  
 <span data-ttu-id="c0f5e-452">Kısmi güven ile çalışan kod ilgili tehditleri ilgili aşağıdaki sorunları unutmayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-452">Note the following concerns regarding threats related to code running with partial trust.</span></span> <span data-ttu-id="c0f5e-453">Bu tehditler, diğer saldırı senaryoları (belirli bir dizeyi ve ardından seri oluşturan Örneğin, kısmen güvenilen kod) ile birlikte kötü amaçlı kısmen güvenilen kod yanı sıra, kötü amaçlı kısmen güvenilen kod içerir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-453">These threats include malicious partially-trusted code as well as malicious partially-trusted code in combination with other attack scenarios (for example, partially-trusted code that constructs a specific string and then deserializing it).</span></span>  
  
-   <span data-ttu-id="c0f5e-454">Hiçbir zaman herhangi bir seri hale getirme bileşenini kullanırken, bu tür kullanımı önce tüm izinleri, assert kapsamında tüm serileştirme senaryodur ve herhangi bir güvenilir olmayan verileri veya nesneleri ile ilgili olmayan olsa bile assert.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-454">When using any serialization components, never assert any permissions before such usage, even if the entire serialization scenario is within the scope of your assert, and you are not dealing with any untrusted data or objects.</span></span> <span data-ttu-id="c0f5e-455">Bu tür kullanımı güvenlik açıklarına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-455">Such usage may lead to security vulnerabilities.</span></span>  
  
-   <span data-ttu-id="c0f5e-456">Kısmen güvenilen kod seri hale getirme işlemi, genişletilebilirlik noktaları (yedekleri), seri hale türleri veya başka yöntemler aracılığıyla denetime sahip olduğu durumlarda kısmen güvenilen kod büyük miktarda çıktısını almak seri hale getirici neden olabilir Hizmet Reddi (DoS) Bu akış alıcıya neden olabilir serileştirilmiş akış verilerini.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-456">In cases where partially-trusted code has control over the serialization process, either through extensibility points (surrogates), types being serialized, or through other means, the partially-trusted code may cause the serializer to output a large amount of data into the serialized stream, which may cause Denial of Service (DoS) to the receiver of this stream.</span></span> <span data-ttu-id="c0f5e-457">DoS tehditleri hassas bir hedef yönelik veri seri hale getirme, değil kısmen güvenilen türleri serileştirmek veya aksi halde kısmen güvenilen kod denetim serileştirme olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-457">If you are serializing data intended for a target that is sensitive to DoS threats, do not serialize partially-trusted types or otherwise let partially-trusted code control serialization.</span></span>  
  
-   <span data-ttu-id="c0f5e-458">Kısmen güvenilen kod erişime izin verirseniz, <xref:System.Runtime.Serialization.DataContractSerializer> örneği veya aksi takdirde denetlemek [veri sözleşmesi yedekleri](../../../../docs/framework/wcf/extending/data-contract-surrogates.md), serileştirme/seri durumdan çıkarma işlemi üzerinde denetim önemli miktarda çalışma.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-458">If you allow partially-trusted code access to your <xref:System.Runtime.Serialization.DataContractSerializer> instance or otherwise control the [Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md), it may exercise a great deal of control over the serialization/deserialization process.</span></span> <span data-ttu-id="c0f5e-459">Örneğin, rastgele türler ekleme, bilginin açığa çıkmasına neden, sonuçta elde edilen Nesne grafiği veya serileştirilmiş verilerle değiştirmesine veya edebilir sonuç serileştirilmiş akış taşması.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-459">For example, it may inject arbitrary types, lead to information disclosure, tamper with the resulting object graph or serialized data, or overflow the resultant serialized stream.</span></span> <span data-ttu-id="c0f5e-460">Eşdeğer bir <xref:System.Runtime.Serialization.NetDataContractSerializer> tehdit "Kullanarak NetDataContractSerializer güvenli bir şekilde" bölümünde açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-460">An equivalent <xref:System.Runtime.Serialization.NetDataContractSerializer> threat is described in the "Using the NetDataContractSerializer Securely" section.</span></span>  
  
-   <span data-ttu-id="c0f5e-461">Varsa <xref:System.Runtime.Serialization.DataContractAttribute> öznitelik türü için geçerli olduğu (veya türü olarak işaretlenmiş `[Serializable]` ancak `ISerializable`), seri durumdan çıkarıcının genel olmayan ya da taleplerin tarafından korunan tüm oluşturucular olsa bile, bu tür bir türünün bir örneği oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-461">If the <xref:System.Runtime.Serialization.DataContractAttribute> attribute is applied to a type (or the type marked as `[Serializable]` but is not `ISerializable`), the deserializer can create an instance of such a type even if all constructors are non-public or protected by demands.</span></span>  
  
-   <span data-ttu-id="c0f5e-462">Hiçbir zaman seri durumdan çıkarma sonucunu seri durumdan çıkarılacak veriler güvenilir ve tüm bilinen türler güvendiğiniz türleri olan sürece güven.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-462">Never trust the result of deserialization unless the data to be deserialized is trusted and you are certain that all known types are types that you trust.</span></span> <span data-ttu-id="c0f5e-463">Bilinen türlerini uygulama yapılandırma dosyasından yüklenen değildir, (ancak bilgisayar yapılandırma dosyasından yüklenir) unutmayın kısmi güvende çalıştırırken.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-463">Note that known types are not loaded from the application configuration file, (but are loaded from the computer configuration file) when running in partial trust.</span></span>  
  
-   <span data-ttu-id="c0f5e-464">Geçirirseniz bir `DataContractSerializer` bir yedek örneğiyle eklenen kısmen güvenilen kod için kod, bu yedek üzerinde değiştirilebilir tüm ayarları değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-464">If you pass a `DataContractSerializer` instance with a surrogate added to partially-trusted code, the code can change any modifiable settings on that surrogate.</span></span>  
  
-   <span data-ttu-id="c0f5e-465">Seri durumdan çıkarılmış nesne için XML okuyucusu (ya da verileri okuduğunuzu) gelen kısmen güvenilen koddan elde edilen seri durumdan çıkarılmış nesne güvenilmeyen verisi olarak kabul eder.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-465">For a deserialized object, if the XML reader (or the data therein) comes from partially-trusted code, treat the resulting deserialized object as untrusted data.</span></span>  
  
-   <span data-ttu-id="c0f5e-466">Olgu, <xref:System.Runtime.Serialization.ExtensionDataObject> türünde hiçbir ortak üyeler içerdiği verilerin güvenli olduğunu gelmez.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-466">The fact that the <xref:System.Runtime.Serialization.ExtensionDataObject> type has no public members does not mean that data within it is secure.</span></span> <span data-ttu-id="c0f5e-467">Bazı verilerin bulunduğu, kısmen güvenilen kod, nesne sonra elle bir nesneye bir ayrıcalıklı veri kaynağından seri durumdan Örneğin, kısmen güvenilen kod verileri okuyabilir `ExtensionDataObject` nesnesi seri hale getirilirken tarafından.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-467">For example, if you deserialize from a privileged data source into an object in which some data resides, then hand that object to partially-trusted code, the partially-trusted code can read the data in the `ExtensionDataObject` by serializing the object.</span></span> <span data-ttu-id="c0f5e-468">Ayar göz önünde bulundurun <xref:System.Runtime.Serialization.DataContractSerializer.IgnoreExtensionDataObject%2A> için `true` ne zaman ayrıcalıklı veri kaynağından daha sonraki bir nesnede seri durumdan izin ver geçirilen kısmen güvenilen kod.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-468">Consider setting <xref:System.Runtime.Serialization.DataContractSerializer.IgnoreExtensionDataObject%2A> to `true` when deserializing from a privileged data source into an object that is later passed to partially-trusted code.</span></span>  
  
-   <span data-ttu-id="c0f5e-469"><xref:System.Runtime.Serialization.DataContractSerializer>ve <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> özel, korumalı, iç ve Genel üyeler serileştirmek tam güvende destekler.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-469"><xref:System.Runtime.Serialization.DataContractSerializer> and <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> support the serialization of private, protected, internal, and public members in full trust.</span></span> <span data-ttu-id="c0f5e-470">Ancak, kısmi güvende yalnızca Genel üyeler seri hale getirilebilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-470">However, in partial trust, only public members can be serialized.</span></span> <span data-ttu-id="c0f5e-471">A `SecurityException` genel olmayan üyesi seri hale getirmek bir uygulama denemesi olursa oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-471">A `SecurityException` is thrown if an application attempts to serialize a non-public member.</span></span>  
  
     <span data-ttu-id="c0f5e-472">İç izin vermek veya kısmi güvende serileştirilmesi için korumalı iç üyeleri `System.Runtime.CompilerServices.InternalsVisibleTo` derleme özniteliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-472">To allow internal or protected internal members to be serialized in partial trust, use the `System.Runtime.CompilerServices.InternalsVisibleTo` assembly attribute.</span></span> <span data-ttu-id="c0f5e-473">Bu öznitelik iç üyeleri başka bir derleme halinde görünür olduğunu bildirmek bir derleme sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-473">This attribute allows an assembly to declare that its internal members are visible to some other assembly.</span></span> <span data-ttu-id="c0f5e-474">Bu durumda, serileştirilmiş kendi iç üyelere sahip istediği bir derlemeyi iç üyeleri için System.Runtime.Serialization.dll görünür olduğunu bildirir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-474">In this case, an assembly that wants to have its internal members serialized declares that its internal members are visible to System.Runtime.Serialization.dll.</span></span>  
  
     <span data-ttu-id="c0f5e-475">Bu yaklaşımın avantajı, yükseltilmiş kod oluşturma yolu gerektirmez ' dir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-475">The advantage of this approach is that it does not require an elevated code generation path.</span></span>  
  
     <span data-ttu-id="c0f5e-476">Aynı anda iki ana dezavantajları vardır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-476">At the same time, there are two major disadvantages.</span></span>  
  
     <span data-ttu-id="c0f5e-477">İlk dezavantajı, katılımı özelliğidir `InternalsVisibleTo` derleme çapında bir özniteliktir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-477">The first disadvantage is that the opt-in property of the `InternalsVisibleTo` attribute is assembly-wide.</span></span> <span data-ttu-id="c0f5e-478">Diğer bir deyişle, yalnızca belirli bir sınıfı serileştirilmiş kendi iç üyelere sahip olabilir belirtemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-478">That is, you cannot specify that only a certain class can have its internal members serialized.</span></span> <span data-ttu-id="c0f5e-479">Elbette, yine belirli iç üyesi basitçe değil ekleyerek seri değil seçebilirsiniz bir `DataMember` özniteliği bu üye için.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-479">Of course, you can still choose not to serialize a specific internal member, by simply not adding a `DataMember` attribute to that member.</span></span> <span data-ttu-id="c0f5e-480">Benzer şekilde, bir geliştirici üye özel veya hafif görünürlük sorunları ile korunan yerine iç yapmak de seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-480">Similarly, a developer can also choose to make a member internal rather than private or protected, with slight visibility concerns.</span></span>  
  
     <span data-ttu-id="c0f5e-481">İkinci dezavantajı, bunu hala özel veya korumalı üyeleri desteklemediğine ' dir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-481">The second disadvantage is that it still does not support private or protected members.</span></span>  
  
     <span data-ttu-id="c0f5e-482">Kullanımını göstermek için `InternalsVisibleTo` özniteliği kısmi güvende, aşağıdaki programı göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-482">To illustrate the use of the `InternalsVisibleTo` attribute in partial trust, consider the following program:</span></span>  
  
     [!code-csharp[CDF_WCF_SecurityConsiderationsForData#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/cdf_wcf_securityconsiderationsfordata/cs/program.cs#1)]  
  
     <span data-ttu-id="c0f5e-483">Yukarıdaki örnekte `PermissionsHelper.InternetZone` karşılık gelen `PermissionSet` kısmi güven.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-483">In the example above, `PermissionsHelper.InternetZone` corresponds to the `PermissionSet` for partial trust.</span></span> <span data-ttu-id="c0f5e-484">Şimdi, olmadan `InternalsVisibleToAttribute`, uygulama atma başarısız olur bir `SecurityException` belirten ortak olmayan üyeler kısmi güvende seri hale getirilemez.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-484">Now, without `InternalsVisibleToAttribute`, the application will fail, throwing a `SecurityException` indicating that non-public members cannot be serialized in partial trust.</span></span>  
  
     <span data-ttu-id="c0f5e-485">Ancak, aşağıdaki satırı kaynak dosyasını eklerseniz program başarıyla çalışır.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-485">However, if we add the following line to the source file, the program runs successfully.</span></span>  
  
     [!code-csharp[CDF_WCF_SecurityConsiderationsForData#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/cdf_wcf_securityconsiderationsfordata/cs/program.cs#2)]  
  
## <a name="other-state-management-concerns"></a><span data-ttu-id="c0f5e-486">Diğer durum yönetimi konuları</span><span class="sxs-lookup"><span data-stu-id="c0f5e-486">Other State Management Concerns</span></span>  
 <span data-ttu-id="c0f5e-487">Nesne durumu yönetimi ile ilgili bazı sorunları tümleştirilmediği şunlardır:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-487">A few other concerns regarding object state management are worth mentioning:</span></span>  
  
-   <span data-ttu-id="c0f5e-488">İleti ulaştığında ile akış aktarma akışı tabanlı programlama modeli kullanarak, ileti işlenmesini oluşur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-488">When using the stream-based programming model with a streaming transport, processing of the message occurs as the message arrives.</span></span> <span data-ttu-id="c0f5e-489">İletiyi gönderen, daha fazla içerik bekleniyorsa, kodunuzu öngörülemeyen durumda bırakarak akış ortasında gönderme işlemini iptal.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-489">The sender of the message may abort the send operation in the middle of the stream, leaving your code in an unpredictable state if more content was expected.</span></span> <span data-ttu-id="c0f5e-490">Genel olarak, tam olan akışta güvenmeyin ve herhangi bir iş akışı geri durduruldu durumunda, alınamaz akışı tabanlı bir işlemde gerçekleştirmeyin.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-490">In general, do not rely on the stream being complete, and do not perform any work in a stream-based operation that cannot be rolled back in case the stream is aborted.</span></span> <span data-ttu-id="c0f5e-491">Bu durum burada bir ileti olabilir hatalı biçimlendirilmiş akış gövde sonra durum için de geçerlidir (örneğin, SOAP Zarfı için bir bitiş etiketi eksik olabilir veya ikinci bir ileti gövdesi olabilir).</span><span class="sxs-lookup"><span data-stu-id="c0f5e-491">This also applies to the situation where a message may be malformed after the streaming body (for example, it may be missing an end tag for the SOAP envelope or may have a second message body).</span></span>  
  
-   <span data-ttu-id="c0f5e-492">Kullanarak `IExtensibleDataObject` özelliği yayınlaması hassas verileri neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-492">Using the `IExtensibleDataObject` feature may cause sensitive data to be emitted.</span></span> <span data-ttu-id="c0f5e-493">Güvenilmeyen bir kaynaktan veri veri Sözleşmelerle içine kabul ettiğiniz, `IExtensibleObjectData` ve daha sonra onu güvenli bir kanal nerede imzalı iletiler üzerinde yeniden yayma, büyük olasılıkla bildiğiniz bir şey hakkında veriler için doğrulanmasından.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-493">If you are accepting data from an untrusted source into data contracts with `IExtensibleObjectData` and later re-emitting it on a secure channel where messages are signed, you are potentially vouching for data you know nothing about.</span></span> <span data-ttu-id="c0f5e-494">Ayrıca, gönderdiğiniz genel durumu veri bilinen ve bilinmeyen parçalarını dikkate varsa geçersiz olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-494">Moreover, the overall state you are sending may be invalid if you take both the known and unknown pieces of data into account.</span></span> <span data-ttu-id="c0f5e-495">Her iki seçmeli olarak uzantısını verileri özelliğini ayarlayarak bu durumdan kaçınmak `null` veya seçmeli olarak devre dışı bırakarak `IExtensibleObjectData` özelliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-495">Avoid this situation by either selectively setting the extension data property to `null` or by selectively disabling the `IExtensibleObjectData` feature.</span></span>  
  
## <a name="schema-import"></a><span data-ttu-id="c0f5e-496">Şema alma</span><span class="sxs-lookup"><span data-stu-id="c0f5e-496">Schema Import</span></span>  
 <span data-ttu-id="c0f5e-497">Normalde, türleri oluşturmak için şemayı içe aktarma işlemi yalnızca tasarım zamanında, örneğin, kullanarak olur [ServiceModel meta veri yardımcı Programracı (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) istemci sınıfı oluşturmak için bir Web hizmeti üzerinde.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-497">Normally, the process of importing schema to generate types happens only at design time, for example, when using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) on a Web service to generate a client class.</span></span> <span data-ttu-id="c0f5e-498">Ancak, daha gelişmiş senaryolarda, çalışma zamanında şema işleyebilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-498">However, in more advanced scenarios, you may process schema at runtime.</span></span> <span data-ttu-id="c0f5e-499">Bunun yapılması, hizmet reddi riskleri ortaya çıkarabilirsiniz olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-499">Be aware that doing so can expose you to denial-of-service risks.</span></span> <span data-ttu-id="c0f5e-500">Bazı şeması içeri aktarılacak uzun sürebilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-500">Some schema may take a long time to be imported.</span></span> <span data-ttu-id="c0f5e-501">Hiçbir zaman kullanmayın <xref:System.Xml.Serialization.XmlSerializer> şema alma bileşen şemaları büyük olasılıkla güvenilmeyen bir kaynaktan gelip senaryolarda.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-501">Never use the <xref:System.Xml.Serialization.XmlSerializer> schema import component in such scenarios if schemas are possibly coming from an untrusted source.</span></span>  
  
## <a name="threats-specific-to-aspnet-ajax-integration"></a><span data-ttu-id="c0f5e-502">Tehditler belirli ASP.NET AJAX tümleştirme</span><span class="sxs-lookup"><span data-stu-id="c0f5e-502">Threats Specific to ASP.NET AJAX Integration</span></span>  
 <span data-ttu-id="c0f5e-503">Ne zaman kullanıcı arabirimini uygulayan <xref:System.ServiceModel.Description.WebScriptEnablingBehavior> veya <xref:System.ServiceModel.Description.WebHttpBehavior>, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] XML ve JSON iletileri kabul edebilir bir uç noktasını kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-503">When the user implements <xref:System.ServiceModel.Description.WebScriptEnablingBehavior> or <xref:System.ServiceModel.Description.WebHttpBehavior>, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] exposes an endpoint that can accept both XML and JSON messages.</span></span> <span data-ttu-id="c0f5e-504">Ancak, hem XML okuyucusu ve JSON okuyucu tarafından kullanılan okuyucu kotaları, yalnızca bir kümesi yok.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-504">However, there is only one set of reader quotas, used both by the XML reader and the JSON reader.</span></span> <span data-ttu-id="c0f5e-505">Bazı kota ayarları bir okuyucu için uygun ancak diğer çok büyük olabilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-505">Some quota settings may be appropriate for one reader but too large for the other.</span></span>  
  
 <span data-ttu-id="c0f5e-506">Uygularken `WebScriptEnablingBehavior`, kullanıcı bir JavaScript proxy'si uç noktada kullanıma sunmak için olanağına sahiptir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-506">When implementing `WebScriptEnablingBehavior`, the user has the option to expose a JavaScript proxy at the endpoint.</span></span> <span data-ttu-id="c0f5e-507">Aşağıdaki güvenlik konularını ele alınmalıdır:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-507">The following security issues must be considered:</span></span>  
  
-   <span data-ttu-id="c0f5e-508">(İşlemi adları, parametre adları ve benzeri) hizmeti hakkında bilgi JavaScript proxy'si incelenerek elde edilebilir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-508">Information about the service (operation names, parameter names, and so on) can be obtained by examining the JavaScript proxy.</span></span>  
  
-   <span data-ttu-id="c0f5e-509">JavaScript uç nokta kullanılırken, hassas ve özel bilgileri istemci Web tarayıcısının önbelleğine korunur.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-509">When using the JavaScript endpoint, sensitive and private information might be retained in the client Web browser cache.</span></span>  
  
## <a name="a-note-on-components"></a><span data-ttu-id="c0f5e-510">Not bileşenleri</span><span class="sxs-lookup"><span data-stu-id="c0f5e-510">A Note on Components</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="c0f5e-511">bir esnek ve özelleştirilebilir sistemidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-511"> is a flexible and customizable system.</span></span> <span data-ttu-id="c0f5e-512">Bu konuda içeriğini çoğunu odak en sık karşılaşılan [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kullanım senaryoları.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-512">Most of the contents of this topic focus on the most common [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usage scenarios.</span></span> <span data-ttu-id="c0f5e-513">Ancak, bu bileşenleri oluşturmak mümkündür [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] birçok farklı yolla sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-513">However, it is possible to compose components [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides in many different ways.</span></span> <span data-ttu-id="c0f5e-514">Her bileşen kullanarak güvenlik etkilerini anlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-514">It is important to understand the security implications of using each component.</span></span> <span data-ttu-id="c0f5e-515">Özellikle:</span><span class="sxs-lookup"><span data-stu-id="c0f5e-515">In particular:</span></span>  
  
-   <span data-ttu-id="c0f5e-516">XML okuyucular kullandığınızda gerekir okuyucular kullanın <xref:System.Xml.XmlDictionaryReader> sınıfı, aksine başka bir okuyucu sağlar.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-516">When you must use XML readers, use the readers the <xref:System.Xml.XmlDictionaryReader> class provides as opposed to any other readers.</span></span> <span data-ttu-id="c0f5e-517">Güvenli okuyucular kullanılarak oluşturulan <xref:System.Xml.XmlDictionaryReader.CreateTextReader%2A>, <xref:System.Xml.XmlDictionaryReader.CreateBinaryReader%2A>, veya <xref:System.Xml.XmlDictionaryReader.CreateMtomReader%2A> yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-517">Safe readers are created using <xref:System.Xml.XmlDictionaryReader.CreateTextReader%2A>, <xref:System.Xml.XmlDictionaryReader.CreateBinaryReader%2A>, or <xref:System.Xml.XmlDictionaryReader.CreateMtomReader%2A> methods.</span></span> <span data-ttu-id="c0f5e-518">Kullanmayın <xref:System.Xml.XmlReader.Create%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-518">Do not use the <xref:System.Xml.XmlReader.Create%2A> method.</span></span> <span data-ttu-id="c0f5e-519">Okuyucular her zaman güvenli kotaları yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-519">Always configure the readers with safe quotas.</span></span> <span data-ttu-id="c0f5e-520">Seri hale getirme altyapıları [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] yalnızca güvenli XML okuyuculardan ile kullanıldığında güvenlidir [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c0f5e-520">The serialization engines in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] are secure only when used with secure XML readers from [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
-   <span data-ttu-id="c0f5e-521">Kullanırken <xref:System.Runtime.Serialization.DataContractSerializer> potansiyel olarak güvenilmeyen veri serisi için her zaman ayarlayın <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> özelliği.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-521">When using the <xref:System.Runtime.Serialization.DataContractSerializer> to deserialize potentially untrusted data, always set the <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> property.</span></span>  
  
-   <span data-ttu-id="c0f5e-522">Bir ileti oluştururken ayarlama `maxSizeOfHeaders` parametresi varsa `MaxReceivedMessageSize` yeterli koruma sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-522">When creating a message, set the `maxSizeOfHeaders` parameter if `MaxReceivedMessageSize` does not offer enough protection.</span></span>  
  
-   <span data-ttu-id="c0f5e-523">Bir kodlayıcı oluştururken, her zaman ilgili kotalar gibi yapılandırmadan `MaxSessionSize` ve `MaxBufferSize`.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-523">When creating an encoder, always configure the relevant quotas, such as `MaxSessionSize` and `MaxBufferSize`.</span></span>  
  
-   <span data-ttu-id="c0f5e-524">Bir XPath İleti Filtresi kullanırken ayarlayın <xref:System.ServiceModel.Dispatcher.XPathMessageFilter.NodeQuota%2A> filtre ziyaret XML düğümlerini miktarını sınırlamak için.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-524">When using an XPath message filter, set the <xref:System.ServiceModel.Dispatcher.XPathMessageFilter.NodeQuota%2A> to limit the amount of XML nodes the filter visits.</span></span> <span data-ttu-id="c0f5e-525">Birçok düğümünü ziyaret etmenize gerek kalmadan işlem için uzun zaman alabilir XPath ifadeler kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-525">Do not use XPath expressions that could take a long time to compute without visiting many nodes.</span></span>  
  
-   <span data-ttu-id="c0f5e-526">Genel olarak, bir kota kabul eden herhangi bir bileşeni kullanırken, kendi güvenlik etkilerini anlama ve güvenli bir değere ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-526">In general, when using any component that accepts a quota, understand its security implications and set it to a safe value.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c0f5e-527">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="c0f5e-527">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractSerializer>  
 <xref:System.Xml.XmlDictionaryReader>  
 <xref:System.Xml.Serialization.XmlSerializer>  
 [<span data-ttu-id="c0f5e-528">Veri Anlaşması Bilinen Türler</span><span class="sxs-lookup"><span data-stu-id="c0f5e-528">Data Contract Known Types</span></span>](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md)
