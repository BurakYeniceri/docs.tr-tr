---
title: "Genişletilmiş Koruma İlkesi"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e2616a10-317e-4c34-8023-0c015a80a82f
caps.latest.revision: "6"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: e6c592e387668a51e44fd0ffc8987757c63b4e69
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/22/2017
---
# <a name="extended-protection-policy"></a><span data-ttu-id="c7681-102">Genişletilmiş Koruma İlkesi</span><span class="sxs-lookup"><span data-stu-id="c7681-102">Extended Protection Policy</span></span>
<span data-ttu-id="c7681-103">Genişletilmiş koruma, ADAM-in--middle (MITM) saldırılarına karşı korumak için bir güvenlik girişimidir.</span><span class="sxs-lookup"><span data-stu-id="c7681-103">Extended Protection is a security initiative for protecting against man-in-the-middle (MITM) attacks.</span></span> <span data-ttu-id="c7681-104">MITM saldırı bir güvenlik tehdididir bir MITM bir istemcinin kimlik bilgilerini alır ve bir sunucuya iletir.</span><span class="sxs-lookup"><span data-stu-id="c7681-104">A MITM attack is a security threat in which a MITM takes a client’s credentials and forwards it to a server.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="c7681-105">Gösteriler</span><span class="sxs-lookup"><span data-stu-id="c7681-105">Demonstrates</span></span>  
 <span data-ttu-id="c7681-106">Genişletilmiş koruma</span><span class="sxs-lookup"><span data-stu-id="c7681-106">Extended protection</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="c7681-107">Tartışma</span><span class="sxs-lookup"><span data-stu-id="c7681-107">Discussion</span></span>  
 <span data-ttu-id="c7681-108">Kerberos, Özet veya HTTPS kullanarak NTLM kullanarak uygulamaları kimliğini doğrularken bir aktarım düzeyi güvenlik (TLS) kanalı ilk kurulduktan sonra ve ardından kimlik doğrulaması güvenli kanalı kullanılarak gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="c7681-108">When applications authenticate using Kerberos, Digest or NTLM using HTTPS, a Transport Level Security (TLS) channel is first established and then authentication takes place using the secure channel.</span></span> <span data-ttu-id="c7681-109">Ancak, SSL ile oluşturulan oturum anahtarı ile kimlik doğrulaması sırasında oluşturulan oturum anahtarı arasındaki hiçbir bağlama yok.</span><span class="sxs-lookup"><span data-stu-id="c7681-109">However, there is no binding between the session key generated by SSL and the session key generated during authentication.</span></span> <span data-ttu-id="c7681-110">Tüm MITM kendisini istemci ve sunucu arasında kurmak ve sunucu güvenli kanal istemciden kurulan olup olmadığını bilmek hiçbir şekilde olduğundan taşıma kanalını güvenli olsa bile, istemciden istekleri iletme Başlat veya bir MITM.</span><span class="sxs-lookup"><span data-stu-id="c7681-110">Any MITM can establish itself between the client and the server and start forwarding the requests from the client, even when the transport channel itself is secure, because the server has no way of knowing whether the secure channel has been established from the client or a MITM.</span></span> <span data-ttu-id="c7681-111">Bu senaryoda sağlayacak şekilde sunucunun bir MITM olup olmadığını Algıla iç kimlik doğrulama kanalı ile dış TLS kanalına bağlamak için çözümüdür.</span><span class="sxs-lookup"><span data-stu-id="c7681-111">The solution in this scenario is to bind the outer TLS channel with the inner authentication channel such that the server can detect if there is a MITM.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c7681-112">Bu örnek yalnızca IIS üzerinde barındırıldığında çalışır ve Cassini HTTPS desteklemediğinden Cassini – Visual Studio geliştirme sunucusu çalışamaz.</span><span class="sxs-lookup"><span data-stu-id="c7681-112">This sample only works when hosted on IIS and cannot work on Cassini – Visual Studio Development Server because Cassini does not support HTTPS.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c7681-113">Bu özellik şu anda yalnızca Windows 7'de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="c7681-113">This feature is currently only available on Windows 7.</span></span> <span data-ttu-id="c7681-114">Aşağıdaki adımlar, Windows 7'ye özeldir.</span><span class="sxs-lookup"><span data-stu-id="c7681-114">The following steps are specific to Windows 7.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="c7681-115">Ayarlamak için derleme ve örnek çalıştırın</span><span class="sxs-lookup"><span data-stu-id="c7681-115">To set up, build, and run the sample</span></span>  
  
1.  <span data-ttu-id="c7681-116">Internet Information Services gelen yükleme **Denetim Masası**, **Program Ekle/Kaldır**, **Windows özelliklerini**.</span><span class="sxs-lookup"><span data-stu-id="c7681-116">Install Internet Information Services from **Control Panel**, **Add/Remove Programs**, **Windows Features**.</span></span>  
  
2.  <span data-ttu-id="c7681-117">Yükleme **Windows kimlik doğrulaması** içinde **Windows özelliklerini**, **Internet Information Services**, **World Wide Web Hizmetleri**,  **Güvenlik**, ve **Windows kimlik doğrulaması**.</span><span class="sxs-lookup"><span data-stu-id="c7681-117">Install **Windows Authentication** in **Windows Features**, **Internet Information Services**, **World Wide Web Services**, **Security**, and **Windows Authentication**.</span></span>  
  
3.  <span data-ttu-id="c7681-118">Yükleme **Windows Communication Foundation HTTP etkinleştirmesi** içinde **Windows özelliklerini**, **Microsoft .NET Framework 3.5.1**, ve **Windows iletişimi Foundation HTTP etkinleştirme**.</span><span class="sxs-lookup"><span data-stu-id="c7681-118">Install **Windows Communication Foundation HTTP Activation** in **Windows Features**, **Microsoft .NET Framework 3.5.1**, and **Windows Communication Foundation HTTP Activation**.</span></span>  
  
4.  <span data-ttu-id="c7681-119">Bu örnek, Internet Information Services (IIS) Yöneticisi'nden yüklenebilecek bir sunucu sertifikası varlığını gerekir böylece sunucu ile güvenli bir kanal oluşturmak için istemcinin gerektirir.</span><span class="sxs-lookup"><span data-stu-id="c7681-119">This sample requires the client to establish a secure channel with the server, so it requires the presence of a server certificate which can be installed from Internet Information Services (IIS) Manager.</span></span>  
  
    1.  <span data-ttu-id="c7681-120">IIS Yöneticisi'ni açın.</span><span class="sxs-lookup"><span data-stu-id="c7681-120">Open IIS Manager.</span></span> <span data-ttu-id="c7681-121">Açık **sunucu sertifikaları**, göründüğü içinde **özellik görünümü** sekmesinde (makine adı) kök düğümü seçildiğinde.</span><span class="sxs-lookup"><span data-stu-id="c7681-121">Open **Server certificates**, which appears in the **Feature View** tab when the root node (machine name) is selected.</span></span>  
  
    2.  <span data-ttu-id="c7681-122">Bu örnek test amacıyla, otomatik olarak imzalanan bir sertifika oluşturun.</span><span class="sxs-lookup"><span data-stu-id="c7681-122">For the purpose of testing this sample, create a self-signed certificate.</span></span> <span data-ttu-id="c7681-123">Internet Explorer'ı güvenli olmadığı sertifika hakkında soracak şekilde istemiyorsanız, sertifikayı güvenilen kök sertifika yetkilisi depolarında yükleyin.</span><span class="sxs-lookup"><span data-stu-id="c7681-123">If you do not want Internet Explorer to prompt you about the certificate not being secure, install the certificate in the Trusted Certificate Root authority store.</span></span>  
  
5.  <span data-ttu-id="c7681-124">Açık **Eylemler** varsayılan Web sitesi için bölmesi.</span><span class="sxs-lookup"><span data-stu-id="c7681-124">Open the **Actions** pane for the default Web site.</span></span> <span data-ttu-id="c7681-125">Tıklatın **Düzenle Site**, **bağlamaları**.</span><span class="sxs-lookup"><span data-stu-id="c7681-125">Click **Edit Site**, **Bindings**.</span></span> <span data-ttu-id="c7681-126">Bir tür olarak HTTPS eklemek henüz yoksa, bağlantı noktası numarası 443'tür.</span><span class="sxs-lookup"><span data-stu-id="c7681-126">Add HTTPS as a type if not already present, with port number 443.</span></span> <span data-ttu-id="c7681-127">Önceki adımda oluşturulan SSL sertifika atayın.</span><span class="sxs-lookup"><span data-stu-id="c7681-127">Assign the SSL certificate created in the preceding step.</span></span>  
  
6.  <span data-ttu-id="c7681-128">Hizmet oluşturun.</span><span class="sxs-lookup"><span data-stu-id="c7681-128">Build the service.</span></span> <span data-ttu-id="c7681-129">Bu IIS içinde bir sanal dizin oluşturur ve .dll, .svc ve .config dosyaları barındırılan Web hizmeti için gerekli olarak kopyalar.</span><span class="sxs-lookup"><span data-stu-id="c7681-129">This creates a virtual directory in IIS, and copies the .dll, .svc and .config files as required for the service to be Web hosted.</span></span>  
  
7.  <span data-ttu-id="c7681-130">IIS Yöneticisi'ni açın.</span><span class="sxs-lookup"><span data-stu-id="c7681-130">Open IIS Manager.</span></span> <span data-ttu-id="c7681-131">Sanal dizin sağ tıklayın (**ExtendedProtection**), önceki adımda oluşturulmuş.</span><span class="sxs-lookup"><span data-stu-id="c7681-131">Right-click the virtual directory (**ExtendedProtection**), which was created in the preceding step.</span></span> <span data-ttu-id="c7681-132">Seçin **uygulamasına dönüştürün**.</span><span class="sxs-lookup"><span data-stu-id="c7681-132">Select **Convert to Application**.</span></span>  
  
8.  <span data-ttu-id="c7681-133">Açık **kimlik doğrulaması** bu sanal dizin ve etkinleştirmek için IIS Yöneticisi'nde Modülü **Windows kimlik doğrulaması**.</span><span class="sxs-lookup"><span data-stu-id="c7681-133">Open the **Authentication** module in IIS Manager for this virtual directory and enable **Windows Authentication**.</span></span>  
  
9. <span data-ttu-id="c7681-134">Açık **Gelişmiş ayarları** altında **Windows kimlik doğrulaması** bu sanal dizin için ve ayarlamak **gerekli**.</span><span class="sxs-lookup"><span data-stu-id="c7681-134">Open **Advanced Settings** under **Windows Authentication** for this virtual directory and set it to **Required**.</span></span>  
  
10. <span data-ttu-id="c7681-135">HTTPS URL'sini bir tarayıcı penceresi (bir tam etki alanı adı sağlayın) erişerek hizmetini test edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c7681-135">You can test the service by accessing the HTTPS URL from a browser window (Provide a fully-qualified domain name).</span></span> <span data-ttu-id="c7681-136">Bu URL uzak bir makineden erişmek isterseniz, güvenlik duvarının tüm gelen HTTP ve HTTPS bağlantıları için açıldığında emin olun.</span><span class="sxs-lookup"><span data-stu-id="c7681-136">If you want to access this URL from a remote machine, make sure that the firewall is opened for all incoming HTTP and HTTPS connections.</span></span>  
  
11. <span data-ttu-id="c7681-137">İstemci yapılandırma dosyasını açın ve değiştirir istemci veya uç nokta adresi özniteliği için bir tam etki alanı ad `<<full_machine_name>>`.</span><span class="sxs-lookup"><span data-stu-id="c7681-137">Open the client configuration file and provide a fully-qualified domain name for the client or endpoint address attribute that replaces `<<full_machine_name>>`.</span></span>  
  
12. <span data-ttu-id="c7681-138">İstemciyi çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="c7681-138">Run the client.</span></span> <span data-ttu-id="c7681-139">İstemci, güvenli bir kanal oluşturur ve genişletilmiş koruma kullanan hizmeti ile iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="c7681-139">The client communicates with the service, which establishes a secure channel and uses extended protection.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="c7681-140">Örnekler, makinenizde zaten yüklü olabilir.</span><span class="sxs-lookup"><span data-stu-id="c7681-140">The samples may already be installed on your machine.</span></span> <span data-ttu-id="c7681-141">Devam etmeden önce aşağıdaki (varsayılan) dizin denetleyin.</span><span class="sxs-lookup"><span data-stu-id="c7681-141">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="c7681-142">Bu dizin mevcut değilse, Git [Windows Communication Foundation (WCF) ve .NET Framework 4 için Windows Workflow Foundation (WF) örnek](http://go.microsoft.com/fwlink/?LinkId=150780) tüm indirmek için [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] ve [!INCLUDE[wf1](../../../../includes/wf1-md.md)] örnekleri.</span><span class="sxs-lookup"><span data-stu-id="c7681-142">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="c7681-143">Bu örnek aşağıdaki dizinde bulunur.</span><span class="sxs-lookup"><span data-stu-id="c7681-143">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Services\Security\ExtendedProtection`
