---
title: "İzlenecek yol: Windows Forms Uygulaması'nda Veri Akışı Kullanma"
ms.date: 03/30/2017
ms.prod: .net
ms.technology: dotnet-standard
ms.topic: article
helpviewer_keywords:
- TPL dataflow library, in Windows Forms
- Task Parallel Library, dataflows
- Windows Forms, and TPL
ms.assetid: 9c65cdf7-660c-409f-89ea-59d7ec8e127c
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 8c0d44ca7933626c95603ccc81102889ba4c23cb
ms.sourcegitcommit: c0dd436f6f8f44dc80dc43b07f6841a00b74b23f
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/19/2018
---
# <a name="walkthrough-using-dataflow-in-a-windows-forms-application"></a><span data-ttu-id="aa522-102">İzlenecek yol: Windows Forms Uygulaması'nda Veri Akışı Kullanma</span><span class="sxs-lookup"><span data-stu-id="aa522-102">Walkthrough: Using Dataflow in a Windows Forms Application</span></span>
<span data-ttu-id="aa522-103">Bu belge, bir Windows Forms uygulaması'nda Görüntü işleme gerçekleştirmek veri akışı bloklarının bir ağ oluşturmak gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="aa522-103">This document demonstrates how to create a network of dataflow blocks that perform image processing in a Windows Forms application.</span></span>  
  
 <span data-ttu-id="aa522-104">Bu örnek belirtilen klasöründen görüntü dosyaları yükler, bileşik bir görüntü oluşturur ve sonucu görüntüler.</span><span class="sxs-lookup"><span data-stu-id="aa522-104">This example loads image files from the specified folder, creates a composite image, and displays the result.</span></span> <span data-ttu-id="aa522-105">Örnek rota görüntülerine ağ üzerinden veri akışı modelini kullanır.</span><span class="sxs-lookup"><span data-stu-id="aa522-105">The example uses the dataflow model to route images through the network.</span></span> <span data-ttu-id="aa522-106">Veri akışı modelinde iletileri göndererek bağımsız bir program bileşenlerinin birbirleriyle iletişim.</span><span class="sxs-lookup"><span data-stu-id="aa522-106">In the dataflow model, independent components of a program communicate with one another by sending messages.</span></span> <span data-ttu-id="aa522-107">Bir bileşen bir ileti aldığında, bazı eylemleri gerçekleştirir ve ardından sonucu başka bir bileşene geçirir.</span><span class="sxs-lookup"><span data-stu-id="aa522-107">When a component receives a message, it performs some action and then passes the result to another component.</span></span> <span data-ttu-id="aa522-108">Bu, uygulama denetim yapıları, örneğin kullanan denetim akışı modelini, koşullu deyimler, döngüler ve benzeri işlemlerin bir programda sırasını denetlemek için karşılaştırın.</span><span class="sxs-lookup"><span data-stu-id="aa522-108">Compare this with the control flow model, in which an application uses control structures, for example, conditional statements, loops, and so on, to control the order of operations in a program.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="aa522-109">Önkoşullar</span><span class="sxs-lookup"><span data-stu-id="aa522-109">Prerequisites</span></span>  
 <span data-ttu-id="aa522-110">Okuma [veri akışı](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) bu kılavuza başlamadan önce.</span><span class="sxs-lookup"><span data-stu-id="aa522-110">Read [Dataflow](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) before you start this walkthrough.</span></span>  

[!INCLUDE [tpl-install-instructions](../../../includes/tpl-install-instructions.md)]

## <a name="sections"></a><span data-ttu-id="aa522-111">Bölümler</span><span class="sxs-lookup"><span data-stu-id="aa522-111">Sections</span></span>  
 <span data-ttu-id="aa522-112">Bu kılavuz aşağıdaki bölümleri içerir:</span><span class="sxs-lookup"><span data-stu-id="aa522-112">This walkthrough contains the following sections:</span></span>  
  
-   [<span data-ttu-id="aa522-113">Windows Forms uygulaması oluşturma</span><span class="sxs-lookup"><span data-stu-id="aa522-113">Creating the Windows Forms Application</span></span>](#winforms)  
  
-   [<span data-ttu-id="aa522-114">Veri akışı ağ oluşturma</span><span class="sxs-lookup"><span data-stu-id="aa522-114">Creating the Dataflow Network</span></span>](#network)  
  
-   [<span data-ttu-id="aa522-115">Veri akışı ağ için kullanıcı arabirimi bağlanma</span><span class="sxs-lookup"><span data-stu-id="aa522-115">Connecting the Dataflow Network to the User Interface</span></span>](#ui)  
  
-   [<span data-ttu-id="aa522-116">Tam bir örnek</span><span class="sxs-lookup"><span data-stu-id="aa522-116">The Complete Example</span></span>](#complete)  
  
<a name="winforms"></a>   
## <a name="creating-the-windows-forms-application"></a><span data-ttu-id="aa522-117">Windows Forms uygulaması oluşturma</span><span class="sxs-lookup"><span data-stu-id="aa522-117">Creating the Windows Forms Application</span></span>  
 <span data-ttu-id="aa522-118">Bu bölümde, temel Windows Forms uygulaması oluşturma ve denetimleri ana forma ekleme açıklar.</span><span class="sxs-lookup"><span data-stu-id="aa522-118">This section describes how to create the basic Windows Forms application and add controls to the main form.</span></span>  
  
#### <a name="to-create-the-windows-forms-application"></a><span data-ttu-id="aa522-119">Form uygulama Windows oluşturmak için</span><span class="sxs-lookup"><span data-stu-id="aa522-119">To Create the Windows Forms Application</span></span>  
  
1.  <span data-ttu-id="aa522-120">İçinde [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], oluşturma bir [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] veya Visual Basic **Windows Forms uygulaması** projesi.</span><span class="sxs-lookup"><span data-stu-id="aa522-120">In [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], create a [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] or Visual Basic **Windows Forms Application** project.</span></span> <span data-ttu-id="aa522-121">Bu belgede, proje adı `CompositeImages`.</span><span class="sxs-lookup"><span data-stu-id="aa522-121">In this document, the project is named `CompositeImages`.</span></span>  
  
2.  <span data-ttu-id="aa522-122">Form1.cs ana form için form tasarımcısında (Form1.vb için [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), ekleme bir <xref:System.Windows.Forms.ToolStrip> denetim.</span><span class="sxs-lookup"><span data-stu-id="aa522-122">On the form designer for the main form, Form1.cs (Form1.vb for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), add a <xref:System.Windows.Forms.ToolStrip> control.</span></span>  
  
3.  <span data-ttu-id="aa522-123">Ekleme bir <xref:System.Windows.Forms.ToolStripButton> denetimini <xref:System.Windows.Forms.ToolStrip> denetim.</span><span class="sxs-lookup"><span data-stu-id="aa522-123">Add a <xref:System.Windows.Forms.ToolStripButton> control to the <xref:System.Windows.Forms.ToolStrip> control.</span></span> <span data-ttu-id="aa522-124">Ayarlama <xref:System.Windows.Forms.ToolStripItem.DisplayStyle%2A> özelliğine <xref:System.Windows.Forms.ToolStripItemDisplayStyle.Text> ve <xref:System.Windows.Forms.ToolStripItem.Text%2A> özelliğine **Klasör Seç**.</span><span class="sxs-lookup"><span data-stu-id="aa522-124">Set the <xref:System.Windows.Forms.ToolStripItem.DisplayStyle%2A> property to <xref:System.Windows.Forms.ToolStripItemDisplayStyle.Text> and the <xref:System.Windows.Forms.ToolStripItem.Text%2A> property to **Choose Folder**.</span></span>  
  
4.  <span data-ttu-id="aa522-125">İkinci bir ekleme <xref:System.Windows.Forms.ToolStripButton> denetimini <xref:System.Windows.Forms.ToolStrip> denetim.</span><span class="sxs-lookup"><span data-stu-id="aa522-125">Add a second <xref:System.Windows.Forms.ToolStripButton> control to the <xref:System.Windows.Forms.ToolStrip> control.</span></span> <span data-ttu-id="aa522-126">Ayarlama <xref:System.Windows.Forms.ToolStripItem.DisplayStyle%2A> özelliğine <xref:System.Windows.Forms.ToolStripItemDisplayStyle.Text>, <xref:System.Windows.Forms.ToolStripItem.Text%2A> özelliğine **iptal**ve <xref:System.Windows.Forms.ToolStripItem.Enabled%2A> özelliğine `False`.</span><span class="sxs-lookup"><span data-stu-id="aa522-126">Set the <xref:System.Windows.Forms.ToolStripItem.DisplayStyle%2A> property to <xref:System.Windows.Forms.ToolStripItemDisplayStyle.Text>, the <xref:System.Windows.Forms.ToolStripItem.Text%2A> property to **Cancel**, and the <xref:System.Windows.Forms.ToolStripItem.Enabled%2A> property to `False`.</span></span>  
  
5.  <span data-ttu-id="aa522-127">Ekleme bir <xref:System.Windows.Forms.PictureBox> ana formuna nesnesi.</span><span class="sxs-lookup"><span data-stu-id="aa522-127">Add a <xref:System.Windows.Forms.PictureBox> object to the main form.</span></span> <span data-ttu-id="aa522-128">Ayarlama <xref:System.Windows.Forms.Control.Dock%2A> özelliğine <xref:System.Windows.Forms.DockStyle.Fill>.</span><span class="sxs-lookup"><span data-stu-id="aa522-128">Set the <xref:System.Windows.Forms.Control.Dock%2A> property to <xref:System.Windows.Forms.DockStyle.Fill>.</span></span>  
  
<a name="network"></a>   
## <a name="creating-the-dataflow-network"></a><span data-ttu-id="aa522-129">Veri akışı ağ oluşturma</span><span class="sxs-lookup"><span data-stu-id="aa522-129">Creating the Dataflow Network</span></span>  
 <span data-ttu-id="aa522-130">Bu bölümde, görüntü işlemeyi gerçekleştirir veri akışı ağ oluşturmayı açıklar.</span><span class="sxs-lookup"><span data-stu-id="aa522-130">This section describes how to create the dataflow network that performs image processing.</span></span>  
  
#### <a name="to-create-the-dataflow-network"></a><span data-ttu-id="aa522-131">Veri akışı ağ oluşturmak için</span><span class="sxs-lookup"><span data-stu-id="aa522-131">To Create the Dataflow Network</span></span>  
  
1.  <span data-ttu-id="aa522-132">Bir başvuru System.Threading.Tasks.Dataflow.dll projenize ekleyin.</span><span class="sxs-lookup"><span data-stu-id="aa522-132">Add a reference to System.Threading.Tasks.Dataflow.dll to your project.</span></span>  
  
2.  <span data-ttu-id="aa522-133">Sağlamak Bu Form1.cs (Form1.vb için [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) aşağıdakileri içerir `using` (`Using` içinde [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) deyimleri:</span><span class="sxs-lookup"><span data-stu-id="aa522-133">Ensure that Form1.cs (Form1.vb for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) contains the following `using` (`Using` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) statements:</span></span>  
  
     [!code-csharp[TPLDataflow_CompositeImages#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_compositeimages/cs/compositeimages/form1.cs#1)]  
  
3.  <span data-ttu-id="aa522-134">Aşağıdaki veri üye ekleme `Form1` sınıfı:</span><span class="sxs-lookup"><span data-stu-id="aa522-134">Add the following data members to the `Form1` class:</span></span>  
  
     [!code-csharp[TPLDataflow_CompositeImages#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_compositeimages/cs/compositeimages/form1.cs#2)]  
  
4.  <span data-ttu-id="aa522-135">Aşağıdaki yöntemi ekleyin `CreateImageProcessingNetwork`, `Form1` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="aa522-135">Add the following method, `CreateImageProcessingNetwork`, to the `Form1` class.</span></span> <span data-ttu-id="aa522-136">Bu yöntem, görüntü işleme ağı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="aa522-136">This method creates the image processing network.</span></span>  
  
     [!code-csharp[TPLDataflow_CompositeImages#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_compositeimages/cs/compositeimages/form1.cs#3)]  
  
5.  <span data-ttu-id="aa522-137">Uygulama `LoadBitmaps` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="aa522-137">Implement the `LoadBitmaps` method.</span></span>  
  
     [!code-csharp[TPLDataflow_CompositeImages#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_compositeimages/cs/compositeimages/form1.cs#4)]  
  
6.  <span data-ttu-id="aa522-138">Uygulama `CreateCompositeBitmap` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="aa522-138">Implement the `CreateCompositeBitmap` method.</span></span>  
  
     [!code-csharp[TPLDataflow_CompositeImages#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_compositeimages/cs/compositeimages/form1.cs#5)]  
  
    > [!NOTE]
    >  <span data-ttu-id="aa522-139">C# sürümü `CreateCompositeBitmap` yöntemi verimli işlenmesini etkinleştirmek için işaretçileri kullanır <xref:System.Drawing.Bitmap?displayProperty=nameWithType> nesneleri.</span><span class="sxs-lookup"><span data-stu-id="aa522-139">The C# version of the `CreateCompositeBitmap` method uses pointers to enable efficient processing of the <xref:System.Drawing.Bitmap?displayProperty=nameWithType> objects.</span></span> <span data-ttu-id="aa522-140">Bu nedenle, etkinleştirmeniz gerekir **güvenli olmayan kod izin** kullanmak için seçenek projenizdeki [güvensiz](~/docs/csharp/language-reference/keywords/unsafe.md) anahtar sözcüğü.</span><span class="sxs-lookup"><span data-stu-id="aa522-140">Therefore, you must enable the **Allow unsafe code** option in your project in order to use the [unsafe](~/docs/csharp/language-reference/keywords/unsafe.md) keyword.</span></span> <span data-ttu-id="aa522-141">Güvenli olmayan kod içinde etkinleştirme hakkında daha fazla bilgi için bir [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] proje için bkz: [derleme sayfası, Proje Tasarımcısı (C#)](/visualstudio/ide/reference/build-page-project-designer-csharp).</span><span class="sxs-lookup"><span data-stu-id="aa522-141">For more information about how to enable unsafe code in a [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] project, see [Build Page, Project Designer (C#)](/visualstudio/ide/reference/build-page-project-designer-csharp).</span></span>  
  
 <span data-ttu-id="aa522-142">Aşağıdaki tabloda ağ üyeleri açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="aa522-142">The following table describes the members of the network.</span></span>  
  
|<span data-ttu-id="aa522-143">Üye</span><span class="sxs-lookup"><span data-stu-id="aa522-143">Member</span></span>|<span data-ttu-id="aa522-144">Tür</span><span class="sxs-lookup"><span data-stu-id="aa522-144">Type</span></span>|<span data-ttu-id="aa522-145">Açıklama</span><span class="sxs-lookup"><span data-stu-id="aa522-145">Description</span></span>|  
|------------|----------|-----------------|  
|`loadBitmaps`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="aa522-146">Bir klasörü yolunu giriş olarak alır ve bir koleksiyonunu oluşturur <xref:System.Drawing.Bitmap> nesneleri çıktı olarak.</span><span class="sxs-lookup"><span data-stu-id="aa522-146">Takes a folder path as input and produces a collection of <xref:System.Drawing.Bitmap> objects as output.</span></span>|  
|`createCompositeBitmap`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="aa522-147">Bir koleksiyonunu alır <xref:System.Drawing.Bitmap> nesneleri giriş olarak ve bileşik bir bit eşlem çıktı olarak üretir.</span><span class="sxs-lookup"><span data-stu-id="aa522-147">Takes a collection of <xref:System.Drawing.Bitmap> objects as input and produces a composite bitmap as output.</span></span>|  
|`displayCompositeBitmap`|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<span data-ttu-id="aa522-148">Bileşik bit eşlem formda görüntüler.</span><span class="sxs-lookup"><span data-stu-id="aa522-148">Displays the composite bitmap on the form.</span></span>|  
|`operationCancelled`|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<span data-ttu-id="aa522-149">İşlem iptal edilir ve başka bir klasör seçmek kullanıcının sağlayan belirtmek için bir resim görüntüler.</span><span class="sxs-lookup"><span data-stu-id="aa522-149">Displays an image to indicate that the operation is canceled and enables the user to select another folder.</span></span>|  
  
 <span data-ttu-id="aa522-150">Bir ağ oluşturmak için veri akışı blokları bağlanmak için bu örnek kullanır <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="aa522-150">To connect the dataflow blocks to form a network, this example uses the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A> method.</span></span> <span data-ttu-id="aa522-151"><xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A> Yöntemi alır aşırı yüklenmiş bir sürümünü içeren bir <xref:System.Predicate%601> hedef blok kabul ediyor veya bir ileti reddeder belirler nesnesi.</span><span class="sxs-lookup"><span data-stu-id="aa522-151">The <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A> method contains an overloaded version that takes a <xref:System.Predicate%601> object that determines whether the target block accepts or rejects a message.</span></span> <span data-ttu-id="aa522-152">Bu filtreleme mekanizması yalnızca belirli değerleri almak ileti blokları sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa522-152">This filtering mechanism enables message blocks to receive only certain values.</span></span> <span data-ttu-id="aa522-153">Bu örnekte, iki yoldan biriyle ağ dal.</span><span class="sxs-lookup"><span data-stu-id="aa522-153">In this example, the network can branch in one of two ways.</span></span> <span data-ttu-id="aa522-154">Ana dala görüntüleri diskten yükler, bileşik görüntüsünü oluşturur ve bu görüntüyü formda görüntüler.</span><span class="sxs-lookup"><span data-stu-id="aa522-154">The main branch loads the images from disk, creates the composite image, and displays that image on the form.</span></span> <span data-ttu-id="aa522-155">Alternatif şube geçerli işlemi iptal eder.</span><span class="sxs-lookup"><span data-stu-id="aa522-155">The alternate branch cancels the current operation.</span></span> <span data-ttu-id="aa522-156"><xref:System.Predicate%601> Nesneleri belirli iletileri reddederek alternatif şube geçmek için ana dala boyunca veri akışı blokları sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa522-156">The <xref:System.Predicate%601> objects enable the dataflow blocks along the main branch to switch to the alternative branch by rejecting certain messages.</span></span> <span data-ttu-id="aa522-157">Örneğin, kullanıcı veri akışı bloğu işlemi iptal `createCompositeBitmap` üreten `null` (`Nothing` içinde [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) çıktısını olarak.</span><span class="sxs-lookup"><span data-stu-id="aa522-157">For example, if the user cancels the operation, the dataflow block `createCompositeBitmap` produces `null` (`Nothing` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) as its output.</span></span> <span data-ttu-id="aa522-158">Veri akışı bloğu `displayCompositeBitmap` reddeder `null` için giriş değerleri ve bu nedenle, iletiyi sunulur `operationCancelled`.</span><span class="sxs-lookup"><span data-stu-id="aa522-158">The dataflow block `displayCompositeBitmap` rejects `null` input values, and therefore, the message is offered to `operationCancelled`.</span></span> <span data-ttu-id="aa522-159">Veri akışı bloğu `operationCancelled` tüm iletileri kabul eder ve bu nedenle, işlemi iptal edildiğini belirtmek için bir görüntüsünü görüntüler.</span><span class="sxs-lookup"><span data-stu-id="aa522-159">The dataflow block `operationCancelled` accepts all messages and therefore, displays an image to indicate that the operation is canceled.</span></span>  
  
 <span data-ttu-id="aa522-160">Görüntü işleme ağı aşağıda gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="aa522-160">The following illustration shows the image processing network.</span></span>  
  
 <span data-ttu-id="aa522-161">![Görüntü işleme ağı](../../../docs/standard/parallel-programming/media/dataflowwinforms.png "DataflowWinForms")</span><span class="sxs-lookup"><span data-stu-id="aa522-161">![The image processing network](../../../docs/standard/parallel-programming/media/dataflowwinforms.png "DataflowWinForms")</span></span>  
  
 <span data-ttu-id="aa522-162">Çünkü `displayCompositeBitmap` ve `operationCancelled` veri akışı blokları hareket kullanıcı arabiriminde, onu önemlidir bu eylemler kullanıcı arabirimi iş parçacığı üzerinde gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="aa522-162">Because the `displayCompositeBitmap` and `operationCancelled` dataflow blocks act on the user interface, it is important that these actions occur on the user-interface thread.</span></span> <span data-ttu-id="aa522-163">Oluşturma sırasında Bunu başarmak için bu nesnelerin her sağlayan bir <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions> olan nesneyi <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.TaskScheduler%2A> özelliğini <xref:System.Threading.Tasks.TaskScheduler.FromCurrentSynchronizationContext%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="aa522-163">To accomplish this, during construction, these objects each provide a <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions> object that has the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.TaskScheduler%2A> property set to <xref:System.Threading.Tasks.TaskScheduler.FromCurrentSynchronizationContext%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="aa522-164"><xref:System.Threading.Tasks.TaskScheduler.FromCurrentSynchronizationContext%2A?displayProperty=nameWithType> Yöntemi oluşturur bir <xref:System.Threading.Tasks.TaskScheduler> geçerli eşitleme bağlamı üzerinde çalışmayı gerçekleştiren nesne.</span><span class="sxs-lookup"><span data-stu-id="aa522-164">The <xref:System.Threading.Tasks.TaskScheduler.FromCurrentSynchronizationContext%2A?displayProperty=nameWithType> method creates a <xref:System.Threading.Tasks.TaskScheduler> object that performs work on the current synchronization context.</span></span> <span data-ttu-id="aa522-165">Çünkü `CreateImageProcessingNetwork` yönteminden işleyicisinden **Klasör Seç** düğmesi, kullanıcı arabiriminde çalıştığı iş parçacığı, işlemleri `displayCompositeBitmap` ve `operationCancelled` veri akışı blokları da çalıştırın kullanıcı arabirimi iş parçacığı.</span><span class="sxs-lookup"><span data-stu-id="aa522-165">Because the `CreateImageProcessingNetwork` method is called from the handler of the **Choose Folder** button, which runs on the user-interface thread, the actions for the `displayCompositeBitmap` and `operationCancelled` dataflow blocks also run on the user-interface thread.</span></span>  
  
 <span data-ttu-id="aa522-166">Bu örnek bir paylaşılan iptal belirteci yerine ayarı kullanır. <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A> özelliği olduğundan <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A> özelliği kalıcı olarak veri akışı bloğu yürütme iptal eder.</span><span class="sxs-lookup"><span data-stu-id="aa522-166">This example uses a shared cancellation token instead of setting the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A> property because the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A> property permanently cancels dataflow block execution.</span></span> <span data-ttu-id="aa522-167">Bir iptal belirteci bu örnek bile kullanıcı bir veya daha fazla işlem iptal aynı veri akışı ağ birden çok kez yeniden kullanmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa522-167">A cancellation token enables this example to reuse the same dataflow network multiple times, even when the user cancels one or more operations.</span></span> <span data-ttu-id="aa522-168">Kullanan bir örnek <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A> kalıcı olarak bir veri akışı bloğu yürütme iptal etmek için bkz: [nasıl yapılır: veri akışı bloğunu iptal](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="aa522-168">For an example that uses <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A> to permanently cancel the execution of a dataflow block, see [How to: Cancel a Dataflow Block](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md).</span></span>  
  
<a name="ui"></a>   
## <a name="connecting-the-dataflow-network-to-the-user-interface"></a><span data-ttu-id="aa522-169">Veri akışı ağ için kullanıcı arabirimi bağlanma</span><span class="sxs-lookup"><span data-stu-id="aa522-169">Connecting the Dataflow Network to the User Interface</span></span>  
 <span data-ttu-id="aa522-170">Bu bölümde, veri akışı ağa bağlanmak için kullanıcı arabirimi açıklar.</span><span class="sxs-lookup"><span data-stu-id="aa522-170">This section describes how to connect the dataflow network to the user interface.</span></span> <span data-ttu-id="aa522-171">Bileşik görüntü oluşturma ve işlemin iptaline gelen başlatılan **Klasör Seç** ve **iptal** düğmeler.</span><span class="sxs-lookup"><span data-stu-id="aa522-171">The creation of the composite image and cancellation of the operation are initiated from the **Choose Folder** and **Cancel** buttons.</span></span> <span data-ttu-id="aa522-172">Kullanıcı bu düğmeleri seçtiğinde, uygun eylemi bir zaman uyumsuz olarak başlatılır.</span><span class="sxs-lookup"><span data-stu-id="aa522-172">When the user chooses either of these buttons, the appropriate action is initiated in an asynchronous manner.</span></span>  
  
#### <a name="to-connect-the-dataflow-network-to-the-user-interface"></a><span data-ttu-id="aa522-173">Veri akışı ağ kullanıcı arabirimine bağlamak için</span><span class="sxs-lookup"><span data-stu-id="aa522-173">To Connect the Dataflow Network to the User Interface</span></span>  
  
1.  <span data-ttu-id="aa522-174">Ana form için form designer'ı oluşturmak için bir olay işleyicisi <xref:System.Windows.Forms.ToolStripItem.Click> olayı için **Klasör Seç** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="aa522-174">On the form designer for the main form, create an event handler for the <xref:System.Windows.Forms.ToolStripItem.Click> event for the **Choose Folder** button.</span></span>  
  
2.  <span data-ttu-id="aa522-175">Uygulama <xref:System.Windows.Forms.ToolStripItem.Click> olayı için **Klasör Seç** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="aa522-175">Implement the <xref:System.Windows.Forms.ToolStripItem.Click> event for the **Choose Folder** button.</span></span>  
  
     [!code-csharp[TPLDataflow_CompositeImages#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_compositeimages/cs/compositeimages/form1.cs#6)]  
  
3.  <span data-ttu-id="aa522-176">Ana form için form designer'ı oluşturmak için bir olay işleyicisi <xref:System.Windows.Forms.ToolStripItem.Click> olayı için **iptal** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="aa522-176">On the form designer for the main form, create an event handler for the <xref:System.Windows.Forms.ToolStripItem.Click> event for the **Cancel** button.</span></span>  
  
4.  <span data-ttu-id="aa522-177">Uygulama <xref:System.Windows.Forms.ToolStripItem.Click> olayı için **iptal** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="aa522-177">Implement the <xref:System.Windows.Forms.ToolStripItem.Click> event for the **Cancel** button.</span></span>  
  
     [!code-csharp[TPLDataflow_CompositeImages#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_compositeimages/cs/compositeimages/form1.cs#7)]  
  
<a name="complete"></a>   
## <a name="the-complete-example"></a><span data-ttu-id="aa522-178">Tam Örnek</span><span class="sxs-lookup"><span data-stu-id="aa522-178">The Complete Example</span></span>  
 <span data-ttu-id="aa522-179">Aşağıdaki örnek, bu kılavuz tam kod gösterilir.</span><span class="sxs-lookup"><span data-stu-id="aa522-179">The following example shows the complete code for this walkthrough.</span></span>  
  
 [!code-csharp[TPLDataflow_CompositeImages#100](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_compositeimages/cs/compositeimages/form1.cs#100)]  
  
 <span data-ttu-id="aa522-180">Aşağıdaki çizimde ortak \Sample Pictures\ klasörü için tipik çıkış gösterir.</span><span class="sxs-lookup"><span data-stu-id="aa522-180">The following illustration shows typical output for the common \Sample Pictures\ folder.</span></span>  
  
 <span data-ttu-id="aa522-181">![Windows Forms uygulaması](../../../docs/standard/parallel-programming/media/tpldataflow-compositeimages.gif "TPLDataflow_CompositeImages")</span><span class="sxs-lookup"><span data-stu-id="aa522-181">![The Windows Forms Application](../../../docs/standard/parallel-programming/media/tpldataflow-compositeimages.gif "TPLDataflow_CompositeImages")</span></span>  

## <a name="see-also"></a><span data-ttu-id="aa522-182">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="aa522-182">See Also</span></span>  
 [<span data-ttu-id="aa522-183">Veri akışı</span><span class="sxs-lookup"><span data-stu-id="aa522-183">Dataflow</span></span>](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md)
