---
title: "Her mikro hizmet için etki alanı modeli sınırları tanımlama"
description: "Kapsayıcılı .NET uygulamaları için .NET mikro mimarisi | Her mikro hizmet için etki alanı modeli sınırları tanımlama"
keywords: "Docker, mikro, ASP.NET, kapsayıcı"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 6fef11e5718706701abb29149c4c4a23ba39bde0
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/22/2017
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a><span data-ttu-id="32f2c-104">Her mikro hizmet için etki alanı modeli sınırlarını tanımlayın</span><span class="sxs-lookup"><span data-stu-id="32f2c-104">Identify domain-model boundaries for each microservice</span></span>

<span data-ttu-id="32f2c-105">Doğru küçük mikro mümkünse eğilimindedir rağmen hedef model sınırları ve her mikro hizmet boyutu tanımlarken en ayrıntılı ayrımı mümkün değil almaktır.</span><span class="sxs-lookup"><span data-stu-id="32f2c-105">The goal when identifying model boundaries and size for each microservice is not to get to the most granular separation possible, although you should tend toward small microservices if possible.</span></span> <span data-ttu-id="32f2c-106">Bunun yerine, etki alanı bilginiz destekli en anlamlı ayrımı almak için amacınız olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="32f2c-106">Instead, your goal should be to get to the most meaningful separation guided by your domain knowledge.</span></span> <span data-ttu-id="32f2c-107">Vurgu boyutuna, ancak bunun yerine iş yeteneklerini değil.</span><span class="sxs-lookup"><span data-stu-id="32f2c-107">The emphasis is not on the size, but instead on business capabilities.</span></span> <span data-ttu-id="32f2c-108">Varsa yüksek bir bağımlılıkları sayısına göre uygulamanın belirli bir bölgenin cohesion gerekli Temizle, ayrıca, tek bir mikro hizmet gereksinimini çok gösterir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-108">In addition, if there is clear cohesion needed for a certain area of the application based on a high number of dependencies, that indicates the need for a single microservice, too.</span></span> <span data-ttu-id="32f2c-109">Cohesion nasıl parçalayın veya grup birlikte mikro tanımlamak için bir yoldur.</span><span class="sxs-lookup"><span data-stu-id="32f2c-109">Cohesion is a way to identify how to break apart or group together microservices.</span></span> <span data-ttu-id="32f2c-110">Sonuç olarak, etki alanı hakkında daha fazla bilgi elde ederken, mikro boyutunu tekrarlayarak uyarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-110">Ultimately, while you gain more knowledge about the domain, you should adapt the size of your microservice, iteratively.</span></span> <span data-ttu-id="32f2c-111">Doğru boyutta bulma tek adımda bir işlem değildir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-111">Finding the right size is not a one-shot process.</span></span>

<span data-ttu-id="32f2c-112">[SAM Newman](http://samnewman.io/), tanınan bir promoter mikro ve kitap yazarı [yapı mikro](http://samnewman.io/books/building_microservices/), (parçası ilişkisindeki bağlam (BC) deseni temel alınarak, mikro tasarlamanız gerekir, önemli noktalar etki alanı Odaklı Tasarım), daha önce sunulduğu şekilde.</span><span class="sxs-lookup"><span data-stu-id="32f2c-112">[Sam Newman](http://samnewman.io/), a recognized promoter of microservices and author of the book [Building Microservices](http://samnewman.io/books/building_microservices/), highlights that you should design your microservices based on the Bounded Context (BC) pattern (part of domain-driven design), as introduced earlier.</span></span> <span data-ttu-id="32f2c-113">Bazı durumlarda, bir BC birkaç fiziksel Hizmetleri ancak bunun tersi oluşan.</span><span class="sxs-lookup"><span data-stu-id="32f2c-113">Sometimes, a BC could be composed of several physical services, but not vice versa.</span></span>

<span data-ttu-id="32f2c-114">Bir etki alanı modeli belirli bir etki alanı varlıklarla somut BC içinde geçerlidir veya mikro hizmet.</span><span class="sxs-lookup"><span data-stu-id="32f2c-114">A domain model with specific domain entities applies within a concrete BC or microservice.</span></span> <span data-ttu-id="32f2c-115">Etki alanı modeli uygulanabilirliğini bir BC sınırlandırır ve verir Geliştirici takım üyeleri Temizle ve paylaşılan anlama ne bağlı olması gerekir ve ne bağımsız olarak geliştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-115">A BC delimits the applicability of a domain model and gives developer team members a clear and shared understanding of what must be cohesive and what can be developed independently.</span></span> <span data-ttu-id="32f2c-116">Mikro hizmetler için aynı hedefleri şunlardır.</span><span class="sxs-lookup"><span data-stu-id="32f2c-116">These are the same goals for microservices.</span></span>

<span data-ttu-id="32f2c-117">Tasarım tercih ettiğiniz bildiren bir diğer araç [Conway'in yasaları](https://en.wikipedia.org/wiki/Conway%27s_law), hangi bildiren bir uygulama, üretilen kuruluş sosyal sınırlarının yansıtır.</span><span class="sxs-lookup"><span data-stu-id="32f2c-117">Another tool that informs your design choice is [Conway’s law](https://en.wikipedia.org/wiki/Conway%27s_law), which states that an application will reflect the social boundaries of the organization that produced it.</span></span> <span data-ttu-id="32f2c-118">Ancak bazen bunun tersi de geçerlidir — şirketinizin yazılımı tarafından oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="32f2c-118">But sometimes the opposite is true—the company’s organization is formed by the software.</span></span> <span data-ttu-id="32f2c-119">Conway'in yasaları ters çevirmek ve düzenlenmesine olanak şirket istediğinizi sınırları oluşturmak, işlem iş danışmanlık doğru leaning gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-119">You might need to reverse Conway’s law and build the boundaries the way you want the company to be organized, leaning toward business process consulting.</span></span>

<span data-ttu-id="32f2c-120">Sınırlanmış bağlamları belirlemek amacıyla bu için kullanılabilir bir DDD desen olan [bağlamı eşleştirme deseni](https://www.infoq.com/articles/ddd-contextmapping).</span><span class="sxs-lookup"><span data-stu-id="32f2c-120">In order to identify bounded contexts, a DDD pattern that can be used for this is the [Context Mapping pattern](https://www.infoq.com/articles/ddd-contextmapping).</span></span> <span data-ttu-id="32f2c-121">Bağlam eşleme ile uygulama ve bunların sınırlarını çeşitli bağlamlarda tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="32f2c-121">With Context Mapping, you identify the various contexts in the application and their boundaries.</span></span> <span data-ttu-id="32f2c-122">Farklı bağlamını ve küçük her alt sistemi sınır örneği için sağlamak için yaygın bir durumdur.</span><span class="sxs-lookup"><span data-stu-id="32f2c-122">It is common to have a different context and boundary for each small subsystem, for instance.</span></span> <span data-ttu-id="32f2c-123">İçerik haritası tanımlayan ve bu sınırlar etki alanları arasında açık bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="32f2c-123">The Context Map is a way to define and make explicit those boundaries between domains.</span></span> <span data-ttu-id="32f2c-124">Bir BC otonom ve tek bir etki alanı ayrıntılarını içerir — ayrıntıları ister etki alanı varlıkları — ve diğer BCs tümleştirme Sözleşmelerle tanımlar.</span><span class="sxs-lookup"><span data-stu-id="32f2c-124">A BC is autonomous and includes the details of a single domain—details like the domain entities—and defines integration contracts with other BCs.</span></span> <span data-ttu-id="32f2c-125">Bu bir mikro hizmet tanımına benzer: otonom, belirli etki alanı özelliği uygular ve arabirimleri sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-125">This is similar to the definition of a microservice: it is autonomous, it implements certain domain capability, and it must provide interfaces.</span></span> <span data-ttu-id="32f2c-126">İçerik eşleştirme ve sınırlanmış içerik düzeni, mikro etki alanı modeli sınırlarını tanımlamak için iyi yaklaşımlar olan nedeni budur.</span><span class="sxs-lookup"><span data-stu-id="32f2c-126">This is why Context Mapping and the Bounded Context pattern are good approaches for identifying the domain model boundaries of your microservices.</span></span>

<span data-ttu-id="32f2c-127">Büyük bir uygulama tasarlarken, nasıl kendi etki alanı modeli parçalanmış görürsünüz — Kataloğu etki alanındaki bir etki alanı Uzman varlıklar sevkiyat etki alanından uzman, katalog ve stok etki alanlarında farklı örneği için adı.</span><span class="sxs-lookup"><span data-stu-id="32f2c-127">When designing a large application, you will see how its domain model can be fragmented — a domain expert from the catalog domain will name entities differently in the catalog and inventory domains than a shipping domain expert, for instance.</span></span> <span data-ttu-id="32f2c-128">Veya yalnızca kısmi veri müşteri hakkındaki gereksinim duyan sıralama bir etki alanı Uzman müşteri hakkında ayrıntılı bilgi her depolamak isteyen bir CRM Uzman ile ilgilenirken kullanıcı etki alanı varlığı boyutu ve öznitelik sayısı farklı olabilir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-128">Or the user domain entity might be different in size and number of attributes when dealing with a CRM expert who wants to store every detail about the customer than for an ordering domain expert who just needs partial data about the customer.</span></span> <span data-ttu-id="32f2c-129">Çok büyük bir uygulamayla ilgili tüm etki alanları arasında tüm etki alanı koşullarını ayırt etmek zordur.</span><span class="sxs-lookup"><span data-stu-id="32f2c-129">It is very hard to disambiguate all domain terms across all the domains related to a large application.</span></span> <span data-ttu-id="32f2c-130">Ancak en önemli terimler bütünleştirin denememelisiniz şeydir; Bunun yerine, her etki alanı tarafından sağlanan zenginliğini ve farkları kabul edin.</span><span class="sxs-lookup"><span data-stu-id="32f2c-130">But the most important thing is that you should not try to unify the terms; instead, accept the differences and richness provided by each domain.</span></span> <span data-ttu-id="32f2c-131">Tüm uygulama için birleştirilmiş bir veritabanına sahip çalışırsanız, birleştirilmiş sözlük girişimleri garip olacaktır ve birden çok etki alanı uzmanlar birine sağ duyulacaktır değil.</span><span class="sxs-lookup"><span data-stu-id="32f2c-131">If you try to have a unified database for the whole application, attempts at a unified vocabulary will be awkward and will not sound right to any of the multiple domain experts.</span></span> <span data-ttu-id="32f2c-132">Bu nedenle, (mikro uygulanan) BCs belirli etki alanı koşullarını burada kullanabilirsiniz ve sistem bölme ve farklı etki alanlarıyla ek BCs oluşturmak burada gerekir açıklamak için yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="32f2c-132">Therefore, BCs (implemented as microservices) will help you to clarify where you can use certain domain terms and where you will need to split the system and create additional BCs with different domains.</span></span>

<span data-ttu-id="32f2c-133">Sağ sınırları ve her BC boyutlarını aldığınız ve etki alanı modelleri arasında birkaç güçlü ilişkiler varsa ve genellikle bunu etki alanı modeli gerektiğini tipik uygulama gerçekleştirirken, birden çok etki alanı modellerinden bilgileri birleştirmek bilirsiniz işlemler.</span><span class="sxs-lookup"><span data-stu-id="32f2c-133">You will know that you got the right boundaries and sizes of each BC and domain model if you have few strong relationships between domain models, and you do not usually need to merge information from multiple domain models when performing typical application operations.</span></span>

<span data-ttu-id="32f2c-134">Belki de her mikro hizmet için bir etki alanı modeli ne kadar büyük olmalıdır soru en iyi yanıt aşağıdadır: bir otonom BC olması gereken diğer bağlamlarda (diğer sürekli geçmek zorunda kalmadan çalışmanıza olanak sağlayan mümkün olduğunca yalıtılmış mikro hizmet 's modeller).</span><span class="sxs-lookup"><span data-stu-id="32f2c-134">Perhaps the best answer to the question of how big a domain model for each microservice should be is the following: it should have an autonomous BC, as isolated as possible, that enables you to work without having to constantly switch to other contexts (other microservice’s models).</span></span> <span data-ttu-id="32f2c-135">Şekil 4-10'gördüğünüz birden çok mikro (birden çok BCs) her kendi modeli ve nasıl kendi varlıklar, uygulamanızda tanımlanan etki alanlarının her biri için belirli gereksinimlerine bağlı olarak tanımlanabilir sahip nasıl.</span><span class="sxs-lookup"><span data-stu-id="32f2c-135">In Figure 4-10 you can see how multiple microservices (multiple BCs) each have their own model and how their entities can be defined, depending on the specific requirements for each of the identified domains in your application.</span></span>

![](./media/image10.png)

<span data-ttu-id="32f2c-136">**Şekil 4-10**.</span><span class="sxs-lookup"><span data-stu-id="32f2c-136">**Figure 4-10**.</span></span> <span data-ttu-id="32f2c-137">Varlıklar ve mikro hizmet modeli sınırları tanımlama</span><span class="sxs-lookup"><span data-stu-id="32f2c-137">Identifying entities and microservice model boundaries</span></span>

<span data-ttu-id="32f2c-138">Şekil 4-10 bir çevrimiçi konferans yönetim sistemi için ilgili bir örnek senaryo gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-138">Figure 4-10 illustrates a sample scenario related to an online conference management system.</span></span> <span data-ttu-id="32f2c-139">Mikro, etki alanı uzmanlar tanımladığınız etki alanları dayalı olarak uygulanması birkaç BCs tanımladınız.</span><span class="sxs-lookup"><span data-stu-id="32f2c-139">You have identified several BCs that could be implemented as microservices, based on domains that domain experts defined for you.</span></span> <span data-ttu-id="32f2c-140">Gördüğünüz gibi yalnızca bir tek mikro hizmet modeli, ödeme mikro hizmet ödemeler gibi mevcut varlıkları vardır.</span><span class="sxs-lookup"><span data-stu-id="32f2c-140">As you can see, there are entities that are present just in a single microservice model, like Payments in the Payment microservice.</span></span> <span data-ttu-id="32f2c-141">Bu uygulama kolay olacaktır.</span><span class="sxs-lookup"><span data-stu-id="32f2c-141">Those will be easy to implement.</span></span>

<span data-ttu-id="32f2c-142">Ancak, farklı bir şekil, ancak aynı kimlik birden çok mikro birden çok etki alanı modellerinden paylaşılmasını varlıklar olabilir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-142">However, you might also have entities that have a different shape but share the same identity across the multiple domain models from the multiple microservices.</span></span> <span data-ttu-id="32f2c-143">Örneğin, kullanıcı varlığı konferans yönetim mikro hizmet tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="32f2c-143">For example, the User entity is identified in the Conferences Management microservice.</span></span> <span data-ttu-id="32f2c-144">Bu aynı, aynı kimliğe sahip bir sıralama mikro alıcıların adlı veya bir ödeme mikro hizmet ve müşteri hizmetleri mikro hizmet bile bir adlandırılmış müşterinin ödeyen adlı kullanıcıdır.</span><span class="sxs-lookup"><span data-stu-id="32f2c-144">That same user, with the same identity, is the one named Buyers in the Ordering microservice, or the one named Payer in the Payment microservice, and even the one named Customer in the Customer Service microservice.</span></span> <span data-ttu-id="32f2c-145">Bu bağlı olarak, çünkü [bulunabilen dil](https://martinfowler.com/bliki/UbiquitousLanguage.html) her etki alanı Uzman kullanarak, bir kullanıcı farklı bir perspektif bile farklı özniteliklere sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-145">This is because, depending on the [ubiquitous language](https://martinfowler.com/bliki/UbiquitousLanguage.html) that each domain expert is using, a user might have a different perspective even with different attributes.</span></span> <span data-ttu-id="32f2c-146">Kullanıcı varlığı konferans yönetim adlı mikro hizmet modelinde kişisel veri özniteliklerini çoğunu olabilir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-146">The user entity in the microservice model named Conferences Management might have most of its personal data attributes.</span></span> <span data-ttu-id="32f2c-147">Ancak, ödeme mikro veya müşteri hizmetleri mikro hizmet müşteri şeklinde ödeyen şeklinde, aynı kullanıcının aynı öznitelik listesine gerekmeyebilir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-147">However, that same user in the shape of Payer in the microservice Payment or in the shape of Customer in the microservice Customer Service might not need the same list of attributes.</span></span>

<span data-ttu-id="32f2c-148">Benzer bir yaklaşım Şekil 4-11'de gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-148">A similar approach is illustrated in Figure 4-11.</span></span>

![](./media/image11.png)

<span data-ttu-id="32f2c-149">**Şekil 4-11**.</span><span class="sxs-lookup"><span data-stu-id="32f2c-149">**Figure 4-11**.</span></span> <span data-ttu-id="32f2c-150">Geleneksel veri modellerini ayırma birden fazla etki alanı modeli</span><span class="sxs-lookup"><span data-stu-id="32f2c-150">Decomposing traditional data models into multiple domain models</span></span>

<span data-ttu-id="32f2c-151">Nasıl kullanıcı konferans yönetim mikro hizmet modeli kullanıcı varlık olarak bulunur ve diğer öznitelikleri ya da gerçekte bir alıcı olduğunda kullanıcı hakkındaki ayrıntıları mikro fiyatlandırma hizmet alıcı varlıkta biçiminde de mevcuttur görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="32f2c-151">You can see how the user is present in the Conferences Management microservice model as the User entity and is also present in the form of the Buyer entity in the Pricing microservice, with alternate attributes or details about the user when it is actually a buyer.</span></span> <span data-ttu-id="32f2c-152">Her mikro hizmet veya BC sorunu çözmek için veya içeriği bağlı olarak bu, yalnızca bölüm, kullanıcı varlığıyla ilgili tüm verileri gerekmeyebilir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-152">Each microservice or BC might not need all the data related to a User entity, just part of it, depending on the problem to solve or the context.</span></span> <span data-ttu-id="32f2c-153">Örneği için fiyatlandırma mikro hizmet modeli, adres veya yalnızca kimliği (kimlik) ve bir indirimler alıcı başına kişilik fiyatlandırma zaman etkileyecek durumu, kullanıcı Kimliğini gerekmez.</span><span class="sxs-lookup"><span data-stu-id="32f2c-153">For instance, in the Pricing microservice model, you do not need the address or the ID of the user, just ID (as identity) and Status, which will have an impact on discounts when pricing the seats per buyer.</span></span>

<span data-ttu-id="32f2c-154">Aynı bilgisayar başına varlık sahip adı her etki alanı modeli ancak farklı öznitelikleri.</span><span class="sxs-lookup"><span data-stu-id="32f2c-154">The Seat entity has the same name but different attributes in each domain model.</span></span> <span data-ttu-id="32f2c-155">Ancak, bilgisayar başına aynı kimliği temel alarak kimlik paylaşımları gibi kullanıcı ve alıcı gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-155">However, Seat shares identity based on the same ID, as happens with User and Buyer.</span></span>

<span data-ttu-id="32f2c-156">Temel olarak, tüm bu kullanıcı kimliğini paylaşmak birden çok Hizmetleri (etki alanları), mevcut bir kullanıcı paylaşılan bir kavramı yoktur.</span><span class="sxs-lookup"><span data-stu-id="32f2c-156">Basically, there is a shared concept of a user that exists in multiple services (domains), which all share the identity of that user.</span></span> <span data-ttu-id="32f2c-157">Her etki alanı modelinde olabilir ancak kullanıcı varlık ile ilgili ek ya da farklı ayrıntıları.</span><span class="sxs-lookup"><span data-stu-id="32f2c-157">But in each domain model there might be additional or different details about the user entity.</span></span> <span data-ttu-id="32f2c-158">Bu nedenle, var. başka bir kullanıcı bir bir etki alanı (mikro) varlıktan eşleştirmek için bir yol olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="32f2c-158">Therefore, there needs to be a way to map a user entity from one domain (microservice) to another.</span></span>

<span data-ttu-id="32f2c-159">Aynı kullanıcı varlık öznitelikleri ile aynı sayıda etki alanları arasında paylaşmıyor çeşitli avantajları vardır.</span><span class="sxs-lookup"><span data-stu-id="32f2c-159">There are several benefits to not sharing the same user entity with the same number of attributes across domains.</span></span> <span data-ttu-id="32f2c-160">Mikro hizmet modelleri gerekiyor mu herhangi bir veri olmayan bir avantajı çoğaltma azaltmak için böylelikle.</span><span class="sxs-lookup"><span data-stu-id="32f2c-160">One benefit is to reduce duplication, so that microservice models do not have any data that they do not need.</span></span> <span data-ttu-id="32f2c-161">Başka bir avantajı, belirli bir varlık başına veri türünü sahibi ve böylece güncelleştirmeleri ve sorguları veri türü için yalnızca bu mikro hizmet tarafından yönlendirilen ana mikro hizmet yaşıyor.</span><span class="sxs-lookup"><span data-stu-id="32f2c-161">Another benefit is having a master microservice that owns a certain type of data per entity so that updates and queries for that type of data are driven only by that microservice.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="32f2c-162">[Önceki] (dağıtılmış-data-management.md) [sonraki] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="32f2c-162">[Previous] (distributed-data-management.md) [Next] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span></span>
