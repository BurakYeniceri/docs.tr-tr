---
title: "Sertifikalarla Çalışma"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: certificates [WCF]
ms.assetid: 6ffb8682-8f07-4a45-afbb-8d2487e9dbc3
caps.latest.revision: "26"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 4c38a697cc5f4693977e11ff71142322533e9ded
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/21/2017
---
# <a name="working-with-certificates"></a><span data-ttu-id="71ce2-102">Sertifikalarla Çalışma</span><span class="sxs-lookup"><span data-stu-id="71ce2-102">Working with Certificates</span></span>
<span data-ttu-id="71ce2-103">Programa [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] güvenlik, X.509 dijital sertifikalar genellikle istemcilerin ve sunucuların kimliğini doğrulamak için kullanılan, şifrelemek ve iletileri dijital olarak imzala.</span><span class="sxs-lookup"><span data-stu-id="71ce2-103">To program [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] security, X.509 digital certificates are commonly used to authenticate clients and servers, encrypt, and digitally sign messages.</span></span> <span data-ttu-id="71ce2-104">Bu konu kısaca X.509 dijital sertifika özelliklerini ve bunların içinde nasıl kullanılacağını açıklamaktadır [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]ve bu kavramları daha fazla açıklamak veya kullanarak ortak görevleri gerçekleştirmek nasıl Göster konulara bağlantılar içerir [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ve sertifikalar.</span><span class="sxs-lookup"><span data-stu-id="71ce2-104">This topic briefly explains X.509 digital certificate features and how to use them in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], and includes links to topics that explain these concepts further or that show how to accomplish common tasks using [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] and certificates.</span></span>  
  
 <span data-ttu-id="71ce2-105">Kısaca, bir dijital sertifika bir parçası olan bir *ortak anahtar altyapısı* (PKI) sistemi dijital sertifikalar, sertifika yetkililerini ve geçerliliğini doğrulayan ve diğer yetkililerden olduğu Ortak anahtar şifrelemesi kullanılarak bir elektronik işlemde taraf her.</span><span class="sxs-lookup"><span data-stu-id="71ce2-105">In brief, a digital certificate is a part of a *public key infrastructure* (PKI), which is a system of digital certificates, certificate authorities, and other registration authorities that verify and authenticate the validity of each party involved in an electronic transaction through the use of public key cryptography.</span></span> <span data-ttu-id="71ce2-106">Bir sertifika yetkilisi sertifikaları dağıtır ve her sertifikası gibi verileri içeren alanlar kümesi *konu* (sertifikanın verildiği varlık) geçerlilik tarihleri, veren ((sertifikanın olduğunda geçerli) Sertifikayı veren varlık) ve ortak anahtar.</span><span class="sxs-lookup"><span data-stu-id="71ce2-106">A certification authority issues certificates and each certificate has a set of fields that contain data, such as *subject* (the entity to which the certificate is issued), validity dates (when the certificate is valid), issuer (the entity that issued the certificate), and a public key.</span></span> <span data-ttu-id="71ce2-107">İçinde [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], bu özelliklerin her biri olarak işlenir bir <xref:System.IdentityModel.Claims.Claim>, ve her talep daha iki türlerine ayrılır: kimlik ve sağa.</span><span class="sxs-lookup"><span data-stu-id="71ce2-107">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], each of these properties is processed as a <xref:System.IdentityModel.Claims.Claim>, and each claim is further divided into two types: identity and right.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="71ce2-108">X.509 sertifikaları bkz [X.509 ortak anahtar sertifikaları](http://go.microsoft.com/fwlink/?LinkId=209952) [!INCLUDE[crabout](../../../../includes/crabout-md.md)] beyanlar ve yetkilendirmeyi WCF'de bkz [yönetme beyanlar ve yetkilendirmeyi kimlik modeliyle](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span><span class="sxs-lookup"><span data-stu-id="71ce2-108"> X.509 certificates see [X.509 Public Key Certificates](http://go.microsoft.com/fwlink/?LinkId=209952)[!INCLUDE[crabout](../../../../includes/crabout-md.md)] Claims and Authorization in WCF see [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="71ce2-109">Bir PKI'yı uygulamadan bkz [Windows Server 2008 R2 - Sertifika Hizmetleri](http://go.microsoft.com/fwlink/?LinkId=209949).</span><span class="sxs-lookup"><span data-stu-id="71ce2-109"> implementing a PKI, see [Windows Server 2008 R2 - Certificate Services](http://go.microsoft.com/fwlink/?LinkId=209949).</span></span>  
  
 <span data-ttu-id="71ce2-110">Bir birincil sertifikanın başkalarına sertifika sahibinin kimliğini doğrulamak için işlevdir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-110">A primary function of the certificate is to authenticate the identity of the owner of the certificate to others.</span></span> <span data-ttu-id="71ce2-111">Bir sertifikayı içeren *ortak anahtar* sahibi özel anahtarı tutarken sahibinin.</span><span class="sxs-lookup"><span data-stu-id="71ce2-111">A certificate contains the *public key* of the owner, while the owner retains the private key.</span></span> <span data-ttu-id="71ce2-112">Ortak anahtar sertifika sahibinin gönderilen iletileri şifrelemek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-112">The public key can be used to encrypt messages sent to the owner of the certificate.</span></span> <span data-ttu-id="71ce2-113">Sahibi özel anahtar erişimi yalnızca sahibi bu iletilerin şifresini çözebilir yalnızca bunu.</span><span class="sxs-lookup"><span data-stu-id="71ce2-113">Only the owner has access to the private key, so only the owner can decrypt those messages.</span></span>  
  
 <span data-ttu-id="71ce2-114">Sertifika bir üçüncü taraf veren sertifikalarının görülür bir sertifika yetkilisi tarafından verilmelidir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-114">Certificates must be issued by a certification authority, which is often a third-party  issuer of certificates.</span></span> <span data-ttu-id="71ce2-115">Bir Windows etki alanında bir sertifika yetkilisi dahil etki alanındaki bilgisayarların sertifika vermek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-115">On a Windows domain, a certification authority is included that can be used to issue certificates to computers on the domain.</span></span>  
  
## <a name="viewing-certificates"></a><span data-ttu-id="71ce2-116">Sertifikaları görüntüleme</span><span class="sxs-lookup"><span data-stu-id="71ce2-116">Viewing Certificates</span></span>  
 <span data-ttu-id="71ce2-117">Sertifikalar ile çalışmak için genellikle bunları görüntülemek ve bunların özelliklerini incelemek gereklidir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-117">To work with certificates, it is often necessary to view them and examine their properties.</span></span> <span data-ttu-id="71ce2-118">Bu, Microsoft Yönetim Konsolu (MMC) ek bileşenini aracıyla kolayca gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-118">This is easily done with the Microsoft Management Console (MMC) snap-in tool.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="71ce2-119">[Nasıl yapılır: MMC ek bileşeni ile sertifikaları görüntüle](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md).</span><span class="sxs-lookup"><span data-stu-id="71ce2-119"> [How to: View Certificates with the MMC Snap-in](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md).</span></span>  
  
## <a name="certificate-stores"></a><span data-ttu-id="71ce2-120">Sertifika depoları</span><span class="sxs-lookup"><span data-stu-id="71ce2-120">Certificate Stores</span></span>  
 <span data-ttu-id="71ce2-121">Sertifika deposunda bulunamadı.</span><span class="sxs-lookup"><span data-stu-id="71ce2-121">Certificates are found in stores.</span></span> <span data-ttu-id="71ce2-122">Daha fazla alt depoları ayrılır iki ana deposu konum yok.</span><span class="sxs-lookup"><span data-stu-id="71ce2-122">Two major store locations exist that are further divided into sub-stores.</span></span> <span data-ttu-id="71ce2-123">Bir bilgisayarda yöneticisiyseniz, MMC ek bileşen aracını kullanarak her iki ana depoları görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-123">If you are the administrator on a computer, you can view both major stores by using the MMC snap-in tool.</span></span> <span data-ttu-id="71ce2-124">Yönetici olmayanlar yalnızca geçerli kullanıcı deposunda görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-124">Non-administrators can view only the current user store.</span></span>  
  
-   <span data-ttu-id="71ce2-125">**Yerel makinenin deposunu**.</span><span class="sxs-lookup"><span data-stu-id="71ce2-125">**The local machine store**.</span></span> <span data-ttu-id="71ce2-126">Bu gibi makine işlemler tarafından erişilen sertifikaları içeren [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="71ce2-126">This contains the certificates accessed by machine processes, such as [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span></span> <span data-ttu-id="71ce2-127">Bu konumu, istemcilerin sunucuya kimlik doğrulaması sertifikalarını depolamak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-127">Use this location to store certificates that authenticate the server to clients.</span></span>  
  
-   <span data-ttu-id="71ce2-128">**Geçerli kullanıcı deposunda**.</span><span class="sxs-lookup"><span data-stu-id="71ce2-128">**The current user store**.</span></span> <span data-ttu-id="71ce2-129">Etkileşimli uygulamalar genellikle burada bilgisayarın geçerli kullanıcı için sertifikalar yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="71ce2-129">Interactive applications typically place certificates here for the computer's current user.</span></span> <span data-ttu-id="71ce2-130">Bir istemci uygulaması oluşturuyorsanız, genellikle bir kullanıcı bir hizmete kimlik doğrulaması sertifikaları nereye budur.</span><span class="sxs-lookup"><span data-stu-id="71ce2-130">If you are creating a client application, this is where you typically place certificates that authenticate a user to a service.</span></span>  
  
 <span data-ttu-id="71ce2-131">Bu iki depoları daha fazla alt depoları ayrılır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-131">These two stores are further divided into sub-stores.</span></span> <span data-ttu-id="71ce2-132">En fazla ile programlama olduğunda önemli bu [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] içerir:</span><span class="sxs-lookup"><span data-stu-id="71ce2-132">The most important of these when programming with [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] include:</span></span>  
  
-   <span data-ttu-id="71ce2-133">**Güvenilen kök sertifika yetkilileri**.</span><span class="sxs-lookup"><span data-stu-id="71ce2-133">**Trusted Root Certification Authorities**.</span></span> <span data-ttu-id="71ce2-134">Sertifika yetkilisi sertifikası bu deposundaki geri izlenebilir sertifika zinciri oluşturmak için bu depolama alanındaki sertifikaları kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-134">You can use the certificates in this store to create a chain of certificates, which can be traced back to a certification authority certificate in this store.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="71ce2-135">Sertifika bir güvenilen üçüncü taraf sertifika yetkilisi gelmez olsa bile yerel bilgisayarda bu depolama alanındaki yerleştirilen herhangi bir sertifikayı örtük olarak güvenir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-135">The local computer implicitly trusts any certificate placed in this store, even if the certificate does not come from a trusted third-party certification authority.</span></span> <span data-ttu-id="71ce2-136">Bu nedenle, tam olarak veren güven ve sonuçlar anlamak sürece herhangi bir sertifikayı bu depoya yerleştirmeyin.</span><span class="sxs-lookup"><span data-stu-id="71ce2-136">For this reason, do not place any certificate into this store unless you fully trust the issuer and understand the consequences.</span></span>  
  
-   <span data-ttu-id="71ce2-137">**Kişisel**.</span><span class="sxs-lookup"><span data-stu-id="71ce2-137">**Personal**.</span></span> <span data-ttu-id="71ce2-138">Bu depo, bir bilgisayarın bir kullanıcıyla ilişkili sertifikalar için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-138">This store is used for certificates associated with a user of a computer.</span></span> <span data-ttu-id="71ce2-139">Genellikle bu depo güvenilen kök sertifika yetkilileri deposunda bulunan sertifika yetkilisi sertifikalarını biri tarafından verilen sertifikalar için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-139">Typically this store is used for certificates issued by one of the certification authority certificates found in the Trusted Root Certification Authorities store.</span></span> <span data-ttu-id="71ce2-140">Alternatif olarak, burada bulunan bir sertifika kendi kendine verilen ve bir uygulama tarafından güvenilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-140">Alternatively, a certificate found here may be self-issued and trusted by an application.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="71ce2-141">Sertifika depoları, bkz: [sertifika depolarını](http://go.microsoft.com/fwlink/?LinkId=88912).</span><span class="sxs-lookup"><span data-stu-id="71ce2-141"> certificate stores, see [Certificate Stores](http://go.microsoft.com/fwlink/?LinkId=88912).</span></span>  
  
### <a name="selecting-a-store"></a><span data-ttu-id="71ce2-142">Bir mağaza seçme</span><span class="sxs-lookup"><span data-stu-id="71ce2-142">Selecting a Store</span></span>  
 <span data-ttu-id="71ce2-143">Bir sertifikanın depolanacağı yeri seçme bağlıdır nasıl ve ne zaman hizmeti veya istemci çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-143">Selecting where to store a certificate depends how and when the service or client runs.</span></span> <span data-ttu-id="71ce2-144">Aşağıdaki genel kurallar geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="71ce2-144">The following general rules apply:</span></span>  
  
-   <span data-ttu-id="71ce2-145">WCF hizmeti bir Windows hizmeti kullanımda barındırılıyorsa **yerel makine** depolar.</span><span class="sxs-lookup"><span data-stu-id="71ce2-145">If the WCF service is hosted in a Windows service use the **local machine** store.</span></span> <span data-ttu-id="71ce2-146">Yerel makine deposuna sertifika yüklemek için yönetici ayrıcalıkları gerekli olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="71ce2-146">Note that administrator privileges are required to install certificates into the local machine store.</span></span>  
  
-   <span data-ttu-id="71ce2-147">Hizmet veya istemci bir kullanıcı hesabı altında çalışan bir uygulama ise, ardından kullanın **geçerli kullanıcı** depolar.</span><span class="sxs-lookup"><span data-stu-id="71ce2-147">If the service or client is an application that runs under a user account, then use the **current user** store.</span></span>  
  
### <a name="accessing-stores"></a><span data-ttu-id="71ce2-148">Depoları erişme</span><span class="sxs-lookup"><span data-stu-id="71ce2-148">Accessing Stores</span></span>  
 <span data-ttu-id="71ce2-149">Depoları, bir bilgisayardaki klasörleri gibi erişim denetim listeleriyle (ACL) korunur.</span><span class="sxs-lookup"><span data-stu-id="71ce2-149">Stores are protected by access control lists (ACLs), just like folders on a computer.</span></span> <span data-ttu-id="71ce2-150">Internet Information Services (IIS) tarafından barındırılan bir hizmet oluştururken [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] işlemi çalıştırılan altında [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] hesabı.</span><span class="sxs-lookup"><span data-stu-id="71ce2-150">When creating a service hosted by Internet Information Services (IIS), the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] process runs under the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] account.</span></span> <span data-ttu-id="71ce2-151">Hesabı sertifikaları içeren deposuna erişimine sahip olmalıdır, bir hizmet kullanır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-151">That account must have access to the store that contains the certificates a service uses.</span></span> <span data-ttu-id="71ce2-152">Ana mağazaların her biri bir varsayılan erişim listesiyle korunur, ancak listeler değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-152">Each of the major stores is protected with a default access list, but the lists can be modified.</span></span> <span data-ttu-id="71ce2-153">Bir deposuna erişim için ayrı bir rolü oluşturursanız, bu rolü erişim izni vermeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-153">If you create a separate role to access a store, you must grant that role access permission.</span></span> <span data-ttu-id="71ce2-154">WinHttpCertConfig.exe aracını kullanarak erişimi listesini değiştirmek öğrenmek için bkz: [nasıl yapılır: geliştirme sırasında kullanmak için geçici sertifikalar oluşturma](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span><span class="sxs-lookup"><span data-stu-id="71ce2-154">To learn how to modify the access list using the WinHttpCertConfig.exe tool, see [How to: Create Temporary Certificates for Use During Development](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="71ce2-155">İstemci sertifikaları IIS'ye kullanarak, bkz: [kimlik doğrulaması için bir ASP.NET Web uygulaması ile bir istemci sertifikasını kullanarak bir Web hizmetini çağırmak nasıl](http://go.microsoft.com/fwlink/?LinkId=88914).</span><span class="sxs-lookup"><span data-stu-id="71ce2-155"> using client certificates with IIS, see [How to call a Web service by using a client certificate for authentication in an ASP.NET Web application](http://go.microsoft.com/fwlink/?LinkId=88914).</span></span>  
  
## <a name="chain-trust-and-certificate-authorities"></a><span data-ttu-id="71ce2-156">Güven zinciri ve sertifika yetkilileri</span><span class="sxs-lookup"><span data-stu-id="71ce2-156">Chain Trust and Certificate Authorities</span></span>  
 <span data-ttu-id="71ce2-157">Sertifikalar, her bir sertifika sertifika veren CA için burada bağlı olduğu bir hiyerarşideki oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="71ce2-157">Certificates are created in a hierarchy where each individual certificate is linked to the CA that issued the certificate.</span></span> <span data-ttu-id="71ce2-158">Bu CA'ın sertifikasını bağlantıdır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-158">This link is to the CA’s certificate.</span></span> <span data-ttu-id="71ce2-159">CA'ın sertifika sonra CA'ın yedeği sertifika veren CA bağlantılar.</span><span class="sxs-lookup"><span data-stu-id="71ce2-159">The CA’s certificate then links to the CA that issued the orginal CA’s certificate.</span></span> <span data-ttu-id="71ce2-160">Kök CA'ın sertifikasını ulaşılana kadar bu işlem yinelenir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-160">This process is repeated up until the Root CA’s certificate is reached.</span></span> <span data-ttu-id="71ce2-161">Doğası gereği güvenilir kök CA'ın sertifika yok.</span><span class="sxs-lookup"><span data-stu-id="71ce2-161">The Root CA’s certificate is inherently trusted.</span></span>  
  
 <span data-ttu-id="71ce2-162">Bir varlık olarak da adlandırılan bu hiyerarşi, bağlı olan kimlik doğrulaması için kullanılan dijital sertifikalar bir *güven zinciri*.</span><span class="sxs-lookup"><span data-stu-id="71ce2-162">Digital certificates are used to authenticate an entity by relying this hierarchy, also called a *chain of trust*.</span></span> <span data-ttu-id="71ce2-163">Tüm sertifika zincirinin herhangi bir sertifikayı çift sonra tıklatarak MMC ek bileşenini kullanarak görüntüleyebilirsiniz **sertifika yolu** sekmesini [!INCLUDE[crabout](../../../../includes/crabout-md.md)] bkz:sertifikazincirleribirsertifikayetkilisiiçiniçeriaktarma,[Nasıl yapılır: imzaları doğrulamak için kullanılan sertifika yetkilendirme sertifika zincirini belirtme](../../../../docs/framework/wcf/feature-details/specify-the-certificate-authority-chain-verify-signatures-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="71ce2-163">You can view any certificate's chain using the MMC snap-in by double-clicking any certificate, then clicking the **Certificate Path** tab. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] importing certificate chains for a Certification authority, see [How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures](../../../../docs/framework/wcf/feature-details/specify-the-certificate-authority-chain-verify-signatures-wcf.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="71ce2-164">Tüm veren sertifikayı güvenilir kök yetkilisi sertifika deposunda yerleştirme tarafından güvenilen bir kök yetkilisi belirlenebilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-164">Any issuer can be designated a trusted root authority by placing the issuer's certificate in the trusted root authority certificate store.</span></span>  
  
### <a name="disabling-chain-trust"></a><span data-ttu-id="71ce2-165">Zincir güven devre dışı bırakma</span><span class="sxs-lookup"><span data-stu-id="71ce2-165">Disabling Chain Trust</span></span>  
 <span data-ttu-id="71ce2-166">Yeni bir hizmet oluştururken, bir güvenilen kök sertifikası tarafından verilmemiş bir sertifika kullanıyor olabilir veya sertifikayı veren sertifika güvenilen kök sertifika yetkilileri deposunda olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-166">When creating a new service, you may be using a certificate that is not issued by a trusted root certificate, or the issuing certificate itself may not be in the Trusted Root Certification Authorities store.</span></span> <span data-ttu-id="71ce2-167">Yalnızca geliştirme amacıyla bir sertifika güven zinciri denetler mekanizması geçici olarak devre dışı bırakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-167">For development purposes only, you can temporarily disable the mechanism that checks the chain of trust for a certificate.</span></span> <span data-ttu-id="71ce2-168">Bunu yapmak için ayarlayın `CertificateValidationMode` ya da özellik `PeerTrust` veya `PeerOrChainTrust`.</span><span class="sxs-lookup"><span data-stu-id="71ce2-168">To do this, set the `CertificateValidationMode` property to either `PeerTrust` or `PeerOrChainTrust`.</span></span> <span data-ttu-id="71ce2-169">Sertifika ya da (eş güven) kendi kendine verilebilmesi için her iki modda belirtir ya da bir güven zinciri parçası.</span><span class="sxs-lookup"><span data-stu-id="71ce2-169">Either mode specifies that the certificate can either be self-issued (peer trust) or part of a chain of trust.</span></span> <span data-ttu-id="71ce2-170">Aşağıdaki sınıflar hiçbirinde özelliğini ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-170">You can set the property on any of the following classes.</span></span>  
  
|<span data-ttu-id="71ce2-171">örneği</span><span class="sxs-lookup"><span data-stu-id="71ce2-171">Class</span></span>|<span data-ttu-id="71ce2-172">Özellik</span><span class="sxs-lookup"><span data-stu-id="71ce2-172">Property</span></span>|  
|-----------|--------------|  
|<xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>|<xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|  
|<xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>|<xref:System.ServiceModel.Security.X509PeerCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|  
|<xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>|<xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|  
|<xref:System.ServiceModel.Security.IssuedTokenServiceCredential>|<xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A?displayProperty=nameWithType>|  
  
 <span data-ttu-id="71ce2-173">Yapılandırmayı kullanarak özelliği de ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-173">You can also set the property using configuration.</span></span> <span data-ttu-id="71ce2-174">Aşağıdaki öğeler, doğrulama modunu belirtmek için kullanılır:</span><span class="sxs-lookup"><span data-stu-id="71ce2-174">The following elements are used to specify the validation mode:</span></span>  
  
-   [<span data-ttu-id="71ce2-175">\<kimlik doğrulama ></span><span class="sxs-lookup"><span data-stu-id="71ce2-175">\<authentication></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md)  
  
-   [<span data-ttu-id="71ce2-176">\<peerAuthentication ></span><span class="sxs-lookup"><span data-stu-id="71ce2-176">\<peerAuthentication></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/peerauthentication-element.md)  
  
-   [<span data-ttu-id="71ce2-177">\<messageSenderAuthentication ></span><span class="sxs-lookup"><span data-stu-id="71ce2-177">\<messageSenderAuthentication></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/messagesenderauthentication-element.md)  
  
## <a name="custom-authentication"></a><span data-ttu-id="71ce2-178">Özel kimlik doğrulama</span><span class="sxs-lookup"><span data-stu-id="71ce2-178">Custom Authentication</span></span>  
 <span data-ttu-id="71ce2-179">`CertificateValidationMode` Özelliği de sertifikaları nasıl doğrulanır özelleştirme olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="71ce2-179">The `CertificateValidationMode` property also enables you to customize how certificates are authenticated.</span></span> <span data-ttu-id="71ce2-180">Varsayılan olarak, düzeyini ayarlamak `ChainTrust`.</span><span class="sxs-lookup"><span data-stu-id="71ce2-180">By default, the level is set to `ChainTrust`.</span></span> <span data-ttu-id="71ce2-181">Kullanılacak <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> değeri de ayarlamanız gerekir `CustomCertificateValidatorType` özniteliği bir derleme ve sertifikayı doğrulamak için kullanılan türü.</span><span class="sxs-lookup"><span data-stu-id="71ce2-181">To use the <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="71ce2-182">Özel Doğrulayıcı sağlayıcısı oluşturmak için Özet devralmalıdır <xref:System.IdentityModel.Selectors.X509CertificateValidator> sınıfı.</span><span class="sxs-lookup"><span data-stu-id="71ce2-182">To create a custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span>  
  
 <span data-ttu-id="71ce2-183">Özel bir kimlik doğrulayıcı oluştururken, geçersiz kılmak için en önemli yöntemdir <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> yöntemi.</span><span class="sxs-lookup"><span data-stu-id="71ce2-183">When creating a custom authenticator, the most important method to override is the <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> method.</span></span> <span data-ttu-id="71ce2-184">Özel kimlik doğrulama bir örnek için bkz: [X.509 Sertifika Doğrulayıcı](../../../../docs/framework/wcf/samples/x-509-certificate-validator.md) örnek.</span><span class="sxs-lookup"><span data-stu-id="71ce2-184">For an example of custom authentication, see the [X.509 Certificate Validator](../../../../docs/framework/wcf/samples/x-509-certificate-validator.md) sample.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="71ce2-185">[Özel kimlik bilgileri ve kimlik bilgileri doğrulaması](../../../../docs/framework/wcf/extending/custom-credential-and-credential-validation.md).</span><span class="sxs-lookup"><span data-stu-id="71ce2-185"> [Custom Credential and Credential Validation](../../../../docs/framework/wcf/extending/custom-credential-and-credential-validation.md).</span></span>  
  
## <a name="using-makecertexe-to-build-a-certificate-chain"></a><span data-ttu-id="71ce2-186">Bir sertifika zinciri oluşturmak için MakeCert.exe kullanma</span><span class="sxs-lookup"><span data-stu-id="71ce2-186">Using Makecert.exe to Build a Certificate Chain</span></span>  
 <span data-ttu-id="71ce2-187">Sertifika Oluşturma Aracı'nı (Makecert.exe) X.509 sertifikaları ve özel anahtarı/ortak anahtar çifti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="71ce2-187">The Certificate Creation Tool (Makecert.exe) creates X.509 certificates and private key/public key pairs.</span></span> <span data-ttu-id="71ce2-188">Disk ve vermek ve yeni sertifikaları imzalamak için kullanmak üzere özel anahtarı böylece zincirleme sertifika hiyerarşisini benzetimi kaydedebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-188">You can save the private key to disk and then use it to issue and sign new certificates, thus simulating a hierarchy of chained certificates.</span></span> <span data-ttu-id="71ce2-189">Hizmetleri ve hiçbir zaman gerçek dağıtım sertifikalarını oluşturmak için kullanılması gereken geliştirme aracı yalnızca bir yardımcı olarak kullanıma yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-189">The tool is intended for use only as an aid when developing services and should never be used to create certificates for actual deployment.</span></span> <span data-ttu-id="71ce2-190">Geliştirirken bir [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hizmet, bir Makecert.exe ile güven zinciri oluşturmak için aşağıdaki adımları kullanın.</span><span class="sxs-lookup"><span data-stu-id="71ce2-190">When developing an [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, use the following steps to build a chain of trust with Makecert.exe.</span></span>  
  
#### <a name="to-build-a-chain-of-trust-with-makecertexe"></a><span data-ttu-id="71ce2-191">Makecert.exe ile güven zinciri oluşturmak için</span><span class="sxs-lookup"><span data-stu-id="71ce2-191">To build a chain of trust with Makecert.exe</span></span>  
  
1.  <span data-ttu-id="71ce2-192">MakeCert.exe aracını kullanarak geçici kök yetkilisi (otomatik olarak imzalanan) bir sertifika oluşturun.</span><span class="sxs-lookup"><span data-stu-id="71ce2-192">Create a temporary root authority (self-signed) certificate using the MakeCert.exe tool.</span></span> <span data-ttu-id="71ce2-193">Özel anahtarı, diske kaydedin.</span><span class="sxs-lookup"><span data-stu-id="71ce2-193">Save the private key to the disk.</span></span>  
  
2.  <span data-ttu-id="71ce2-194">Yeni sertifika, ortak anahtarı içeren başka bir sertifika vermek için kullanın.</span><span class="sxs-lookup"><span data-stu-id="71ce2-194">Use the new certificate to issue another certificate that contains the public key.</span></span>  
  
3.  <span data-ttu-id="71ce2-195">Kök yetkilisi sertifikası güvenilen kök sertifika yetkilileri deposuna alın.</span><span class="sxs-lookup"><span data-stu-id="71ce2-195">Import the root authority certificate into the Trusted Root Certification Authorities store.</span></span>  
  
4.  <span data-ttu-id="71ce2-196">Adım adım yönergeler için bkz: [nasıl yapılır: geliştirme sırasında kullanmak için geçici sertifikalar oluşturma](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span><span class="sxs-lookup"><span data-stu-id="71ce2-196">For step-by-step instructions, see [How to: Create Temporary Certificates for Use During Development](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span></span>  
  
## <a name="which-certificate-to-use"></a><span data-ttu-id="71ce2-197">Hangi sertifikanın kullanılacak?</span><span class="sxs-lookup"><span data-stu-id="71ce2-197">Which Certificate to Use?</span></span>  
 <span data-ttu-id="71ce2-198">Sertifikalar hakkında sık sorulan sorular, hangi sertifikanın kullanılacağını olan ve neden.</span><span class="sxs-lookup"><span data-stu-id="71ce2-198">Common questions about certificates are which certificate to use, and why.</span></span> <span data-ttu-id="71ce2-199">Yanıt, istemci veya hizmet programlama üzerinde bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-199">The answer depends on whether you are programming a client or service.</span></span> <span data-ttu-id="71ce2-200">Aşağıdaki bilgiler genel bir kılavuz sağlar ve bu soruların kapsamlı bir çözüm değildir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-200">The following information provides a general guideline and is not an exhaustive answer to these questions.</span></span>  
  
### <a name="service-certificates"></a><span data-ttu-id="71ce2-201">Hizmet sertifikaları</span><span class="sxs-lookup"><span data-stu-id="71ce2-201">Service Certificates</span></span>  
 <span data-ttu-id="71ce2-202">Hizmet sertifikaları istemcileri için sunucu kimlik doğrulaması birincil görevi vardır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-202">Service certificates have the primary task of authenticating the server to clients.</span></span> <span data-ttu-id="71ce2-203">Bir istemci bir sunucu kimlik doğrulaması gerçekleştirdiğinde ilk denetimlerden biridir değerini karşılaştırmak için **konu** alan Tekdüzen Kaynak Tanımlayıcısı (URI) için kullanılan hizmetiyle iletişim kurulamadı: hem DNS eşleşmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-203">One of the initial checks when a client authenticates a server is to compare the value of the **Subject** field to the Uniform Resource Identifier (URI) used to contact the service: the DNS of both must match.</span></span> <span data-ttu-id="71ce2-204">Örneğin, hizmet URI'si "http://www.contoso.com/endpoint/" ise sonra **konu** alan "www.contoso.com" değeri de içermesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-204">For example, if the URI of the service is "http://www.contoso.com/endpoint/" then the **Subject** field must also contain the value "www.contoso.com".</span></span>  
  
 <span data-ttu-id="71ce2-205">Alan çeşitli değerleri içerebilir, her değeri belirtmek için bir başlatma önekli dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="71ce2-205">Note that the field can contain several values, each prefixed with an initialization to indicate the value.</span></span> <span data-ttu-id="71ce2-206">En yaygın olarak, başlatma "CN =" ortak adı, örneğin, işlemi "CN = www.contoso.com".</span><span class="sxs-lookup"><span data-stu-id="71ce2-206">Most commonly, the initialization is "CN" for common name, for example, "CN = www.contoso.com".</span></span> <span data-ttu-id="71ce2-207">Ayrıca mümkündür **konu** ; bu durumda, boş olması için alan **konu diğer adı** alan içerebilir **DNS adı** değeri.</span><span class="sxs-lookup"><span data-stu-id="71ce2-207">It is also possible for the **Subject** field to be blank, in which case the **Subject Alternative Name** field can contain the **DNS Name** value.</span></span>  
  
 <span data-ttu-id="71ce2-208">Ayrıca değerini not edin **Hedeflenen amaçlar** sertifikası alanı, "Sunucu kimlik doğrulaması" veya "İstemci kimlik doğrulaması" gibi uygun bir değer içermelidir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-208">Also note the value of the **Intended Purposes** field of the certificate should include an appropriate value, such as "Server Authentication" or "Client Authentication".</span></span>  
  
### <a name="client-certificates"></a><span data-ttu-id="71ce2-209">İstemci sertifikaları</span><span class="sxs-lookup"><span data-stu-id="71ce2-209">Client Certificates</span></span>  
 <span data-ttu-id="71ce2-210">İstemci sertifikaları genellikle bir üçüncü taraf sertifika yetkilisi tarafından verilen değil.</span><span class="sxs-lookup"><span data-stu-id="71ce2-210">Client certificates are not typically issued by a third-party certification authority.</span></span> <span data-ttu-id="71ce2-211">Bunun yerine, geçerli kullanıcının konuma kişisel deposunda genellikle var. bir amacı "İstemci kimlik doğrulaması" ile bir kök yetkilisi tarafından yerleştirilen sertifikaları içerir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-211">Instead, the Personal store of the current user location typically contains certificates placed there by a root authority, with an intended purpose of "Client Authentication".</span></span> <span data-ttu-id="71ce2-212">Karşılıklı kimlik doğrulaması gerekli olduğunda, istemcinin bu tür bir sertifika kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-212">The client can use such a certificate when mutual authentication is required.</span></span>  
  
## <a name="online-revocation-and-offline-revocation"></a><span data-ttu-id="71ce2-213">Çevrimiçi iptal ve çevrimdışı iptal etme</span><span class="sxs-lookup"><span data-stu-id="71ce2-213">Online Revocation and Offline Revocation</span></span>  
  
### <a name="certificate-validity"></a><span data-ttu-id="71ce2-214">Sertifika geçerlilik</span><span class="sxs-lookup"><span data-stu-id="71ce2-214">Certificate Validity</span></span>  
 <span data-ttu-id="71ce2-215">Her sertifika adlı süreyi yalnızca belirli bir süre için geçerlidir *geçerlilik süresi*.</span><span class="sxs-lookup"><span data-stu-id="71ce2-215">Every certificate is valid only for a given period of time, called the *validity period*.</span></span> <span data-ttu-id="71ce2-216">Geçerlilik süresi tarafından tanımlanan **geçerlilik** ve **için geçerli** alanları, bir X.509 sertifikası.</span><span class="sxs-lookup"><span data-stu-id="71ce2-216">The validity period is defined by the **Valid from** and **Valid to** fields of an X.509 certificate.</span></span> <span data-ttu-id="71ce2-217">Kimlik doğrulaması sırasında sertifikası hala geçerlilik süresi içinde olup olmadığını belirlemek için sertifika denetlenir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-217">During authentication, the certificate is checked to determine whether the certificate is still within the validity period.</span></span>  
  
### <a name="certificate-revocation-list"></a><span data-ttu-id="71ce2-218">Sertifika iptal listesi</span><span class="sxs-lookup"><span data-stu-id="71ce2-218">Certificate Revocation List</span></span>  
 <span data-ttu-id="71ce2-219">Geçerlilik süresi sırasında herhangi bir zamanda sertifika yetkilisi, sertifika iptal edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-219">At any time during the validity period, the certification authority can revoke a certificate.</span></span> <span data-ttu-id="71ce2-220">Bu sertifikanın özel anahtarı güvenliğinin gibi birçok nedenlerle ortaya çıkabilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-220">This can occur for many reasons, such as a compromise of the private key of the certificate.</span></span>  
  
 <span data-ttu-id="71ce2-221">Bu durumda, iptal edilen sertifika Düzen zincirleri ayrıca geçersiz ve kimlik doğrulama yordamları sırasında güvenilir değildir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-221">When this occurs, any chains that descend from the revoked certificate are also invalid, and are not trusted during authentication procedures.</span></span> <span data-ttu-id="71ce2-222">Hangi sertifikaların iptal bulmak için bir saat ve tarih-damgalı her veren yayımlar *sertifika iptal listesi* (CRL).</span><span class="sxs-lookup"><span data-stu-id="71ce2-222">To find out which certificates are revoked, each issuer publishes a time- and date-stamped *certificate revocation list* (CRL).</span></span> <span data-ttu-id="71ce2-223">Listenin ayarlayarak çevrimiçi iptal ya da çevrimdışı iptal kullanılarak denetlenebilir `RevocationMode` veya `DefaultRevocationMode` birine aşağıdaki sınıflar özelliğinin <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> numaralandırma değerlerinin: <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>, <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>, <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> ve <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> sınıfları.</span><span class="sxs-lookup"><span data-stu-id="71ce2-223">The list can be checked using either online revocation or offline revocation by setting the `RevocationMode` or `DefaultRevocationMode` property of the following classes to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> enumeration values: <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>, <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>, <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>, and the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> classes.</span></span> <span data-ttu-id="71ce2-224">Tüm özellikler için varsayılan değer `Online`.</span><span class="sxs-lookup"><span data-stu-id="71ce2-224">The default value for all properties is `Online`.</span></span>  
  
 <span data-ttu-id="71ce2-225">Kullanılarak yapılandırma modu da ayarlayabilirsiniz `revocationMode` her iki öznitelik [ \<kimlik doğrulama >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (biri [ \<serviceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)) ve [ \<kimlik doğrulama >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (biri [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md)).</span><span class="sxs-lookup"><span data-stu-id="71ce2-225">You can also set the mode in configuration using the `revocationMode` attribute of both the [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (of the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)) and the [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (of the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md)).</span></span>  
  
## <a name="the-setcertificate-method"></a><span data-ttu-id="71ce2-226">SetCertificate yöntemi</span><span class="sxs-lookup"><span data-stu-id="71ce2-226">The SetCertificate Method</span></span>  
 <span data-ttu-id="71ce2-227">İçinde [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], çoğunlukla bir sertifika belirtin veya bir hizmet sertifikalarının ayarlayın veya istemcidir şifrelemek veya bir ileti dijital olarak imzala doğrulamak için kullanılacak.</span><span class="sxs-lookup"><span data-stu-id="71ce2-227">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], you must often specify a certificate or set of certificates a service or client is to use to authenticate, encrypt, or digitally sign a message.</span></span> <span data-ttu-id="71ce2-228">Program aracılığıyla kullanarak bunu yapabilirsiniz `SetCertificate` X.509 sertifikalarını temsil eden çeşitli sınıflar yöntemi.</span><span class="sxs-lookup"><span data-stu-id="71ce2-228">You can do this programmatically by using the `SetCertificate` method of various classes that represent X.509 certificates.</span></span> <span data-ttu-id="71ce2-229">Aşağıdaki sınıflar kullanım `SetCertificate` yöntemi bir sertifika belirtin.</span><span class="sxs-lookup"><span data-stu-id="71ce2-229">The following classes use the `SetCertificate` method to specify a certificate.</span></span>  
  
|<span data-ttu-id="71ce2-230">örneği</span><span class="sxs-lookup"><span data-stu-id="71ce2-230">Class</span></span>|<span data-ttu-id="71ce2-231">Yöntem</span><span class="sxs-lookup"><span data-stu-id="71ce2-231">Method</span></span>|  
|-----------|------------|  
|<xref:System.ServiceModel.Security.PeerCredential>|<xref:System.ServiceModel.Security.PeerCredential.SetCertificate%2A>|  
|<xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential>|<xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A>|  
|<xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential>|<xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A>|  
|<xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential>|  
|<xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A>|  
  
 <span data-ttu-id="71ce2-232">`SetCertificate` Yöntem çalışır bir depolama konumu ve depo, bir "Bul" türü belirterek (`x509FindType` parametresi) bir alan sertifikanın ve alanındaki bulmak için bir değer belirtir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-232">The `SetCertificate` method works by designating a store location and store, a "find" type (`x509FindType` parameter) that specifies a field of the certificate, and a value to find in the field.</span></span> <span data-ttu-id="71ce2-233">Örneğin, aşağıdaki kod oluşturur bir <xref:System.ServiceModel.ServiceHost> örneği ve istemcilerle hizmete kimlik doğrulaması için kullanılan hizmet sertifikası ayarlar `SetCertificate` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="71ce2-233">For example, the following code creates a <xref:System.ServiceModel.ServiceHost> instance and sets the service certificate used to authenticate the service to clients with the `SetCertificate` method.</span></span>  
  
 [!code-csharp[c_WorkingWithCertificates#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_workingwithcertificates/cs/source.cs#1)]
 [!code-vb[c_WorkingWithCertificates#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_workingwithcertificates/vb/source.vb#1)]  
  
### <a name="multiple-certificates-with-the-same-value"></a><span data-ttu-id="71ce2-234">Aynı değere sahip birden çok sertifika</span><span class="sxs-lookup"><span data-stu-id="71ce2-234">Multiple Certificates with the Same Value</span></span>  
 <span data-ttu-id="71ce2-235">Bir mağaza aynı konu adına sahip birden çok sertifika içerebilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-235">A store may contain multiple certificates with the same subject name.</span></span> <span data-ttu-id="71ce2-236">Bunun anlamı belirtirseniz `x509FindType` olan <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName> veya <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectDistinguishedName>ve birden fazla sertifika aynı değere sahip, hangi sertifikanın gereklidir ayırt etmek için becausethereisno yolu özel durum oluşur.</span><span class="sxs-lookup"><span data-stu-id="71ce2-236">This means that if you specify that the `x509FindType` is <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName> or <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectDistinguishedName>, and more than one certificate has the same value, an exception is thrown becausethereisno way to distinguish which certificate is required.</span></span> <span data-ttu-id="71ce2-237">Bu ayarlayarak azaltmak `x509FindType` için <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint>.</span><span class="sxs-lookup"><span data-stu-id="71ce2-237">You can mitigate this by setting the `x509FindType` to <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint>.</span></span> <span data-ttu-id="71ce2-238">Parmak izi alan belirli bir Sertifika Mağazası'nda bulmak için kullanılan benzersiz bir değer içerir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-238">The thumbprint field contains a unique value that can be used to find a specific certificate in a store.</span></span> <span data-ttu-id="71ce2-239">Kendi dezavantajı değiştirilirse: sertifika iptal veya yenilenmiş, `SetCertificate` parmak izi de kaldırılmıştır olduğundan yöntem başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="71ce2-239">However, this has its own disadvantage: if the certificate is revoked or renewed, the `SetCertificate` method fails because the thumbprint is also gone.</span></span> <span data-ttu-id="71ce2-240">Veya, sertifika artık geçerli değilse, kimlik doğrulaması başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="71ce2-240">Or, if the certificate is no longer valid, authentication fails.</span></span> <span data-ttu-id="71ce2-241">Bu durumu iyileştirmek için ayarlanacak yoludur `x590FindType` parametresi <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByIssuerName> ve verenin adı belirtin.</span><span class="sxs-lookup"><span data-stu-id="71ce2-241">The way to mitigate this is to set the `x590FindType` parameter to <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByIssuerName> and specify the issuer's name.</span></span> <span data-ttu-id="71ce2-242">Belirli bir veren gerekiyorsa, ayrıca diğer birini ayarlayabilirsiniz <xref:System.Security.Cryptography.X509Certificates.X509FindType> gibi numaralandırma değerleri <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByTimeValid>.</span><span class="sxs-lookup"><span data-stu-id="71ce2-242">If no particular issuer is required, you can also set one of the other <xref:System.Security.Cryptography.X509Certificates.X509FindType> enumeration values, such as <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByTimeValid>.</span></span>  
  
## <a name="certificates-in-configuration"></a><span data-ttu-id="71ce2-243">Sertifikaları yapılandırma</span><span class="sxs-lookup"><span data-stu-id="71ce2-243">Certificates in Configuration</span></span>  
 <span data-ttu-id="71ce2-244">Yapılandırmayı kullanarak sertifikaları de ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-244">You can also set certificates by using configuration.</span></span> <span data-ttu-id="71ce2-245">Bir hizmet oluşturuyorsanız, kimlik, sertifikalar dahil altında belirtilen [ \<serviceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span><span class="sxs-lookup"><span data-stu-id="71ce2-245">If you are creating a service, credentials, including certificates, are specified under the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span></span> <span data-ttu-id="71ce2-246">Bir istemci programlamada sertifikaları altında belirtilen [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md).</span><span class="sxs-lookup"><span data-stu-id="71ce2-246">When you are programming a client, certificates are specified under the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md).</span></span>  
  
## <a name="mapping-a-certificate-to-a-user-account"></a><span data-ttu-id="71ce2-247">Bir kullanıcı hesabına bir sertifika eşlemesi</span><span class="sxs-lookup"><span data-stu-id="71ce2-247">Mapping a Certificate to a User Account</span></span>  
 <span data-ttu-id="71ce2-248">Bir IIS ve Active Directory bir Windows kullanıcı hesabı için bir sertifika eşleme özelliğini özelliğidir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-248">A feature of IIS and Active Directory is the ability to map a certificate to a Windows user account.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="71ce2-249">özellik bkz [sertifikaları kullanıcı hesaplarına eşleme](http://go.microsoft.com/fwlink/?LinkId=88917).</span><span class="sxs-lookup"><span data-stu-id="71ce2-249"> the feature, see [Map certificates to user accounts](http://go.microsoft.com/fwlink/?LinkId=88917).</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="71ce2-250">bkz: Active Directory eşlemesi kullanma, [dizin hizmeti eşlemesi ile eşleme istemci sertifikalarının](http://go.microsoft.com/fwlink/?LinkId=88918).</span><span class="sxs-lookup"><span data-stu-id="71ce2-250"> using Active Directory mapping, see [Mapping Client Certificates with Directory Service Mapping](http://go.microsoft.com/fwlink/?LinkId=88918).</span></span>  
  
 <span data-ttu-id="71ce2-251">Bu özelliği etkin, ayarladığınız <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.MapClientCertificateToWindowsAccount%2A> özelliği <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> sınıfının `true`.</span><span class="sxs-lookup"><span data-stu-id="71ce2-251">With this capability enabled, you can set the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.MapClientCertificateToWindowsAccount%2A> property of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class to `true`.</span></span> <span data-ttu-id="71ce2-252">Yapılandırmada, ayarladığınız `mapClientCertificateToWindowsAccount` özniteliği [ \<kimlik doğrulama >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) öğesine `true`aşağıdaki kodda gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="71ce2-252">In configuration, you can set the `mapClientCertificateToWindowsAccount` attribute of the [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element to `true`, as shown in the following code.</span></span>  
  
```xml  
<serviceBehaviors>  
 <behavior name="MappingBehavior">  
  <serviceCredentials>  
   <clientCertificate>  
    <authentication certificateValidationMode="None" mapClientCertificateToWindowsAccount="true" />  
   </clientCertificate>  
  </serviceCredentials>  
 </behavior>  
</serviceBehaviors>  
```  
  
 <span data-ttu-id="71ce2-253">Bir Windows kullanıcı hesabı temsil eden belirteci için bir X.509 sertifikası eşleme, korunan kaynaklara erişim kazanmak için eşlenen sonra Windows belirteci kullanılabilir olduğundan, bir ayrıcalık kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-253">Mapping an X.509 certificate to the token that represents a Windows user account is considered an elevation of privilege because, once mapped, the Windows token can be used to gain access to protected resources.</span></span> <span data-ttu-id="71ce2-254">Bu nedenle, etki alanı ilkesi eşleme önce kendi ilkesiyle uyumlu uymak için X.509 sertifikası gerektirir.</span><span class="sxs-lookup"><span data-stu-id="71ce2-254">Therefore, domain policy requires the X.509 certificate to comply with its policy prior to mapping.</span></span> <span data-ttu-id="71ce2-255">*SChannel* güvenlik paketi bu gereksinim zorlar.</span><span class="sxs-lookup"><span data-stu-id="71ce2-255">The *SChannel* security package enforces this requirement.</span></span>  
  
 <span data-ttu-id="71ce2-256">Kullanırken [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] veya sonraki sürümlerde, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sertifika için bir Windows hesabı eşlenen önce etki alanı ilkesi uyumlu sağlar.</span><span class="sxs-lookup"><span data-stu-id="71ce2-256">When using [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] or later, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ensures the certificate conforms to domain policy before it is mapped to a Windows account.</span></span>  
  
 <span data-ttu-id="71ce2-257">İlk sürümünde [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], eşleme, etki alanı ilkesi danışmanlık olmadan yapılır.</span><span class="sxs-lookup"><span data-stu-id="71ce2-257">In the first release of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], mapping is done without consulting the domain policy.</span></span> <span data-ttu-id="71ce2-258">Bu nedenle ilk sürüm altında çalışırken çalışmak için kullanılan eski uygulamaları eşleme etkinleştirilmişse ve X.509 sertifikası etki alanı ilkesi karşılamadığı başarısız mümkündür.</span><span class="sxs-lookup"><span data-stu-id="71ce2-258">Therefore it is possible that older applications that used to work when running under the first release, fails if the mapping is enabled and the X.509 certificate does not satisfy the domain policy.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="71ce2-259">Ayrıca Bkz.</span><span class="sxs-lookup"><span data-stu-id="71ce2-259">See Also</span></span>  
 <xref:System.ServiceModel.Channels>  
 <xref:System.ServiceModel.Security>  
 <xref:System.ServiceModel>  
 <xref:System.Security.Cryptography.X509Certificates.X509FindType>  
 [<span data-ttu-id="71ce2-260">Hizmetler ve istemcileri güvenli hale getirme</span><span class="sxs-lookup"><span data-stu-id="71ce2-260">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
