---
title: Tek kapsayıcı dağıtma .NET Core Web uygulamaları Linux veya Windows Nano Server konakları göre
description: Kapsayıcılı .NET uygulamaları için .NET mikro mimarisi | Tek kapsayıcı dağıtma .NET Core Web uygulamaları Linux veya Windows Nano Server konakları göre
keywords: Docker, mikro, ASP.NET, kapsayıcı
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: f85b3db6b4ca6d22c4b855c8b96051c1c31350a6
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/23/2017
---
# <a name="deploying-single-container-based-net-core-web-applications-on-linux-or-windows-nano-server-hosts"></a><span data-ttu-id="ca3a4-104">Linux veya Windows Nano Server konakları tek kapsayıcı tabanlı .NET Core Web uygulamalarını dağıtma</span><span class="sxs-lookup"><span data-stu-id="ca3a4-104">Deploying Single-Container-Based .NET Core Web Applications on Linux or Windows Nano Server Hosts</span></span>

<span data-ttu-id="ca3a4-105">*Docker kapsayıcıları tek yapılı daha basit web uygulamalarının dağıtımını için kullanabilirsiniz. Bu, sürekli tümleştirme artırır ve sürekli dağıtımı ardışık düzenleri ve dağıtım üretim başarılı olmasına yardımcı olur. Daha fazla "Makinem içinde çalışır neden üretimde çalışmıyor?"*</span><span class="sxs-lookup"><span data-stu-id="ca3a4-105">*You can use Docker containers for monolithic deployment of simpler web applications. This improves continuous integration and continuous deployment pipelines and helps achieve deployment-to-production success. No more “It works in my machine, why does not work in production?”*</span></span>

<span data-ttu-id="ca3a4-106">Mikro tabanlı bir mimari için birçok fayda olsa da, bu avantajlar artan karmaşıklık maliyetlerine gelir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-106">A microservices-based architecture has many benefits, but those benefits come at a cost of increased complexity.</span></span> <span data-ttu-id="ca3a4-107">Bazı durumlarda, maliyetleri ağır basıyor ve, tek bir kapsayıcı veya yalnızca birkaç kapsayıcıları çalıştıran bir tek yapılı dağıtım uygulama ile daha iyi sunulacak.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-107">In some cases, the costs outweigh the benefits, and you will be better served with a monolithic deployment application running in a single container or in just a few containers.</span></span> 

<span data-ttu-id="ca3a4-108">Tek yapılı bir uygulama içinde iyi ayrılmış mikro kolayca decomposable olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-108">A monolithic application might not be easily decomposable into well-separated microservices.</span></span> <span data-ttu-id="ca3a4-109">Bu işlev tarafından bölümlenmesi öğrendiniz: mikro birbirinden bağımsız olarak daha esnektir uygulaması sağlamak için çalışmalıdır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-109">You have learned that these should be partitioned by function: microservices should work independently of each other to provide a more resilient application.</span></span> <span data-ttu-id="ca3a4-110">Uygulamanın özellik dilimler gönderemez, onu ayırarak karmaşıklık yalnızca ekler.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-110">If you cannot deliver feature slices of the application, separating it only adds complexity.</span></span>

<span data-ttu-id="ca3a4-111">Bir uygulama, henüz özellikleri bağımsız olarak ölçeklendirebilirsiniz gerekmeyebilir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-111">An application might not yet need to scale features independently.</span></span> <span data-ttu-id="ca3a4-112">Şimdi erken ömrünü bizim eShopOnContainers başvuru uygulaması, trafiği özellikleri farklı mikro ayırarak justify değil olduğunu varsayalım.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-112">Let’s suppose that early in the life of our eShopOnContainers reference application, the traffic did not justify separating features into different microservices.</span></span> <span data-ttu-id="ca3a4-113">Trafik kaynakları için bir hizmet genellikle ekleme kaynakları tüm hizmetlere ekleme amacı yetecek kadar küçük.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-113">Traffic was small enough that adding resources to one service typically meant adding resources to all services.</span></span> <span data-ttu-id="ca3a4-114">Ayrık Hizmetleri uygulamasına ayırmak için ek iş en az avantajı sağlanır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-114">The additional work to separate the application into discrete services provided minimal benefit.</span></span>

<span data-ttu-id="ca3a4-115">Ayrıca, erken bir uygulama geliştirmede, dair NET bir fikir doğal işlevsel sınırları nerede sahip olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-115">Also, early in the development of an application you might not have a clear idea where the natural functional boundaries are.</span></span> <span data-ttu-id="ca3a4-116">En az bir anlamlı ürün geliştirdikçe doğal ayrımı henüz çıkmıştır değil.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-116">As you develop a minimum viable product, the natural separation might not yet have emerged.</span></span>

<span data-ttu-id="ca3a4-117">Bu koşullar bazıları geçici olabilir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-117">Some of these conditions might be temporary.</span></span> <span data-ttu-id="ca3a4-118">Tek yapılı bir uygulama oluşturun ve daha sonra geliştirilen ve mikro hizmetler dağıtılan için bazı özellikler ayrı.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-118">You might start by creating a monolithic application, and later separate some features to be developed and deployed as microservices.</span></span> <span data-ttu-id="ca3a4-119">Diğer koşullar uygulama içinde birden çok mikro hiçbir zaman bozuk, yani uygulamanın sorun alanı için önemli olabilir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-119">Other conditions might be essential to the application’s problem space, meaning that the application might never be broken into multiple microservices.</span></span>

<span data-ttu-id="ca3a4-120">Bir uygulamaya birçok ayrı işlemler ayırarak ek yükü tanıtır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-120">Separating an application into many discrete processes also introduces overhead.</span></span> <span data-ttu-id="ca3a4-121">Özellikler farklı işlemlere ayırmak daha karmaşık yoktur.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-121">There is more complexity in separating features into different processes.</span></span> <span data-ttu-id="ca3a4-122">İletişim protokolleri daha karmaşık hale gelir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-122">The communication protocols become more complex.</span></span> <span data-ttu-id="ca3a4-123">Yöntem çağrıları yerine Hizmetleri arasındaki zaman uyumsuz iletişim kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-123">Instead of method calls, you must use asynchronous communications between services.</span></span> <span data-ttu-id="ca3a4-124">Mikro mimarisi için ilerlerken, birçok eShopOnContainers uygulama mikro sürümünde yapı taşları eklemeniz gerekir: olay bus işleme, ileti dayanıklılık ve yeniden deneme, nihai tutarlılık ve daha fazla.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-124">As you move to a microservices architecture, you need to add many of the building blocks implemented in the microservices version of the eShopOnContainers application: event bus handling, message resiliency and retries, eventual consistency, and more.</span></span>

<span data-ttu-id="ca3a4-125">EShopOnContainers daha basitleştirilmiş bir sürümünü (adlı [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) ve aynı GitHub depo dahil) çalışır ve olarak yalnızca tek yapılı bir MVC uygulaması olarak açıklandığı gibi bu tasarım seçiminin tarafından sunulan avantajı vardır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-125">A much-simplified version of eShopOnContainers (named [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) and included in the same GitHub repo) runs as a monolithic MVC application, and as just described, there are advantages offered by that design choice.</span></span> <span data-ttu-id="ca3a4-126">Bu uygulama için kaynak Github'dan indirin ve yerel olarak çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-126">You can download the source for this application from GitHub and run it locally.</span></span> <span data-ttu-id="ca3a4-127">Tek yapılı bu uygulama, bir kapsayıcı ortamında dağıtılan fayda sağlar.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-127">Even this monolithic application benefits from being deployed in a container environment.</span></span>

<span data-ttu-id="ca3a4-128">Birincisi, kapsayıcılı dağıtım uygulama her örneğini aynı ortamda çalıştırır anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-128">For one, the containerized deployment means that every instance of the application runs in the same environment.</span></span> <span data-ttu-id="ca3a4-129">Bu, burada erken test ve geliştirme gerçekleşmesi Geliştirici ortamı içerir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-129">This includes the developer environment where early testing and development take place.</span></span> <span data-ttu-id="ca3a4-130">Geliştirme ekibi uygulamayı üretim ortamına eşleşen kapsayıcılı bir ortamda çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-130">The development team can run the application in a containerized environment that matches the production environment.</span></span>

<span data-ttu-id="ca3a4-131">Ayrıca, daha düşük maliyetle uygulamaları ölçeklendirme kapsayıcılı.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-131">In addition, containerized applications scale out at lower cost.</span></span> <span data-ttu-id="ca3a4-132">Daha önce gördüğünüz gibi geleneksel VM ortamlarında paylaşımı büyük kaynak kapsayıcı ortamı sağlar.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-132">As you saw earlier, the container environment enables greater resource sharing than traditional VM environments.</span></span>

<span data-ttu-id="ca3a4-133">Son olarak, uygulama containerizing iş mantığı ve depolama sunucusu arasında ayrım zorlar.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-133">Finally, containerizing the application forces a separation between the business logic and the storage server.</span></span> <span data-ttu-id="ca3a4-134">Uygulamanın çıkışı ölçeklendirir gibi birden çok kapsayıcı tüm tek bir fiziksel depolama bir ortamda kullanır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-134">As the application scales out, the multiple containers will all rely on a single physical storage medium.</span></span> <span data-ttu-id="ca3a4-135">Bu, genellikle bir SQL Server veritabanını çalıştıran bir yüksek oranda kullanılabilirlik sunucusu olacaktır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-135">This would typically be a high-availability server running a SQL Server database.</span></span>

## <a name="application-tour"></a><span data-ttu-id="ca3a4-136">Uygulama turu</span><span class="sxs-lookup"><span data-stu-id="ca3a4-136">Application tour</span></span>

<span data-ttu-id="ca3a4-137">[EShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) tek yapılı bir uygulama olarak çalışan eShopOnContainers uygulama bazıları uygulamasını temsil eder — .NET Core üzerinde çalışan bir ASP.NET Core göre MVC uygulama.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-137">The [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) application represents some of the eShopOnContainers application running as a monolithic application—an ASP.NET Core MVC based application running on .NET Core.</span></span> <span data-ttu-id="ca3a4-138">Esas olarak, biz önceki bölümlerde açıklanan özellikleri gözatma Kataloğu sağlar.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-138">It mainly provides the catalog browsing capabilities that we described in earlier sections.</span></span>

<span data-ttu-id="ca3a4-139">Uygulama Kataloğu depolama için bir SQL Server veritabanını kullanır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-139">The application uses a SQL Server database for the catalog storage.</span></span> <span data-ttu-id="ca3a4-140">Kapsayıcı tabanlı dağıtımlarda, bu tek yapılı uygulaması aynı veri deposu mikro tabanlı bir uygulama olarak erişebilir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-140">In container-based deployments, this monolithic application can access the same data store as the microservices-based application.</span></span> <span data-ttu-id="ca3a4-141">Uygulama, SQL Server tek yapılı uygulama yanında bir kapsayıcıda çalıştırmak için yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-141">The application is configured to run SQL Server in a container alongside the monolithic application.</span></span> <span data-ttu-id="ca3a4-142">Bir üretim ortamında, SQL Server Docker ana bilgisayar dışında bir yüksek kullanılabilirlik makine üzerinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-142">In a production environment, SQL Server would run on a high-availability machine, outside of the Docker host.</span></span> <span data-ttu-id="ca3a4-143">Bir geliştirme veya test ortamına kolaylık olması için kendi kapsayıcısında SQL Server çalıştıran öneririz.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-143">For convenience in a dev or test environment, we recommend running SQL Server in its own container.</span></span>

<span data-ttu-id="ca3a4-144">Yalnızca ilk özellik katalog taramayı etkinleştirir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-144">The initial feature set only enables browsing the catalog.</span></span> <span data-ttu-id="ca3a4-145">Güncelleştirmeleri kapsayıcılı uygulamanın tam özellik kümesini etkinleştirir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-145">Updates would enable the full feature set of the containerized application.</span></span> <span data-ttu-id="ca3a4-146">Tek yapılı web uygulama mimarisi daha gelişmiş bir açıklanan [ASP.NET Web uygulaması mimarisi yöntemler](https://aka.ms/webappebook) e-kitap ve ilgili [eShopOnWeb örnek uygulama](http://aka.ms/WebAppArchitecture), ancak bu durumda Bu senaryo ile ASP.NET Core düz web geliştirme odaklanır çünkü Docker kapsayıcılarında çalışmıyor.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-146">A more advanced monolithic web application architecture is described in the [ASP.NET Web Application architecture practices](https://aka.ms/webappebook) e-book and related [eShopOnWeb sample application](http://aka.ms/WebAppArchitecture), although in that case it is not running on Docker containers because that scenario focuses on plain web development with ASP.NET Core.</span></span>

<span data-ttu-id="ca3a4-147">Ancak, eShopOnContainers (eShopWeb) kullanılabilir Basitleştirilmiş sürüm Docker kapsayıcısı içinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-147">However, the simplified version available in eShopOnContainers (eShopWeb) runs in a Docker container.</span></span>

## <a name="docker-support"></a><span data-ttu-id="ca3a4-148">Docker desteği</span><span class="sxs-lookup"><span data-stu-id="ca3a4-148">Docker support</span></span>

<span data-ttu-id="ca3a4-149">EShopOnWeb proje .NET Core üzerinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-149">The eShopOnWeb project runs on .NET Core.</span></span> <span data-ttu-id="ca3a4-150">Bu nedenle, Linux tabanlı veya Windows tabanlı kapsayıcılarında çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-150">Therefore, it can run in either Linux-based or Windows-based containers.</span></span> <span data-ttu-id="ca3a4-151">Aynı ana bilgisayar türü SQL Server için kullanmak istediğiniz Docker dağıtımı için unutmayın.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-151">Note that for Docker deployment, you want to use the same host type for SQL Server.</span></span> <span data-ttu-id="ca3a4-152">Linux tabanlı kapsayıcıları daha küçük bir yer sağlar ve tercih edilir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-152">Linux-based containers allow a smaller footprint and are preferred.</span></span>

<span data-ttu-id="ca3a4-153">Visual Studio çözüm Docker için destek ekler bir proje şablonu sağlar.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-153">Visual Studio provides a project template that adds support for Docker to a solution.</span></span> <span data-ttu-id="ca3a4-154">Projeye sağ tıklayın, ardından **Ekle** arkasından **Docker Destek**.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-154">You right-click the project, click **Add** followed by **Docker Support**.</span></span> <span data-ttu-id="ca3a4-155">Projenizi ve yeni bir şablon bir Dockerfile ekler **docker compose'u** proje starter docker-compose.yml dosyası sağlar.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-155">The template adds a Dockerfile to your project, and a new **docker-compose** project that provides a starter docker-compose.yml file.</span></span> <span data-ttu-id="ca3a4-156">Bu adım, Github'dan indirilen eShopOnWeb projede zaten gerçekleştirilmedi.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-156">This step has already been done in the eShopOnWeb project downloaded from GitHub.</span></span> <span data-ttu-id="ca3a4-157">Çözüm içerdiğini görürsünüz **eShopOnWeb** proje ve **docker compose'u** proje Şekil 6-1'de gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-157">You will see that the solution contains the **eShopOnWeb** project and the **docker-compose** project as shown in Figure 6-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="ca3a4-158">**Şekil 6-1**.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-158">**Figure 6-1**.</span></span> <span data-ttu-id="ca3a4-159">**Docker compose'u** bir tek kapsayıcı web uygulaması projesi</span><span class="sxs-lookup"><span data-stu-id="ca3a4-159">The **docker-compose** project in a single-container web application</span></span>

<span data-ttu-id="ca3a4-160">Bu dosyalar standart docker-dosyaları, hiçbir Docker projeyle tutarlı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-160">These files are standard docker-compose files, consistent with any Docker project.</span></span> <span data-ttu-id="ca3a4-161">Bunları, Visual Studio ile veya komut satırından kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-161">You can use them with Visual Studio or from the command line.</span></span> <span data-ttu-id="ca3a4-162">Bu uygulama .NET Core üzerinde çalışır ve ayrıca kod, derleme ve bir Mac veya Linux makine çalıştırmak için Linux kapsayıcıları kullanır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-162">This application runs on .NET Core and uses Linux containers, so you can also code, build, and run on a Mac or on a Linux machine.</span></span>

<span data-ttu-id="ca3a4-163">Docker-compose.yml dosyası ne oluşturmak için görüntüler ve başlatmak için hangi kapsayıcıları hakkında bilgi içerir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-163">The docker-compose.yml file contains information about what images to build and what containers to launch.</span></span> <span data-ttu-id="ca3a4-164">Şablonları nasıl eshopweb yansıması oluştur ve uygulamanın kapsayıcıları başlatma belirtin.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-164">The templates specify how to build the eshopweb image and launch the application’s containers.</span></span> <span data-ttu-id="ca3a4-165">Bir görüntü ekleyerek SQL Server'da bağımlılık eklemeniz gerekir (örneğin, mssql sunucu linux) ve bir hizmet oluşturmak ve bu kapsayıcı başlatmak Docker sql.data görüntü için.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-165">You need to add the dependency on SQL Server by including an image for it (for example, mssql-server-linux), and a service for the sql.data image for Docker to build and launch that container.</span></span> <span data-ttu-id="ca3a4-166">Bu ayarlar, aşağıdaki örnekte gösterilir:</span><span class="sxs-lookup"><span data-stu-id="ca3a4-166">These settings are shown in the following example:</span></span>

```yml
version: '2'

services:
  eshopweb:
    image: eshop/web
    build:
    context: ./eShopWeb
    dockerfile: Dockerfile
    depends_on:
      - sql.data

  sql.data:
    image: microsoft/mssql-server-linux
```

<span data-ttu-id="ca3a4-167">Bağımlı\_eShopWeb görüntü sql.data görüntüde bağlıdır Docker yönergesi üzerinde söyler.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-167">The depends\_on directive tells Docker that the eShopWeb image depends on the sql.data image.</span></span> <span data-ttu-id="ca3a4-168">Bir görüntü oluşturmak için yönergeler aşağıdaki satırları microsoft/mssql-server-linux görüntüsünü kullanarak sql.data etiketlenir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-168">Lines below that are the instructions to build an image tagged sql.data using the microsoft/mssql-server-linux image.</span></span>

<span data-ttu-id="ca3a4-169">**Docker compose'u** project bu dosyaların ilişkili olduğunu görsel bir gösterge sağlamak için ana docker-compose.yml düğümü altındaki diğer docker-compose dosyaları görüntüler.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-169">The **docker-compose** project displays the other docker-compose files under the main docker-compose.yml node to provide a visual indication that these files are related.</span></span> <span data-ttu-id="ca3a4-170">Docker oluşturan override.yml dosyası hem Hizmetleri, bağlantı dizeleri ve diğer uygulama ayarları gibi ayarları içerir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-170">The docker-compose-override.yml file contains settings for both services, such as connection strings and other application settings.</span></span>

<span data-ttu-id="ca3a4-171">Aşağıdaki örnek Visual Studio'da hata ayıklama için kullanılan ayarları içerir docker compose.vs.debug.yml dosya gösterir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-171">The following example shows the docker-compose.vs.debug.yml file, which contains settings used for debugging in Visual Studio.</span></span> <span data-ttu-id="ca3a4-172">Bu dosyada eshopweb görüntü eklenmiş geliştirme etiketi yok.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-172">In that file, the eshopweb image has the dev tag appended to it.</span></span> <span data-ttu-id="ca3a4-173">Böylece, yanlışlıkla hata ayıklama bilgileri üretim ortamına dağıtılmaz, yayın görüntülerden ayrı hata ayıklama yardımcı olur:</span><span class="sxs-lookup"><span data-stu-id="ca3a4-173">That helps separate debug from release images so that you do not accidentally deploy the debug information to a production environment:</span></span>

```yml
version: '2'
  
services:
  eshopweb:
    image: eshop/web:dev
    build:
    args:
    source: ${DOCKER_BUILD_SOURCE}
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
    volumes:
      - ./eShopWeb:/app
      - ~/.nuget/packages:/root/.nuget/packages:ro
      - ~/clrdbg:/clrdbg:ro
    entrypoint: tail -f /dev/null
    labels:
      - "com.microsoft.visualstudio.targetoperatingsystem=linux"
```

<span data-ttu-id="ca3a4-174">Eklenen son docker compose.ci.build.yml dosyasıdır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-174">The last file added is docker-compose.ci.build.yml.</span></span> <span data-ttu-id="ca3a4-175">Bu komut satırından bir CI sunucudan Projeyi derlemek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-175">This would be used from the command line to build the project from a CI server.</span></span> <span data-ttu-id="ca3a4-176">Bu oluşturma dosyası, uygulamanız için gerekli görüntü oluşturur Docker kapsayıcısı başlatır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-176">This compose file starts a Docker container that builds the images needed for your application.</span></span> <span data-ttu-id="ca3a4-177">Aşağıdaki örnek, docker compose.ci.build.yml dosyasının içeriğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-177">The following example shows the contents of the docker-compose.ci.build.yml file.</span></span>

```yml
version: '2'
  
services:
  ci-build:
    image: microsoft/aspnetcore-build:latest
    volumes:
      - .:/src
    working_dir: /src
  command: /bin/bash -c "dotnet restore ./eShopWeb.sln && dotnet publish  ./eShopWeb.sln -c Release -o ./obj/Docker/publish"
```

<span data-ttu-id="ca3a4-178">**Not**: .NET Core 2.0 ile başlayarak, dotnet restore komutu otomatik olarak yürütür dotnet yayımlarken yürütülür.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-178">**Note**: Starting with .NET Core 2.0, the dotnet restore command executes automatically when dotnet publish is executed.</span></span>

<span data-ttu-id="ca3a4-179">Görüntünün bir ASP.NET Core yapı görüntü olduğuna dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-179">Notice that the image is an ASP.NET Core build image.</span></span> <span data-ttu-id="ca3a4-180">Bu görüntüyü Uygulamanızı yapılandırmak ve gerekli görüntüleri oluşturmak için SDK'sı ve derleme araçlarını içerir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-180">That image includes the SDK and build tools to build your application and create the required images.</span></span> <span data-ttu-id="ca3a4-181">Çalışan **docker compose'u** bu dosyayı kullanarak proje derleme kapsayıcı görüntüden başlar, sonra bu kapsayıcıda uygulamanızın görüntü oluşturur.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-181">Running the **docker-compose** project using this file starts the build container from the image, then builds your application’s image in that container.</span></span> <span data-ttu-id="ca3a4-182">Bu docker belirtin-Docker kapsayıcısı uygulamanızda oluşturmak için komut satırının parçası olarak dosya oluşturun ve sonra başlatın.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-182">You specify that docker-compose file as part of the command line to build your application in a Docker container, then launch it.</span></span>

<span data-ttu-id="ca3a4-183">Visual Studio'da seçerek uygulamanızı Docker kapsayıcılarında çalıştırabilirsiniz **docker-oluşturan** proje başlangıç projesi olarak ve Ctrl + F5'e (hata ayıklama için) F5 ' e basarak başka bir uygulama ile yapabileceğiniz gibi.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-183">In Visual Studio, you can run your application in Docker containers by selecting the **docker-compose** project as the startup project, and then pressing Ctrl+F5 (F5 to debug), as you can with any other application.</span></span> <span data-ttu-id="ca3a4-184">Başlattığınızda **docker compose'u** proje, Visual Studio çalışır **docker compose'u** docker-compose.yml dosyası, docker compose.override.yml dosya ve docker compose.vs birini kullanarak.\* dosyalar.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-184">When you start the **docker-compose** project, Visual Studio runs **docker-compose** using the docker-compose.yml file, the docker-compose.override.yml file, and one of the docker-compose.vs.\* files.</span></span> <span data-ttu-id="ca3a4-185">Uygulama başlatıldıktan sonra Visual Studio tarayıcı başlatır.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-185">Once the application has started, Visual Studio launches the browser for you.</span></span>

<span data-ttu-id="ca3a4-186">Hata ayıklayıcı uygulama başlatma, Visual Studio Docker çalışan uygulamaya ekleyecek.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-186">If you launch the application in the debugger, Visual Studio will attach to the running application in Docker.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="ca3a4-187">Sorun giderme</span><span class="sxs-lookup"><span data-stu-id="ca3a4-187">Troubleshooting</span></span>

<span data-ttu-id="ca3a4-188">Bu bölümde ortaya çıkabilecek bazı sorunlar açıklanmaktadır, yerel olarak çalıştırma kapsayıcılarınızı ve bazı düzeltmeler önerir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-188">This section describes a few issues that might arise when your run containers locally and suggests some fixes.</span></span>

### <a name="stopping-docker-containers"></a><span data-ttu-id="ca3a4-189">Docker kapsayıcıları durdurma</span><span class="sxs-lookup"><span data-stu-id="ca3a4-189">Stopping Docker containers</span></span> 

<span data-ttu-id="ca3a4-190">Kapsayıcılı uygulama başlattıktan sonra kapsayıcıları bile hata ayıklama durdurduktan sonra çalışmaya devam eder.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-190">After you launch the containerized application, the containers continue to run, even after you have stopped debugging.</span></span> <span data-ttu-id="ca3a4-191">Docker çalışan hangi kapsayıcılar görmek için komut satırından ps komutu çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-191">You can run the docker ps command from the command line to see which containers are running.</span></span> <span data-ttu-id="ca3a4-192">Şekil 6-2'de gösterildiği gibi docker Durdur komutu çalışan bir kapsayıcı durdurur.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-192">The docker stop command stops a running container, as shown in Figure 6-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="ca3a4-193">**Şekil 6-2**.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-193">**Figure 6-2**.</span></span> <span data-ttu-id="ca3a4-194">Listeleme ve docker stop CLI komutlarının ve docker ps ile kapsayıcıları durdurma</span><span class="sxs-lookup"><span data-stu-id="ca3a4-194">Listing and stopping containers with the docker ps and docker stop CLI commands</span></span>

<span data-ttu-id="ca3a4-195">Farklı yapılandırmaları arasında geçiş yaptığınızda çalışan işlemleri durdurmanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-195">You might need to stop running processes when you switch between different configurations.</span></span> <span data-ttu-id="ca3a4-196">Aksi takdirde, web uygulamasını çalıştıran kapsayıcı uygulamanız için bağlantı noktasını kullanıyorsa (Bu örnekte 5106).</span><span class="sxs-lookup"><span data-stu-id="ca3a4-196">Otherwise, the container that is running the web application is using the port for your application (5106 in this example).</span></span>

### <a name="adding-docker-to-your-projects"></a><span data-ttu-id="ca3a4-197">Docker projelerinize ekleme</span><span class="sxs-lookup"><span data-stu-id="ca3a4-197">Adding Docker to your projects</span></span>

<span data-ttu-id="ca3a4-198">Docker desteği ekler Sihirbazı'nı çalışan Docker işlemi ile iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-198">The wizard that adds Docker support communicates with the running Docker process.</span></span> <span data-ttu-id="ca3a4-199">Sihirbazı başlattığınızda Docker çalışmıyorsa, sihirbazın düzgün çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-199">The wizard will not run correctly if Docker is not running when you start the wizard.</span></span> <span data-ttu-id="ca3a4-200">Ayrıca, sihirbaz doğru Docker desteği eklemek için geçerli kapsayıcı tercih ettiğiniz inceler.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-200">In addition, the wizard examines your current container choice to add the correct Docker support.</span></span> <span data-ttu-id="ca3a4-201">Windows kapsayıcıları için destek eklemek istiyorsanız, Docker çalışan Windows yapılandırılmış kapsayıcılar ile çalışırken Sihirbazı'nı çalıştırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-201">If you want to add support for Windows Containers, you need to run the wizard while you have Docker running with Windows Containers configured.</span></span> <span data-ttu-id="ca3a4-202">Linux kapsayıcıları için destek eklemek istiyorsanız, Docker ile yapılandırılmış Linux kapsayıcıları çalıştıran varken Sihirbazı'nı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="ca3a4-202">If you want to add support for Linux containers, run the wizard while you have Docker running with Linux containers configured.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="ca3a4-203">[Önceki] (.. / docker-application-development-process/docker-app-development-workflow.md) [sonraki] (.. /containerize-NET-Framework-Applications/index.MD)</span><span class="sxs-lookup"><span data-stu-id="ca3a4-203">[Previous] (../docker-application-development-process/docker-app-development-workflow.md) [Next] (../containerize-net-framework-applications/index.md)</span></span>
